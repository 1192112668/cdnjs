import merge from"deep-assign";var mergeLocalStorageItem=function(e,r){var t=window.localStorage.getItem(e),n=JSON.parse(t),o=JSON.parse(r),u=JSON.stringify(merge({},n,o));window.localStorage.setItem(e,u)},createPromise=function(e,r){return new Promise(function(t,n){try{var o=e();r&&r(null,o),t(o)}catch(e){r&&r(e),n(e)}})},createPromiseAll=function(e,r,t){return Promise.all(e).then(function(e){var n=t?t(e):null;return r&&r(null,n),Promise.resolve(n)},function(e){return r&&r(e),Promise.reject(e)})},AsyncStorage=function(){function e(){}return e.clear=function(e){return createPromise(function(){window.localStorage.clear()},e)},e.flushGetRequests=function(){},e.getAllKeys=function(e){return createPromise(function(){for(var e=window.localStorage.length,r=[],t=0;t<e;t+=1){var n=window.localStorage.key(t);r.push(n)}return r},e)},e.getItem=function(e,r){return createPromise(function(){return window.localStorage.getItem(e)},r)},e.multiGet=function(r,t){var n=r.map(function(r){return e.getItem(r)});return createPromiseAll(n,t,function(e){return e.map(function(e,t){return[r[t],e]})})},e.setItem=function(e,r,t){return createPromise(function(){window.localStorage.setItem(e,r)},t)},e.multiSet=function(r,t){var n=r.map(function(r){return e.setItem(r[0],r[1])});return createPromiseAll(n,t)},e.mergeItem=function(e,r,t){return createPromise(function(){mergeLocalStorageItem(e,r)},t)},e.multiMerge=function(r,t){var n=r.map(function(r){return e.mergeItem(r[0],r[1])});return createPromiseAll(n,t)},e.removeItem=function(e,r){return createPromise(function(){return window.localStorage.removeItem(e)},r)},e.multiRemove=function(r,t){var n=r.map(function(r){return e.removeItem(r)});return createPromiseAll(n,t)},e}();export{AsyncStorage as default};