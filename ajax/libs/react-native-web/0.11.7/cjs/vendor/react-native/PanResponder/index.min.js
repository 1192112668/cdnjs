"use strict";exports.__esModule=!0,exports.default=void 0;var _InteractionManager=_interopRequireDefault(require("../../../exports/InteractionManager")),_TouchHistoryMath=_interopRequireDefault(require("../TouchHistoryMath"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var currentCentroidXOfTouchesChangedAfter=_TouchHistoryMath.default.currentCentroidXOfTouchesChangedAfter,currentCentroidYOfTouchesChangedAfter=_TouchHistoryMath.default.currentCentroidYOfTouchesChangedAfter,previousCentroidXOfTouchesChangedAfter=_TouchHistoryMath.default.previousCentroidXOfTouchesChangedAfter,previousCentroidYOfTouchesChangedAfter=_TouchHistoryMath.default.previousCentroidYOfTouchesChangedAfter,currentCentroidX=_TouchHistoryMath.default.currentCentroidX,currentCentroidY=_TouchHistoryMath.default.currentCentroidY,PanResponder={_initializeGestureState:function(e){e.moveX=0,e.moveY=0,e.x0=0,e.y0=0,e.dx=0,e.dy=0,e.vx=0,e.vy=0,e.numberActiveTouches=0,e._accountsForMovesUpTo=0},_updateGestureStateOnMove:function(e,n){e.numberActiveTouches=n.numberActiveTouches,e.moveX=currentCentroidXOfTouchesChangedAfter(n,e._accountsForMovesUpTo),e.moveY=currentCentroidYOfTouchesChangedAfter(n,e._accountsForMovesUpTo);var t=e._accountsForMovesUpTo,o=previousCentroidXOfTouchesChangedAfter(n,t),r=currentCentroidXOfTouchesChangedAfter(n,t),a=previousCentroidYOfTouchesChangedAfter(n,t),u=currentCentroidYOfTouchesChangedAfter(n,t),d=e.dx+(r-o),s=e.dy+(u-a),i=n.mostRecentTimeStamp-e._accountsForMovesUpTo;e.vx=(d-e.dx)/i,e.vy=(s-e.dy)/i,e.dx=d,e.dy=s,e._accountsForMovesUpTo=n.mostRecentTimeStamp},create:function(t){var o={handle:null},r={stateID:Math.random()};return PanResponder._initializeGestureState(r),{panHandlers:{onStartShouldSetResponder:function(e){return void 0!==t.onStartShouldSetPanResponder&&t.onStartShouldSetPanResponder(e,r)},onMoveShouldSetResponder:function(e){return void 0!==t.onMoveShouldSetPanResponder&&t.onMoveShouldSetPanResponder(e,r)},onStartShouldSetResponderCapture:function(e){return 1===e.nativeEvent.touches.length&&PanResponder._initializeGestureState(r),r.numberActiveTouches=e.touchHistory.numberActiveTouches,void 0!==t.onStartShouldSetPanResponderCapture&&t.onStartShouldSetPanResponderCapture(e,r)},onMoveShouldSetResponderCapture:function(e){var n=e.touchHistory;return r._accountsForMovesUpTo!==n.mostRecentTimeStamp&&(PanResponder._updateGestureStateOnMove(r,n),!!t.onMoveShouldSetPanResponderCapture&&t.onMoveShouldSetPanResponderCapture(e,r))},onResponderGrant:function(e){return o.handle||(o.handle=_InteractionManager.default.createInteractionHandle()),r.x0=currentCentroidX(e.touchHistory),r.y0=currentCentroidY(e.touchHistory),r.dx=0,r.dy=0,t.onPanResponderGrant&&t.onPanResponderGrant(e,r),void 0===t.onShouldBlockNativeResponder||t.onShouldBlockNativeResponder()},onResponderReject:function(e){clearInteractionHandle(o,t.onPanResponderReject,e,r)},onResponderRelease:function(e){clearInteractionHandle(o,t.onPanResponderRelease,e,r),PanResponder._initializeGestureState(r)},onResponderStart:function(e){var n=e.touchHistory;r.numberActiveTouches=n.numberActiveTouches,t.onPanResponderStart&&t.onPanResponderStart(e,r)},onResponderMove:function(e){var n=e.touchHistory;r._accountsForMovesUpTo!==n.mostRecentTimeStamp&&(PanResponder._updateGestureStateOnMove(r,n),t.onPanResponderMove&&t.onPanResponderMove(e,r))},onResponderEnd:function(e){var n=e.touchHistory;r.numberActiveTouches=n.numberActiveTouches,clearInteractionHandle(o,t.onPanResponderEnd,e,r)},onResponderTerminate:function(e){clearInteractionHandle(o,t.onPanResponderTerminate,e,r),PanResponder._initializeGestureState(r)},onResponderTerminationRequest:function(e){return void 0===t.onPanResponderTerminationRequest||t.onPanResponderTerminationRequest(e,r)}},getInteractionHandle:function(){return o.handle}}}};function clearInteractionHandle(e,n,t,o){e.handle&&(_InteractionManager.default.clearInteractionHandle(e.handle),e.handle=null),n&&n(t,o)}var _default=PanResponder;exports.default=PanResponder,module.exports=exports.default;