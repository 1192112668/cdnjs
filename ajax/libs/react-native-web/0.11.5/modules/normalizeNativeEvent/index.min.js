import getBoundingClientRect from"../getBoundingClientRect";var emptyArray=[],emptyFunction=function(){},normalizeTouches=function(e){return e?Array.prototype.slice.call(e).map(function(e){var t,n=e.identifier>20?e.identifier%20:e.identifier;return{_normalized:!0,clientX:e.clientX,clientY:e.clientY,force:e.force,get locationX(){if(t=t||getBoundingClientRect(e.target))return e.pageX-t.left},get locationY(){if(t=t||getBoundingClientRect(e.target))return e.pageY-t.top},identifier:n,pageX:e.pageX,pageY:e.pageY,radiusX:e.radiusX,radiusY:e.radiusY,rotationAngle:e.rotationAngle,screenX:e.screenX,screenY:e.screenY,target:e.target,timestamp:Date.now()}}):emptyArray};function normalizeTouchEvent(e){var t=normalizeTouches(e.changedTouches),n=normalizeTouches(e.touches),i="function"==typeof e.preventDefault?e.preventDefault.bind(e):emptyFunction,o="function"==typeof e.stopImmediatePropagation?e.stopImmediatePropagation.bind(e):emptyFunction,a="function"==typeof e.stopPropagation?e.stopPropagation.bind(e):emptyFunction,r=t[0];return{_normalized:!0,bubbles:e.bubbles,cancelable:e.cancelable,changedTouches:t,defaultPrevented:e.defaultPrevented,identifier:r?r.identifier:void 0,get locationX(){return r?r.locationX:void 0},get locationY(){return r?r.locationY:void 0},pageX:r?r.pageX:e.pageX,pageY:r?r.pageY:e.pageY,preventDefault:i,stopImmediatePropagation:o,stopPropagation:a,target:e.target,timestamp:Date.now(),touches:n,type:e.type,which:e.which}}function normalizeMouseEvent(e){var t,n=[{_normalized:!0,clientX:e.clientX,clientY:e.clientY,force:e.force,identifier:0,get locationX(){if(t=t||getBoundingClientRect(e.target))return e.pageX-t.left},get locationY(){if(t=t||getBoundingClientRect(e.target))return e.pageY-t.top},pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,target:e.target,timestamp:Date.now()}],i="function"==typeof e.preventDefault?e.preventDefault.bind(e):emptyFunction,o="function"==typeof e.stopImmediatePropagation?e.stopImmediatePropagation.bind(e):emptyFunction,a="function"==typeof e.stopPropagation?e.stopPropagation.bind(e):emptyFunction;return{_normalized:!0,bubbles:e.bubbles,cancelable:e.cancelable,changedTouches:n,defaultPrevented:e.defaultPrevented,identifier:n[0].identifier,get locationX(){return n[0].locationX},get locationY(){return n[0].locationY},pageX:e.pageX,pageY:e.pageY,preventDefault:i,stopImmediatePropagation:o,stopPropagation:a,target:e.target,timestamp:n[0].timestamp,touches:"mouseup"===e.type?emptyArray:n,type:e.type,which:e.which}}function normalizeNativeEvent(e){return!e||e._normalized?e:(e.type||"").indexOf("mouse")>=0?normalizeMouseEvent(e):normalizeTouchEvent(e)}export default normalizeNativeEvent;