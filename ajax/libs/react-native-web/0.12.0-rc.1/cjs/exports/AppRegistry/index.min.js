"use strict";exports.__esModule=!0,exports.default=void 0;var _invariant=_interopRequireDefault(require("fbjs/lib/invariant")),_unmountComponentAtNode=_interopRequireDefault(require("../unmountComponentAtNode")),_renderApplication=_interopRequireWildcard(require("./renderApplication"));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r=_getRequireWildcardCache();if(r&&r.has(e))return r.get(e);var n={};if(null!=e){var t,o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((t=o?Object.getOwnPropertyDescriptor(e,i):null)&&(t.get||t.set)?Object.defineProperty(n,i,t):n[i]=e[i])}}return n.default=e,r&&r.set(e,n),n}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,n)),t}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(n,!0).forEach(function(e){_defineProperty(r,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function _defineProperty(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var wrapperComponentProvider,emptyObject={},runnables={},componentProviderInstrumentationHook=function(e){return e()},AppRegistry=function(){function o(){}return o.getAppKeys=function(){return Object.keys(runnables)},o.getApplication=function(e,r){return(0,_invariant.default)(runnables[e]&&runnables[e].getApplication,"Application "+e+" has not been registered. This is either due to an import error during initialization or failure to call AppRegistry.registerComponent."),runnables[e].getApplication(r)},o.registerComponent=function(e,r){return runnables[e]={getApplication:function(e){return(0,_renderApplication.getApplication)(componentProviderInstrumentationHook(r),e?e.initialProps:emptyObject,wrapperComponentProvider&&wrapperComponentProvider(e))},run:function(e){return(0,_renderApplication.default)(componentProviderInstrumentationHook(r),wrapperComponentProvider&&wrapperComponentProvider(e),e.callback,{hydrate:e.hydrate||!1,initialProps:e.initialProps||emptyObject,rootTag:e.rootTag})}},e},o.registerConfig=function(e){e.forEach(function(e){var r=e.appKey,n=e.component,t=e.run;t?o.registerRunnable(r,t):((0,_invariant.default)(n,"No component provider passed in"),o.registerComponent(r,n))})},o.registerRunnable=function(e,r){return runnables[e]={run:r},e},o.runApplication=function(e,r){var n,t="production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV;t&&((n=_objectSpread({},r)).rootTag="#"+n.rootTag.id,console.log('Running application "'+e+'" with appParams:\n',n,"\nDevelopment-level warnings: "+(t?"ON":"OFF")+".\nPerformance optimizations: "+(t?"OFF":"ON")+".")),(0,_invariant.default)(runnables[e]&&runnables[e].run,'Application "'+e+'" has not been registered. This is either due to an import error during initialization or failure to call AppRegistry.registerComponent.'),runnables[e].run(r)},o.setComponentProviderInstrumentationHook=function(e){componentProviderInstrumentationHook=e},o.setWrapperComponentProvider=function(e){wrapperComponentProvider=e},o.unmountApplicationComponentAtRootTag=function(e){(0,_unmountComponentAtNode.default)(e)},o}();exports.default=AppRegistry,module.exports=exports.default;