"use strict";exports.__esModule=!0,exports.default=void 0;var _Animation2=_interopRequireDefault(require("./Animation")),_NativeAnimatedHelper=require("../NativeAnimatedHelper");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}var DecayAnimation=function(i){function t(t){var e=i.call(this)||this;return e._deceleration=void 0!==t.deceleration?t.deceleration:.998,e._velocity=t.velocity,e._useNativeDriver=(0,_NativeAnimatedHelper.shouldUseNativeDriver)(t),e.__isInteraction=void 0===t.isInteraction||t.isInteraction,e.__iterations=void 0!==t.iterations?t.iterations:1,e}_inheritsLoose(t,i);var e=t.prototype;return e.__getNativeAnimationConfig=function(){return{type:"decay",deceleration:this._deceleration,velocity:this._velocity,iterations:this.__iterations}},e.start=function(t,e,i,a,n){this.__active=!0,this._lastValue=t,this._fromValue=t,this._onUpdate=e,this.__onEnd=i,this._startTime=Date.now(),this._useNativeDriver?this.__startNativeAnimation(n):this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this))},e.onUpdate=function(){var t=Date.now(),e=this._fromValue+this._velocity/(1-this._deceleration)*(1-Math.exp(-(1-this._deceleration)*(t-this._startTime)));this._onUpdate(e),Math.abs(this._lastValue-e)<.1?this.__debouncedOnEnd({finished:!0}):(this._lastValue=e,this.__active&&(this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this))))},e.stop=function(){i.prototype.stop.call(this),this.__active=!1,global.cancelAnimationFrame(this._animationFrame),this.__debouncedOnEnd({finished:!1})},t}(_Animation2.default),_default=DecayAnimation;exports.default=DecayAnimation,module.exports=exports.default;