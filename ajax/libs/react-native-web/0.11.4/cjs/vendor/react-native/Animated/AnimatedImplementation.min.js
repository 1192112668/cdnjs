"use strict";exports.__esModule=!0,exports.default=void 0;var _AnimatedEvent=require("./AnimatedEvent"),_AnimatedAddition=_interopRequireDefault(require("./nodes/AnimatedAddition")),_AnimatedDiffClamp=_interopRequireDefault(require("./nodes/AnimatedDiffClamp")),_AnimatedDivision=_interopRequireDefault(require("./nodes/AnimatedDivision")),_AnimatedInterpolation=_interopRequireDefault(require("./nodes/AnimatedInterpolation")),_AnimatedModulo=_interopRequireDefault(require("./nodes/AnimatedModulo")),_AnimatedMultiplication=_interopRequireDefault(require("./nodes/AnimatedMultiplication")),_AnimatedNode=_interopRequireDefault(require("./nodes/AnimatedNode")),_AnimatedProps=_interopRequireDefault(require("./nodes/AnimatedProps")),_AnimatedTracking=_interopRequireDefault(require("./nodes/AnimatedTracking")),_AnimatedValue=_interopRequireDefault(require("./nodes/AnimatedValue")),_AnimatedValueXY=_interopRequireDefault(require("./nodes/AnimatedValueXY")),_DecayAnimation=_interopRequireDefault(require("./animations/DecayAnimation")),_SpringAnimation=_interopRequireDefault(require("./animations/SpringAnimation")),_TimingAnimation=_interopRequireDefault(require("./animations/TimingAnimation")),_createAnimatedComponent=_interopRequireDefault(require("./createAnimatedComponent"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectSpread(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.forEach(function(e){_defineProperty(n,e,t[e])})}return n}function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var add=function(e,n){return new _AnimatedAddition.default(e,n)},divide=function(e,n){return new _AnimatedDivision.default(e,n)},multiply=function(e,n){return new _AnimatedMultiplication.default(e,n)},modulo=function(e,n){return new _AnimatedModulo.default(e,n)},diffClamp=function(e,n,t){return new _AnimatedDiffClamp.default(e,n,t)},_combineCallbacks=function(e,n){return e&&n.onComplete?function(){n.onComplete&&n.onComplete.apply(n,arguments),e&&e.apply(void 0,arguments)}:e||n.onComplete},maybeVectorAnim=function(e,n,t){if(e instanceof _AnimatedValueXY.default){var i=_objectSpread({},n),a=_objectSpread({},n);for(var r in n){var o=n[r],u=o.x,d=o.y;void 0!==u&&void 0!==d&&(i[r]=u,a[r]=d)}var f=t(e.x,i),l=t(e.y,a);return parallel([f,l],{stopTogether:!1})}return null},spring=function e(t,i){function a(e,n,t){t=_combineCallbacks(t,n);var i=e,a=n;i.stopTracking(),n.toValue instanceof _AnimatedNode.default?i.track(new _AnimatedTracking.default(i,n.toValue,_SpringAnimation.default,a,t)):i.animate(new _SpringAnimation.default(a),t)}return maybeVectorAnim(t,i,e)||{start:function(e){a(t,i,e)},stop:function(){t.stopAnimation()},reset:function(){t.resetAnimation()},_startNativeLoop:function(e){var n=_objectSpread({},i,{iterations:e});a(t,n)},_isUsingNativeDriver:function(){return i.useNativeDriver||!1}}},timing=function e(t,i){function a(e,n,t){t=_combineCallbacks(t,n);var i=e,a=n;i.stopTracking(),n.toValue instanceof _AnimatedNode.default?i.track(new _AnimatedTracking.default(i,n.toValue,_TimingAnimation.default,a,t)):i.animate(new _TimingAnimation.default(a),t)}return maybeVectorAnim(t,i,e)||{start:function(e){a(t,i,e)},stop:function(){t.stopAnimation()},reset:function(){t.resetAnimation()},_startNativeLoop:function(e){var n=_objectSpread({},i,{iterations:e});a(t,n)},_isUsingNativeDriver:function(){return i.useNativeDriver||!1}}},decay=function e(t,i){function a(e,n,t){t=_combineCallbacks(t,n);var i=e,a=n;i.stopTracking(),i.animate(new _DecayAnimation.default(a),t)}return maybeVectorAnim(t,i,e)||{start:function(e){a(t,i,e)},stop:function(){t.stopAnimation()},reset:function(){t.resetAnimation()},_startNativeLoop:function(e){var n=_objectSpread({},i,{iterations:e});a(t,n)},_isUsingNativeDriver:function(){return i.useNativeDriver||!1}}},sequence=function(i){var a=0;return{start:function(t){0===i.length?t&&t({finished:!0}):i[a].start(function e(n){n.finished&&++a!==i.length?i[a].start(e):t&&t(n)})},stop:function(){a<i.length&&i[a].stop()},reset:function(){i.forEach(function(e,n){n<=a&&e.reset()}),a=0},_startNativeLoop:function(){throw new Error("Loops run using the native driver cannot contain Animated.sequence animations")},_isUsingNativeDriver:function(){return!1}}},parallel=function(a,e){var r=0,o={},u=!(e&&!1===e.stopTogether),d={start:function(i){r!==a.length?a.forEach(function(e,n){function t(e){if(o[n]=!0,++r===a.length)return r=0,void(i&&i(e));!e.finished&&u&&d.stop()}e?e.start(t):t({finished:!0})}):i&&i({finished:!0})},stop:function(){a.forEach(function(e,n){o[n]||e.stop(),o[n]=!0})},reset:function(){a.forEach(function(e,n){e.reset(),o[n]=!1,r=0})},_startNativeLoop:function(){throw new Error("Loops run using the native driver cannot contain Animated.parallel animations")},_isUsingNativeDriver:function(){return!1}};return d},delay=function(e){return timing(new _AnimatedValue.default(0),{toValue:0,delay:e,duration:0})},stagger=function(t,e){return parallel(e.map(function(e,n){return sequence([delay(t*n),e])}))},loop=function(i,e){var n=(void 0===e?{}:e).iterations,a=void 0===n?-1:n,r=!1,o=0;return{start:function(t){i&&0!==a?i._isUsingNativeDriver()?i._startNativeLoop(a):function e(n){void 0===n&&(n={finished:!0}),r||o===a||!1===n.finished?t&&t(n):(o++,i.reset(),i.start(e))}():t&&t({finished:!0})},stop:function(){r=!0,i.stop()},reset:function(){o=0,r=!1,i.reset()},_startNativeLoop:function(){throw new Error("Loops run using the native driver cannot contain Animated.loop animations")},_isUsingNativeDriver:function(){return i._isUsingNativeDriver()}}};function forkEvent(e,n){return e?e instanceof _AnimatedEvent.AnimatedEvent?(e.__addListener(n),e):function(){"function"==typeof e&&e.apply(void 0,arguments),n.apply(void 0,arguments)}:n}function unforkEvent(e,n){e&&e instanceof _AnimatedEvent.AnimatedEvent&&e.__removeListener(n)}var event=function(e,n){var t=new _AnimatedEvent.AnimatedEvent(e,n);return t.__isNative?t:t.__getHandler()},AnimatedImplementation={Value:_AnimatedValue.default,ValueXY:_AnimatedValueXY.default,Interpolation:_AnimatedInterpolation.default,Node:_AnimatedNode.default,decay:decay,timing:timing,spring:spring,add:add,divide:divide,multiply:multiply,modulo:modulo,diffClamp:diffClamp,delay:delay,sequence:sequence,parallel:parallel,stagger:stagger,loop:loop,event:event,createAnimatedComponent:_createAnimatedComponent.default,attachNativeEvent:_AnimatedEvent.attachNativeEvent,forkEvent:forkEvent,unforkEvent:unforkEvent,__PropsOnlyForTests:_AnimatedProps.default},_default=AnimatedImplementation;exports.default=AnimatedImplementation,module.exports=exports.default;