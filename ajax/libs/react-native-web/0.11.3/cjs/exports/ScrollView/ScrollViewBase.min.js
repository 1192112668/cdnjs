"use strict";exports.__esModule=!0,exports.default=void 0;var _debounce=_interopRequireDefault(require("debounce")),_StyleSheet=_interopRequireDefault(require("../StyleSheet")),_View=_interopRequireDefault(require("../View")),_ViewPropTypes=_interopRequireDefault(require("../ViewPropTypes")),_react=_interopRequireWildcard(require("react")),_propTypes=require("prop-types");function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t,o={};if(null!=e)for(var r in e){Object.prototype.hasOwnProperty.call(e,r)&&((t=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{}).get||t.set?Object.defineProperty(o,r,t):o[r]=e[r])}return o.default=e,o}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(e){_defineProperty(t,e,o[e])})}return t}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};for(var o,r={},n=Object.keys(e),l=0;l<n.length;l++)o=n[l],0<=t.indexOf(o)||(r[o]=e[o]);return r}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var normalizeScrollEvent=function(e){return{nativeEvent:{contentOffset:{get x(){return e.target.scrollLeft},get y(){return e.target.scrollTop}},contentSize:{get height(){return e.target.scrollHeight},get width(){return e.target.scrollWidth}},layoutMeasurement:{get height(){return e.target.offsetHeight},get width(){return e.target.offsetWidth}}},timeStamp:Date.now()}},ScrollViewBase=function(n){function e(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(o=n.call.apply(n,[this].concat(t))||this)._debouncedOnScrollEnd=(0,_debounce.default)(o._handleScrollEnd,100),o._state={isScrolling:!1,scrollLastTick:0},o._createPreventableScrollHandler=function(t){return function(e){o.props.scrollEnabled?t&&t(e):e.preventDefault()}},o._handleScroll=function(e){e.persist(),e.stopPropagation();var t=o.props.scrollEventThrottle;o._debouncedOnScrollEnd(e),o._state.isScrolling?o._shouldEmitScrollEvent(o._state.scrollLastTick,t)&&o._handleScrollTick(e):o._handleScrollStart(e)},o._setViewRef=function(e){o._viewRef=e},o}_inheritsLoose(e,n);var t=e.prototype;return t.setNativeProps=function(e){this._viewRef&&this._viewRef.setNativeProps(e)},t.render=function(){var e=this.props,t=e.scrollEnabled,o=e.style,r=(e.alwaysBounceHorizontal,e.alwaysBounceVertical,e.automaticallyAdjustContentInsets,e.bounces,e.bouncesZoom,e.canCancelContentTouches,e.centerContent,e.contentInset,e.contentInsetAdjustmentBehavior,e.contentOffset,e.decelerationRate,e.directionalLockEnabled,e.endFillColor,e.indicatorStyle,e.keyboardShouldPersistTaps,e.maximumZoomScale,e.minimumZoomScale,e.onMomentumScrollBegin,e.onMomentumScrollEnd,e.onScrollBeginDrag,e.onScrollEndDrag,e.overScrollMode,e.pinchGestureEnabled,e.removeClippedSubviews,e.scrollEventThrottle,e.scrollIndicatorInsets,e.scrollPerfTag,e.scrollsToTop,e.showsHorizontalScrollIndicator),n=e.showsVerticalScrollIndicator,l=(e.snapToInterval,e.snapToAlignment,e.zoomScale,_objectWithoutPropertiesLoose(e,["scrollEnabled","style","alwaysBounceHorizontal","alwaysBounceVertical","automaticallyAdjustContentInsets","bounces","bouncesZoom","canCancelContentTouches","centerContent","contentInset","contentInsetAdjustmentBehavior","contentOffset","decelerationRate","directionalLockEnabled","endFillColor","indicatorStyle","keyboardShouldPersistTaps","maximumZoomScale","minimumZoomScale","onMomentumScrollBegin","onMomentumScrollEnd","onScrollBeginDrag","onScrollEndDrag","overScrollMode","pinchGestureEnabled","removeClippedSubviews","scrollEventThrottle","scrollIndicatorInsets","scrollPerfTag","scrollsToTop","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","snapToInterval","snapToAlignment","zoomScale"])),c=!1===r||!1===n;return _react.default.createElement(_View.default,_extends({},l,{onScroll:this._handleScroll,onTouchMove:this._createPreventableScrollHandler(this.props.onTouchMove),onWheel:this._createPreventableScrollHandler(this.props.onWheel),ref:this._setViewRef,style:[o,!t&&styles.scrollDisabled,c&&o.hideScrollbar]}))},t._handleScrollStart=function(){this._state.isScrolling=!0,this._state.scrollLastTick=Date.now()},t._handleScrollTick=function(e){var t=this.props.onScroll;this._state.scrollLastTick=Date.now(),t&&t(normalizeScrollEvent(e))},t._handleScrollEnd=function(e){var t=this.props.onScroll;this._state.isScrolling=!1,t&&t(normalizeScrollEvent(e))},t._shouldEmitScrollEvent=function(e,t){var o=Date.now()-e;return 0<t&&t<=o},e}(_react.Component);(exports.default=ScrollViewBase).defaultProps={scrollEnabled:!0,scrollEventThrottle:0},ScrollViewBase.propTypes="production"!==process.env.NODE_ENV?_objectSpread({},_ViewPropTypes.default,{onMomentumScrollBegin:_propTypes.func,onMomentumScrollEnd:_propTypes.func,onScroll:_propTypes.func,onScrollBeginDrag:_propTypes.func,onScrollEndDrag:_propTypes.func,onTouchMove:_propTypes.func,onWheel:_propTypes.func,removeClippedSubviews:_propTypes.bool,scrollEnabled:_propTypes.bool,scrollEventThrottle:_propTypes.number,showsHorizontalScrollIndicator:_propTypes.bool,showsVerticalScrollIndicator:_propTypes.bool}):{};var styles=_StyleSheet.default.create({scrollDisabled:{touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});module.exports=exports.default;