"use strict";exports.__esModule=!0,exports.default=void 0;var _ListView=_interopRequireDefault(require("../ListView")),_propTypes=_interopRequireDefault(require("prop-types")),_react=_interopRequireDefault(require("react")),_SwipeableListViewDataSource=_interopRequireDefault(require("./SwipeableListViewDataSource")),_SwipeableRow=_interopRequireDefault(require("../SwipeableRow"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var SwipeableListView=function(o){function e(e,t){var n=o.call(this,e,t)||this;return n._listViewRef=null,n._shouldBounceFirstRowOnMount=!1,n._onScroll=function(e){n.props.dataSource.getOpenRowID()&&n.setState({dataSource:n.state.dataSource.setOpenRowID(null)}),n.props.onScroll&&n.props.onScroll(e)},n._renderRow=function(e,t,o){var r=n.props.renderQuickActions(e,t,o);if(!r)return n.props.renderRow(e,t,o);var i=!1;return n._shouldBounceFirstRowOnMount&&(n._shouldBounceFirstRowOnMount=!1,i=o===n.props.dataSource.getFirstRowID()),_react.default.createElement(_SwipeableRow.default,{slideoutView:r,isOpen:e.id===n.props.dataSource.getOpenRowID(),maxSwipeDistance:n._getMaxSwipeDistance(e,t,o),key:o,onOpen:function(){return n._onOpen(e.id)},onClose:function(){return n._onClose(e.id)},onSwipeEnd:function(){return n._setListViewScrollable(!0)},onSwipeStart:function(){return n._setListViewScrollable(!1)},shouldBounceOnMount:i},n.props.renderRow(e,t,o))},n._shouldBounceFirstRowOnMount=n.props.bounceFirstRowOnMount,n.state={dataSource:n.props.dataSource},n}_inheritsLoose(e,o),e.getNewDataSource=function(){return new _SwipeableListViewDataSource.default({getRowData:function(e,t,o){return e[t][o]},getSectionHeaderData:function(e,t){return e[t]},rowHasChanged:function(e,t){return e!==t},sectionHeaderHasChanged:function(e,t){return e!==t}})};var t=e.prototype;return t.UNSAFE_componentWillReceiveProps=function(e){this.state.dataSource.getDataSource()!==e.dataSource.getDataSource()&&this.setState({dataSource:e.dataSource})},t.render=function(){var t=this;return _react.default.createElement(_ListView.default,_extends({},this.props,{ref:function(e){t._listViewRef=e},dataSource:this.state.dataSource.getDataSource(),onScroll:this._onScroll,renderRow:this._renderRow}))},t._setListViewScrollable=function(e){this._listViewRef&&"function"==typeof this._listViewRef.setNativeProps&&this._listViewRef.setNativeProps({scrollEnabled:e})},t.getScrollResponder=function(){if(this._listViewRef&&"function"==typeof this._listViewRef.getScrollResponder)return this._listViewRef.getScrollResponder()},t._getMaxSwipeDistance=function(e,t,o){return"function"==typeof this.props.maxSwipeDistance?this.props.maxSwipeDistance(e,t,o):this.props.maxSwipeDistance},t._onOpen=function(e){this.setState({dataSource:this.state.dataSource.setOpenRowID(e)})},t._onClose=function(){this.setState({dataSource:this.state.dataSource.setOpenRowID(null)})},e}(_react.default.Component);SwipeableListView.defaultProps={bounceFirstRowOnMount:!1,renderQuickActions:function(){return null}},SwipeableListView.propTypes="production"!==process.env.NODE_ENV?{bounceFirstRowOnMount:_propTypes.default.bool.isRequired,dataSource:_propTypes.default.instanceOf(_SwipeableListViewDataSource.default).isRequired,maxSwipeDistance:_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.func]).isRequired,renderRow:_propTypes.default.func.isRequired,renderQuickActions:_propTypes.default.func.isRequired}:{};var _default=SwipeableListView;exports.default=SwipeableListView,module.exports=exports.default;