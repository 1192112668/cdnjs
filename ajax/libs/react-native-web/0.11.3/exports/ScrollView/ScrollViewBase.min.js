function _objectSpread(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(o){_defineProperty(e,o,t[o])})}return e}function _defineProperty(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function _extends(){return(_extends=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,o){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],o.indexOf(t)>=0||(r[t]=e[t]);return r}function _inheritsLoose(e,o){e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.__proto__=o}import debounce from"debounce";import StyleSheet from"../StyleSheet";import View from"../View";import ViewPropTypes from"../ViewPropTypes";import React,{Component}from"react";import{bool,func,number}from"prop-types";var normalizeScrollEvent=function(e){return{nativeEvent:{contentOffset:{get x(){return e.target.scrollLeft},get y(){return e.target.scrollTop}},contentSize:{get height(){return e.target.scrollHeight},get width(){return e.target.scrollWidth}},layoutMeasurement:{get height(){return e.target.offsetHeight},get width(){return e.target.offsetWidth}}},timeStamp:Date.now()}},ScrollViewBase=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(o=e.call.apply(e,[this].concat(n))||this)._debouncedOnScrollEnd=debounce(o._handleScrollEnd,100),o._state={isScrolling:!1,scrollLastTick:0},o._createPreventableScrollHandler=function(e){return function(t){o.props.scrollEnabled?e&&e(t):t.preventDefault()}},o._handleScroll=function(e){e.persist(),e.stopPropagation();var t=o.props.scrollEventThrottle;o._debouncedOnScrollEnd(e),o._state.isScrolling?o._shouldEmitScrollEvent(o._state.scrollLastTick,t)&&o._handleScrollTick(e):o._handleScrollStart(e)},o._setViewRef=function(e){o._viewRef=e},o}_inheritsLoose(o,e);var t=o.prototype;return t.setNativeProps=function(e){this._viewRef&&this._viewRef.setNativeProps(e)},t.render=function(){var e=this.props,o=e.scrollEnabled,t=e.style,n=(e.alwaysBounceHorizontal,e.alwaysBounceVertical,e.automaticallyAdjustContentInsets,e.bounces,e.bouncesZoom,e.canCancelContentTouches,e.centerContent,e.contentInset,e.contentInsetAdjustmentBehavior,e.contentOffset,e.decelerationRate,e.directionalLockEnabled,e.endFillColor,e.indicatorStyle,e.keyboardShouldPersistTaps,e.maximumZoomScale,e.minimumZoomScale,e.onMomentumScrollBegin,e.onMomentumScrollEnd,e.onScrollBeginDrag,e.onScrollEndDrag,e.overScrollMode,e.pinchGestureEnabled,e.removeClippedSubviews,e.scrollEventThrottle,e.scrollIndicatorInsets,e.scrollPerfTag,e.scrollsToTop,e.showsHorizontalScrollIndicator),r=e.showsVerticalScrollIndicator,l=(e.snapToInterval,e.snapToAlignment,e.zoomScale,_objectWithoutPropertiesLoose(e,["scrollEnabled","style","alwaysBounceHorizontal","alwaysBounceVertical","automaticallyAdjustContentInsets","bounces","bouncesZoom","canCancelContentTouches","centerContent","contentInset","contentInsetAdjustmentBehavior","contentOffset","decelerationRate","directionalLockEnabled","endFillColor","indicatorStyle","keyboardShouldPersistTaps","maximumZoomScale","minimumZoomScale","onMomentumScrollBegin","onMomentumScrollEnd","onScrollBeginDrag","onScrollEndDrag","overScrollMode","pinchGestureEnabled","removeClippedSubviews","scrollEventThrottle","scrollIndicatorInsets","scrollPerfTag","scrollsToTop","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","snapToInterval","snapToAlignment","zoomScale"])),c=!1===n||!1===r;return React.createElement(View,_extends({},l,{onScroll:this._handleScroll,onTouchMove:this._createPreventableScrollHandler(this.props.onTouchMove),onWheel:this._createPreventableScrollHandler(this.props.onWheel),ref:this._setViewRef,style:[t,!o&&styles.scrollDisabled,c&&t.hideScrollbar]}))},t._handleScrollStart=function(e){this._state.isScrolling=!0,this._state.scrollLastTick=Date.now()},t._handleScrollTick=function(e){var o=this.props.onScroll;this._state.scrollLastTick=Date.now(),o&&o(normalizeScrollEvent(e))},t._handleScrollEnd=function(e){var o=this.props.onScroll;this._state.isScrolling=!1,o&&o(normalizeScrollEvent(e))},t._shouldEmitScrollEvent=function(e,o){var t=Date.now()-e;return o>0&&t>=o},o}(Component);ScrollViewBase.defaultProps={scrollEnabled:!0,scrollEventThrottle:0};export{ScrollViewBase as default};ScrollViewBase.propTypes="production"!==process.env.NODE_ENV?_objectSpread({},ViewPropTypes,{onMomentumScrollBegin:func,onMomentumScrollEnd:func,onScroll:func,onScrollBeginDrag:func,onScrollEndDrag:func,onTouchMove:func,onWheel:func,removeClippedSubviews:bool,scrollEnabled:bool,scrollEventThrottle:number,showsHorizontalScrollIndicator:bool,showsVerticalScrollIndicator:bool}):{};var styles=StyleSheet.create({scrollDisabled:{touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});