"use strict";function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,o[t])})}return e}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}import PropTypes from"prop-types";import React from"react";import SwipeableRow from"../SwipeableRow";import FlatList from"../FlatList";var SwipeableFlatList=function(e){function t(t,o){var n;return(n=e.call(this,t,o)||this)._flatListRef=null,n._shouldBounceFirstRowOnMount=!1,n._onScroll=function(e){n.state.openRowKey&&n.setState({openRowKey:null}),n.props.onScroll&&n.props.onScroll(e)},n._renderItem=function(e){var t=n.props.renderQuickActions(e),o=n.props.keyExtractor(e.item,e.index);if(!t)return n.props.renderItem(e);var r=!1;return n._shouldBounceFirstRowOnMount&&(n._shouldBounceFirstRowOnMount=!1,r=!0),React.createElement(SwipeableRow,{slideoutView:t,isOpen:o===n.state.openRowKey,maxSwipeDistance:n._getMaxSwipeDistance(e),onOpen:function(){return n._onOpen(o)},onClose:function(){return n._onClose(o)},shouldBounceOnMount:r,onSwipeEnd:n._setListViewScrollable,onSwipeStart:n._setListViewNotScrollable},n.props.renderItem(e))},n._setListViewScrollable=function(){n._setListViewScrollableTo(!0)},n._setListViewNotScrollable=function(){n._setListViewScrollableTo(!1)},n.state={openRowKey:null},n._shouldBounceFirstRowOnMount=n.props.bounceFirstRowOnMount,n}_inheritsLoose(t,e);var o=t.prototype;return o.render=function(){var e=this;return React.createElement(FlatList,_extends({},this.props,{ref:function(t){e._flatListRef=t},onScroll:this._onScroll,renderItem:this._renderItem}))},o._getMaxSwipeDistance=function(e){return"function"==typeof this.props.maxSwipeDistance?this.props.maxSwipeDistance(e):this.props.maxSwipeDistance},o._setListViewScrollableTo=function(e){this._flatListRef&&this._flatListRef.setNativeProps({scrollEnabled:e})},o._onOpen=function(e){this.setState({openRowKey:e})},o._onClose=function(e){this.setState({openRowKey:null})},t}(React.Component);SwipeableFlatList.defaultProps=_objectSpread({},FlatList.defaultProps,{bounceFirstRowOnMount:!0,renderQuickActions:function(){return null}}),SwipeableFlatList.propTypes="production"!==process.env.NODE_ENV?_objectSpread({},FlatList.propTypes,{bounceFirstRowOnMount:PropTypes.bool.isRequired,maxSwipeDistance:PropTypes.oneOfType([PropTypes.number,PropTypes.func]).isRequired,renderQuickActions:PropTypes.func.isRequired}):{};export default SwipeableFlatList;