var id=0,requests={},ImageLoader={abort:function(e){var r=requests[""+e];r&&(r.onerror=r.onload=r=null,delete requests[""+e])},getSize:function(e,r,t){var n=!1,o=setInterval(u,16),a=ImageLoader.load(e,u,function(){"function"==typeof t&&t();ImageLoader.abort(a),clearInterval(o)});function u(){var e=requests[""+a];if(e){var t=e.naturalHeight,u=e.naturalWidth;t&&u&&(r(u,t),n=!0)}n&&(ImageLoader.abort(a),clearInterval(o))}},load:function(e,r,t){id+=1;var n=new window.Image;return n.onerror=t,n.onload=function(e){var t=function(){return r(e)};"function"==typeof n.decode?n.decode().then(t,t):setTimeout(t,0)},n.src=e,requests[""+id]=n,id},prefetch:function(e){return new Promise(function(r,t){ImageLoader.load(e,r,t)})}};export default ImageLoader;