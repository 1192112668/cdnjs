"use strict";exports.__esModule=!0,exports.default=void 0;var _propTypes=_interopRequireDefault(require("prop-types")),_react=_interopRequireDefault(require("react")),_SwipeableRow=_interopRequireDefault(require("../SwipeableRow")),_FlatList=_interopRequireDefault(require("../FlatList"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(e){_defineProperty(t,e,o[e])})}return t}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var SwipeableFlatList=function(o){function e(e,t){var n=o.call(this,e,t)||this;return n._flatListRef=null,n._shouldBounceFirstRowOnMount=!1,n._onScroll=function(e){n.state.openRowKey&&n.setState({openRowKey:null}),n.props.onScroll&&n.props.onScroll(e)},n._renderItem=function(e){var t=n.props.renderQuickActions(e),o=n.props.keyExtractor(e.item,e.index);if(!t)return n.props.renderItem(e);var r=!1;return n._shouldBounceFirstRowOnMount&&(r=!(n._shouldBounceFirstRowOnMount=!1)),_react.default.createElement(_SwipeableRow.default,{slideoutView:t,isOpen:o===n.state.openRowKey,maxSwipeDistance:n._getMaxSwipeDistance(e),onOpen:function(){return n._onOpen(o)},onClose:function(){return n._onClose(o)},shouldBounceOnMount:r,onSwipeEnd:n._setListViewScrollable,onSwipeStart:n._setListViewNotScrollable},n.props.renderItem(e))},n._setListViewScrollable=function(){n._setListViewScrollableTo(!0)},n._setListViewNotScrollable=function(){n._setListViewScrollableTo(!1)},n.state={openRowKey:null},n._shouldBounceFirstRowOnMount=n.props.bounceFirstRowOnMount,n}_inheritsLoose(e,o);var t=e.prototype;return t.render=function(){var t=this;return _react.default.createElement(_FlatList.default,_extends({},this.props,{ref:function(e){t._flatListRef=e},onScroll:this._onScroll,renderItem:this._renderItem}))},t._getMaxSwipeDistance=function(e){return"function"==typeof this.props.maxSwipeDistance?this.props.maxSwipeDistance(e):this.props.maxSwipeDistance},t._setListViewScrollableTo=function(e){this._flatListRef&&this._flatListRef.setNativeProps({scrollEnabled:e})},t._onOpen=function(e){this.setState({openRowKey:e})},t._onClose=function(){this.setState({openRowKey:null})},e}(_react.default.Component);SwipeableFlatList.defaultProps=_objectSpread({},_FlatList.default.defaultProps,{bounceFirstRowOnMount:!0,renderQuickActions:function(){return null}}),SwipeableFlatList.propTypes="production"!==process.env.NODE_ENV?_objectSpread({},_FlatList.default.propTypes,{bounceFirstRowOnMount:_propTypes.default.bool.isRequired,maxSwipeDistance:_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.func]).isRequired,renderQuickActions:_propTypes.default.func.isRequired}):{};var _default=SwipeableFlatList;exports.default=SwipeableFlatList,module.exports=exports.default;