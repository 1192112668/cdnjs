import normalizeNativeEvent from"../normalizeNativeEvent";import ReactDOMUnstableNativeDependencies from"react-dom/unstable-native-dependencies";var ResponderEventPlugin=ReactDOMUnstableNativeDependencies.ResponderEventPlugin,ResponderTouchHistoryStore=ReactDOMUnstableNativeDependencies.ResponderTouchHistoryStore;if(!ResponderEventPlugin.eventTypes.responderMove.dependencies){var topMouseDown="topMouseDown",topMouseMove="topMouseMove",topMouseUp="topMouseUp",topScroll="topScroll",topSelectionChange="topSelectionChange",topTouchCancel="topTouchCancel",topTouchEnd="topTouchEnd",topTouchMove="topTouchMove",topTouchStart="topTouchStart",endDependencies=[topTouchCancel,topTouchEnd,topMouseUp],moveDependencies=[topTouchMove,topMouseMove],startDependencies=[topTouchStart,topMouseDown];ResponderEventPlugin.eventTypes.responderMove.dependencies=moveDependencies,ResponderEventPlugin.eventTypes.responderEnd.dependencies=endDependencies,ResponderEventPlugin.eventTypes.responderStart.dependencies=startDependencies,ResponderEventPlugin.eventTypes.responderRelease.dependencies=endDependencies,ResponderEventPlugin.eventTypes.responderTerminationRequest.dependencies=[],ResponderEventPlugin.eventTypes.responderGrant.dependencies=[],ResponderEventPlugin.eventTypes.responderReject.dependencies=[],ResponderEventPlugin.eventTypes.responderTerminate.dependencies=[],ResponderEventPlugin.eventTypes.moveShouldSetResponder.dependencies=moveDependencies,ResponderEventPlugin.eventTypes.selectionChangeShouldSetResponder.dependencies=[topSelectionChange],ResponderEventPlugin.eventTypes.scrollShouldSetResponder.dependencies=[topScroll],ResponderEventPlugin.eventTypes.startShouldSetResponder.dependencies=startDependencies}var lastActiveTouchTimestamp=null,EMULATED_MOUSE_THERSHOLD_MS=1e3,originalExtractEvents=ResponderEventPlugin.extractEvents;ResponderEventPlugin.extractEvents=function(e,n,t,o){var s=ResponderTouchHistoryStore.touchHistory.numberActiveTouches>0,p=t.type,d=!1;if(p.indexOf("touch")>-1)lastActiveTouchTimestamp=Date.now();else if(lastActiveTouchTimestamp&&p.indexOf("mouse")>-1){d=Date.now()-lastActiveTouchTimestamp<EMULATED_MOUSE_THERSHOLD_MS}if(("mousemove"!==p&&"mouseup"!==p||s)&&1!==t.button&&2!==t.button&&!d){var r=normalizeNativeEvent(t);return originalExtractEvents.call(ResponderEventPlugin,e,n,r,o)}};export default ResponderEventPlugin;