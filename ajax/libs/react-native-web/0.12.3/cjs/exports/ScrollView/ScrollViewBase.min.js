"use strict";exports.__esModule=!0,exports.default=void 0;var _debounce=_interopRequireDefault(require("debounce")),_StyleSheet=_interopRequireDefault(require("../StyleSheet")),_View=_interopRequireDefault(require("../View")),_react=_interopRequireDefault(require("react"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var normalizeScrollEvent=function(e){return{nativeEvent:{contentOffset:{get x(){return e.target.scrollLeft},get y(){return e.target.scrollTop}},contentSize:{get height(){return e.target.scrollHeight},get width(){return e.target.scrollWidth}},layoutMeasurement:{get height(){return e.target.offsetHeight},get width(){return e.target.offsetWidth}}},timeStamp:Date.now()}},ScrollViewBase=function(o){function e(){for(var l,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(l=o.call.apply(o,[this].concat(t))||this)._debouncedOnScrollEnd=(0,_debounce.default)(l._handleScrollEnd,100),l._state={isScrolling:!1,scrollLastTick:0},l._createPreventableScrollHandler=function(t){return function(e){l.props.scrollEnabled&&t&&t(e)}},l._handleScroll=function(e){e.persist(),e.stopPropagation();var t=l.props.scrollEventThrottle,r=void 0===t?0:t;l._debouncedOnScrollEnd(e),l._state.isScrolling?l._shouldEmitScrollEvent(l._state.scrollLastTick,r)&&l._handleScrollTick(e):l._handleScrollStart(e)},l._setViewRef=function(e){l._viewRef=e},l}_inheritsLoose(e,o);var t=e.prototype;return t.setNativeProps=function(e){this._viewRef&&this._viewRef.setNativeProps(e)},t.render=function(){var e=this.props,t=e.accessibilityLabel,r=e.accessibilityRelationship,l=e.accessibilityRole,o=e.accessibilityState,i=e.children,n=e.importantForAccessibility,s=e.nativeID,a=e.onLayout,c=e.pointerEvents,u=e.scrollEnabled,h=void 0===u||u,d=e.showsHorizontalScrollIndicator,_=e.showsVerticalScrollIndicator,p=e.style,f=e.testID,S=!1===d||!1===_;return _react.default.createElement(_View.default,{accessibilityLabel:t,accessibilityRelationship:r,accessibilityRole:l,accessibilityState:o,children:i,importantForAccessibility:n,nativeID:s,onLayout:a,onScroll:this._handleScroll,onTouchMove:this._createPreventableScrollHandler(this.props.onTouchMove),onWheel:this._createPreventableScrollHandler(this.props.onWheel),pointerEvents:c,ref:this._setViewRef,style:[p,!h&&styles.scrollDisabled,S&&styles.hideScrollbar],testID:f})},t._handleScrollStart=function(){this._state.isScrolling=!0,this._state.scrollLastTick=Date.now()},t._handleScrollTick=function(e){var t=this.props.onScroll;this._state.scrollLastTick=Date.now(),t&&t(normalizeScrollEvent(e))},t._handleScrollEnd=function(e){var t=this.props.onScroll;this._state.isScrolling=!1,t&&t(normalizeScrollEvent(e))},t._shouldEmitScrollEvent=function(e,t){var r=Date.now()-e;return 0<t&&t<=r},e}(_react.default.Component);exports.default=ScrollViewBase;var styles=_StyleSheet.default.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});module.exports=exports.default;