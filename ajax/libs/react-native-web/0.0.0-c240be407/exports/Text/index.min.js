import*as React from"react";import{forwardRef,useContext,useRef}from"react";import createElement from"../createElement";import css from"../StyleSheet/css";import pick from"../../modules/pick";import useElementLayout from"../../hooks/useElementLayout";import useMergeRefs from"../../modules/useMergeRefs";import usePlatformMethods from"../../hooks/usePlatformMethods";import useResponderEvents from"../../hooks/useResponderEvents";import StyleSheet from"../StyleSheet";import TextAncestorContext from"./TextAncestorContext";var forwardPropsList={accessibilityLabel:!0,accessibilityLiveRegion:!0,accessibilityRole:!0,accessibilityState:!0,accessibilityValue:!0,accessible:!0,children:!0,classList:!0,dir:!0,importantForAccessibility:!0,lang:!0,nativeID:!0,onBlur:!0,onClick:!0,onClickCapture:!0,onContextMenu:!0,onFocus:!0,onKeyDown:!0,onKeyUp:!0,onTouchCancel:!0,onTouchCancelCapture:!0,onTouchEnd:!0,onTouchEndCapture:!0,onTouchMove:!0,onTouchMoveCapture:!0,onTouchStart:!0,onTouchStartCapture:!0,pointerEvents:!0,ref:!0,style:!0,testID:!0,dataSet:!0,onMouseDown:!0,onMouseEnter:!0,onMouseLeave:!0,onMouseMove:!0,onMouseOver:!0,onMouseOut:!0,onMouseUp:!0,onScroll:!0,onWheel:!0,href:!0,rel:!0,target:!0},pickProps=function(e){return pick(e,forwardPropsList)},Text=forwardRef(function(e,o){var t=e.dir,n=e.numberOfLines,r=e.onClick,s=e.onLayout,l=e.onPress,a=e.onMoveShouldSetResponder,i=e.onMoveShouldSetResponderCapture,p=e.onResponderEnd,u=e.onResponderGrant,c=e.onResponderMove,d=e.onResponderReject,S=e.onResponderRelease,R=e.onResponderStart,h=e.onResponderTerminate,m=e.onResponderTerminationRequest,f=e.onScrollShouldSetResponder,x=e.onScrollShouldSetResponderCapture,v=e.onSelectionChangeShouldSetResponder,C=e.onSelectionChangeShouldSetResponderCapture,b=e.onStartShouldSetResponder,y=e.onStartShouldSetResponderCapture,M=e.selectable,T=useContext(TextAncestorContext),k=useRef(null),w=[classes.text,!0===T&&classes.textHasAncestor,1===n&&classes.textOneLine,null!=n&&n>1&&classes.textMultiLine],L=[e.style,null!=n&&n>1&&{WebkitLineClamp:n},!0===M&&styles.selectable,!1===M&&styles.notSelectable,l&&styles.pressable];useElementLayout(k,s),useResponderEvents(k,{onMoveShouldSetResponder:a,onMoveShouldSetResponderCapture:i,onResponderEnd:p,onResponderGrant:u,onResponderMove:c,onResponderReject:d,onResponderRelease:S,onResponderStart:R,onResponderTerminate:h,onResponderTerminationRequest:m,onScrollShouldSetResponder:f,onScrollShouldSetResponderCapture:x,onSelectionChangeShouldSetResponder:v,onSelectionChangeShouldSetResponderCapture:C,onStartShouldSetResponder:b,onStartShouldSetResponderCapture:y});var E=T?"span":"div",g=pickProps(e);g.classList=w,g.dir=t,T||(g.dir=null!=t?t:"auto"),g.onClick=function(e){null!=r&&r(e),null==r&&null!=l&&(e.stopPropagation(),l(e))},g.style=L;var P=usePlatformMethods(g),O=useMergeRefs(k,P,o);g.ref=O;var A=createElement(E,g);return T?A:React.createElement(TextAncestorContext.Provider,{value:!0},A)});Text.displayName="Text";var classes=css.create({text:{border:"0 solid black",boxSizing:"border-box",color:"black",display:"inline",font:"14px System",margin:0,padding:0,whiteSpace:"pre-wrap",wordWrap:"break-word"},textHasAncestor:{color:"inherit",font:"inherit",whiteSpace:"inherit"},textOneLine:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},textMultiLine:{display:"-webkit-box",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical"}}),styles=StyleSheet.create({notSelectable:{userSelect:"none"},selectable:{userSelect:"text"},pressable:{cursor:"pointer"}});export default Text;