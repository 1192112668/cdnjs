"use strict";var NAMES="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" "),names=function(r){return"string"!=typeof r?NAMES.slice():NAMES.filter(function(e){var n=e[1]||" ";return-1!==r.indexOf(n)})},SHARPS=names(" #"),FLATS=names(" b"),REGEX=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenize(e){"string"!=typeof e&&(e="");var n=REGEX.exec(e);return n?[n[1].toUpperCase(),n[2].replace(/x/g,"##"),n[3],n[4]]:null}var NO_NOTE=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),SEMI=[0,2,4,5,7,9,11],properties=function(e){var n=tokenize(e);if(""===n[0]||""!==n[3])return NO_NOTE;var r=n[0],t=n[1],o=n[2],i={letter:r,acc:t,octStr:o};return i.pc=i.letter+i.acc,i.name=i.pc+o,i.step=(i.letter.charCodeAt(0)+3)%7,i.alt="b"===i.acc[0]?-i.acc.length:i.acc.length,i.oct=o.length?+o:null,i.chroma=(SEMI[i.step]+i.alt+120)%12,i.midi=null!==i.oct?SEMI[i.step]+i.alt+12*(i.oct+1):null,i.freq=midiToFreq(i.midi),Object.freeze(i)},memo=function(n,r){return void 0===r&&(r={}),function(e){return r[e]||(r[e]=n(e))}},props=memo(properties),name=function(e){return props(e).name},pc=function(e){return props(e).pc},isMidiRange=function(e){return 0<=e&&e<=127},midi=function(e){if("number"!=typeof e&&"string"!=typeof e)return null;var n=props(e).midi,r=n||0===n?n:+e;return isMidiRange(r)?r:null},midiToFreq=function(e,n){return void 0===n&&(n=440),"number"==typeof e?Math.pow(2,(e-69)/12)*n:null},freq=function(e){return props(e).freq||midiToFreq(e)},L2=Math.log(2),L440=Math.log(440),freqToMidi=function(e){var n=12*(Math.log(e)-L440)/L2+69;return Math.round(100*n)/100},chroma=function(e){return props(e).chroma},oct=function(e){return props(e).oct},LETTERS="CDEFGAB",stepToLetter=function(e){return LETTERS[e]},fillStr=function(e,n){return Array(n+1).join(e)},numToStr=function(e,n){return"number"!=typeof e?"":n(e)},altToAcc=function(e){return numToStr(e,function(e){return e<0?fillStr("b",-e):fillStr("#",e)})},from=function(e,n){void 0===e&&(e={}),void 0===n&&(n=null);var r=n?Object.assign({},props(n),e):e,t=r.step,o=r.alt,i=r.oct,m=stepToLetter(t);if(!m)return null;var a=m+altToAcc(o);return i||0===i?a+i:a},build=from;function fromMidi(e,n){return e=Math.round(e),(!0===n?SHARPS:FLATS)[e%12]+(Math.floor(e/12)-1)}var simplify=function(e,n){var r=props(e),t=r.alt,o=r.chroma,i=r.midi;if(null===o)return null;var m=!1===n?t<0:0<t;return null===i?pc(fromMidi(o,m)):fromMidi(i,m)},enharmonic=function(e){return simplify(e,!1)},Note=Object.freeze({names:names,tokenize:tokenize,props:props,name:name,pc:pc,midi:midi,midiToFreq:midiToFreq,freq:freq,freqToMidi:freqToMidi,chroma:chroma,oct:oct,stepToLetter:stepToLetter,altToAcc:altToAcc,from:from,build:build,fromMidi:fromMidi,simplify:simplify,enharmonic:enharmonic}),REGEX$1=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/,fillStr$1=function(e,n){return Array(n+1).join(e)};function tokenize$1(e){var n=REGEX$1.exec(e);return n?[n[1],n[2],n[3]]:["","",""]}function toNote(e){var n=tokenize$1(e),r=n[0],t=n[1],o=n[2];if(""===t)return null;for(var i=4,m=0;m<o.length;m++)i+=","===o[m]?-1:1;var a="_"===r[0]?r.replace(/_/g,"b"):"^"===r[0]?r.replace(/\^/g,"#"):"";return 96<t.charCodeAt(0)?t.toUpperCase()+a+(i+1):t+a+i}function toAbc(e){var n=props(e),r=n.letter,t=n.acc,o=n.oct;return("b"===t[0]?t.replace(/b/g,"_"):t.replace(/#/g,"^"))+(4<o?r.toLowerCase():r)+(5===o?"":4<o?fillStr$1("'",o-5):fillStr$1(",",4-o))}var Abc=Object.freeze({tokenize:tokenize$1,toNote:toNote,toAbc:toAbc});function ascR(e,n){for(var r=[];n--;r[n]=n+e);return r}function descR(e,n){for(var r=[];n--;r[n]=e-n);return r}function range(e,n){return null===e||null===n?[]:e<n?ascR(e,n-e+1):descR(e,e-n+1)}function rotate(e,n){var r=n.length,t=(e%r+r)%r;return n.slice(t,r).concat(n.slice(0,t))}var compact=function(e){return e.filter(function(e){return 0===e||e})},height=function(e){var n=props(e).midi;return null!==n?n:props(e+"-100").midi};function sort(e){return compact(e.map(name)).sort(function(e,n){return height(e)>height(n)})}function unique(e){return sort(e).filter(function(e,n,r){return 0===n||e!==r[n-1]})}var shuffle=function(e,n){var r,t;void 0===n&&(n=Math.random);for(var o=e.length;o;)r=n()*o--|0,t=e[o],e[o]=e[r],e[r]=t;return e},permutations=function(o){return 0===o.length?[[]]:permutations(o.slice(1)).reduce(function(e,t){return e.concat(o.map(function(e,n){var r=t.slice();return r.splice(n,0,o[0]),r}))},[])},Array$1=Object.freeze({range:range,rotate:rotate,compact:compact,sort:sort,unique:unique,shuffle:shuffle,permutations:permutations}),IVL_TNL="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",IVL_STR="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$2=new RegExp("^"+IVL_TNL+"|"+IVL_STR+"$"),SIZES=[0,2,4,5,7,9,11],TYPES="PMMPPMM",CLASSES=[0,1,2,3,4,5,6,5,4,3,2,1],NAMES$1="1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P".split(" "),names$1=function(n){return"string"!=typeof n?NAMES$1.slice():NAMES$1.filter(function(e){return-1!==n.indexOf(e[1])})},tokenize$2=function(e){var n=REGEX$2.exec(e);return null===n?null:n[1]?[n[1],n[2]]:[n[4],n[3]]},NO_IVL=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null}),fillStr$2=function(e,n){return Array(Math.abs(n)+1).join(e)},qToAlt=function(e,n){return"M"===n&&"M"===e||"P"===n&&"P"===e?0:"m"===n&&"M"===e?-1:/^A+$/.test(n)?n.length:/^d+$/.test(n)?"P"===e?-n.length:-n.length-1:null},altToQ=function(e,n){return 0===n?"M"===e?"M":"P":-1===n&&"M"===e?"m":0<n?fillStr$2("A",n):n<0?fillStr$2("d","P"===e?n:n+1):null},numToStep=function(e){return(Math.abs(e)-1)%7},properties$1=function(e){var n=tokenize$2(e);if(null===n)return NO_IVL;var r={num:+n[0],q:n[1]};return r.step=numToStep(r.num),r.type=TYPES[r.step],"M"===r.type&&"P"===r.q?NO_IVL:(r.name=""+r.num+r.q,r.dir=r.num<0?-1:1,r.simple=8===r.num||-8===r.num?r.num:r.dir*(r.step+1),r.alt=qToAlt(r.type,r.q),r.oct=Math.floor((Math.abs(r.num)-1)/7),r.semitones=r.dir*(SIZES[r.step]+r.alt+12*r.oct),r.chroma=(r.dir*(SIZES[r.step]+r.alt)%12+12)%12,Object.freeze(r))},cache={};function props$1(e){return"string"!=typeof e?NO_IVL:cache[e]||(cache[e]=properties$1(e))}var num=function(e){return props$1(e).num},name$1=function(e){return props$1(e).name},semitones=function(e){return props$1(e).semitones},chroma$1=function(e){return props$1(e).chroma},ic=function(e){return"string"==typeof e&&(e=props$1(e).chroma),"number"==typeof e?CLASSES[e%12]:null},build$1=function(e){void 0===e&&(e={});var n=e.num,r=e.step,t=e.alt,o=e.oct;void 0===o&&(o=1);var i=e.dir;if(void 0!==r&&(n=r+1+7*o),void 0===n)return null;var m=i<0?"-":"",a=TYPES[numToStep(n)];return m+n+altToQ(a,t)},simplify$1=function(e){var n=props$1(e);return n===NO_IVL?null:n.simple+n.q},invert=function(e){var n=props$1(e);if(n===NO_IVL)return null;var r=(7-n.step)%7,t="P"===n.type?-n.alt:-(n.alt+1);return build$1({step:r,alt:t,oct:n.oct,dir:n.dir})},IN=[1,2,2,3,3,4,5,5,6,6,7,7],IQ="P m M m M P d P m M m M".split(" "),fromSemitones=function(e){var n=e<0?-1:1,r=Math.abs(e),t=r%12,o=Math.floor(r/12);return n*(IN[t]+7*o)+IQ[t]},Interval=Object.freeze({names:names$1,tokenize:tokenize$2,props:props$1,num:num,name:name$1,semitones:semitones,chroma:chroma$1,ic:ic,build:build$1,simplify:simplify$1,invert:invert,fromSemitones:fromSemitones}),FIFTHS=[0,2,4,-1,1,3,5],fOcts=function(e){return Math.floor(7*e/12)},FIFTH_OCTS=FIFTHS.map(fOcts),encode=function(e){var n=e.step,r=e.alt,t=e.oct,o=e.dir;void 0===o&&(o=1);var i=FIFTHS[n]+7*r;return null===t?[o*i]:[o*i,o*(t-FIFTH_OCTS[n]-4*r)]},STEPS=[3,0,4,1,5,2,6];function unaltered(e){var n=(e+1)%7;return n<0?7+n:n}var decode=function(e,n,r){var t=STEPS[unaltered(e)],o=Math.floor((e+1)/7);return void 0===n?{step:t,alt:o,dir:r}:{step:t,alt:o,oct:n+4*o+FIFTH_OCTS[t],dir:r}},memo$1=function(n,r){return void 0===r&&(r={}),function(e){return r[e]||(r[e]=n(e))}},encoder=function(r){return memo$1(function(e){var n=r(e);return null===n.name?null:encode(n)})},encodeNote=encoder(props),encodeIvl=encoder(props$1);function transpose(n,e){if(1===arguments.length)return function(e){return transpose(n,e)};var r=encodeNote(n),t=encodeIvl(e);if(null===r||null===t)return null;var o=1===r.length?[r[0]+t[0]]:[r[0]+t[0],r[1]+t[1]];return build(decode(o[0],o[1]))}function trFifths(n,e){if(1===arguments.length)return function(e){return trFifths(n,e)};var r=encodeNote(n);return null===r?null:build(decode(r[0]+e))}function fifths(n,e){if(1===arguments.length)return function(e){return fifths(n,e)};var r=encodeNote(n),t=encodeNote(e);return null===t||null===r?null:t[0]-r[0]}function transposeBy(n,e){return 1===arguments.length?function(e){return transpose(e,n)}:transpose(e,n)}var isDescending=function(e){return 7*e[0]+12*e[1]<0},decodeIvl=function(e){return isDescending(e)?decode(-e[0],-e[1],-1):decode(e[0],e[1],1)};function addIntervals(e,n,r){var t=encodeIvl(e),o=encodeIvl(n);if(null===t||null===o)return null;var i=[t[0]+r*o[0],t[1]+r*o[1]];return build$1(decodeIvl(i))}function add(n,e){return 1===arguments.length?function(e){return add(n,e)}:addIntervals(n,e,1)}function subtract(n,e){return 1===arguments.length?function(e){return add(n,e)}:addIntervals(n,e,-1)}function interval(n,e){if(1===arguments.length)return function(e){return interval(n,e)};var r=encodeNote(n),t=encodeNote(e);if(null===r||null===t||r.length!==t.length)return null;var o=1===r.length?[t[0]-r[0],-Math.floor(7*(t[0]-r[0])/12)]:[t[0]-r[0],t[1]-r[1]];return build$1(decodeIvl(o))}function semitones$1(n,e){if(1===arguments.length)return function(e){return semitones$1(n,e)};var r=props(n),t=props(e);return null!==r.midi&&null!==t.midi?t.midi-r.midi:null!==r.chroma&&null!==t.chroma?(t.chroma-r.chroma+12)%12:null}var Distance=Object.freeze({transpose:transpose,trFifths:trFifths,fifths:fifths,transposeBy:transposeBy,addIntervals:addIntervals,add:add,subtract:subtract,interval:interval,semitones:semitones$1}),chromatic=["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],lydian=["1P 2M 3M 4A 5P 6M 7M"],major=["1P 2M 3M 4P 5P 6M 7M",["ionian"]],mixolydian=["1P 2M 3M 4P 5P 6M 7m",["dominant"]],dorian=["1P 2M 3m 4P 5P 6M 7m"],aeolian=["1P 2M 3m 4P 5P 6m 7m",["minor"]],phrygian=["1P 2m 3m 4P 5P 6m 7m"],locrian=["1P 2m 3m 4P 5d 6m 7m"],altered=["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],diminished=["1P 2M 3m 4P 5d 6m 6M 7M",["whole-half diminished"]],iwato=["1P 2m 4P 5d 7m"],hirajoshi=["1P 2M 3m 5P 6m"],kumoijoshi=["1P 2m 4P 5P 6m"],pelog=["1P 2m 3m 5P 6m"],prometheus=["1P 2M 3M 4A 6M 7m"],ritusen=["1P 2M 4P 5P 6M"],scriabin=["1P 2m 3M 5P 6M"],piongio=["1P 2M 4P 5P 6M 7m"],augmented=["1P 2A 3M 5P 5A 7M"],neopolitan=["1P 2m 3m 4P 5P 6m 7M"],egyptian=["1P 2M 4P 5P 7m"],oriental=["1P 2m 3M 4P 5d 6M 7m"],flamenco=["1P 2m 3m 3M 4A 5P 7m"],balinese=["1P 2m 3m 4P 5P 6m 7M"],persian=["1P 2m 3M 4P 5d 6m 7M"],bebop=["1P 2M 3M 4P 5P 6M 7m 7M"],enigmatic=["1P 2m 3M 5d 6m 7m 7M"],ichikosucho=["1P 2M 3M 4P 5d 5P 6M 7M"],sdata={chromatic:chromatic,lydian:lydian,major:major,mixolydian:mixolydian,dorian:dorian,aeolian:aeolian,phrygian:phrygian,locrian:locrian,"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m",["half-diminished"]],altered:altered,"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"phrygian dominant":["1P 2m 3M 4P 5P 6m 7m",["spanish","phrygian major"]],"half-whole diminished":["1P 2m 3m 3M 4A 5P 6M 7m",["dominant diminished"]],diminished:diminished,"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],iwato:iwato,hirajoshi:hirajoshi,kumoijoshi:kumoijoshi,pelog:pelog,"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],prometheus:prometheus,"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],ritusen:ritusen,scriabin:scriabin,piongio:piongio,"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],augmented:augmented,"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],neopolitan:neopolitan,"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],egyptian:egyptian,"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],oriental:oriental,"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],flamenco:flamenco,balinese:balinese,"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],persian:persian,bebop:bebop,"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],enigmatic:enigmatic,"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],ichikosucho:ichikosucho,"six tone symmetric":["1P 2m 3M 4P 5A 6M"]},M=["1P 3M 5P",["Major",""]],M13=["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],M6=["1P 3M 5P 13M",["6"]],M69=["1P 3M 5P 6M 9M",["69"]],M7add13=["1P 3M 5P 6M 7M 9M"],M7b5=["1P 3M 5d 7M"],M7b6=["1P 3M 6m 7M"],M7b9=["1P 3M 5P 7M 9m"],M7sus4=["1P 4P 5P 7M"],M9=["1P 3M 5P 7M 9M",["maj9","Maj9"]],M9b5=["1P 3M 5d 7M 9M"],M9sus4=["1P 4P 5P 7M 9M"],Madd9=["1P 3M 5P 9M",["2","add9","add2"]],Maj7=["1P 3M 5P 7M",["maj7","M7"]],Mb5=["1P 3M 5d"],Mb6=["1P 3M 13m"],Msus2=["1P 2M 5P",["add9no3","sus2"]],Msus4=["1P 4P 5P",["sus","sus4"]],Maddb9=["1P 3M 5P 9m"],m=["1P 3m 5P"],m11=["1P 3m 5P 7m 9M 11P",["_11"]],m11b5=["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],m13=["1P 3m 5P 7m 9M 11P 13M",["_13"]],m6=["1P 3m 4P 5P 13M",["_6"]],m69=["1P 3m 5P 6M 9M",["_69"]],m7=["1P 3m 5P 7m",["minor7","_","_7"]],m7add11=["1P 3m 5P 7m 11P",["m7add4"]],m7b5=["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],m9=["1P 3m 5P 7m 9M",["_9"]],m9b5=["1P 3m 7m 12d 2M",["h9","-9b5"]],mMaj7=["1P 3m 5P 7M",["mM7","_M7"]],mMaj7b6=["1P 3m 5P 6m 7M",["mM7b6"]],mM9=["1P 3m 5P 7M 9M",["mMaj9","-M9"]],mM9b6=["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],mb6M7=["1P 3m 6m 7M"],mb6b9=["1P 3m 6m 9m"],o=["1P 3m 5d",["mb5","dim"]],o7=["1P 3m 5d 13M",["diminished","m6b5","dim7"]],o7M7=["1P 3m 5d 6M 7M"],oM7=["1P 3m 5d 7M"],sus24=["1P 2M 4P 5P",["sus4add9"]],madd4=["1P 3m 4P 5P"],madd9=["1P 3m 5P 9M"],cdata={4:["1P 4P 7m 10m",["quartal"]],5:["1P 5P"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],64:["5P 8P 10M"],M:M,"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],M13:M13,"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],M6:M6,"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],M69:M69,"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],M7add13:M7add13,M7b5:M7b5,M7b6:M7b6,M7b9:M7b9,M7sus4:M7sus4,M9:M9,"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],M9b5:M9b5,M9sus4:M9sus4,Madd9:Madd9,Maj7:Maj7,Mb5:Mb5,Mb6:Mb6,Msus2:Msus2,Msus4:Msus4,Maddb9:Maddb9,"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],m:m,"m#5":["1P 3m 5A",["m+","mb6"]],m11:m11,"m11A 5":["1P 3m 6m 7m 9M 11P"],m11b5:m11b5,m13:m13,m6:m6,m69:m69,m7:m7,"m7#5":["1P 3m 6m 7m"],m7add11:m7add11,m7b5:m7b5,m9:m9,"m9#5":["1P 3m 6m 7m 9M"],m9b5:m9b5,mMaj7:mMaj7,mMaj7b6:mMaj7b6,mM9:mM9,mM9b6:mM9b6,mb6M7:mb6M7,mb6b9:mb6b9,o:o,o7:o7,o7M7:o7M7,oM7:oM7,sus24:sus24,"+add#9":["1P 3M 5A 9A"],madd4:madd4,madd9:madd9},chr=function(e){return chroma(e)||chroma$1(e)||0},pcsetNum=function(e){return parseInt(chroma$2(e),2)},clen=function(e){return e.replace(/0/g,"").length};function chroma$2(e){if(isChroma(e))return e;if(!Array.isArray(e))return"";var n=[0,0,0,0,0,0,0,0,0,0,0,0];return e.map(chr).forEach(function(e){n[e]=1}),n.join("")}var all=null;function chromas(n){return all=all||range(2048,4095).map(function(e){return e.toString(2)}),"number"==typeof n?all.filter(function(e){return clen(e)===n}):all.slice()}function modes(e,t){t=!1!==t;var o=chroma$2(e).split("");return compact(o.map(function(e,n){var r=rotate(n,o);return t&&"0"===r[0]?null:r.join("")}))}var REGEX$3=/^[01]{12}$/;function isChroma(e){return REGEX$3.test(e)}var IVLS="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" ");function intervals(e){return isChroma(e)?compact(e.split("").map(function(e,n){return"1"===e?IVLS[n]:null})):[]}function isEqual(n,e){return 1===arguments.length?function(e){return isEqual(n,e)}:chroma$2(n)===chroma$2(e)}function isSubsetOf(n,e){return 1<arguments.length?isSubsetOf(n)(e):(n=pcsetNum(n),function(e){return(e=pcsetNum(e))!==n&&(e&n)===e})}function isSupersetOf(n,e){return 1<arguments.length?isSupersetOf(n)(e):(n=pcsetNum(n),function(e){return(e=pcsetNum(e))!==n&&(e|n)===e})}function includes(n,e){return 1<arguments.length?includes(n)(e):(n=chroma$2(n),function(e){return"1"===n[chr(e)]})}function filter(n,e){return 1===arguments.length?function(e){return filter(n,e)}:e.filter(includes(n))}var PCSet=Object.freeze({chroma:chroma$2,chromas:chromas,modes:modes,isChroma:isChroma,intervals:intervals,isEqual:isEqual,isSubsetOf:isSubsetOf,isSupersetOf:isSupersetOf,includes:includes,filter:filter}),dictionary=function(o){function i(e,n,r){t[e]=n,m[r]=m[r]||[],m[r].push(e)}var n=Object.keys(o).sort(),t=[],m=[];n.forEach(function(e){var n=o[e][0].split(" "),r=o[e][1],t=chroma$2(n);i(e,n,t),r&&r.forEach(function(e){return i(e,n,t)})});function e(e){return t[e]}var r=Object.keys(t).sort();return e.names=function(e){return"string"==typeof e?(m[e]||[]).slice():(!0===e?r:n).slice()},e},combine=function(n,r){function e(e){return n(e)||r(e)}return e.names=function(e){return n.names(e).concat(r.names(e))},e},scale=dictionary(sdata),chord=dictionary(cdata),pcset=combine(scale,chord),Dictionary=Object.freeze({dictionary:dictionary,combine:combine,scale:scale,chord:chord,pcset:pcset}),names$2=chord.names,NO_CHORD=Object.freeze({name:null,names:[],intervals:[],chroma:null,setnum:null}),properties$2=function(e){var n=chord(e);if(!n)return NO_CHORD;var r={intervals:n,name:e};return r.chroma=chroma$2(n),r.setnum=parseInt(r.chroma,2),r.names=chord.names(r.chroma),r},memo$2=function(n,r){return void 0===r&&(r={}),function(e){return r[e]||(r[e]=n(e))}},props$2=memo$2(properties$2),intervals$1=function(e){return props$2(tokenize$3(e)[1]).intervals};function notes(e,n){if(n)return props$2(n).intervals.map(transpose(e));var r=tokenize$3(e),t=r[0],o=r[1];return props$2(o).intervals.map(transpose(t))}var exists=function(e){return void 0!==chord(tokenize$3(e)[1])},supersets=function(e){if(!intervals$1(e).length)return[];var n=isSupersetOf(intervals$1(e));return chord.names().filter(function(e){return n(chord(e))})},subsets=function(e){var n=isSubsetOf(intervals$1(e));return chord.names().filter(function(e){return n(chord(e))})},NUM_TYPES=/^(6|64|7|9|11|13)$/;function tokenize$3(e){var n=tokenize(e);return""===n[0]?["",e]:"A"===n[0]&&"ug"===n[3]?["","aug"]:NUM_TYPES.test(n[2])?[n[0]+n[1],n[2]+n[3]]:[n[0]+n[1]+n[2],n[3]]}var Chord=Object.freeze({names:names$2,props:props$2,intervals:intervals$1,notes:notes,exists:exists,supersets:supersets,subsets:subsets,tokenize:tokenize$3});function detector(m,e){return e=e||function(e,n){return[e,n]},function(o,i){return i=i||e,modes(o=sort(o.map(pc))).map(function(e,n){var r=name(o[n]),t=m.names(e);return t.length?i(r,t):null}).filter(function(e){return e})}}var chord$1=detector(chord,function(e,n){return e+n[0]}),scale$1=detector(scale,function(e,n){return e+" "+n[0]}),pcset$1=detector(pcset),Detect=Object.freeze({detector:detector,chord:chord$1,scale:scale$1,pcset:pcset$1}),NAMES$2="I II III IV V VI VII".split(" "),NAMES_MINOR=NAMES$2.map(function(e){return e.toLowerCase()}),REGEX$4=/^(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/,NO_PROPS={name:null,type:null},getNames=function(e){return!1===e?NAMES_MINOR:NAMES$2},memo$3=function(n,r){return void 0===r&&(r={}),function(e){return r[e]||(r[e]=n(e))}},properties$3=function(e){var n=REGEX$4.exec(e);if(!n)return NO_PROPS;var r=n[1],t=n[2],o=r.toUpperCase(),i=r===o;return{name:r,type:t,decimal:NAMES$2.indexOf(o)+1,major:i}},props$3=memo$3(properties$3),names$3=function(e){return getNames(e).slice()},name$2=function(e){return props$3(e).name},type=function(e){return props$3(e).type},decimal=function(e){return 0<e&&e<8?e:props$3(e).decimal||null},fromDegree=function(e,n){return getNames(n)[e-1]||null},RomanNumeral=Object.freeze({props:props$3,names:names$3,name:name$2,type:type,decimal:decimal,fromDegree:fromDegree}),arguments$1=arguments,MODES="major dorian phrygian lydian mixolydian minor locrian ionian aeolian".split(" "),NUMS=[0,1,2,3,4,5,6,0,5],NOTES="C D E F G A B".split(" "),TRIADS=["","m","m","","","m","dim"],SEVENTHS="Maj7 m7 m7 Maj7 7 m7 m7b5".split(" "),FIFTHS$1=[0,2,4,-1,1,3,5,0,3],modenum=function(e){return NUMS[MODES.indexOf(e)]},modeNames=function(e){return!0===e?MODES.slice():MODES.slice(0,7)},fromAlter=function(e){return trFifths("C",e)+" major"},names$4=function(e){void 0===e&&(e=4);for(var n=[],r=-(e=Math.abs(e));r<=e;r++)n.push(fromAlter(r));return n},NO_KEY=Object.freeze({name:null,tonic:null,mode:null,modenum:null,intervals:[],scale:[],alt:null,acc:null}),properties$4=function(e){var n=tokenize$4(e);if(null===n[0])return NO_KEY;var r={tonic:n[0],mode:n[1]};r.name=r.tonic+" "+r.mode,r.modenum=modenum(r.mode);var t=rotate(r.modenum,NOTES);return r.alt=fifths("C",r.tonic)-FIFTHS$1[MODES.indexOf(r.mode)],r.acc=altToAcc(r.alt),r.intervals=t.map(interval(t[0])),r.scale=r.intervals.map(transpose(r.tonic)),Object.freeze(r)},memo$4=function(n,r){return void 0===r&&(r={}),function(e){return r[e]||(r[e]=n(e))}},props$4=memo$4(properties$4),scale$2=function(e){return props$4(e).scale},degrees=function(e){var n=props$4(e);return null===n.name?[]:rotate(n.modenum,SEVENTHS).map(function(e,n){return fromDegree(n+1,"m"!==e[0])})},alteredNotes=function(e){var n=props$4(e).alt;return null===n?null:0===n?[]:0<n?range(1,n).map(trFifths("B")):range(-1,n).map(trFifths("F"))};function leadsheetSymbols(r,e,n){if(1===arguments.length)return function(e,n){return leadsheetSymbols(r,e,n)};var t=props$4(e);if(!t.name)return[];var o=rotate(t.modenum,r),i=t.scale.map(function(e,n){return e+o[n]});return n?n.map(decimal).map(function(e){return i[e-1]}):i}var chords=leadsheetSymbols(SEVENTHS),triads=leadsheetSymbols(TRIADS),secDomChords=function(e){var n=props$4(e);return n.name?n.scale.map(function(e){return transpose(e,"P5")+"7"}):[]},relative=function(n,e){if(1===arguments$1.length)return function(e){return relative(n,e)};var r=modenum(n.toLowerCase());if(void 0===r)return null;var t=props$4(e);return null===t.name?null:trFifths(t.tonic,FIFTHS$1[r]-FIFTHS$1[t.modenum])+" "+n},tokenize$4=function(e){var n=tokenize(e);return n[3]=n[3].toLowerCase(),""===n[0]||-1===MODES.indexOf(n[3])?[null,null]:[n[0]+n[1],n[3]]},Key=Object.freeze({modeNames:modeNames,fromAlter:fromAlter,names:names$4,props:props$4,scale:scale$2,degrees:degrees,alteredNotes:alteredNotes,leadsheetSymbols:leadsheetSymbols,chords:chords,triads:triads,secDomChords:secDomChords,relative:relative,tokenize:tokenize$4});function asNum(e){return"number"==typeof e?e:midi(e)}function numeric(e){return e.map(asNum).reduce(function(e,n,r){if(1===r)return range(e,n);var t=e[e.length-1];return e.concat(range(t,n).slice(1))})}function chromatic$1(e,n){return numeric(e).map(function(e){return fromMidi(e,n)})}function fifths$1(e,n){return numeric(n).map(trFifths(e))}function scale$3(n,e){return 1===arguments.length?function(e){return scale$3(n,e)}:filter(n,chromatic$1(e))}var Range=Object.freeze({numeric:numeric,chromatic:chromatic$1,fifths:fifths$1,scale:scale$3}),NO_SCALE=Object.freeze({name:null,intervals:[],names:[],chroma:null,setnum:null}),properties$5=function(e){var n=scale(e);if(!n)return NO_SCALE;var r={intervals:n,name:e};return r.chroma=chroma$2(n),r.setnum=parseInt(r.chroma,2),r.names=scale.names(r.chroma),Object.freeze(r)},memoize=function(n,r){return function(e){return r[e]||(r[e]=n(e))}},props$5=memoize(properties$5,{}),names$5=scale.names,intervals$2=function(e){var n=tokenize$5(e);return props$5(n[1]).intervals};function notes$1(e,n){var r=tokenize$5(e);return n=n||r[1],intervals$2(n).map(transpose(r[0]))}function exists$1(e){var n=tokenize$5(e);return void 0!==scale(n[1])}function tokenize$5(e){if("string"!=typeof e)return["",""];var n=e.indexOf(" "),r=name(e.substring(0,n))||name(e)||"",t=""!==r?e.substring(r.length+1):e;return[r,t.length?t:""]}var modeNames$1=function(e){var t=intervals$2(e),o=notes$1(e);return modes(t).map(function(e,n){var r=scale.names(e)[0];if(r)return[o[n]||t[n],r]}).filter(function(e){return e})},chords$1=function(e){var n=isSubsetOf(intervals$2(e));return chord.names().filter(function(e){return n(chord(e))})},toScale=function(e){var n=compact(e.map(pc));if(!n.length)return n;var r=n[0],t=unique(n);return rotate(t.indexOf(r),t)},supersets$1=function(e){if(!intervals$2(e).length)return[];var n=isSupersetOf(intervals$2(e));return scale.names().filter(function(e){return n(scale(e))})},subsets$1=function(e){var n=isSubsetOf(intervals$2(e));return scale.names().filter(function(e){return n(scale(e))})},Scale=Object.freeze({props:props$5,names:names$5,intervals:intervals$2,notes:notes$1,exists:exists$1,tokenize:tokenize$5,modeNames:modeNames$1,chords:chords$1,toScale:toScale,supersets:supersets$1,subsets:subsets$1}),index={Abc:Abc,Array:Array$1,Chord:Chord,Detect:Detect,Dictionary:Dictionary,Distance:Distance,Interval:Interval,Key:Key,Note:Note,PCSet:PCSet,Range:Range,RomanNumeral:RomanNumeral,Scale:Scale};module.exports=index;