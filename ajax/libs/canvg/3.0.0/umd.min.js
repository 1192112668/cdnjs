!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).canvg={})}(this,function(t){"use strict";var r=Math.tan,m=Math.atan2,A=Math.PI,i=Math.round,M=Math.max,B=Math.min,o=Math.ceil,E=Math.sin,C=Math.cos,g=Math.floor,T=Math.sqrt,O=Math.pow;function e(t,e){return t(e={exports:{}},e.exports),e.exports}function F(t){return t.replace(/(?!\u3000)\s+/gm," ")}function s(t){return t.replace(/^[\n \t]+/,"")}function u(t){return t.replace(/[\n \t]+$/,"")}function L(t){return((t||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[]).map(parseFloat)}function l(t){return wn.test(t)?t.toLowerCase():t}function c(t){var e=t.match(/url\(('([^']+)'|"([^"]+)"|([^'"\)]+))\)/)||[];return e[2]||e[3]||e[4]}function b(t,e){var n=t.match(e);return n?[t.replace(e," "),n.length]:[t,0]}function h(t){var e=[0,0,0],n=0,r=b(a=t.replace(/:not\(([^\)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),Tn),i=Cn(r,2),a=i[0],n=i[1];e[1]+=n;var o=b(a,On),s=Cn(o,2);a=s[0],n=s[1],e[0]+=n;var u=b(a,Vn),l=Cn(u,2);a=l[0],n=l[1],e[1]+=n;var c=b(a,Ln),h=Cn(c,2);a=h[0],n=h[1],e[2]+=n;var f=b(a,Nn),g=Cn(f,2);a=g[0],n=g[1],e[1]+=n;var d=b(a,jn),p=Cn(d,2);a=p[0],n=p[1],e[1]+=n;var y=b(a=a.replace(/[\*\s\+>~]/g," ").replace(/[#\.]/g," "),Rn),v=Cn(y,2);return a=v[0],n=v[1],e[2]+=n,e.join("")}function n(t){return T(O(t[0],2)+O(t[1],2))}function V(t,e){return(t[0]*e[0]+t[1]*e[1])/(n(t)*n(e))}function N(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(V(t,e))}function f(t){return t*t*t}function d(t){return 3*t*t*(1-t)}function p(t){return 3*t*(1-t)*(1-t)}function y(t){return(1-t)*(1-t)*(1-t)}function v(t){return t*t}function x(t){return 2*t*(1-t)}function w(t){return(1-t)*(1-t)}function k(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function a(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function S(){throw new Error("setTimeout has not been defined")}function P(){throw new Error("clearTimeout has not been defined")}function j(e){if(Ka===setTimeout)return setTimeout(e,0);if((Ka===S||!Ka)&&setTimeout)return Ka=setTimeout,setTimeout(e,0);try{return Ka(e,0)}catch(t){try{return Ka.call(null,e,0)}catch(t){return Ka.call(this,e,0)}}}function R(){no&&to&&(no=!1,to.length?eo=to.concat(eo):ro=-1,eo.length&&I())}function I(){if(!no){var t=j(R);no=!0;for(var e=eo.length;e;){for(to=eo,eo=[];++ro<e;)to&&to[ro].run();ro=-1,e=eo.length}to=null,no=!1,function(e){if(Ja===clearTimeout)return clearTimeout(e);if((Ja===P||!Ja)&&clearTimeout)return Ja=clearTimeout,clearTimeout(e);try{Ja(e)}catch(t){try{return Ja.call(null,e)}catch(t){return Ja.call(this,e)}}}(t)}}function D(t,e){this.fun=t,this.array=e}function z(){}function _(t){var e=t.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function G(t,e,n,r,i,a){return t[n*r*4+4*e+a]}function $(t,e,n,r,i,a,o){t[n*r*4+4*e+a]=o}function U(t,e,n){var r=t[e];return r*(r<0?n-255:n)}function q(t,e,n,r){return e+C(t)*n+E(t)*r}function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e,n,r,i,a){var o;isNaN(a)||a<1||(a|=0,o=function(t,e,n,r){var i,a,o,s,u,l,c,h,f,g,d,p,y,v,m,b,x,w,k,S,P,A,E,C,T,O=t.data,V=e-1,L=n-1,N=r+1,j=N*(N+1)/2,R=new Qc,I=R;for(o=1;o<2*r+1;o++)I=I.next=new Qc,o===N&&(T=I);I.next=R;var D=null,z=null;c=l=0;var M=Xc[r],B=Yc[r];for(a=0;a<n;a++){for(b=x=w=k=h=f=g=d=0,p=N*(S=O[l]),y=N*(P=O[l+1]),v=N*(A=O[l+2]),m=N*(E=O[l+3]),h+=j*S,f+=j*P,g+=j*A,d+=j*E,I=R,o=0;o<N;o++)I.r=S,I.g=P,I.b=A,I.a=E,I=I.next;for(o=1;o<N;o++)s=l+((V<o?V:o)<<2),h+=(I.r=S=O[s])*(C=N-o),f+=(I.g=P=O[s+1])*C,g+=(I.b=A=O[s+2])*C,d+=(I.a=E=O[s+3])*C,b+=S,x+=P,w+=A,k+=E,I=I.next;for(D=R,z=T,i=0;i<e;i++)O[l+3]=E=d*M>>B,0===E?O[l]=O[l+1]=O[l+2]=0:(E=255/E,O[l]=(h*M>>B)*E,O[l+1]=(f*M>>B)*E,O[l+2]=(g*M>>B)*E),h-=p,f-=y,g-=v,d-=m,p-=D.r,y-=D.g,v-=D.b,m-=D.a,s=c+((s=i+r+1)<V?s:V)<<2,b+=D.r=O[s],x+=D.g=O[s+1],w+=D.b=O[s+2],k+=D.a=O[s+3],h+=b,f+=x,g+=w,d+=k,D=D.next,p+=S=z.r,y+=P=z.g,v+=A=z.b,m+=E=z.a,b-=S,x-=P,w-=A,k-=E,z=z.next,l+=4;c+=e}for(i=0;i<e;i++){for(x=w=k=b=f=g=d=h=0,p=N*(S=O[l=i<<2]),y=N*(P=O[l+1]),v=N*(A=O[l+2]),m=N*(E=O[l+3]),h+=j*S,f+=j*P,g+=j*A,d+=j*E,I=R,o=0;o<N;o++)I.r=S,I.g=P,I.b=A,I.a=E,I=I.next;for(u=e,o=1;o<=r;o++)l=u+i<<2,h+=(I.r=S=O[l])*(C=N-o),f+=(I.g=P=O[l+1])*C,g+=(I.b=A=O[l+2])*C,d+=(I.a=E=O[l+3])*C,b+=S,x+=P,w+=A,k+=E,I=I.next,o<L&&(u+=e);for(l=i,D=R,z=T,a=0;a<n;a++)O[(s=l<<2)+3]=E=d*M>>B,0<E?(E=255/E,O[s]=(h*M>>B)*E,O[s+1]=(f*M>>B)*E,O[s+2]=(g*M>>B)*E):O[s]=O[s+1]=O[s+2]=0,h-=p,f-=y,g-=v,d-=m,p-=D.r,y-=D.g,v-=D.b,m-=D.a,s=i+((s=a+N)<L?s:L)*e<<2,h+=b+=D.r=O[s],f+=x+=D.g=O[s+1],g+=w+=D.b=O[s+2],d+=k+=D.a=O[s+3],D=D.next,p+=S=z.r,y+=P=z.g,v+=A=z.b,m+=E=z.a,b-=S,x-=P,w-=A,k-=E,z=z.next,l+=e}return t}(o=function(t,e,n,r,i){if("string"==typeof t&&(t=document.getElementById(t)),!(t&&"object"===H(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var a=t.getContext("2d");try{return a.getImageData(e,n,r,i)}catch(e){throw new Error("unable to access image data: "+e)}}(t,e,n,r,i),r,i,a),t.getContext("2d").putImageData(o,e,n))}function X(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function Y(){return(Y=qr(Ur.mark(function t(n){var r;return Ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.createElement("img"),t.abrupt("return",new Promise(function(t,e){r.onload=function(){t(r)},r.onerror=function(){e()},r.src=n}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Q(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function Z(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?Q(n,!0).forEach(function(t){Hr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}function K(t){return t&&t.Math==Math&&t}function J(t){try{return!!t()}catch(t){return!0}}function tt(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function et(t){return Et.call(t).slice(8,-1)}function nt(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function rt(t){return Tt(nt(t))}function it(t){return"object"==typeof t?null!==t:"function"==typeof t}function at(t,e){if(!it(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!it(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!it(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!it(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function ot(t,e){return Ot.call(t,e)}function st(t){return Lt?Vt.createElement(t):{}}function ut(t){if(!it(t))throw TypeError(t+" is not an object");return t}function lt(e,n){try{zt(wt,e,n)}catch(t){wt[e]=n}return n}function ct(t){return"Symbol("+(void 0===t?"":t)+")_"+(++Ut+qt).toString(36)}function ht(t){return Ht[t]||(Ht[t]=ct(t))}var ft,gt,dt,pt,yt,vt,mt,bt,xt="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,wt=K("object"==typeof globalThis&&globalThis)||K("object"==typeof window&&window)||K("object"==typeof self&&self)||K("object"==typeof xt&&xt)||Function("return this")(),kt=!J(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),St={}.propertyIsEnumerable,Pt=Object.getOwnPropertyDescriptor,At={f:Pt&&!St.call({1:2},1)?function(t){var e=Pt(this,t);return!!e&&e.enumerable}:St},Et={}.toString,Ct="".split,Tt=J(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==et(t)?Ct.call(t,""):Object(t)}:Object,Ot={}.hasOwnProperty,Vt=wt.document,Lt=it(Vt)&&it(Vt.createElement),Nt=!kt&&!J(function(){return 7!=Object.defineProperty(st("div"),"a",{get:function(){return 7}}).a}),jt=Object.getOwnPropertyDescriptor,Rt={f:kt?jt:function(t,e){if(t=rt(t),e=at(e,!0),Nt)try{return jt(t,e)}catch(t){}return ot(t,e)?tt(!At.f.call(t,e),t[e]):void 0}},It=Object.defineProperty,Dt={f:kt?It:function(t,e,n){if(ut(t),e=at(e,!0),ut(n),Nt)try{return It(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},zt=kt?function(t,e,n){return Dt.f(t,e,tt(1,n))}:function(t,e,n){return t[e]=n,t},Mt="__core-js_shared__",Bt=wt[Mt]||lt(Mt,{}),Ft=e(function(t){(t.exports=function(t,e){return Bt[t]||(Bt[t]=void 0===e?{}:e)})("versions",[]).push({version:"3.3.6",mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),_t=Ft("native-function-to-string",Function.toString),Gt=wt.WeakMap,$t="function"==typeof Gt&&/native code/.test(_t.call(Gt)),Ut=0,qt=Math.random(),Ht=Ft("keys"),Wt={},Xt=wt.WeakMap;mt=$t?(ft=new Xt,gt=ft.get,dt=ft.has,pt=ft.set,yt=function(t,e){return pt.call(ft,t,e),e},vt=function(t){return gt.call(ft,t)||{}},function(t){return dt.call(ft,t)}):(bt=ht("state"),Wt[bt]=!0,yt=function(t,e){return zt(t,bt,e),e},vt=function(t){return ot(t,bt)?t[bt]:{}},function(t){return ot(t,bt)});function Yt(t){return"function"==typeof t?t:void 0}function Qt(t,e){return arguments.length<2?Yt(pe[t])||Yt(wt[t]):pe[t]&&pe[t][e]||wt[t]&&wt[t][e]}function Zt(t){return isNaN(t=+t)?0:(0<t?g:o)(t)}function Kt(t){return 0<t?B(Zt(t),9007199254740991):0}function Jt(t,e){var n=Zt(t);return n<0?M(n+e,0):B(n,e)}function te(s){return function(t,e,n){var r,i=rt(t),a=Kt(i.length),o=Jt(n,a);if(s&&e!=e){for(;o<a;)if((r=i[o++])!=r)return!0}else for(;o<a;o++)if((s||o in i)&&i[o]===e)return s||o||0;return!s&&-1}}function ee(t,e){var n,r=rt(t),i=0,a=[];for(n in r)!ot(Wt,n)&&ot(r,n)&&a.push(n);for(;e.length>i;)ot(r,n=e[i++])&&(~ve(a,n)||a.push(n));return a}function ne(t,e){for(var n,r=ke(e),i=Dt.f,a=Rt.f,o=0;o<r.length;o++)n=r[o],ot(t,n)||i(t,n,a(e,n))}function re(t,e){var n=Ae[Pe(t)];return!(n!=Ce)||n!=Ee&&("function"==typeof e?J(e):!!e)}function ie(t,e){var n,r,i,a,o=t.target,s=t.global,u=t.stat,l=s?wt:u?wt[o]||lt(o,{}):(wt[o]||{}).prototype;if(l)for(n in e){if(i=e[n],r=t.noTargetGet?(a=Oe(l,n))&&a.value:l[n],!Te(s?n:o+(u?".":"#")+n,t.forced)&&void 0!==r){if(typeof i==typeof r)continue;ne(i,r)}(t.sham||r&&r.sham)&&zt(i,"sham",!0),de(l,n,i,t)}}function ae(t){if("function"!=typeof t)throw TypeError(t+" is not a function");return t}function oe(r,i,t){return ae(r),void 0===i?r:0===t?function(){return r.call(i)}:1===t?function(t){return r.call(i,t)}:2===t?function(t,e){return r.call(i,t,e)}:3===t?function(t,e,n){return r.call(i,t,e,n)}:function(){return r.apply(i,arguments)}}function se(t){return Object(nt(t))}function ue(t){return je[t]||(je[t]=Le&&Ne[t]||(Le?Ne:ct)("Symbol."+t))}function le(t,e){var n;return Ve(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Ve(n.prototype)?it(n)&&(null===(n=n[Re])&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function ce(g){var d=1==g,p=4==g,y=6==g;return function(t,e,n,r){for(var i,a,o=se(t),s=Tt(o),u=oe(e,n,3),l=Kt(s.length),c=0,h=r||le,f=d?h(t,l):2==g?h(t,0):void 0;c<l;c++)if((5==g||y||c in s)&&(a=u(i=s[c],c,o),g))if(d)f[c]=a;else if(a)switch(g){case 3:return!0;case 5:return i;case 6:return c;case 2:Ie.call(f,i)}else if(p)return!1;return y?-1:3==g||p?p:f}}var he,fe,ge={set:yt,get:vt,has:mt,enforce:function(t){return mt(t)?vt(t):yt(t,{})},getterFor:function(n){return function(t){var e;if(!it(t)||(e=vt(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},de=e(function(t){var e=ge.get,s=ge.enforce,u=(_t+"").split("toString");Ft("inspectSource",function(t){return _t.call(t)}),(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,o=!!r&&!!r.noTargetGet;return"function"==typeof n&&("string"!=typeof e||ot(n,"name")||zt(n,"name",e),s(n).source=u.join("string"==typeof e?e:"")),t===wt?void(a?t[e]=n:lt(e,n)):(i?!o&&t[e]&&(a=!0):delete t[e],void(a?t[e]=n:zt(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||_t.call(this)})}),pe=wt,ye={includes:te(!0),indexOf:te(!1)},ve=ye.indexOf,me=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],be=me.concat("length","prototype"),xe={f:Object.getOwnPropertyNames||function(t){return ee(t,be)}},we={f:Object.getOwnPropertySymbols},ke=Qt("Reflect","ownKeys")||function(t){var e=xe.f(ut(t)),n=we.f;return n?e.concat(n(t)):e},Se=/#|\.prototype\./,Pe=re.normalize=function(t){return(t+"").replace(Se,".").toLowerCase()},Ae=re.data={},Ee=re.NATIVE="N",Ce=re.POLYFILL="P",Te=re,Oe=Rt.f,Ve=Array.isArray||function(t){return"Array"==et(t)},Le=!!Object.getOwnPropertySymbols&&!J(function(){return!(Symbol()+"")}),Ne=wt.Symbol,je=Ft("wks"),Re=ue("species"),Ie=[].push,De={forEach:ce(0),map:ce(1),filter:ce(2),some:ce(3),every:ce(4),find:ce(5),findIndex:ce(6)},ze=Qt("navigator","userAgent")||"",Me=wt.process,Be=Me&&Me.versions,Fe=Be&&Be.v8;Fe?fe=(he=Fe.split("."))[0]+he[1]:ze&&((he=ze.match(/Edge\/(\d+)/))&&!(74<=he[1])||(he=ze.match(/Chrome\/(\d+)/))&&(fe=he[1]));function _e(e){return 51<=Ge||!J(function(){var t=[];return(t.constructor={})[$e]=function(){return{foo:1}},1!==t[e](Boolean).foo})}var Ge=fe&&+fe,$e=ue("species"),Ue=De.map;ie({target:"Array",proto:!0,forced:!_e("map")},{map:function(t){return Ue(this,t,1<arguments.length?arguments[1]:void 0)}});function qe(n){return function(t){var e=nt(t)+"";return 1&n&&(e=e.replace(We,"")),2&n&&(e=e.replace(Xe,"")),e}}var He="[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]",We=RegExp("^"+He+He+"*"),Xe=RegExp(He+He+"*$"),Ye={start:qe(1),end:qe(2),trim:qe(3)},Qe=Ye.trim,Ze=wt.parseFloat,Ke=1/Ze("\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff-0")!=-1/0?function(t){var e=Qe(t+""),n=Ze(e);return 0===n&&"-"==e.charAt(0)?-0:n}:Ze;ie({global:!0,forced:parseFloat!=Ke},{parseFloat:Ke});function Je(){var t=ut(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}var tn,en,nn=RegExp.prototype.exec,rn=String.prototype.replace,an=nn,on=(tn=/a/,en=/b*/g,nn.call(tn,"a"),nn.call(en,"a"),0!==tn.lastIndex||0!==en.lastIndex),sn=void 0!==/()??/.exec("")[1];(on||sn)&&(an=function(t){var e,n,r,i,a=this;return sn&&(n=new RegExp("^"+a.source+"$(?!\\s)",Je.call(a))),on&&(e=a.lastIndex),r=nn.call(a,t),on&&r&&(a.lastIndex=a.global?r.index+r[0].length:e),sn&&r&&1<r.length&&rn.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var un=an;ie({target:"RegExp",proto:!0,forced:/./.exec!==un},{exec:un});function ln(n,t,e,r){var a,i,o,s,u=ue(n),l=!J(function(){var t={};return t[u]=function(){return 7},7!=""[n](t)}),c=l&&!J(function(){var t=!1,e=/a/;return"split"===n&&((e={}).constructor={},e.constructor[gn]=function(){return e},e.flags="",e[u]=/./[u]),e.exec=function(){return t=!0,null},e[u](""),!t});l&&c&&("replace"!==n||dn)&&("split"!==n||pn)||(a=/./[u],o=(i=e(u,""[n],function(t,e,n,r,i){return e.exec===un?l&&!i?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}))[0],s=i[1],de(String.prototype,n,o),de(RegExp.prototype,u,2==t?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)}),r&&zt(RegExp.prototype[u],"sham",!0))}function cn(s){return function(t,e){var n,r,i=nt(t)+"",a=Zt(e),o=i.length;return a<0||o<=a?s?"":void 0:(n=i.charCodeAt(a))<55296||56319<n||a+1===o||(r=i.charCodeAt(a+1))<56320||57343<r?s?i.charAt(a):n:s?i.slice(a,a+2):r-56320+(n-55296<<10)+65536}}function hn(t,e,n){return e+(n?vn(t,e).length:1)}function fn(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==et(t))throw TypeError("RegExp#exec called on incompatible receiver");return un.call(t,e)}var gn=ue("species"),dn=!J(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),pn=!J(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),yn={codeAt:cn(!1),charAt:cn(!0)},vn=yn.charAt;ln("match",1,function(r,l,c){return[function(t){var e=nt(this),n=null==t?void 0:t[r];return void 0===n?new RegExp(t)[r](e+""):n.call(t,e)},function(t){var e=c(l,t,this);if(e.done)return e.value;var n=ut(t),r=this+"";if(!n.global)return fn(n,r);for(var i,a=n.unicode,o=[],s=n.lastIndex=0;null!==(i=fn(n,r));){var u=i[0]+"";(o[s]=u)||(n.lastIndex=hn(r,Kt(n.lastIndex),a)),s++}return 0===s?null:o}]});var mn=/\$([$&'`]|\d\d?|<[^>]*>)/g,bn=/\$([$&'`]|\d\d?)/g;ln("replace",2,function(i,w,k){function S(a,o,s,u,l,t){var c=s+a.length,h=u.length,e=bn;return void 0!==l&&(l=se(l),e=mn),w.call(t,e,function(t,e){var n;switch(e.charAt(0)){case"$":return"$";case"&":return a;case"`":return o.slice(0,s);case"'":return o.slice(c);case"<":n=l[e.slice(1,-1)];break;default:var r=+e;if(0==r)return t;if(h<r){var i=g(r/10);return 0!==i&&i<=h?void 0===u[i-1]?e.charAt(1):u[i-1]+e.charAt(1):t}n=u[r-1]}return void 0===n?"":n})}return[function(t,e){var n=nt(this),r=null==t?void 0:t[i];return void 0===r?w.call(n+"",t,e):r.call(t,n,e)},function(t,e){var n=k(w,t,this,e);if(n.done)return n.value;var r=ut(t),i=this+"",a="function"==typeof e;a||(e+="");var o,s=r.global;s&&(o=r.unicode,r.lastIndex=0);for(var u,l=[];null!==(u=fn(r,i))&&(l.push(u),s);){u[0]+""||(r.lastIndex=hn(i,Kt(r.lastIndex),o))}for(var c,h="",f=0,g=0;g<l.length;g++){for(var d=(u=l[g])[0]+"",p=M(B(Zt(u.index),i.length),0),y=[],v=1;v<u.length;v++)y.push(void 0===(c=u[v])?c:c+"");var m,b=u.groups,x=a?(m=[d].concat(y,p,i),void 0!==b&&m.push(b),e.apply(void 0,m)+""):S(d,i,p,y,b,e);f<=p&&(h+=i.slice(f,p)+x,f=p+d.length)}return h+i.slice(f)}]});function xn(t,e){var n=[][t];return!n||!J(function(){n.call(null,e||function(){throw 1},1)})}var wn=/^[A-Z-]+$/,kn=[].join,Sn=Tt!=Object,Pn=xn("join",",");ie({target:"Array",proto:!0,forced:Sn||Pn},{join:function(t){return kn.call(rt(this),void 0===t?",":t)}});function An(){}var En=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},Cn=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||En(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()},Tn=/(\[[^\]]+\])/g,On=/(#[^\s\+>~\.\[:]+)/g,Vn=/(\.[^\s\+>~\.\[:]+)/g,Ln=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,Nn=/(:[\w-]+\([^\)]*\))/gi,jn=/(:[^\s\+>~\.\[:]+)/g,Rn=/([^\s\+>~\.\[:]+)/g,In=1e-8,Dn=Object.keys||function(t){return ee(t,me)},zn=kt?Object.defineProperties:function(t,e){ut(t);for(var n,r=Dn(e),i=r.length,a=0;a<i;)Dt.f(t,n=r[a++],e[n]);return t},Mn=Qt("document","documentElement"),Bn=ht("IE_PROTO"),Fn="prototype",_n=function(){var t,e=st("iframe"),n=me.length,r="script";for(e.style.display="none",Mn.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object</"+r+">"),t.close(),_n=t.F;n--;)delete _n[Fn][me[n]];return _n()},Gn=Object.create||function(t,e){var n;return null===t?n=_n():(An[Fn]=ut(t),n=new An,An[Fn]=null,n[Bn]=t),void 0===e?n:zn(n,e)};Wt[Bn]=!0;function $n(t){var e=pe.Symbol||(pe.Symbol={});ot(e,t)||tr(e,t,{value:Jn.f(t)})}function Un(t,e,n){t&&!ot(t=n?t:t.prototype,nr)&&er(t,nr,{configurable:!0,value:e})}function qn(t,e){var n=mr[t]=Gn(hr[or]);return ur(n,{type:ar,tag:t,description:e}),kt||(n.description=e),n}function Hn(e,t){ut(e);var n=rt(t),r=Dn(n).concat(Or(n));return rr(r,function(t){kt&&!Tr.call(n,t)||Cr(e,t,n[t])}),e}function Wn(t,e){var n=rt(t),r=at(e,!0);if(n!==cr||!ot(mr,r)||ot(br,r)){var i=dr(n,r);return!i||!ot(mr,r)||ot(n,ir)&&n[ir][r]||(i.enumerable=!0),i}}function Xn(t){var e=yr(rt(t)),n=[];return rr(e,function(t){ot(mr,t)||ot(Wt,t)||n.push(t)}),n}var Yn=xe.f,Qn={}.toString,Zn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Kn={f:function(t){return Zn&&"[object Window]"==Qn.call(t)?function(t){try{return Yn(t)}catch(t){return Zn.slice()}}(t):Yn(rt(t))}},Jn={f:ue},tr=Dt.f,er=Dt.f,nr=ue("toStringTag"),rr=De.forEach,ir=ht("hidden"),ar="Symbol",or="prototype",sr=ue("toPrimitive"),ur=ge.set,lr=ge.getterFor(ar),cr=Object[or],hr=wt.Symbol,fr=wt.JSON,gr=fr&&fr.stringify,dr=Rt.f,pr=Dt.f,yr=Kn.f,vr=At.f,mr=Ft("symbols"),br=Ft("op-symbols"),xr=Ft("string-to-symbol-registry"),wr=Ft("symbol-to-string-registry"),kr=Ft("wks"),Sr=wt.QObject,Pr=!Sr||!Sr[or]||!Sr[or].findChild,Ar=kt&&J(function(){return 7!=Gn(pr({},"a",{get:function(){return pr(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=dr(cr,e);r&&delete cr[e],pr(t,e,n),r&&t!==cr&&pr(cr,e,r)}:pr,Er=Le&&"symbol"==typeof hr.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof hr},Cr=function(t,e,n){t===cr&&Cr(br,e,n),ut(t);var r=at(e,!0);return ut(n),ot(mr,r)?(n.enumerable?(ot(t,ir)&&t[ir][r]&&(t[ir][r]=!1),n=Gn(n,{enumerable:tt(0,!1)})):(ot(t,ir)||pr(t,ir,tt(1,{})),t[ir][r]=!0),Ar(t,r,n)):pr(t,r,n)},Tr=function(t){var e=at(t,!0),n=vr.call(this,e);return(this!==cr||!ot(mr,e)||ot(br,e))&&(!(n||!ot(this,e)||!ot(mr,e)||ot(this,ir)&&this[ir][e])||n)},Or=function(t){var e=t===cr,n=yr(e?br:rt(t)),r=[];return rr(n,function(t){!ot(mr,t)||e&&!ot(cr,t)||r.push(mr[t])}),r};Le||(de((hr=function(){if(this instanceof hr)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?arguments[0]+"":void 0,e=ct(t),n=function(t){this===cr&&n.call(br,t),ot(this,ir)&&ot(this[ir],e)&&(this[ir][e]=!1),Ar(this,e,tt(1,t))};return kt&&Pr&&Ar(cr,e,{configurable:!0,set:n}),qn(e,t)})[or],"toString",function(){return lr(this).tag}),At.f=Tr,Dt.f=Cr,Rt.f=Wn,xe.f=Kn.f=Xn,we.f=Or,kt&&(pr(hr[or],"description",{configurable:!0,get:function(){return lr(this).description}}),de(cr,"propertyIsEnumerable",Tr,{unsafe:!0})),Jn.f=function(t){return qn(ue(t),t)}),ie({global:!0,wrap:!0,forced:!Le,sham:!Le},{Symbol:hr}),rr(Dn(kr),function(t){$n(t)}),ie({target:ar,stat:!0,forced:!Le},{for:function(t){var e=t+"";if(ot(xr,e))return xr[e];var n=hr(e);return xr[e]=n,wr[n]=e,n},keyFor:function(t){if(!Er(t))throw TypeError(t+" is not a symbol");return ot(wr,t)?wr[t]:void 0},useSetter:function(){Pr=!0},useSimple:function(){Pr=!1}}),ie({target:"Object",stat:!0,forced:!Le,sham:!kt},{create:function(t,e){return void 0===e?Gn(t):Hn(Gn(t),e)},defineProperty:Cr,defineProperties:Hn,getOwnPropertyDescriptor:Wn}),ie({target:"Object",stat:!0,forced:!Le},{getOwnPropertyNames:Xn,getOwnPropertySymbols:Or}),ie({target:"Object",stat:!0,forced:J(function(){we.f(1)})},{getOwnPropertySymbols:function(t){return we.f(se(t))}}),fr&&ie({target:"JSON",stat:!0,forced:!Le||J(function(){var t=hr();return"[null]"!=gr([t])||"{}"!=gr({a:t})||"{}"!=gr(Object(t))})},{stringify:function(t){for(var e,n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if(n=e=r[1],(it(e)||void 0!==t)&&!Er(t))return Ve(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Er(e))return e}),r[1]=e,gr.apply(fr,r)}}),hr[or][sr]||zt(hr[or],sr,hr[or].valueOf),Un(hr,ar),Wt[ir]=!0;var Vr=De.filter;ie({target:"Array",proto:!0,forced:!_e("filter")},{filter:function(t){return Vr(this,t,1<arguments.length?arguments[1]:void 0)}});var Lr=De.forEach,Nr=xn("forEach")?function(t){return Lr(this,t,1<arguments.length?arguments[1]:void 0)}:[].forEach;ie({target:"Array",proto:!0,forced:[].forEach!=Nr},{forEach:Nr}),ie({target:"Object",stat:!0,forced:!kt,sham:!kt},{defineProperties:zn}),ie({target:"Object",stat:!0,forced:!kt,sham:!kt},{defineProperty:Dt.f});var jr=Rt.f,Rr=J(function(){jr(1)});ie({target:"Object",stat:!0,forced:!kt||Rr,sham:!kt},{getOwnPropertyDescriptor:function(t,e){return jr(rt(t),e)}});function Ir(t,e,n){var r=at(e);r in t?Dt.f(t,r,tt(0,n)):t[r]=n}ie({target:"Object",stat:!0,sham:!kt},{getOwnPropertyDescriptors:function(t){for(var e,n,r=rt(t),i=Rt.f,a=ke(r),o={},s=0;a.length>s;)void 0!==(n=i(r,e=a[s++]))&&Ir(o,e,n);return o}});var Dr=J(function(){Dn(1)});ie({target:"Object",stat:!0,forced:Dr},{keys:function(t){return Dn(se(t))}});var zr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Mr in zr){var Br=wt[Mr],Fr=Br&&Br.prototype;if(Fr&&Fr.forEach!==Nr)try{zt(Fr,"forEach",Nr)}catch(t){Fr.forEach=Nr}}function _r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gr(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function $r(t){if(it(t)){var e=t[Wr];return void 0===e?Ve(t):!!e}}var Ur=e(function(t){var e=function(a){function o(t,e,n,r){var a,o,s,u,i=e&&e.prototype instanceof f?e:f,l=Object.create(i.prototype),c=new d(r||[]);return l._invoke=(a=t,o=n,s=c,u="suspendedStart",function(t,e){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===t)throw e;return p()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=g(n,s);if(r){if(r===w)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===u)throw u="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u="executing";var i=h(a,o,s);if("normal"===i.type){if(u=s.done?"completed":"suspendedYield",i.arg===w)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(u="completed",s.method="throw",s.arg=i.arg)}}),l}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function f(){}function n(){}function e(){}function t(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(u){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){var a=h(u[t],u,n);if("throw"!==a.type){var o=a.arg,s=o.value;return s&&"object"==typeof s&&y.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(s).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)})}i(a.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function g(t,e){var n=t.iterator[e.method];if(n===l){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=l,g(t,e),"throw"===e.method))return w;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,w;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=l),e.delegate=null,w):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,w)}function r(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function u(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(r,this),this.reset(!0)}function i(e){if(e){var t=e[m];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=l,t.done=!0,t};return r.next=r}}return{next:p}}function p(){return{value:l,done:!0}}var l,c=Object.prototype,y=c.hasOwnProperty,v="function"==typeof Symbol?Symbol:{},m=v.iterator||"@@iterator",b=v.asyncIterator||"@@asyncIterator",x=v.toStringTag||"@@toStringTag";a.wrap=o;var w={},k={};k[m]=function(){return this};var S=Object.getPrototypeOf,P=S&&S(S(i([])));P&&P!==c&&y.call(P,m)&&(k=P);var A=e.prototype=f.prototype=Object.create(k);return n.prototype=A.constructor=e,e.constructor=n,e[x]=n.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,e):(t.__proto__=e,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(A),t},a.awrap=function(t){return{__await:t}},t(s.prototype),s.prototype[b]=function(){return this},a.AsyncIterator=s,a.async=function(t,e,n,r){var i=new s(o(t,e,n,r));return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},t(A),A[x]="Generator",A[m]=function(){return this},A.toString=function(){return"[object Generator]"},a.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=i,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(u),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){function t(t,e){return a.type="throw",a.arg=n,r.next=t,e&&(r.method="next",r.arg=l),!!e}if(this.done)throw n;for(var r=this,e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n,r=this.tryEntries.length-1;0<=r;--r)if((n=this.tryEntries[r]).tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e,n=this.tryEntries.length-1;0<=n;--n)if((e=this.tryEntries[n]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),u(e),w},catch:function(t){for(var e,n=this.tryEntries.length-1;0<=n;--n)if((e=this.tryEntries[n]).tryLoc===t){var r,i=e.completion;return"throw"===i.type&&(r=i.arg,u(e)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:i(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=l),w}},a}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}),qr=function(s){return function(){var t=this,o=arguments;return new Promise(function(e,n){function r(t){k(a,e,n,r,i,"next",t)}function i(t){k(a,e,n,r,i,"throw",t)}var a=s.apply(t,o);r(void 0)})}},Hr=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},Wr=ue("isConcatSpreadable"),Xr=9007199254740991,Yr="Maximum allowed index exceeded",Qr=51<=Ge||!J(function(){var t=[];return t[Wr]=!1,t.concat()[0]!==t}),Zr=_e("concat");ie({target:"Array",proto:!0,forced:!Qr||!Zr},{concat:function(){for(var t,e,n,r=se(this),i=le(r,0),a=0,o=-1,s=arguments.length;o<s;o++)if($r(n=-1===o?r:arguments[o])){if(e=Kt(n.length),Xr<a+e)throw TypeError(Yr);for(t=0;t<e;t++,a++)t in n&&Ir(i,a,n[t])}else{if(Xr<=a)throw TypeError(Yr);Ir(i,a++,n)}return i.length=a,i}});var Kr=De.every;ie({target:"Array",proto:!0,forced:xn("every")},{every:function(t){return Kr(this,t,1<arguments.length?arguments[1]:void 0)}});function Jr(l){return function(t,e,n,r){ae(e);var i=se(t),a=Tt(i),o=Kt(i.length),s=l?o-1:0,u=l?-1:1;if(n<2)for(;;){if(s in a){r=a[s],s+=u;break}if(s+=u,l?s<0:o<=s)throw TypeError("Reduce of empty array with no initial value")}for(;l?0<=s:s<o;s+=u)s in a&&(r=e(r,a[s],s,i));return r}}var ti={left:Jr(!1),right:Jr(!0)}.left;ie({target:"Array",proto:!0,forced:xn("reduce")},{reduce:function(t){return ti(this,t,arguments.length,1<arguments.length?arguments[1]:void 0)}});var ei=Date.prototype,ni="Invalid Date",ri="toString",ii=ei[ri],ai=ei.getTime;new Date(NaN)+""!=ni&&de(ei,ri,function(){var t=ai.call(this);return t==t?ii.call(this):ni});function oi(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ui))?n:li?et(e):"Object"==(r=et(e))&&"function"==typeof e.callee?"Arguments":r}function si(){return"[object "+oi(this)+"]"}var ui=ue("toStringTag"),li="Arguments"==et(function(){return arguments}()),ci=(ue("toStringTag"),Object.prototype);si!==ci.toString&&de(ci,"toString",si,{unsafe:!0});function hi(t,e,n){for(var r in e)de(t,r,e[r],n);return t}function fi(t){var e=Qt(t),n=Dt.f;kt&&e&&!e[mi]&&n(e,mi,{configurable:!0,get:function(){return this}})}function gi(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function di(t){return void 0!==t&&(bi.Array===t||wi[xi]===t)}function pi(t){if(null!=t)return t[ki]||t["@@iterator"]||bi[oi(t)]}function yi(t,e,n,r){try{return r?e(ut(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&ut(i.call(t)),e}}var vi=wt.Promise,mi=ue("species"),bi={},xi=ue("iterator"),wi=Array.prototype,ki=ue("iterator"),Si=e(function(t){function g(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var a,o,s,u,l,c,h,f=oe(e,n,r?2:1);if(i)a=t;else{if("function"!=typeof(o=pi(t)))throw TypeError("Target is not iterable");if(di(o)){for(s=0,u=Kt(t.length);s<u;s++)if((l=r?f(ut(h=t[s])[0],h[1]):f(t[s]))&&l instanceof g)return l;return new g(!1)}a=o.call(t)}for(c=a.next;!(h=c.call(a)).done;)if("object"==typeof(l=yi(a,f,h.value,r))&&l&&l instanceof g)return l;return new g(!1)}).stop=function(t){return new g(!0,t)}}),Pi=ue("iterator"),Ai=!1;try{var Ei=0,Ci={next:function(){return{done:!!Ei++}},return:function(){Ai=!0}};Ci[Pi]=function(){return this},Array.from(Ci,function(){throw 2})}catch(t){}function Ti(t,e){if(!e&&!Ai)return!1;var n=!1;try{var r={};r[Pi]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Oi(t,e){var n,r=ut(t).constructor;return void 0===r||null==(n=ut(r)[zi])?e:ae(n)}function Vi(t){var e;qi.hasOwnProperty(t)&&(e=qi[t],delete qi[t],e())}function Li(t){return function(){Vi(t)}}function Ni(t){Vi(t.data)}function ji(t){wt.postMessage(t+"",Mi.protocol+"//"+Mi.host)}var Ri,Ii,Di,zi=ue("species"),Mi=wt.location,Bi=wt.setImmediate,Fi=wt.clearImmediate,_i=wt.process,Gi=wt.MessageChannel,$i=wt.Dispatch,Ui=0,qi={},Hi="onreadystatechange";Bi&&Fi||(Bi=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return qi[++Ui]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ri(Ui),Ui},Fi=function(t){delete qi[t]},"process"==et(_i)?Ri=function(t){_i.nextTick(Li(t))}:$i&&$i.now?Ri=function(t){$i.now(Li(t))}:Gi&&!/(iphone|ipod|ipad).*applewebkit/i.test(ze)?(Di=(Ii=new Gi).port2,Ii.port1.onmessage=Ni,Ri=oe(Di.postMessage,Di,1)):!wt.addEventListener||"function"!=typeof postMessage||wt.importScripts||J(ji)?Ri=Hi in st("script")?function(t){Mn.appendChild(st("script"))[Hi]=function(){Mn.removeChild(this),Vi(t)}}:function(t){setTimeout(Li(t),0)}:(Ri=ji,wt.addEventListener("message",Ni,!1)));var Wi,Xi,Yi,Qi,Zi,Ki,Ji,ta,ea={set:Bi,clear:Fi},na=Rt.f,ra=ea.set,ia=wt.MutationObserver||wt.WebKitMutationObserver,aa=wt.process,oa=wt.Promise,sa="process"==et(aa),ua=na(wt,"queueMicrotask"),la=ua&&ua.value;la||(Wi=function(){var t,e;for(sa&&(t=aa.domain)&&t.exit();Xi;){e=Xi.fn,Xi=Xi.next;try{e()}catch(t){throw Xi?Qi():Yi=void 0,t}}Yi=void 0,t&&t.enter()},Qi=sa?function(){aa.nextTick(Wi)}:ia&&!/(iphone|ipod|ipad).*applewebkit/i.test(ze)?(Zi=!0,Ki=document.createTextNode(""),new ia(Wi).observe(Ki,{characterData:!0}),function(){Ki.data=Zi=!Zi}):oa&&oa.resolve?(Ji=oa.resolve(void 0),ta=Ji.then,function(){ta.call(Ji,Wi)}):function(){ra.call(wt,Wi)});function ca(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=ae(n),this.reject=ae(r)}function ha(t,e){if(ut(t),it(e)&&e.constructor===t)return e;var n=Sa.f(t);return(0,n.resolve)(e),n.promise}function fa(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}function ga(t){var e;return!(!it(t)||"function"!=typeof(e=t.then))&&e}function da(h,f,g){var d;f.notified||(f.notified=!0,d=f.reactions,ka(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,a,o=d[n++],s=e?o.ok:o.fail,u=o.resolve,l=o.reject,c=o.domain;try{s?(e||(2===f.rejection&&Ua(h,f),f.rejection=1),!0===s?r=t:(c&&c.enter(),r=s(t),c&&(c.exit(),a=!0)),r===o.promise?l(La("Promise-chain cycle")):(i=ga(r))?i.call(r,u,l):u(r)):l(t)}catch(t){c&&!a&&c.exit(),l(t)}}f.reactions=[],f.notified=!1,g&&!f.rejection&&Ga(h,f)}))}function pa(t,e,n){var r,i;Ma?((r=Na.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),wt.dispatchEvent(r)):r={promise:e,reason:n},(i=wt["on"+t])?i(r):t===Ba&&function(t,e){var n=wt.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function ya(e,n,r,i){return function(t){e(n,r,t,i)}}function va(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,da(t,e,!0))}var ma,ba,xa,wa,ka=la||function(t){var e={fn:t,next:void 0};Yi&&(Yi.next=e),Xi||(Xi=e,Qi()),Yi=e},Sa={f:function(t){return new ca(t)}},Pa=ea.set,Aa=ue("species"),Ea="Promise",Ca=ge.get,Ta=ge.set,Oa=ge.getterFor(Ea),Va=vi,La=wt.TypeError,Na=wt.document,ja=wt.process,Ra=Qt("fetch"),Ia=Sa.f,Da=Ia,za="process"==et(ja),Ma=!!(Na&&Na.createEvent&&wt.dispatchEvent),Ba="unhandledrejection",Fa=Te(Ea,function(){if(66===Ge)return!0;if(!za&&"function"!=typeof PromiseRejectionEvent)return!0;if(51<=Ge&&/native code/.test(Va))return!1;function t(t){t(function(){},function(){})}var e=Va.resolve(1);return(e.constructor={})[Aa]=t,!(e.then(function(){})instanceof t)}),_a=Fa||!Ti(function(t){Va.all(t).catch(function(){})}),Ga=function(n,r){Pa.call(wt,function(){var t,e=r.value;if($a(r)&&(t=fa(function(){za?ja.emit("unhandledRejection",e,n):pa(Ba,n,e)}),r.rejection=za||$a(r)?2:1,t.error))throw t.value})},$a=function(t){return 1!==t.rejection&&!t.parent},Ua=function(t,e){Pa.call(wt,function(){za?ja.emit("rejectionHandled",t):pa("rejectionhandled",t,e.value)})},qa=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw La("Promise can't be resolved itself");var i=ga(t);i?ka(function(){var e={done:!1};try{i.call(t,ya(qa,n,e,r),ya(va,n,e,r))}catch(t){va(n,e,t,r)}}):(r.value=t,r.state=1,da(n,r,!1))}catch(t){va(n,{done:!1},t,r)}}};Fa&&(Va=function(t){gi(this,Va,Ea),ae(t),ma.call(this);var e=Ca(this);try{t(ya(qa,this,e),ya(va,this,e))}catch(t){va(this,e,t)}},(ma=function(){Ta(this,{type:Ea,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=hi(Va.prototype,{then:function(t,e){var n=Oa(this),r=Ia(Oi(this,Va));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=za?ja.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&da(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),ba=function(){var t=new ma,e=Ca(t);this.promise=t,this.resolve=ya(qa,t,e),this.reject=ya(va,t,e)},Sa.f=Ia=function(t){return t===Va||t===xa?new ba:Da(t)},"function"==typeof vi&&(wa=vi.prototype.then,de(vi.prototype,"then",function(t,e){var n=this;return new Va(function(t,e){wa.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof Ra&&ie({global:!0,enumerable:!0,forced:!0},{fetch:function(){return ha(Va,Ra.apply(wt,arguments))}}))),ie({global:!0,wrap:!0,forced:Fa},{Promise:Va}),Un(Va,Ea,!1),fi(Ea),xa=Qt(Ea),ie({target:Ea,stat:!0,forced:Fa},{reject:function(t){var e=Ia(this);return e.reject.call(void 0,t),e.promise}}),ie({target:Ea,stat:!0,forced:Fa},{resolve:function(t){return ha(this,t)}}),ie({target:Ea,stat:!0,forced:_a},{all:function(t){var s=this,e=Ia(s),u=e.resolve,l=e.reject,n=fa(function(){var r=ae(s.resolve),i=[],a=0,o=1;Si(t,function(t){var e=a++,n=!1;i.push(void 0),o++,r.call(s,t).then(function(t){n||(n=!0,i[e]=t,--o||u(i))},l)}),--o||u(i)});return n.error&&l(n.value),e.promise},race:function(t){var n=this,r=Ia(n),i=r.reject,e=fa(function(){var e=ae(n.resolve);Si(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}});function Ha(t){var e;return it(t)&&(void 0===(e=t[Wa])?"RegExp"==et(t):!!e)}var Wa=ue("match"),Xa=[].push,Ya=4294967295,Qa=!J(function(){return!RegExp(Ya,"y")});ln("split",2,function(i,y,v){var m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var n=nt(this)+"",r=void 0===e?Ya:e>>>0;if(0==r)return[];if(void 0===t)return[n];if(!Ha(t))return y.call(n,t,r);for(var i,a,o,s=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,c=new RegExp(t.source,u+"g");(i=un.call(c,n))&&!(l<(a=c.lastIndex)&&(s.push(n.slice(l,i.index)),1<i.length&&i.index<n.length&&Xa.apply(s,i.slice(1)),o=i[0].length,l=a,s.length>=r));)c.lastIndex===i.index&&c.lastIndex++;return l===n.length?!o&&c.test("")||s.push(""):s.push(n.slice(l)),s.length>r?s.slice(0,r):s}:function(t,e){return void 0===t&&0===e?[]:y.call(this,t,e)};return[function(t,e){var n=nt(this),r=null==t?void 0:t[i];return void 0===r?m.call(n+"",t,e):r.call(t,n,e)},function(t,e){var n=v(m,t,this,e,m!==y);if(n.done)return n.value;var r=ut(t),i=this+"",a=Oi(r,RegExp),o=r.unicode,s=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(Qa?"y":"g"),u=new a(Qa?r:"^(?:"+r.source+")",s),l=void 0===e?Ya:e>>>0;if(0==l)return[];if(0===i.length)return null===fn(u,i)?[i]:[];for(var c=0,h=0,f=[];h<i.length;){u.lastIndex=Qa?h:0;var g,d=fn(u,Qa?i:i.slice(h));if(null===d||(g=B(Kt(u.lastIndex+(Qa?0:h)),i.length))===c)h=hn(i,h,o);else{if(f.push(i.slice(c,h)),f.length===l)return f;for(var p=1;p<=d.length-1;p++)if(f.push(d[p]),f.length===l)return f;h=c=g}}return f.push(i.slice(c)),f}]},!Qa);var Za="undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,Ka=S,Ja=P;"function"==typeof Za.setTimeout&&(Ka=setTimeout),"function"==typeof Za.clearTimeout&&(Ja=clearTimeout);var to,eo=[],no=!1,ro=-1;D.prototype.run=function(){this.fun.apply(null,this.array)};for(var io,ao,oo,so=Za.performance||{},uo=so.now||so.mozNow||so.msNow||so.oNow||so.webkitNow||function(){return(new Date).getTime()},lo=new Date,co={nextTick:function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];eo.push(new D(t,e)),1!==eo.length||no||j(I)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:z,addListener:z,once:z,off:z,removeListener:z,removeAllListeners:z,emit:z,binding:function(){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*uo.call(so),n=g(e),r=g(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-lo)/1e3}},ho=e(function(o){(function(){var t,e,n,r,i,a;"undefined"!=typeof performance&&null!==performance&&performance.now?o.exports=function(){return performance.now()}:null!=co&&co.hrtime?(o.exports=function(){return(t()-i)/1e6},e=co.hrtime,r=(t=function(){var t=e();return 1e9*t[0]+t[1]})(),a=1e9*co.uptime(),i=r-a):n=Date.now?(o.exports=function(){return Date.now()-n},Date.now()):(o.exports=function(){return(new Date).getTime()-n},(new Date).getTime())}).call(xt)}),fo="undefined"==typeof window?xt:window,go=["moz","webkit"],po="AnimationFrame",yo=fo["request"+po],vo=fo["cancel"+po]||fo["cancelRequest"+po],mo=0;!yo&&mo<go.length;mo++)yo=fo[go[mo]+"Request"+po],vo=fo[go[mo]+"Cancel"+po]||fo[go[mo]+"CancelRequest"+po];yo&&vo||(ao=io=0,oo=[],yo=function(t){var e,n;return 0===oo.length&&(e=ho(),n=M(0,1e3/60-(e-io)),io=n+e,setTimeout(function(){for(var t=oo.slice(0),e=oo.length=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(io)}catch(e){setTimeout(function(){throw e},0)}},i(n))),oo.push({handle:++ao,callback:t,cancelled:!1}),ao},vo=function(t){for(var e=0;e<oo.length;e++)oo[e].handle===t&&(oo[e].cancelled=!0)});function bo(t){return yo.call(fo,t)}bo.cancel=function(){vo.apply(fo,arguments)},bo.polyfill=function(t){(t=t||fo).requestAnimationFrame=yo,t.cancelAnimationFrame=vo};var xo=Dt.f,wo=Function.prototype,ko=wo.toString,So=/^\s*function ([^ (]*)/;!kt||"name"in wo||xo(wo,"name",{configurable:!0,get:function(){try{return ko.call(this).match(So)[1]}catch(t){return""}}});function Po(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=c[t]||t;for(var h=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],e=0;e<h.length;e++){var n,r=h[e].re,i=h[e].process,a=r.exec(t);a&&(n=i(a),this.r=n[0],this.g=n[1],this.b=n[2],3<n.length&&(this.alpha=n[3]),this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b,this.alpha=this.alpha<0?0:1<this.alpha||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t,e=[],n=0;n<h.length;n++){t=h[n].example;for(var r=0;r<t.length;r++)e[e.length]=t[r]}for(var i in c)e[e.length]=i;var a=document.createElement("ul");a.setAttribute("id","rgbcolor-examples");for(n=0;n<e.length;n++)try{var o=document.createElement("li"),s=new RGBColor(e[n]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+s.toHex()+"; color:"+s.toHex(),u.appendChild(document.createTextNode("test"));var l=document.createTextNode(" "+e[n]+" -> "+s.toRGB()+" -> "+s.toHex());o.appendChild(u),o.appendChild(l),a.appendChild(o)}catch(t){}return a}}var Ao=(Gr(Eo,[{key:"hasValue",value:function(){var t=this.value;return null!==t&&""!==t&&0!==t&&void 0!==t}},{key:"isString",value:function(t){var e=this.value,n="string"==typeof e;return n&&t?t.test(e):n}},{key:"isUrlDefinition",value:function(){return this.isString(/^url\(/)}},{key:"isPixels",value:function(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case/px$/.test(t):case/^[0-9]+$/.test(t):return!0;default:return!1}}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"getValue",value:function(t){return void 0===t||this.hasValue()?this.value:t}},{key:"getNumber",value:function(t){if(!this.hasValue())return void 0===t?0:parseFloat(t);var e=this.value,n=parseFloat(e);return this.isString(/%$/)&&(n/=100),n}},{key:"getString",value:function(t){return void 0===t||this.hasValue()?void 0===this.value?"":this.value+"":t+""}},{key:"getDpi",value:function(){return 96}},{key:"getRem",value:function(){return this.document.rootEmSize}},{key:"getEm",value:function(){return this.document.emSize}},{key:"getUnits",value:function(){return this.getString().replace(/[0-9\.\-]/g,"")}},{key:"getPixels",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!this.hasValue())return 0;var n=Cn("boolean"==typeof t?[void 0,t]:[t],2),r=n[0],i=n[1],a=this.document.screen.viewPort;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*B(a.computeSize("x"),a.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*M(a.computeSize("x"),a.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*a.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*a.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&i:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*a.computeSize(r);default:var o=this.getNumber();return e&&o<1?o*a.computeSize(r):o}}},{key:"getMilliseconds",value:function(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}},{key:"getRadians",value:function(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(A/180);case this.isString(/grad$/):return this.getNumber()*(A/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(A/180)}}},{key:"getDefinition",value:function(){var t=this.getString(),e=t.match(/#([^\)'"]+)/);return e=(e=e&&e[1])||t,this.document.definitions[e]}},{key:"getFillStyleDefinition",value:function(t,e){var n,r=this.getDefinition();return r?"function"==typeof r.createGradient?r.createGradient(this.document.ctx,t,e):"function"!=typeof r.createPattern?null:(r.getHrefAttribute().hasValue()&&(n=r.getAttribute("patternTransform"),r=r.getHrefAttribute().getDefinition(),n.hasValue()&&r.getAttribute("patternTransform",!0).setValue(n.value)),r.createPattern(this.document.ctx,t,e)):null}},{key:"getTextBaseline",value:function(){return this.hasValue()?Eo.textBaselineMapping[this.getString()]:null}},{key:"addOpacity",value:function(t){for(var e,n=this.value,r=n.length,i=0,a=0;a<r&&(","===n[a]&&i++,3!==i);a++);return t.hasValue()&&this.isString()&&3!==i&&(e=new Po(n)).ok&&(n="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(t.getNumber(),")")),new Eo(this.document,this.name,n)}}],[{key:"empty",value:function(t){return new Eo(t,"EMPTY","")}}]),Eo);function Eo(t,e,n){_r(this,Eo),this.document=t,this.name=e,this.value=n}Ao.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var Co=(Gr(Do,[{key:"clear",value:function(){this.viewPorts=[]}},{key:"setCurrent",value:function(t,e){this.viewPorts.push({width:t,height:e})}},{key:"removeCurrent",value:function(){this.viewPorts.pop()}},{key:"getCurrent",value:function(){var t=this.viewPorts;return t[t.length-1]}},{key:"computeSize",value:function(t){return"number"==typeof t?t:"x"===t?this.width:"y"===t?this.height:T(O(this.width,2)+O(this.height,2))/T(2)}},{key:"width",get:function(){return this.getCurrent().width}},{key:"height",get:function(){return this.getCurrent().height}}]),Do),To=(Gr(Io,[{key:"angleTo",value:function(t){return m(t.y-this.y,t.x-this.x)}},{key:"applyTransform",value:function(t){var e=this.x,n=this.y,r=e*t[0]+n*t[2]+t[4],i=e*t[1]+n*t[3]+t[5];this.x=r,this.y=i}}],[{key:"parse",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=L(t),r=Cn(n,2),i=r[0],a=void 0===i?e:i,o=r[1];return new Io(a,void 0===o?a:o)}},{key:"parsePath",value:function(t){for(var e=L(t),n=e.length,r=[],i=0;i<n;i+=2)r.push(new Io(e[i],e[i+1]));return r}}]),Io),Oo=(Gr(Ro,[{key:"isWorking",value:function(){return this.working}},{key:"start",value:function(){var t,e,n,r;this.working||(t=this.screen,e=this.onClick,n=this.onMouseMove,(r=t.ctx.canvas).onclick=e,r.onmousemove=n,this.working=!0)}},{key:"stop",value:function(){var t;this.working&&(t=this.screen.ctx.canvas,this.working=!1,t.onclick=null,t.onmousemove=null)}},{key:"hasEvents",value:function(){return this.working&&0<this.events.length}},{key:"runEvents",value:function(){var t,e,i,n;this.working&&(t=this.screen,e=this.events,i=this.eventElements,(n=t.ctx.canvas.style)&&(n.cursor=""),e.forEach(function(t,e){for(var n=t.run,r=i[e];r;)n(r),r=r.parent}),this.events=[],this.eventElements=[])}},{key:"checkPath",value:function(i,a){var t,o;this.working&&a&&(t=this.events,o=this.eventElements,t.forEach(function(t,e){var n=t.x,r=t.y;!o[e]&&a.isPointInPath&&a.isPointInPath(n,r)&&(o[e]=i)}))}},{key:"checkBoundingBox",value:function(i,a){var t,o;this.working&&a&&(t=this.events,o=this.eventElements,t.forEach(function(t,e){var n=t.x,r=t.y;!o[e]&&a.isPointInBox(n,r)&&(o[e]=i)}))}},{key:"mapXY",value:function(t,e){for(var n=this.screen,r=n.window,i=n.ctx,a=new To(t,e),o=i.canvas;o;)a.x-=o.offsetLeft,a.y-=o.offsetTop,o=o.offsetParent;return r.scrollX&&(a.x+=r.scrollX),r.scrollY&&(a.y+=r.scrollY),a}},{key:"onClick",value:function(t){var e=this.mapXY((t||event).clientX,(t||event).clientY),n=e.x,r=e.y;this.events.push({type:"onclick",x:n,y:r,run:function(t){t.onClick&&t.onClick()}})}},{key:"onMouseMove",value:function(t){var e=this.mapXY((t||event).clientX,(t||event).clientY),n=e.x,r=e.y;this.events.push({type:"onmousemove",x:n,y:r,run:function(t){t.onMouseMove&&t.onMouseMove()}})}}]),Ro),Vo="undefined"==typeof window?null:window,Lo="undefined"==typeof fetch?null:fetch.bind(window),No=(Gr(jo,[{key:"wait",value:function(t){this.waits.push(t)}},{key:"ready",value:function(){return this.readyPromise?this.readyPromise:Promise.resolve()}},{key:"isReady",value:function(){if(this.isReadyLock)return!0;var t=this.waits.every(function(t){return t()});return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t}},{key:"setDefaults",value:function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}},{key:"setViewBox",value:function(t){var e=t.document,n=t.ctx,r=t.aspectRatio,i=t.width,a=t.desiredWidth,o=t.height,s=t.desiredHeight,u=t.minX,l=void 0===u?0:u,c=t.minY,h=void 0===c?0:c,f=t.refX,g=t.refY,d=t.clip,p=t.clipX,y=void 0===p?0:p,v=t.clipY,m=void 0===v?0:v,b=F(r).replace(/^defer\s/,"").split(" "),x=Cn(b,2),w=x[0]||"xMidYMid",k=x[1]||"meet",S=i/a,P=o/s,A=B(S,P),E=M(S,P),C=a,T=s;"meet"===k&&(C*=A,T*=A),"slice"===k&&(C*=E,T*=E);var O,V,L,N,j,R,I=new Ao(e,"refX",f),D=new Ao(e,"refY",g),z=I.hasValue()&&D.hasValue();switch(z&&n.translate(-A*I.getPixels("x"),-A*D.getPixels("y")),void 0!==d&&d&&(O=A*y,V=A*m,n.beginPath(),n.moveTo(O,V),n.lineTo(i,V),n.lineTo(i,o),n.lineTo(O,o),n.closePath(),n.clip()),z||(L="meet"===k&&A===P,N="slice"===k&&E===P,j="meet"===k&&A===S,R="slice"===k&&E===S,/^xMid/.test(w)&&(L||N)&&n.translate(i/2-C/2,0),/YMid$/.test(w)&&(j||R)&&n.translate(0,o/2-T/2),/^xMax/.test(w)&&(L||N)&&n.translate(i-C,0),/YMax$/.test(w)&&(j||R)&&n.translate(0,o-T)),!0){case"none"===w:n.scale(S,P);break;case"meet"===k:n.scale(A,A);break;case"slice"===k:n.scale(E,E)}n.translate(-l,-h)}},{key:"start",value:function(e){var n,r,i,a=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.enableRedraw,s=t.ignoreMouse,u=t.ignoreAnimation,l=t.ignoreDimensions,c=void 0!==l&&l,h=t.ignoreClear,f=void 0!==h&&h,g=t.forceRedraw,d=t.scaleWidth,p=t.scaleHeight,y=t.offsetX,v=t.offsetY,m=this.FRAMERATE,b=this.mouse,x=1e3/m;this.frameDuration=x,this.readyPromise=new Promise(function(t){a.resolveReady=t}),this.isReady()&&this.render(e,c,f,d,p,y,v),void 0!==o&&o&&(n=Date.now(),r=n,void(i=0)!==s&&s||b.start(),this.intervalId=bo(function t(){n=Date.now(),x<=(i=n-r)&&(r=n-i%x,a.shouldUpdate(void 0!==u&&u,g)&&(a.render(e,c,f,d,p,y,v),b.runEvents())),a.intervalId=bo(t)}))}},{key:"stop",value:function(){this.intervalId&&(bo.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}},{key:"shouldUpdate",value:function(t,e){if(!t){var n=this.frameDuration,r=this.animations.reduce(function(t,e){return e.update(n)||t},!1);if(r)return!0}return!("function"!=typeof e||!e())||!this.isReadyLock&&this.isReady()||!!this.mouse.hasEvents()}},{key:"render",value:function(t,e,n,r,i,a,o){var s=this.CLIENT_WIDTH,u=this.CLIENT_HEIGHT,l=this.viewPort,c=this.ctx,h=this.isFirstRender,f=c.canvas;l.clear(),f.width&&f.height?l.setCurrent(f.width,f.height):l.setCurrent(s,u);var g=t.getStyle("width"),d=t.getStyle("height");!e&&(h||"number"!=typeof r&&"number"!=typeof i)&&(g.hasValue()&&(f.width=g.getPixels("x"),f.style&&(f.style.width="".concat(f.width,"px"))),d.hasValue()&&(f.height=d.getPixels("y"),f.style&&(f.style.height="".concat(f.height,"px"))));var p,y,v,m,b,x,w=f.clientWidth||f.width,k=f.clientHeight||f.height;e&&g.hasValue()&&d.hasValue()&&(w=g.getPixels("x"),k=d.getPixels("y")),l.setCurrent(w,k),"number"==typeof a&&t.getAttribute("x",!0).setValue(a),"number"==typeof o&&t.getAttribute("y",!0).setValue(o),"number"!=typeof r&&"number"!=typeof i||(p=L(t.getAttribute("viewBox").getString()),v=y=0,"number"==typeof r&&((m=t.getAttribute("width")).hasValue()?y=m.getPixels("x")/r:isNaN(p[2])||(y=p[2]/r)),"number"==typeof i&&((b=t.getAttribute("height")).hasValue()?v=b.getPixels("y")/i:isNaN(p[3])||(v=p[3]/i)),y=y||v,v=v||y,t.getAttribute("width",!0).setValue(r),t.getAttribute("height",!0).setValue(i),(x=t.getStyle("transform",!0,!0)).setValue("".concat(x.getString()," scale(").concat(1/y,", ").concat(1/v,")"))),n||c.clearRect(0,0,w,k),t.render(c),h&&(this.isFirstRender=!1)}}]),jo);function jo(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.fetch,r=void 0===n?Lo:n,i=e.window,a=void 0===i?Vo:i;_r(this,jo),this.ctx=t,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new Co,this.mouse=new Oo(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=a,this.fetch=r}function Ro(t){_r(this,Ro),this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}function Io(t,e){_r(this,Io),this.x=t,this.y=e}function Do(){_r(this,Do),this.viewPorts=[]}No.defaultWindow=Vo,No.defaultFetch=Lo;function zo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mo(t,e){return!e||"object"!==qo(e)&&"function"!=typeof e?zo(t):e}function Bo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wo(t,e)}var Fo,_o,Go=No.defaultFetch,$o="undefined"==typeof DOMParser?null:DOMParser,Uo=(Gr(Yo,[{key:"parse",value:(_o=qr(Ur.mark(function t(e){return Ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(/^</.test(e))return t.abrupt("return",this.parseFromString(e));t.next=2;break;case 2:return t.abrupt("return",this.load(e));case 3:case"end":return t.stop()}},t,this)})),function(){return _o.apply(this,arguments)})},{key:"parseFromString",value:function(e){try{return(new this.DOMParser).parseFromString(e,"image/svg+xml")}catch(t){return(new this.DOMParser).parseFromString(e,"text/xml")}}},{key:"load",value:(Fo=qr(Ur.mark(function t(e){var n,r;return Ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch(e);case 2:return n=t.sent,t.next=5,n.text();case 5:return r=t.sent,t.abrupt("return",this.parseFromString(r));case 7:case"end":return t.stop()}},t,this)})),function(){return Fo.apply(this,arguments)})}]),Yo),qo=e(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(t)}e.exports=r}),Ho=e(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),Wo=e(function(n){function r(t,e){return n.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.exports=r}),Xo=!Ti(function(t){Array.from(t)});function Yo(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.fetch,n=void 0===e?Go:e,r=t.DOMParser,i=void 0===r?$o:r;_r(this,Yo),this.fetch=n,this.DOMParser=i}ie({target:"Array",stat:!0,forced:Xo},{from:function(t){var e,n,r,i,a,o=se(t),s="function"==typeof this?this:Array,u=arguments.length,l=1<u?arguments[1]:void 0,c=void 0!==l,h=0,f=pi(o);if(c&&(l=oe(l,2<u?arguments[2]:void 0,2)),null==f||s==Array&&di(f))for(n=new s(e=Kt(o.length));h<e;h++)Ir(n,h,c?l(o[h],h):o[h]);else for(a=(i=f.call(o)).next,n=new s;!(r=a.call(i)).done;h++)Ir(n,h,c?yi(i,l,[r.value,h],!0):r.value);return n.length=h,n}});var Qo=ue("unscopables"),Zo=Array.prototype;null==Zo[Qo]&&zt(Zo,Qo,Gn(null));function Ko(t){Zo[Qo][t]=!0}var Jo=ye.includes;ie({target:"Array",proto:!0},{includes:function(t){return Jo(this,t,1<arguments.length?arguments[1]:void 0)}}),Ko("includes");var ts=De.some;ie({target:"Array",proto:!0,forced:xn("some")},{some:function(t){return ts(this,t,1<arguments.length?arguments[1]:void 0)}});var es=ue("match");ie({target:"String",proto:!0,forced:!function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[es]=!1,"/./"[e](n)}catch(e){}}}("includes")},{includes:function(t){return!!~(nt(this)+"").indexOf(function(t){if(Ha(t))throw TypeError("The method doesn't accept regular expressions");return t}(t),1<arguments.length?arguments[1]:void 0)}});var ns,rs,is,as=!J(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),os=ht("IE_PROTO"),ss=Object.prototype,us=as?Object.getPrototypeOf:function(t){return t=se(t),ot(t,os)?t[os]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ss:null},ls=ue("iterator"),cs=!1;[].keys&&("next"in(is=[].keys())?(rs=us(us(is)))!==Object.prototype&&(ns=rs):cs=!0),null==ns&&(ns={}),ot(ns,ls)||zt(ns,ls,function(){return this});function hs(){return this}function fs(){return this}function gs(t,e,n,r,i,a,o){var s,u,l;function c(t){return t===i&&v?v:!ms&&t in p?p[t]:"keys"===t||t===xs||t===ws?function(){return new n(this,t)}:function(){return new n(this)}}u=r,l=e+" Iterator",(s=n).prototype=Gn(ps,{next:tt(1,u)}),Un(s,l,!1),bi[l]=hs;var h,f,g,d=!1,p=t.prototype,y=p[bs]||p["@@iterator"]||i&&p[i],v=!ms&&y||c(i),m="Array"==e&&p.entries||y;if(m&&(h=us(m.call(new t)),vs!==Object.prototype&&h.next&&(us(h)!==vs&&(ys?ys(h,vs):"function"!=typeof h[bs]&&zt(h,bs,fs)),Un(h,e+" Iterator",!0))),i==xs&&y&&y.name!==xs&&(d=!0,v=function(){return y.call(this)}),p[bs]!==v&&zt(p,bs,v),bi[e]=v,i)if(f={values:c(xs),keys:a?v:c("keys"),entries:c(ws)},o)for(g in f)!ms&&!d&&g in p||de(p,g,f[g]);else ie({target:e,proto:!0,forced:ms||d},f);return f}var ds={IteratorPrototype:ns,BUGGY_SAFARI_ITERATORS:cs},ps=ds.IteratorPrototype,ys=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(r){}return function(t,e){return ut(t),function(t){if(!it(t)&&null!==t)throw TypeError("Can't set "+t+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),vs=ds.IteratorPrototype,ms=ds.BUGGY_SAFARI_ITERATORS,bs=ue("iterator"),xs="values",ws="entries",ks=yn.charAt,Ss="String Iterator",Ps=ge.set,As=ge.getterFor(Ss);gs(String,"String",function(t){Ps(this,{type:Ss,string:t+"",index:0})},function(){var t,e=As(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=ks(n,r),e.index+=t.length,{value:t,done:!1})});var Es,Cs=Ye.trim;ie({target:"String",proto:!0,forced:(Es="trim",J(function(){return"\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff"[Es]()||"âÂá "!="âÂá "[Es]()||"\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff"[Es].name!==Es}))},{trim:function(){return Cs(this)}});var Ts=(Gr(Os,[{key:"getAttribute",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=this.attributes[t];if(n||!e)return n||Ao.empty(this.document);var r=new Ao(this.document,t,"");return this.attributes[t]=r}},{key:"getHrefAttribute",value:function(){for(var t in this.attributes)if("href"==t||/:href$/.test(t))return this.attributes[t];return Ao.empty(this.document)}},{key:"getStyle",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=this.styles[t];if(r)return r;var i=this.getAttribute(t);if(i&&i.hasValue())return this.styles[t]=i;if(!n){var a=this.parent;if(a){var o=a.getStyle(t);if(o&&o.hasValue())return o}}if(e){var s=new Ao(this.document,t,"");return this.styles[t]=s}return r||Ao.empty(this.document)}},{key:"render",value:function(t){var e,n;"none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()&&(t.save(),this.getStyle("mask").hasValue()?(e=this.getStyle("mask").getDefinition())&&e.apply(t,this):"none"!==this.getStyle("filter").getValue("none")?(n=this.getStyle("filter").getDefinition())&&n.apply(t,this):(this.setContext(t),this.renderChildren(t),this.clearContext(t)),t.restore())}},{key:"setContext",value:function(){}},{key:"clearContext",value:function(){}},{key:"renderChildren",value:function(e){this.children.forEach(function(t){t.render(e)})}},{key:"addChild",value:function(t){var e=t instanceof Os?t:this.document.createElement(t);e.parent=this,Os.ignoreChildTypes.includes(e.type)||this.children.push(e)}},{key:"matchesSelector",value:function(e){var t=this.node;if("function"==typeof t.matches)return t.matches(e);var n=t.getAttribute("class");return!(!n||""===n)&&n.split(" ").some(function(t){if(".".concat(t)===e)return!0})}},{key:"addStylesFromStyleDefinition",value:function(){var t=this.document,e=t.styles,n=t.stylesSpecificity;for(var r in e)if("@"!==r[0]&&this.matchesSelector(r)){var i=e[r],a=n[r];if(i)for(var o in i){var s=this.stylesSpecificity[o];void 0===s&&(s="000"),s<=a&&(this.styles[o]=i[o],this.stylesSpecificity[o]=a)}}}}]),Os);function Os(a,t){var e,n,o=this,r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];_r(this,Os),this.document=a,this.node=t,this.captureTextNodes=r,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],t&&1===t.nodeType&&(Array.from(t.attributes).forEach(function(t){var e=l(t.nodeName);o.attributes[e]=new Ao(a,e,t.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(function(t){return t.trim()}).forEach(function(t){var e,n,r,i;t&&(e=t.split(":"),r=(n=Cn(e,2))[0],i=n[1],o.styles[r]=new Ao(a,r.trim(),i.trim()))}),e=a.definitions,(n=this.getAttribute("id")).hasValue()&&!e[n.getValue()]&&(e[n.getValue()]=this),Array.from(t.childNodes).forEach(function(t){var e;1===t.nodeType?o.addChild(t):!r||3!==t.nodeType&&4!==t.nodeType||0<(e=a.createTextNode(t)).getText().length&&o.addChild(e)}))}Ts.ignoreChildTypes=["title"];var Vs=(Bo(Is,Ts),Is),Ls=ye.indexOf,Ns=[].indexOf,js=!!Ns&&1/[1].indexOf(1,-0)<0,Rs=xn("indexOf");function Is(t,e,n){var r;return _r(this,Is),r=Mo(this,Ho(Is).call(this,t,e,n)),console.warn("Element ".concat(e.nodeName," not yet implemented.")),r}ie({target:"Array",proto:!0,forced:js||Rs},{indexOf:function(t){return js?Ns.apply(this,arguments)||0:Ls(this,t,1<arguments.length?arguments[1]:void 0)}});var Ds=[].reverse,zs=[1,2];ie({target:"Array",proto:!0,forced:zs+""==zs.reverse()+""},{reverse:function(){return Ve(this)&&(this.length=this.length),Ds.call(this)}});var Ms=e(function(r){function i(t,e,n){return r.exports=i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ho(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},i(t,e,n||t)}r.exports=i}),Bs=(Gr(Fs,[{key:"toString",value:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,(t=this.fontFamily,"undefined"==typeof process?t:t.trim().split(",").map(_).join(","))].join(" ");var t}}],[{key:"parse",value:function(){var t=1<arguments.length?arguments[1]:void 0,r="",i="",a="",o="",s="",e=F(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").trim().split(" "),u={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return e.forEach(function(t){switch(!0){case!u.fontStyle&&Fs.styles.includes(t):"inherit"!==t&&(r=t),u.fontStyle=!0;break;case!u.fontVariant&&Fs.variants.includes(t):"inherit"!==t&&(i=t),u.fontStyle=!0,u.fontVariant=!0;break;case!u.fontWeight&&Fs.weights.includes(t):"inherit"!==t&&(a=t),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0;break;case!u.fontSize:var e,n;"inherit"!==t&&(e=t.split("/"),n=Cn(e,1),o=n[0]),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0,u.fontSize=!0;break;default:"inherit"!==t&&(s+=t)}}),new Fs(r,i,a,o,s,t)}}]),Fs);function Fs(t,e,n,r,i,a){_r(this,Fs);var o=a?"string"==typeof a?Fs.parse(a):a:{};this.fontFamily=i||o.fontFamily,this.fontSize=r||o.fontSize,this.fontStyle=t||o.fontStyle,this.fontWeight=n||o.fontWeight,this.fontVariant=e||o.fontVariant}Bs.styles="normal|italic|oblique|inherit",Bs.variants="normal|small-caps|inherit",Bs.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";function _s(t,e,n){var r,i;return ys&&"function"==typeof(r=e.constructor)&&r!==n&&it(i=r.prototype)&&i!==n.prototype&&ys(t,i),t}function Gs(t){var e,n,r,i,a,o,s,u,l=at(t,!1);if("string"==typeof l&&2<l.length)if(43===(e=(l=Hs(l)).charCodeAt(0))||45===e){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(o=(a=l.slice(2)).length,s=0;s<o;s++)if((u=a.charCodeAt(s))<48||i<u)return NaN;return parseInt(a,r)}return+l}var $s=xe.f,Us=Rt.f,qs=Dt.f,Hs=Ye.trim,Ws="Number",Xs=wt[Ws],Ys=Xs.prototype,Qs=et(Gn(Ys))==Ws;if(Te(Ws,!Xs(" 0o1")||!Xs("0b1")||Xs("+0x1"))){for(var Zs,Ks=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Ks&&(Qs?J(function(){Ys.valueOf.call(n)}):et(n)!=Ws)?_s(new Xs(Gs(e)),n,Ks):Gs(e)},Js=kt?$s(Xs):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),tu=0;Js.length>tu;tu++)ot(Xs,Zs=Js[tu])&&!ot(Ks,Zs)&&qs(Ks,Zs,Us(Xs,Zs));(Ks.prototype=Ys).constructor=Ks,de(wt,Ws,Ks)}var eu=(Gr(su,[{key:"addPoint",value:function(t,e){void 0!==t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),void 0!==e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}},{key:"addX",value:function(t){this.addPoint(t,null)}},{key:"addY",value:function(t){this.addPoint(null,t)}},{key:"addBoundingBox",value:function(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2;this.addPoint(e,n),this.addPoint(r,i)}},{key:"sumCubic",value:function(t,e,n,r,i){return O(1-t,3)*e+3*O(1-t,2)*t*n+3*(1-t)*O(t,2)*r+O(t,3)*i}},{key:"bezierCurveAdd",value:function(t,e,n,r,i){var a=6*e-12*n+6*r,o=-3*e+9*n-9*r+3*i,s=3*n-3*e;if(0!=o){var u,l,c=O(a,2)-4*s*o;c<0||(0<(u=(-a+T(c))/(2*o))&&u<1&&(t?this.addX(this.sumCubic(u,e,n,r,i)):this.addY(this.sumCubic(u,e,n,r,i))),0<(l=(-a-T(c))/(2*o))&&l<1&&(t?this.addX(this.sumCubic(l,e,n,r,i)):this.addY(this.sumCubic(l,e,n,r,i))))}else{if(0==a)return;var h=-s/a;0<h&&h<1&&(t?this.addX(this.sumCubic(h,e,n,r,i)):this.addY(this.sumCubic(h,e,n,r,i)))}}},{key:"addBezierCurve",value:function(t,e,n,r,i,a,o,s){this.addPoint(t,e),this.addPoint(o,s),this.bezierCurveAdd(!0,t,n,i,o),this.bezierCurveAdd(!1,e,r,a,s)}},{key:"addQuadraticCurve",value:function(t,e,n,r,i,a){var o=t+2/3*(n-t),s=e+2/3*(r-e);this.addBezierCurve(t,e,o,o+1/3*(i-t),s,s+1/3*(a-e),i,a)}},{key:"isPointInBox",value:function(t,e){var n=this.x1,r=this.y1,i=this.x2,a=this.y2;return n<=t&&t<=i&&r<=e&&e<=a}},{key:"x",get:function(){return this.x1}},{key:"y",get:function(){return this.y1}},{key:"width",get:function(){return this.x2-this.x1}},{key:"height",get:function(){return this.y2-this.y1}}]),su),nu="toString",ru=RegExp.prototype,iu=ru[nu],au=J(function(){return"/a/b"!=iu.call({source:"a",flags:"b"})}),ou=iu.name!=nu;function su(){var t=Number.NaN,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t;_r(this,su),this.x1=e,this.y1=n,this.x2=r,this.y2=i,this.addPoint(e,n),this.addPoint(r,i)}(au||ou)&&de(RegExp.prototype,nu,function(){var t=ut(this),e=t.source+"",n=t.flags;return"/"+e+"/"+((void 0===n&&t instanceof RegExp&&!("flags"in ru)?Je.call(t):n)+"")},{unsafe:!0});var uu=(Gr(Su,[{key:"apply",value:function(t){var e=this.point,n=e.x,r=e.y;t.translate(n||0,r||0)}},{key:"unapply",value:function(t){var e=this.point,n=e.x,r=e.y;t.translate(-1*n||0,-1*r||0)}},{key:"applyToPoint",value:function(t){var e=this.point,n=e.x,r=e.y;t.applyTransform([1,0,0,1,n||0,r||0])}}]),Su),lu=(Gr(ku,[{key:"apply",value:function(t){var e=this.cx,n=this.cy,r=this.angle;t.translate(e,n),t.rotate(r.getRadians()),t.translate(-e,-n)}},{key:"unapply",value:function(t){var e=this.cx,n=this.cy,r=this.angle;t.translate(e,n),t.rotate(-1*r.getRadians()),t.translate(-e,-n)}},{key:"applyToPoint",value:function(t){var e=this.cx,n=this.cy,r=this.angle.getRadians();t.applyTransform([1,0,0,1,e||0,n||0]),t.applyTransform([C(r),E(r),-E(r),C(r),0,0]),t.applyTransform([1,0,0,1,-e||0,-n||0])}}]),ku),cu=(Gr(wu,[{key:"apply",value:function(t){var e=this.scale,n=e.x,r=e.y;t.scale(n,r||n)}},{key:"unapply",value:function(t){var e=this.scale,n=e.x,r=e.y;t.scale(1/n,1/r||n)}},{key:"applyToPoint",value:function(t){var e=this.scale,n=e.x,r=e.y;t.applyTransform([n||0,0,0,r||0,0,0])}}]),wu),hu=(Gr(xu,[{key:"apply",value:function(t){var e=this.matrix;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},{key:"unapply",value:function(t){var e=this.matrix,n=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],u=1/(n*(o-0*s)-r*(a-0*s)+i*(0*a-0*o));t.transform(u*(o-0*s),u*(0*s-a),u*(0*i-r),u*(n-0*i),u*(r*s-i*o),u*(i*a-n*s))}},{key:"applyToPoint",value:function(t){t.applyTransform(this.matrix)}}]),xu),fu=(Bo(bu,hu),bu),gu=(Bo(mu,fu),mu),du=(Bo(vu,fu),vu),pu=(Gr(yu,[{key:"apply",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].apply(t)}},{key:"unapply",value:function(t){for(var e=this.transforms,n=e.length-1;0<=n;n--)e[n].unapply(t)}},{key:"applyToPoint",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].applyToPoint(t)}}],[{key:"fromElement",value:function(t,e){var n=e.getStyle("transform",!1,!0),r=e.getStyle("transform-origin",!1,!0);return n.hasValue()?new yu(t,n.getString(),r.getString()):null}}]),yu);function yu(t,e,n){var c=this;_r(this,yu),this.document=t,this.transforms=[];var r=F(e).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),h=n?L(n):[];r.forEach(function(t){var e,n,r,i,a,o,s,u,l;"none"!==t&&(o=t.split("("),s=Cn(o,2),u=s[0],l=s[1],e=[u.trim(),l.trim().replace(")","")],r=(n=Cn(e,2))[0],i=n[1],void 0!==(a=yu.transformTypes[r])&&c.transforms.push(new a(c.document,i,h)))})}function vu(t,e){var n;return _r(this,vu),(n=Mo(this,Ho(vu).call(this,t,e))).type="skewY",n.matrix=[1,r(n.angle.getRadians()),0,1,0,0],n}function mu(t,e){var n;return _r(this,mu),(n=Mo(this,Ho(mu).call(this,t,e))).type="skewX",n.matrix=[1,0,r(n.angle.getRadians()),1,0,0],n}function bu(t,e){var n;return _r(this,bu),(n=Mo(this,Ho(bu).call(this,t,e))).type="skew",n.angle=null,n.angle=new Ao(t,"angle",e),n}function xu(t,e){_r(this,xu),this.type="matrix",this.matrix=[],this.matrix=L(e)}function wu(t,e){_r(this,wu),this.type="scale",this.scale=null;var n=To.parse(e,1);0!==n.x&&0!==n.y||(n.x=In,n.y=In),this.scale=n}function ku(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];_r(this,ku),this.type="rotate",this.angle=null,this.cx=0,this.cy=0;var r=L(e);this.angle=new Ao(t,"angle",r[0]),this.cx=(r[1]||0)+(n[0]||0),this.cy=(r[2]||0)+(n[1]||0)}function Su(t,e){_r(this,Su),this.type="translate",this.point=null,this.point=To.parse(e)}pu.transformTypes={translate:uu,rotate:lu,scale:cu,matrix:hu,skewX:gu,skewY:du};var Pu=(Bo(Lu,Ts),Gr(Lu,[{key:"calculateOpacity",value:function(){for(var t,e=1,n=this;n;)(t=n.getStyle("opacity",!1,!0)).hasValue()&&(e*=t.getNumber()),n=n.parent;return e}},{key:"setContext",value:function(t){var e,n,r,i,a,o,s,u,l,c,h,f,g,d,p,y,v,m,b,x,w,k,S,P,A,E,C;1<arguments.length&&void 0!==arguments[1]&&arguments[1]||(e=this.getStyle("fill"),n=this.getStyle("fill-opacity"),r=this.getStyle("stroke"),i=this.getStyle("stroke-opacity"),e.isUrlDefinition()?(a=e.getFillStyleDefinition(this,n))&&(t.fillStyle=a):e.hasValue()&&("currentColor"===e.getString()&&e.setValue(this.getStyle("color").getValue()),"inherit"!==(o=e.getString())&&(t.fillStyle="none"===o?"rgba(0,0,0,0)":o)),n.hasValue()&&(s=new Ao(this.document,"fill",t.fillStyle).addOpacity(n).getString(),t.fillStyle=s),r.isUrlDefinition()?(u=r.getFillStyleDefinition(this,i))&&(t.strokeStyle=u):r.hasValue()&&("currentColor"===r.getString()&&r.setValue(this.getStyle("color").getValue()),"inherit"!==(l=r.getString())&&(t.strokeStyle="none"===l?"rgba(0,0,0,0)":l)),i.hasValue()&&(c=new Ao(this.document,"stroke",t.strokeStyle).addOpacity(i).getString(),t.strokeStyle=c),(h=this.getStyle("stroke-width")).hasValue()&&(f=h.getPixels(),t.lineWidth=f||In),g=this.getStyle("stroke-linecap"),d=this.getStyle("stroke-linejoin"),p=this.getStyle("stroke-miterlimit"),y=this.getStyle("paint-order"),v=this.getStyle("stroke-dasharray"),m=this.getStyle("stroke-dashoffset"),g.hasValue()&&(t.lineCap=g.getString()),d.hasValue()&&(t.lineJoin=d.getString()),p.hasValue()&&(t.miterLimit=p.getNumber()),y.hasValue()&&(t.paintOrder=y.getValue()),v.hasValue()&&"none"!==v.getString()&&(b=L(v.getString()),void 0===t.setLineDash?void 0===t.webkitLineDash?void 0===t.mozDash||1===b.length&&0===b[0]||(t.mozDash=b):t.webkitLineDash=b:t.setLineDash(b),x=m.getPixels(),void 0===t.lineDashOffset?void 0===t.webkitLineDashOffset?void 0!==t.mozDashOffset&&(t.mozDashOffset=x):t.webkitLineDashOffset=x:t.lineDashOffset=x)),this.modifiedEmSizeStack=!1,void 0!==t.font&&(w=this.getStyle("font"),k=this.getStyle("font-style"),S=this.getStyle("font-variant"),P=this.getStyle("font-weight"),A=this.getStyle("font-size"),E=this.getStyle("font-family"),C=new Bs(k.getString(),S.getString(),P.getString(),A.hasValue()?"".concat(A.getPixels(!0),"px"):"",E.getString(),Bs.parse(w.getString(),t.font)),k.setValue(C.fontStyle),S.setValue(C.fontVariant),P.setValue(C.fontWeight),A.setValue(C.fontSize),E.setValue(C.fontFamily),t.font=C.toString(),A.isPixels()&&(this.document.emSize=A.getPixels(),this.modifiedEmSizeStack=!0));var T=pu.fromElement(this.document,this);T&&T.apply(t);var O,V=this.getStyle("clip-path",!1,!0);!V.hasValue()||(O=V.getDefinition())&&O.apply(t),t.globalAlpha=this.calculateOpacity()}},{key:"clearContext",value:function(t){Ms(Ho(Lu.prototype),"clearContext",this).call(this,t),this.modifiedEmSizeStack&&this.document.popEmSize()}}]),Lu),Au=(Bo(Vu,Pu),Gr(Vu,[{key:"setContext",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];Ms(Ho(Vu.prototype),"setContext",this).call(this,t,e);var n=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();n&&(t.textBaseline=n)}},{key:"initializeCoordinates",value:function(t){this.x=this.getAttribute("x").getPixels("x"),this.y=this.getAttribute("y").getPixels("y");var e=this.getAttribute("dx"),n=this.getAttribute("dy");e.hasValue()&&(this.x+=e.getPixels("x")),n.hasValue()&&(this.y+=n.getPixels("y")),this.x+=this.getAnchorDelta(t,this,0)}},{key:"getBoundingBox",value:function(r){var i=this;if("text"!==this.type)return this.getTElementBoundingBox(r);this.initializeCoordinates(r);var a=null;return this.children.forEach(function(t,e){var n=i.getChildBoundingBox(r,i,i,e);a?a.addBoundingBox(n):a=n}),a}},{key:"getFontSize",value:function(){var t=this.document,e=this.parent,n=Bs.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(n)}},{key:"getTElementBoundingBox",value:function(t){var e=this.getFontSize();return new eu(this.x,this.y-e,this.x+this.measureText(t),this.y)}},{key:"getGlyph",value:function(t,e,n){var r,i,a,o,s=e[n],u=null;return t.isArabic?(r=e.length,i=e[n-1],a=e[n+1],o=0<n&&" "!==i&&(n===r-1||" "===a)?"initial":0<n&&" "!==i&&n<r-2&&" "!==a?"medial":(0===n||" "===i)&&n<r-2&&" "!==a?"terminal":"isolated",void 0!==t.glyphs[s]&&((u=t.glyphs[s][o])||"glyph"!==t.glyphs[s].type||(u=t.glyphs[s]))):u=t.glyphs[s],u=u||t.missingGlyph}},{key:"getText",value:function(){return""}},{key:"getTextFromNode",value:function(t){var e=t||this.node,n=Array.from(e.parentNode.childNodes),r=n.indexOf(e),i=n.length-1,a=F(e.value||e.text||e.textContent||"");return 0===r?a=s(a):r===i&&(a=u(a)),a}},{key:"renderChildren",value:function(n){var t,r=this;"text"===this.type?(this.initializeCoordinates(n),this.children.forEach(function(t,e){r.renderChild(n,r,r,e)}),(t=this.document.screen.mouse).isWorking()&&t.checkBoundingBox(this,this.getBoundingBox(n))):this.renderTElementChildren(n)}},{key:"renderTElementChildren",value:function(t){var e=this.document,n=this.parent,r=this.getText(),i=n.getStyle("font-family").getDefinition();if(i)for(var a,o=i.fontFace.unitsPerEm,s=Bs.parse(e.ctx.font),u=n.getStyle("font-size").getNumber(s.fontSize),l=n.getStyle("font-style").getString(s.fontStyle),c=u/o,h=i.isRTL?r.split("").reverse().join(""):r,f=L(n.getAttribute("dx").getString()),g=h.length,d=0;d<g;d++){a=this.getGlyph(i,h,d),t.translate(this.x,this.y),t.scale(c,-c);var p=t.lineWidth;t.lineWidth=t.lineWidth*o/u,"italic"===l&&t.transform(1,0,.4,1,0,0),a.render(t),"italic"===l&&t.transform(1,0,-.4,1,0,0),t.lineWidth=p,t.scale(1/c,-1/c),t.translate(-this.x,-this.y),this.x+=u*(a.horizAdvX||i.horizAdvX)/o,void 0===f[d]||isNaN(f[d])||(this.x+=f[d])}else{var y=this.x,v=this.y;"stroke"===t.paintOrder?(t.strokeStyle&&t.strokeText(r,y,v),t.fillStyle&&t.fillText(r,y,v)):(t.fillStyle&&t.fillText(r,y,v),t.strokeStyle&&t.strokeText(r,y,v))}}},{key:"getAnchorDelta",value:function(t,e,n){var r=this.getStyle("text-anchor").getString("start");if("start"===r)return 0;for(var i=e.children,a=i.length,o=null,s=0,u=n;u<a&&(o=i[u],!(n<u&&o.getAttribute("x").hasValue()||o.getAttribute("text-anchor").hasValue()));u++)s+=o.measureTextRecursive(t);return-1*("end"===r?s:s/2)}},{key:"adjustChildCoordinates",value:function(t,e,n,r){var i=n.children[r];if("function"!=typeof i.measureText)return i;var a,o,s=i.getAttribute("x"),u=i.getAttribute("y"),l=i.getAttribute("dx"),c=i.getAttribute("dy"),h=i.getAttribute("text-anchor").getString("start");return 0===r&&"textNode"!==i.type&&(s.hasValue()||s.setValue(e.getAttribute("x").getValue("0")),u.hasValue()||u.setValue(e.getAttribute("y").getValue("0")),l.hasValue()||l.setValue(e.getAttribute("dx").getValue("0")),c.hasValue()||c.setValue(e.getAttribute("dy").getValue("0"))),s.hasValue()?(i.x=s.getPixels("x")+e.getAnchorDelta(t,n,r),"start"!==h&&(a=i.measureTextRecursive(t),i.x+=-1*("end"===h?a:a/2)),l.hasValue()&&(i.x+=l.getPixels("x"))):("start"!==h&&(o=i.measureTextRecursive(t),e.x+=-1*("end"===h?o:o/2)),l.hasValue()&&(e.x+=l.getPixels("x")),i.x=e.x),e.x=i.x+i.measureText(t),u.hasValue()?(i.y=u.getPixels("y"),c.hasValue()&&(i.y+=c.getPixels("y"))):(c.hasValue()&&(e.y+=c.getPixels("y")),i.y=e.y),e.y=i.y,i}},{key:"getChildBoundingBox",value:function(r,i,t,e){var a=this.adjustChildCoordinates(r,i,t,e),o=a.getBoundingBox(r);return a.children.forEach(function(t,e){var n=i.getChildBoundingBox(r,i,a,e);o.addBoundingBox(n)}),o}},{key:"renderChild",value:function(n,r,t,e){var i=this.adjustChildCoordinates(n,r,t,e);i.render(n),i.children.forEach(function(t,e){r.renderChild(n,r,i,e)})}},{key:"measureTextRecursive",value:function(n){return this.children.reduce(function(t,e){return t+e.measureTextRecursive(n)},this.measureText(n))}},{key:"measureText",value:function(t){var e=this.measureCache;if(~e)return e;var n=this.getText(),r=this.measureTargetText(t,n);return this.measureCache=r}},{key:"measureTargetText",value:function(t,e){if(!e.length)return 0;var n=this.parent,r=n.getStyle("font-family").getDefinition();if(r){for(var i=this.getFontSize(),a=r.isRTL?e.split("").reverse().join(""):e,o=L(n.getAttribute("dx").getString()),s=a.length,u=0,l=0;l<s;l++)u+=(this.getGlyph(r,a,l).horizAdvX||r.horizAdvX)*i/r.fontFace.unitsPerEm,void 0===o[l]||isNaN(o[l])||(u+=o[l]);return u}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);var c=t.measureText(e).width;return t.restore(),c}}]),Vu),Eu=(Bo(Ou,Au),Gr(Ou,[{key:"getText",value:function(){return this.text}}]),Ou),Cu=(Bo(Tu,Eu),Tu);function Tu(){var t;return _r(this,Tu),(t=Mo(this,Ho(Tu).apply(this,arguments))).type="textNode",t}function Ou(t,e,n){var r;return _r(this,Ou),(r=Mo(this,Ho(Ou).call(this,t,e,(this instanceof Ou?this.constructor:void 0)===Ou||n))).type="tspan",r.text=0<r.children.length?"":r.getTextFromNode(),r}function Vu(t,e,n){var r;return _r(this,Vu),(r=Mo(this,Ho(Vu).call(this,t,e,(this instanceof Vu?this.constructor:void 0)===Vu||n))).type="text",r.x=0,r.y=0,r.measureCache=-1,r}function Lu(){var t;return _r(this,Lu),(t=Mo(this,Ho(Lu).apply(this,arguments))).modifiedEmSizeStack=!1,t}ie({target:"Array",proto:!0},{fill:function(t){for(var e=se(this),n=Kt(e.length),r=arguments.length,i=Jt(1<r?arguments[1]:void 0,n),a=2<r?arguments[2]:void 0,o=void 0===a?n:Jt(a,n);i<o;)e[i++]=t;return e}}),Ko("fill");var Nu=(Gr(Qu,[{key:"reset",value:function(){this.i=-1,this.command="",this.previousCommand="",this.start=new To(0,0),this.control=new To(0,0),this.current=new To(0,0),this.points=[],this.angles=[]}},{key:"isEnd",value:function(){return this.i>=this.tokens.length-1}},{key:"isCommandOrEnd",value:function(){if(this.isEnd())return!0;var t=this.i,e=this.tokens;return/^[A-Za-z]$/.test(e[t+1])}},{key:"isRelativeCommand",value:function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0;default:return!1}}},{key:"getToken",value:function(){return this.i++,this.tokens[this.i]}},{key:"getScalar",value:function(){return parseFloat(this.getToken())}},{key:"nextCommand",value:function(){this.previousCommand=this.command,this.command=this.getToken()}},{key:"getPoint",value:function(){var t=new To(this.getScalar(),this.getScalar());return this.makeAbsolute(t)}},{key:"getAsControlPoint",value:function(){var t=this.getPoint();return this.control=t}},{key:"getAsCurrentPoint",value:function(){var t=this.getPoint();return this.current=t}},{key:"getReflectedControlPoint",value:function(){var t=this.previousCommand.toLowerCase();if("c"!==t&&"s"!==t&&"q"!==t&&"t"!==t)return this.current;var e=this.current,n=e.x,r=e.y,i=this.control,a=i.x,o=i.y;return new To(2*n-a,2*r-o)}},{key:"makeAbsolute",value:function(t){var e,n,r;return this.isRelativeCommand()&&(n=(e=this.current).x,r=e.y,t.x+=n,t.y+=r),t}},{key:"addMarker",value:function(t,e,n){var r=this.points,i=this.angles;n&&0<i.length&&!i[i.length-1]&&(i[i.length-1]=r[r.length-1].angleTo(n)),this.addMarkerAngle(t,e?e.angleTo(t):null)}},{key:"addMarkerAngle",value:function(t,e){this.points.push(t),this.angles.push(e)}},{key:"getMarkerPoints",value:function(){return this.points}},{key:"getMarkerAngles",value:function(){for(var t=this.angles,e=t.length,n=0;n<e;n++)if(!t[n])for(var r=n+1;r<e;r++)if(t[r]){t[n]=t[r];break}return t}}]),Qu),ju=(Bo(Yu,Pu),Gr(Yu,[{key:"path",value:function(t){var e=this.pathParser,n=new eu;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.nextCommand(),e.command){case"M":case"m":this.pathM(t,n);break;case"L":case"l":this.pathL(t,n);break;case"H":case"h":this.pathH(t,n);break;case"V":case"v":this.pathV(t,n);break;case"C":case"c":this.pathC(t,n);break;case"S":case"s":this.pathS(t,n);break;case"Q":case"q":this.pathQ(t,n);break;case"T":case"t":this.pathT(t,n);break;case"A":case"a":this.pathA(t,n);break;case"Z":case"z":this.pathZ(t,n)}return n}},{key:"getBoundingBox",value:function(){return this.path()}},{key:"getMarkers",value:function(){var t=this.pathParser,e=t.getMarkerPoints(),n=t.getMarkerAngles();return e.map(function(t,e){return[t,n[e]]})}},{key:"renderChildren",value:function(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var e=this.getStyle("fill-rule");""!==t.fillStyle&&("inherit"===e.getString("inherit")?t.fill():t.fill(e.getString())),""!==t.strokeStyle&&t.stroke();var n=this.getMarkers();if(n){var r,i,a,o,s,u,l,c,h=n.length-1,f=this.getStyle("marker-start"),g=this.getStyle("marker-mid"),d=this.getStyle("marker-end");if(f.isUrlDefinition()&&(r=f.getDefinition(),a=(i=Cn(n[0],2))[0],o=i[1],r.render(t,a,o)),g.isUrlDefinition())for(var p=g.getDefinition(),y=1;y<h;y++){var v=Cn(n[y],2),m=v[0],b=v[1];p.render(t,m,b)}d.isUrlDefinition()&&(s=d.getDefinition(),l=(u=Cn(n[h],2))[0],c=u[1],s.render(t,l,c))}}},{key:"pathM",value:function(t,e){var n=this.pathParser,r=n.getAsCurrentPoint(),i=r.x,a=r.y;for(n.addMarker(r),e.addPoint(i,a),t&&t.moveTo(i,a),n.start=n.current;!n.isCommandOrEnd();){var o=n.getAsCurrentPoint(),s=o.x,u=o.y;n.addMarker(o,n.start),e.addPoint(s,u),t&&t.lineTo(s,u)}}},{key:"pathL",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getAsCurrentPoint(),a=i.x,o=i.y;n.addMarker(i,r),e.addPoint(a,o),t&&t.lineTo(a,o)}}},{key:"pathH",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=new To((n.isRelativeCommand()?r.x:0)+n.getScalar(),r.y);n.addMarker(i,r),n.current=i,e.addPoint(i.x,i.y),t&&t.lineTo(i.x,i.y)}}},{key:"pathV",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=new To(r.x,(n.isRelativeCommand()?r.y:0)+n.getScalar());n.addMarker(i,r),n.current=i,e.addPoint(i.x,i.y),t&&t.lineTo(i.x,i.y)}}},{key:"pathC",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getPoint(),a=n.getAsControlPoint(),o=n.getAsCurrentPoint();n.addMarker(o,a,i),e.addBezierCurve(r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}}},{key:"pathS",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getReflectedControlPoint(),a=n.getAsControlPoint(),o=n.getAsCurrentPoint();n.addMarker(o,a,i),e.addBezierCurve(r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}}},{key:"pathQ",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getAsControlPoint(),a=n.getAsCurrentPoint();n.addMarker(a,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,a.x,a.y),t&&t.quadraticCurveTo(i.x,i.y,a.x,a.y)}}},{key:"pathT",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getReflectedControlPoint();n.control=i;var a=n.getAsCurrentPoint();n.addMarker(a,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,a.x,a.y),t&&t.quadraticCurveTo(i.x,i.y,a.x,a.y)}}},{key:"pathA",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getScalar(),a=n.getScalar(),o=n.getScalar()*(A/180),s=n.getScalar(),u=n.getScalar(),l=n.getAsCurrentPoint(),c=new To(C(o)*(r.x-l.x)/2+E(o)*(r.y-l.y)/2,-E(o)*(r.x-l.x)/2+C(o)*(r.y-l.y)/2),h=O(c.x,2)/O(i,2)+O(c.y,2)/O(a,2);1<h&&(i*=T(h),a*=T(h));var f=(s===u?-1:1)*T((O(i,2)*O(a,2)-O(i,2)*O(c.y,2)-O(a,2)*O(c.x,2))/(O(i,2)*O(c.y,2)+O(a,2)*O(c.x,2)));isNaN(f)&&(f=0);var g=new To(f*i*c.y/a,f*-a*c.x/i),d=new To((r.x+l.x)/2+C(o)*g.x-E(o)*g.y,(r.y+l.y)/2+E(o)*g.x+C(o)*g.y),p=N([1,0],[(c.x-g.x)/i,(c.y-g.y)/a]),y=[(c.x-g.x)/i,(c.y-g.y)/a],v=[(-c.x-g.x)/i,(-c.y-g.y)/a],m=N(y,v);V(y,v)<=-1&&(m=A),1<=V(y,v)&&(m=0);var b,x,w,k=1-u?1:-1,S=p+m/2*k,P=new To(d.x+i*C(S),d.y+a*E(S));n.addMarkerAngle(P,S-k*A/2),n.addMarkerAngle(l,S-k*A),e.addPoint(l.x,l.y),!t||isNaN(p)||isNaN(m)||(b=a<i?i:a,x=a<i?1:i/a,w=a<i?a/i:1,t.translate(d.x,d.y),t.rotate(o),t.scale(x,w),t.arc(0,0,b,p,p+m,!!(1-u)),t.scale(1/x,1/w),t.rotate(-o),t.translate(-d.x,-d.y))}}},{key:"pathZ",value:function(t,e){var n=this.pathParser;t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath(),n.current=n.start}}]),Yu),Ru=(Bo(Xu,Pu),Gr(Xu,[{key:"clearContext",value:function(t){Ms(Ho(Xu.prototype),"clearContext",this).call(this,t),this.document.screen.viewPort.removeCurrent()}},{key:"setContext",value:function(t){var e,n=this.document,r=n.screen,i=n.window,a=t.canvas;r.setDefaults(t),a.style&&void 0!==t.font&&i&&void 0!==i.getComputedStyle&&(t.font=i.getComputedStyle(a).getPropertyValue("font"),(e=new Ao(n,"fontSize",Bs.parse(t.font).fontSize)).hasValue()&&(n.rootEmSize=e.getPixels("y"),n.emSize=n.rootEmSize)),Ms(Ho(Xu.prototype),"setContext",this).call(this,t),this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y"));var o=r.viewPort,s=o.width,u=o.height;this.getAttribute("width").hasValue()||this.getAttribute("width",!0).setValue("100%"),this.getAttribute("height").hasValue()||this.getAttribute("height",!0).setValue("100%");var l=this.getAttribute("refX"),c=this.getAttribute("refY"),h=this.getAttribute("viewBox"),f=h.hasValue()?L(h.getString()):null,g=!this.root&&"visible"!==this.getAttribute("overflow").getValue("hidden"),d=0,p=0,y=0,v=0;f&&(d=f[0],p=f[1]),this.root||(s=this.getAttribute("width").getPixels("x"),u=this.getAttribute("height").getPixels("y"),"marker"===this.type&&(y=d,v=p,p=d=0)),r.viewPort.setCurrent(s,u),f&&(s=f[2],u=f[3]),n.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:r.viewPort.width,desiredWidth:s,height:r.viewPort.height,desiredHeight:u,minX:d,minY:p,refX:l.getValue(),refY:c.getValue(),clip:g,clipX:y,clipY:v}),f&&(r.viewPort.removeCurrent(),r.viewPort.setCurrent(s,u))}},{key:"resize",value:function(t){var e,n,r,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],o=this.getAttribute("width",!0),s=this.getAttribute("height",!0),u=this.getAttribute("viewBox"),l=this.getAttribute("style"),c=o.getNumber(0),h=s.getNumber(0);a&&("string"==typeof a?this.getAttribute("preserveAspectRatio",!0).setValue(a):(e=this.getAttribute("preserveAspectRatio")).hasValue()&&e.setValue(e.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))),o.setValue(t),s.setValue(i),u.hasValue()||u.setValue("0 0 ".concat(c||t," ").concat(h||i)),l.hasValue()&&(n=this.getStyle("width"),r=this.getStyle("height"),n.hasValue()&&n.setValue("".concat(t,"px")),r.hasValue()&&r.setValue("".concat(i,"px")))}}]),Xu),Iu=(Bo(Wu,ju),Gr(Wu,[{key:"path",value:function(t){var e,n=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),i=this.getAttribute("width").getPixels("x"),a=this.getAttribute("height").getPixels("y"),o=this.getAttribute("rx"),s=this.getAttribute("ry"),u=o.getPixels("x"),l=s.getPixels("y");return o.hasValue()&&!s.hasValue()&&(l=u),s.hasValue()&&!o.hasValue()&&(u=l),u=B(u,i/2),l=B(l,a/2),t&&(e=(T(2)-1)/3*4,t.beginPath(),0<a&&0<i&&(t.moveTo(n+u,r),t.lineTo(n+i-u,r),t.bezierCurveTo(n+i-u+e*u,r,n+i,r+l-e*l,n+i,r+l),t.lineTo(n+i,r+a-l),t.bezierCurveTo(n+i,r+a-l+e*l,n+i-u+e*u,r+a,n+i-u,r+a),t.lineTo(n+u,r+a),t.bezierCurveTo(n+u-e*u,r+a,n,r+a-l+e*l,n,r+a-l),t.lineTo(n,r+l),t.bezierCurveTo(n,r+l-e*l,n+u-e*u,r,n+u,r),t.closePath())),new eu(n,r,n+i,r+a)}},{key:"getMarkers",value:function(){return null}}]),Wu),Du=(Bo(Hu,ju),Gr(Hu,[{key:"path",value:function(t){var e=this.getAttribute("cx").getPixels("x"),n=this.getAttribute("cy").getPixels("y"),r=this.getAttribute("r").getPixels();return t&&0<r&&(t.beginPath(),t.arc(e,n,r,0,2*A,!1),t.closePath()),new eu(e-r,n-r,e+r,n+r)}},{key:"getMarkers",value:function(){return null}}]),Hu),zu=(Bo(qu,ju),Gr(qu,[{key:"path",value:function(t){var e=(T(2)-1)/3*4,n=this.getAttribute("rx").getPixels("x"),r=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return t&&(t.beginPath(),t.moveTo(i+n,a),t.bezierCurveTo(i+n,a+e*r,i+e*n,a+r,i,a+r),t.bezierCurveTo(i-e*n,a+r,i-n,a+e*r,i-n,a),t.bezierCurveTo(i-n,a-e*r,i-e*n,a-r,i,a-r),t.bezierCurveTo(i+e*n,a-r,i+n,a-e*r,i+n,a),t.closePath()),new eu(i-n,a-r,i+n,a+r)}},{key:"getMarkers",value:function(){return null}}]),qu),Mu=(Bo(Uu,ju),Gr(Uu,[{key:"getPoints",value:function(){return[new To(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new To(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}},{key:"path",value:function(t){var e=this.getPoints(),n=Cn(e,2),r=n[0],i=r.x,a=r.y,o=n[1],s=o.x,u=o.y;return t&&(t.beginPath(),t.moveTo(i,a),t.lineTo(s,u)),new eu(i,a,s,u)}},{key:"getMarkers",value:function(){var t=this.getPoints(),e=Cn(t,2),n=e[0],r=e[1],i=n.angleTo(r);return[[n,i],[r,i]]}}]),Uu),Bu=(Bo($u,ju),Gr($u,[{key:"path",value:function(r){var t=this.points,e=Cn(t,1)[0],n=e.x,i=e.y,a=new eu(n,i);return r&&(r.beginPath(),r.moveTo(n,i)),t.forEach(function(t){var e=t.x,n=t.y;a.addPoint(e,n),r&&r.lineTo(e,n)}),a}},{key:"getMarkers",value:function(){var n=this.points,r=n.length-1,i=[];return n.forEach(function(t,e){e===r||i.push([t,t.angleTo(n[e+1])])}),0<i.length&&i.push([n[n.length-1],i[i.length-1][1]]),i}}]),$u),Fu=(Bo(Gu,Bu),Gr(Gu,[{key:"path",value:function(t){var e=Ms(Ho(Gu.prototype),"path",this).call(this,t),n=Cn(this.points,1)[0],r=n.x,i=n.y;return t&&(t.lineTo(r,i),t.closePath()),e}}]),Gu),_u=Rt.f;function Gu(){var t;return _r(this,Gu),(t=Mo(this,Ho(Gu).apply(this,arguments))).type="polygon",t}function $u(t,e,n){var r;return _r(this,$u),(r=Mo(this,Ho($u).call(this,t,e,n))).type="polyline",r.points=[],r.points=To.parsePath(r.getAttribute("points").getString()),r}function Uu(){var t;return _r(this,Uu),(t=Mo(this,Ho(Uu).apply(this,arguments))).type="line",t}function qu(){var t;return _r(this,qu),(t=Mo(this,Ho(qu).apply(this,arguments))).type="ellipse",t}function Hu(){var t;return _r(this,Hu),(t=Mo(this,Ho(Hu).apply(this,arguments))).type="circle",t}function Wu(){var t;return _r(this,Wu),(t=Mo(this,Ho(Wu).apply(this,arguments))).type="rect",t}function Xu(){var t;return _r(this,Xu),(t=Mo(this,Ho(Xu).apply(this,arguments))).type="svg",t.root=!1,t}function Yu(t,e,n){var r;return _r(this,Yu),(r=Mo(this,Ho(Yu).call(this,t,e,n))).type="path",r.pathParser=null,r.pathParser=new Nu(r.getAttribute("d").getString()),r}function Qu(t){_r(this,Qu),this.control=null,this.start=null,this.current=null,this.command="",this.tokens=[],this.i=-1,this.previousCommand="",this.points=[],this.angles=[],this.tokens=F(t.replace(/,/gm," ").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2").replace(/([0-9])([+\-])/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ")).trim().split(" ")}ie({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=_u(ut(t),e);return(!n||n.configurable)&&delete t[e]}});var Zu=(Bo(yl,Ts),Gr(yl,[{key:"createPattern",value:function(t,e,n){var r=this.getAttribute("width").getPixels("x",!0),i=this.getAttribute("height").getPixels("y",!0),a=new Ru(this.document,null);a.attributes.viewBox=new Ao(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new Ao(this.document,"width","".concat(r,"px")),a.attributes.height=new Ao(this.document,"height","".concat(i,"px")),a.attributes.transform=new Ao(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children;var o=this.document.createCanvas(r,i),s=o.getContext("2d"),u=this.getAttribute("x"),l=this.getAttribute("y");u.hasValue()&&l.hasValue()&&s.translate(u.getPixels("x",!0),l.getPixels("y",!0)),n.hasValue()?this.styles["fill-opacity"]=n:Reflect.deleteProperty(this.styles,"fill-opacity");for(var c=-1;c<=1;c++)for(var h=-1;h<=1;h++)s.save(),a.attributes.x=new Ao(this.document,"x",c*o.width),a.attributes.y=new Ao(this.document,"y",h*o.height),a.render(s),s.restore();return t.createPattern(o,"repeat")}}]),yl),Ku=(Bo(pl,Ts),Gr(pl,[{key:"render",value:function(t,e,n){var r,i,a,o,s;e&&(r=e.x,i=e.y,a=this.getAttribute("orient").getValue("auto"),o=this.getAttribute("markerUnits").getValue("strokeWidth"),t.translate(r,i),"auto"===a&&t.rotate(n),"strokeWidth"===o&&t.scale(t.lineWidth,t.lineWidth),t.save(),(s=new Ru(this.document,null)).type=this.type,s.attributes.viewBox=new Ao(this.document,"viewBox",this.getAttribute("viewBox").getValue()),s.attributes.refX=new Ao(this.document,"refX",this.getAttribute("refX").getValue()),s.attributes.refY=new Ao(this.document,"refY",this.getAttribute("refY").getValue()),s.attributes.width=new Ao(this.document,"width",this.getAttribute("markerWidth").getValue()),s.attributes.height=new Ao(this.document,"height",this.getAttribute("markerHeight").getValue()),s.attributes.overflow=new Ao(this.document,"overflow",this.getAttribute("overflow").getValue()),s.attributes.fill=new Ao(this.document,"fill",this.getAttribute("fill").getValue("black")),s.attributes.stroke=new Ao(this.document,"stroke",this.getAttribute("stroke").getValue("none")),s.children=this.children,s.render(t),t.restore(),"strokeWidth"===o&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===a&&t.rotate(-n),t.translate(-r,-i))}}]),pl),Ju=(Bo(dl,Ts),Gr(dl,[{key:"render",value:function(){}}]),dl),tl=(Bo(gl,Pu),Gr(gl,[{key:"getBoundingBox",value:function(e){var n=new eu;return this.children.forEach(function(t){n.addBoundingBox(t.getBoundingBox(e))}),n}}]),gl),el=(Bo(fl,Ts),Gr(fl,[{key:"getGradientUnits",value:function(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}},{key:"createGradient",value:function(t,e,n){var r=this,i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var a=i.stops,o=this.getGradient(t,e);if(!o)return this.addParentOpacity(n,a[a.length-1].color);if(a.forEach(function(t){o.addColorStop(t.offset,r.addParentOpacity(n,t.color))}),this.getAttribute("gradientTransform").hasValue()){var s=this.document,u=s.screen,l=u.MAX_VIRTUAL_PIXELS,c=u.viewPort,h=Cn(c.viewPorts,1)[0],f=new Iu(s,null);f.attributes.x=new Ao(s,"x",-l/3),f.attributes.y=new Ao(s,"y",-l/3),f.attributes.width=new Ao(s,"width",l),f.attributes.height=new Ao(s,"height",l);var g=new tl(s,null);g.attributes.transform=new Ao(s,"transform",this.getAttribute("gradientTransform").getValue()),g.children=[f];var d=new Ru(s,null);d.attributes.x=new Ao(s,"x",0),d.attributes.y=new Ao(s,"y",0),d.attributes.width=new Ao(s,"width",h.width),d.attributes.height=new Ao(s,"height",h.height),d.children=[g];var p=s.createCanvas(h.width,h.height),y=p.getContext("2d");return y.fillStyle=o,d.render(y),y.createPattern(p,"no-repeat")}return o}},{key:"inheritStopContainer",value:function(e){var n=this;this.attributesToInherit.forEach(function(t){!n.getAttribute(t).hasValue()&&e.getAttribute(t).hasValue()&&n.getAttribute(t,!0).setValue(e.getAttribute(t).getValue())})}},{key:"addParentOpacity",value:function(t,e){return t.hasValue()?new Ao(this.document,"color",e).addOpacity(t).getString():e}}]),fl),nl=(Bo(hl,el),Gr(hl,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits()?e.getBoundingBox(t):null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var r="objectBoundingBox"===this.getGradientUnits()?n.x+n.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),i="objectBoundingBox"===this.getGradientUnits()?n.y+n.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),a="objectBoundingBox"===this.getGradientUnits()?n.x+n.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),o="objectBoundingBox"===this.getGradientUnits()?n.y+n.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return r===a&&i===o?null:t.createLinearGradient(r,i,a,o)}}]),hl),rl=(Bo(cl,el),Gr(cl,[{key:"getGradient",value:function(t,e){var n=e.getBoundingBox(t);this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var r="objectBoundingBox"===this.getGradientUnits()?n.x+n.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),i="objectBoundingBox"===this.getGradientUnits()?n.y+n.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),a=r,o=i;this.getAttribute("fx").hasValue()&&(a="objectBoundingBox"===this.getGradientUnits()?n.x+n.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(o="objectBoundingBox"===this.getGradientUnits()?n.y+n.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var s="objectBoundingBox"===this.getGradientUnits()?(n.width+n.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),u=this.getAttribute("fr").getPixels();return t.createRadialGradient(a,o,u,r,i,s)}}]),cl),il=(Bo(ll,Ts),ll),al="Array Iterator",ol=ge.set,sl=ge.getterFor(al),ul=gs(Array,"Array",function(t,e){ol(this,{type:al,target:rt(t),index:0,kind:e})},function(){var t=sl(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");function ll(t,e,n){var r;_r(this,ll),(r=Mo(this,Ho(ll).call(this,t,e,n))).type="stop";var i=M(0,B(1,r.getAttribute("offset").getNumber())),a=r.getStyle("stop-opacity"),o=r.getStyle("stop-color",!0);return""===o.getString()&&o.setValue("#000"),a.hasValue()&&(o=o.addOpacity(a)),r.offset=i,r.color=o.getString(),r}function cl(t,e,n){var r;return _r(this,cl),(r=Mo(this,Ho(cl).call(this,t,e,n))).type="radialGradient",r.attributesToInherit.push("cx","cy","r","fx","fy","fr"),r}function hl(t,e,n){var r;return _r(this,hl),(r=Mo(this,Ho(hl).call(this,t,e,n))).type="linearGradient",r.attributesToInherit.push("x1","y1","x2","y2"),r}function fl(t,e,n){var r;_r(this,fl),(r=Mo(this,Ho(fl).call(this,t,e,n))).attributesToInherit=["gradientUnits"],r.stops=[];var i=zo(r),a=i.stops;return i.children.forEach(function(t){"stop"===t.type&&a.push(t)}),r}function gl(){var t;return _r(this,gl),(t=Mo(this,Ho(gl).apply(this,arguments))).type="g",t}function dl(){var t;return _r(this,dl),(t=Mo(this,Ho(dl).apply(this,arguments))).type="defs",t}function pl(){var t;return _r(this,pl),(t=Mo(this,Ho(pl).apply(this,arguments))).type="marker",t}function yl(){var t;return _r(this,yl),(t=Mo(this,Ho(yl).apply(this,arguments))).type="pattern",t}bi.Arguments=bi.Array,Ko("keys"),Ko("values"),Ko("entries");var vl=ue("iterator"),ml=ue("toStringTag"),bl=ul.values;for(var xl in zr){var wl=wt[xl],kl=wl&&wl.prototype;if(kl){if(kl[vl]!==bl)try{zt(kl,vl,bl)}catch(t){kl[vl]=bl}if(kl[ml]||zt(kl,ml,xl),zr[xl])for(var Sl in ul)if(kl[Sl]!==ul[Sl])try{zt(kl,Sl,ul[Sl])}catch(t){kl[Sl]=ul[Sl]}}}var Pl=(Bo(Ol,Ts),Gr(Ol,[{key:"getProperty",value:function(){var t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}},{key:"calcValue",value:function(){var t=this.initialUnits,e=this.getProgress(),n=e.progress,r=e.from,i=e.to,a=r.getNumber()+(i.getNumber()-r.getNumber())*n;return"%"===t&&(a*=100),"".concat(a).concat(t)}},{key:"update",value:function(t){var e=this.parent,n=this.getProperty();if(this.initialValue||(this.initialValue=n.getString(),this.initialUnits=n.getUnits()),this.duration>this.maxDuration){var r=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==r||this.frozen){if("remove"===r&&!this.removed)return this.removed=!0,n.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e.animationFrozen=!0,e.animationFrozenValue=n.getString();return!1}this.duration+=t;var i,a,o,s=!1;return this.begin<this.duration&&(o=this.calcValue(),(i=this.getAttribute("type")).hasValue()&&(a=i.getString(),o="".concat(a,"(").concat(o,")")),n.setValue(o),s=!0),s}},{key:"getProgress",value:function(){var t,e,n,r=this.document,i=this.values,a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};return i.hasValue()?(t=a.progress*(i.getValue().length-1),e=g(t),n=o(t),a.from=new Ao(r,"from",parseFloat(i.getValue()[e])),a.to=new Ao(r,"to",parseFloat(i.getValue()[n])),a.progress=(t-e)/(n-e)):(a.from=this.from,a.to=this.to),a}}]),Ol),Al=Ye.trim,El=wt.parseInt,Cl=/^[+-]?0[Xx]/,Tl=8!==El("\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff08")||22!==El("\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff0x16")?function(t,e){var n=Al(t+"");return El(n,e>>>0||(Cl.test(n)?16:10))}:El;function Ol(t,e,n){var r;return _r(this,Ol),(r=Mo(this,Ho(Ol).call(this,t,e,n))).type="animate",r.duration=0,r.initialValue=null,r.initialUnits="",r.removed=!1,r.frozen=!1,t.screen.animations.push(zo(r)),r.begin=r.getAttribute("begin").getMilliseconds(),r.maxDuration=r.begin+r.getAttribute("dur").getMilliseconds(),r.from=r.getAttribute("from"),r.to=r.getAttribute("to"),r.values=r.getAttribute("values"),r.values.hasValue()&&r.values.setValue(r.values.getString().split(";")),r}ie({global:!0,forced:parseInt!=Tl},{parseInt:Tl});var Vl,Ll,Nl,jl,Rl,Il,Dl=(Bo(_l,Pl),Gr(_l,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,n=t.from,r=t.to,i=new Po(n.getString()),a=new Po(r.getString());if(i.ok&&a.ok){var o=i.r+(a.r-i.r)*e,s=i.g+(a.g-i.g)*e,u=i.b+(a.b-i.b)*e;return"rgb(".concat(parseInt(o,10),", ").concat(parseInt(s,10),", ").concat(parseInt(u,10),")")}return this.getAttribute("from").getString()}}]),_l),zl=(Bo(Fl,Pl),Gr(Fl,[{key:"calcValue",value:function(){var t=this.getProgress(),n=t.progress,e=t.from,r=t.to,i=L(e.getString()),a=L(r.getString());return i.map(function(t,e){return t+(a[e]-t)*n}).join(" ")}}]),Fl),Ml=Dt.f,Bl=wt.Symbol;function Fl(){var t;return _r(this,Fl),(t=Mo(this,Ho(Fl).apply(this,arguments))).type="animateTransform",t}function _l(){var t;return _r(this,_l),(t=Mo(this,Ho(_l).apply(this,arguments))).type="animateColor",t}!kt||"function"!=typeof Bl||"description"in Bl.prototype&&void 0===Bl().description||(Vl={},ne(Ll=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:arguments[0]+"",e=this instanceof Ll?new Bl(t):void 0===t?Bl():Bl(t);return""===t&&(Vl[e]=!0),e},Bl),(Nl=Ll.prototype=Bl.prototype).constructor=Ll,jl=Nl.toString,Rl="Symbol(test)"==Bl("test")+"",Il=/^Symbol\((.*)\)[^)]+$/,Ml(Nl,"description",{configurable:!0,get:function(){var t=it(this)?this.valueOf():this,e=jl.call(t);if(ot(Vl,t))return"";var n=Rl?e.slice(7,-1):e.replace(Il,"$1");return""===n?void 0:n}}),ie({global:!0,forced:!0},{Symbol:Ll})),$n("iterator");var Gl,$l,Ul,ql,Hl,Wl,Xl,Yl,Ql,Zl,Kl,Jl,tc,ec,nc,rc,ic=(Bo(Nc,Ts),Gr(Nc,[{key:"render",value:function(){}}]),Nc),ac=(Bo(Lc,Ts),Lc),oc=(Bo(Vc,ju),Vc),sc=(Bo(Oc,ju),Oc),uc=(Bo(Tc,Au),Gr(Tc,[{key:"getText",value:function(){var t=this.getHrefAttribute().getDefinition();if(t){var e=t.children[0];if(e)return e.getText()}return""}}]),Tc),lc=(Bo(Cc,Au),Gr(Cc,[{key:"getText",value:function(){return this.text}},{key:"renderChildren",value:function(t){var e,n,r,i,a,o;this.hasText?(Ms(Ho(Cc.prototype),"renderChildren",this).call(this,t),e=this.document,n=this.x,r=this.y,i=e.screen.mouse,a=new Ao(e,"fontSize",Bs.parse(e.ctx.font).fontSize),i.isWorking()&&i.checkBoundingBox(this,new eu(n,r-a.getPixels("y"),n+this.measureText(t),r))):0<this.children.length&&((o=new tl(this.document,null)).children=this.children,o.parent=this,o.render(t))}},{key:"onClick",value:function(){var t=this.document.window;t&&t.open(this.getHrefAttribute().getString())}},{key:"onMouseMove",value:function(){this.document.ctx.canvas.style.cursor="pointer"}}]),Cc),cc=!J(function(){return Object.isExtensible(Object.preventExtensions({}))}),hc=e(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=Dt.f,r=ct("meta"),i=0,a=Object.isExtensible||function(){return!0},o=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!it(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!ot(t,r)){if(!a(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!ot(t,r)){if(!a(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return cc&&o.REQUIRED&&a(t)&&!ot(t,r)&&n(t),t}};Wt[r]=!0}),fc=(hc.REQUIRED,hc.fastKey,hc.getWeakData,hc.onFreeze,Dt.f),gc=hc.fastKey,dc=ge.set,pc=ge.getterFor,yc=(ql="Map",Hl=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Wl={getConstructor:function(t,n,r,i){function a(t,e,n){var r,i,a=s(t),o=u(t,e);return o?o.value=n:(a.last=o={index:i=gc(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=o),r&&(r.next=o),kt?a.size++:t.size++,"F"!==i&&(a.index[i]=o)),t}var o=t(function(t,e){gi(t,o,n),dc(t,{type:n,index:Gn(null),first:void 0,last:void 0,size:0}),kt||(t.size=0),null!=e&&Si(e,t[i],t,r)}),s=pc(n),u=function(t,e){var n,r=s(t),i=gc(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return hi(o.prototype,{clear:function(){for(var t=s(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,kt?t.size=0:this.size=0},delete:function(t){var e,n,r=s(this),i=u(this,t);return i&&(e=i.next,n=i.previous,delete r.index[i.index],i.removed=!0,n&&(n.next=e),e&&(e.previous=n),r.first==i&&(r.first=e),r.last==i&&(r.last=n),kt?r.size--:this.size--),!!i},forEach:function(t){for(var e,n=s(this),r=oe(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),hi(o.prototype,r?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),kt&&fc(o.prototype,"size",{get:function(){return s(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",i=pc(e),a=pc(r);gs(t,e,function(t,e){dc(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=a(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),fi(e)}},Jl=wt.Map,tc=Jl&&Jl.prototype,nc="set",rc={},Te(ql,"function"!=typeof(ec=Jl)||!(tc.forEach&&!J(function(){(new Jl).entries().next()})))?(ec=Wl.getConstructor(Hl,ql,!0,nc),hc.REQUIRED=!0):Te(ql,!0)&&(Yl=(Xl=new ec).set(-0,1)!=Xl,Ql=J(function(){Xl.has(1)}),Zl=Ti(function(t){new Jl(t)}),Kl=J(function(){for(var t=new Jl,e=5;e--;)t.set(e,e);return!t.has(-0)}),Zl||(((ec=Hl(function(t,e){gi(t,ec,ql);var n=_s(new Jl,t,ec);return null!=e&&Si(e,n.set,n,!0),n})).prototype=tc).constructor=ec),(Ql||Kl)&&(Ec("delete"),Ec("has"),Ec("get")),(Kl||Yl)&&Ec(nc)),rc.Map=ec,ie({global:!0,forced:ec!=Jl},rc),Un(ec,ql),Wl.setStrong(ec,ql,!0),Bo(Ac,Au),Gr(Ac,[{key:"getText",value:function(){return this.text}},{key:"path",value:function(d){var t=this.dataArray;d&&d.beginPath(),t.forEach(function(t){var e=t.command,n=t.points;switch(e){case"L":d&&d.lineTo(n[0],n[1]);break;case"M":d&&d.moveTo(n[0],n[1]);break;case"C":d&&d.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case"Q":d&&d.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case"A":var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=o<a?a:o,f=o<a?1:a/o,g=o<a?o/a:1;d&&(d.translate(r,i),d.rotate(l),d.scale(f,g),d.arc(0,0,h,s,s+u,!!(1-c)),d.scale(1/f,1/g),d.rotate(-l),d.translate(-r,-i));break;case"z":d&&d.closePath()}})}},{key:"renderChildren",value:function(a){this.setTextData(a),a.save();var o=this.parent.getStyle("text-decoration").getString(),s=this.getFontSize(),u=this.glyphInfo,t=a.fillStyle;"underline"===o&&a.beginPath(),u.forEach(function(t,e){var n=t.p0,r=t.p1,i=t.text;a.save(),a.translate(n.x,n.y),a.rotate(u[e].rotation),a.fillStyle&&a.fillText(i,0,0),a.strokeStyle&&a.strokeText(i,0,0),a.restore(),"underline"===o&&(0===e&&a.moveTo(n.x,n.y+s/8),a.lineTo(r.x,r.y+s/5))}),"underline"===o&&(a.lineWidth=s/20,a.strokeStyle=t,a.stroke(),a.closePath()),a.restore()}},{key:"getLetterSpacingAt",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[t]||0}},{key:"findSegmentToFitChar",value:function(t,e,n,r,i,a,o,s){var u=a,l=this.measureText(t,o);" "===o&&"justify"===e&&n<r&&(l+=(r-n)/i),-1<s&&(u+=this.getLetterSpacingAt(s));var c=this.textHeight/20,h={p0:this.getEquidistantPointOnPath(u,c),p1:this.getEquidistantPointOnPath(u+l,c)};return{offset:u+=l,segment:h}}},{key:"measureText",value:function(t,e){var n=this.measuresCache,r=e||this.getText();if(n.has(r))return n.get(r);var i=this.measureTargetText(t,r);return n.set(r,i),i}},{key:"setTextData",value:function(u){var l=this;if(!this.glyphInfo){var t=this.getText(),c=t.split(""),h=t.split(" ").length-1,e=L(this.parent.getAttribute("dx").getString("0")),f=this.parent.getStyle("text-anchor").getString("start"),n=this.getStyle("letter-spacing"),r=this.parent.getStyle("letter-spacing"),i=0;n.hasValue()&&"inherit"!==n.getValue()?n.hasValue()&&"initial"!==n.getValue()&&"unset"!==n.getValue()&&(i=n.getPixels()):i=r.getPixels();var a=[],o=t.length;this.letterSpacingCache=a;for(var s=0;s<o;s++)a.push(void 0===e[s]?i:e[s]);var g=a.reduce(function(t,e){return t+e||0},0);this.textWidth=this.measureText(u),this.textHeight=this.getFontSize();var d=M(this.textWidth+g,0);this.glyphInfo=[];var p=this.getPathLength(),y=this.getStyle("startOffset").getNumber(0)*p,v="end"!==f&&"right"!==f?"middle"!==f&&"center"!==f?0:-d/2:-d;v+=y,c.forEach(function(t,e){var n,r,i,a=l.findSegmentToFitChar(u,f,d,p,h,v,t,e),o=a.offset,s=a.segment;v=o,s.p0&&s.p1&&(n=l.getLineLength(s.p0.x,s.p0.y,s.p1.x,s.p1.y),r=l.getPointOnLine(0+n/2,s.p0.x,s.p0.y,s.p1.x,s.p1.y),i=m(s.p1.y-s.p0.y,s.p1.x-s.p0.x),l.glyphInfo.push({transposeX:r.x,transposeY:r.y,text:c[e],p0:s.p0,p1:s.p1,rotation:i}))})}}},{key:"parsePathData",value:function(t){if(this.pathLength=-1,!t)return[];var e=[],n=t.pathParser;for(n.reset();!n.isEnd();){var r=n.current,i=r?r.x:0,a=r?r.y:0,o="",s=[];n.nextCommand();var u=n.command.toUpperCase();switch(n.command){case"M":case"m":o=this.pathM(n,s);break;case"L":case"l":o=this.pathL(n,s);break;case"H":case"h":o=this.pathH(n,s);break;case"V":case"v":o=this.pathV(n,s);break;case"C":case"c":this.pathC(n,s);break;case"S":case"s":o=this.pathS(n,s);break;case"Q":case"q":this.pathQ(n,s);break;case"T":case"t":o=this.pathT(n,s);break;case"A":case"a":s=this.pathA(n);break;case"Z":case"z":n.current=n.start}"Z"===u?e.push({command:"z",points:[],pathLength:0}):e.push({command:o||u,points:s,start:{x:i,y:a},pathLength:this.calcLength(i,a,o||u,s)})}return e}},{key:"pathM",value:function(t,e){var n=t.getAsCurrentPoint();for(e.push(n.x,n.y),t.start=t.current;!t.isCommandOrEnd();){var r=t.getAsCurrentPoint();return e.push(r.x,r.y),"L"}}},{key:"pathL",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getAsCurrentPoint();e.push(n.x,n.y)}return"L"}},{key:"pathH",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.current,r=new To((t.isRelativeCommand()?n.x:0)+t.getScalar(),n.y);e.push(r.x,r.y),t.current=r}return"L"}},{key:"pathV",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.current,r=new To(n.x,(t.isRelativeCommand()?n.y:0)+t.getScalar());e.push(r.x,r.y),t.current=r}return"L"}},{key:"pathC",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getPoint(),r=t.getAsControlPoint(),i=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y,i.x,i.y)}}},{key:"pathS",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getReflectedControlPoint(),r=t.getAsControlPoint(),i=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y,i.x,i.y)}return"C"}},{key:"pathQ",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getAsControlPoint(),r=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y)}}},{key:"pathT",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getReflectedControlPoint();t.control=n;var r=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y)}return"Q"}},{key:"pathA",value:function(t){for(;!t.isCommandOrEnd();){var e=t.current,n=t.getScalar(),r=t.getScalar(),i=t.getScalar()*(A/180),a=t.getScalar(),o=t.getScalar(),s=t.getAsCurrentPoint(),u=new To(C(i)*(e.x-s.x)/2+E(i)*(e.y-s.y)/2,-E(i)*(e.x-s.x)/2+C(i)*(e.y-s.y)/2),l=O(u.x,2)/O(n,2)+O(u.y,2)/O(r,2);1<l&&(n*=T(l),r*=T(l));var c=(a===o?-1:1)*T((O(n,2)*O(r,2)-O(n,2)*O(u.y,2)-O(r,2)*O(u.x,2))/(O(n,2)*O(u.y,2)+O(r,2)*O(u.x,2)));isNaN(c)&&(c=0);var h=new To(c*n*u.y/r,c*-r*u.x/n),f=new To((e.x+s.x)/2+C(i)*h.x-E(i)*h.y,(e.y+s.y)/2+E(i)*h.x+C(i)*h.y),g=N([1,0],[(u.x-h.x)/n,(u.y-h.y)/r]),d=[(u.x-h.x)/n,(u.y-h.y)/r],p=[(-u.x-h.x)/n,(-u.y-h.y)/r],y=N(d,p);return V(d,p)<=-1&&(y=A),1<=V(d,p)&&(y=0),0===o&&0<y&&(y-=2*A),1===o&&y<0&&(y+=2*A),[f.x,f.y,n,r,g,y,i,o]}}},{key:"calcLength",value:function(t,e,n,r){var i=Math.abs,a=0,o=null,s=null,u=0;switch(n){case"L":return this.getLineLength(t,e,r[0],r[1]);case"C":for(a=0,o=this.getPointOnCubicBezier(0,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),u=.01;u<=1;u+=.01)s=this.getPointOnCubicBezier(u,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"Q":for(a=0,o=this.getPointOnQuadraticBezier(0,t,e,r[0],r[1],r[2],r[3]),u=.01;u<=1;u+=.01)s=this.getPointOnQuadraticBezier(u,t,e,r[0],r[1],r[2],r[3]),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"A":a=0;var l=r[4],c=r[5],h=r[4]+c,f=A/180;if(i(l-h)<f&&(f=i(l-h)),o=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),c<0)for(u=l-f;h<u;u-=f)s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(u=l+f;u<h;u+=f)s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],h,0),a+=this.getLineLength(o.x,o.y,s.x,s.y)}return 0}},{key:"getPointOnLine",value:function(t,e,n,r,i){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:e,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:n,s=(i-n)/(r-e+In),u=T(t*t/(1+s*s));r<e&&(u*=-1);var l=s*u,c=null;if(r===e)c={x:a,y:o+l};else if((o-n)/(a-e+In)==s)c={x:a+u,y:o+l};else{var h=this.getLineLength(e,n,r,i);if(h<In)return null;var f=(a-e)*(r-e)+(o-n)*(i-n),g=e+(f/=h*h)*(r-e),d=n+f*(i-n),p=this.getLineLength(a,o,g,d),y=T(t*t-p*p),u=T(y*y/(1+s*s));r<e&&(u*=-1),c={x:g+u,y:d+(l=s*u)}}return c}},{key:"getPointOnPath",value:function(t){var e=this.getPathLength(),n=0,r=null;if(t<-5e-5||e<t-5e-5)return null;var i=this.dataArray,a=!0,o=!1,s=void 0;try{for(var u,l,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){if(!(l=u.value)||!(l.pathLength<5e-5||n+l.pathLength+5e-5<t)){var h=t-n,f=0;switch(l.command){case"L":r=this.getPointOnLine(h,l.start.x,l.start.y,l.points[0],l.points[1],l.start.x,l.start.y);break;case"A":var g=l.points[4],d=l.points[5],p=l.points[4]+d,f=g+h/l.pathLength*d;if(d<0&&f<p||0<=d&&p<f)break;r=this.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,l.points[6]);break;case"C":1<(f=h/l.pathLength)&&(f=1),r=this.getPointOnCubicBezier(f,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);break;case"Q":1<(f=h/l.pathLength)&&(f=1),r=this.getPointOnQuadraticBezier(f,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3])}if(r)return r;break}n+=l.pathLength}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return null}},{key:"getLineLength",value:function(t,e,n,r){return T((n-t)*(n-t)+(r-e)*(r-e))}},{key:"getPathLength",value:function(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(function(t,e){return 0<e.pathLength?t+e.pathLength:t},0)),this.pathLength}},{key:"getPointOnCubicBezier",value:function(t,e,n,r,i,a,o,s,u){return{x:s*f(t)+a*d(t)+r*p(t)+e*y(t),y:u*f(t)+o*d(t)+i*p(t)+n*y(t)}}},{key:"getPointOnQuadraticBezier",value:function(t,e,n,r,i,a,o){return{x:a*v(t)+r*x(t)+e*w(t),y:o*v(t)+i*x(t)+n*w(t)}}},{key:"getPointOnEllipticalArc",value:function(t,e,n,r,i,a){var o=C(a),s=E(a),u=n*C(i),l=r*E(i);return{x:t+(u*o-l*s),y:e+(u*s+l*o)}}},{key:"buildEquidistantCache",value:function(t,e){var n=this.getPathLength(),r=e||.25,i=t||n/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==r){this.equidistantCache={step:i,precision:r,points:[]};for(var a=0,o=0;o<=n;o+=r){var s=this.getPointOnPath(o),u=this.getPointOnPath(o+r);s&&u&&i<=(a+=this.getLineLength(s.x,s.y,u.x,u.y))&&(this.equidistantCache.points.push({x:s.x,y:s.y,distance:o}),a-=i)}}}},{key:"getEquidistantPointOnPath",value:function(t,e,n){if(this.buildEquidistantCache(e,n),t<0||5e-5<t-this.getPathLength())return null;var r=i(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[r]||null}}]),Ac),vc=(Bo(Pc,Pu),Gr(Pc,[{key:"loadImage",value:(Ul=qr(Ur.mark(function t(e){var n;return Ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.createImage(e);case 3:n=t.sent,this.image=n,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error('ERROR: image "'.concat(e,'" not found'),t.t0);case 10:this.loaded=!0;case 11:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return Ul.apply(this,arguments)})},{key:"loadSvg",value:($l=qr(Ur.mark(function t(e){var n,r;return Ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.fetch(e);case 3:return n=t.sent,t.next=6,n.text();case 6:r=t.sent,this.image=r,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error('ERROR: image "'.concat(e,'" not found'),t.t0);case 13:this.loaded=!0;case 14:case"end":return t.stop()}},t,this,[[0,10]])})),function(){return $l.apply(this,arguments)})},{key:"renderChildren",value:function(t){var e,n=this.document,r=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),a=this.getAttribute("width").getPixels("x"),o=this.getAttribute("height").getPixels("y");a&&o&&(t.save(),this.isSvg?n.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:r,offsetY:i,scaleWidth:a,scaleHeight:o}).render():(e=this.image,t.translate(r,i),n.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:a,desiredWidth:e.width,height:o,desiredHeight:e.height}),this.loaded&&(void 0===e.complete||e.complete)&&t.drawImage(e,0,0)),t.restore())}},{key:"getBoundingBox",value:function(){var t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),n=this.getAttribute("width").getPixels("x"),r=this.getAttribute("height").getPixels("y");return new eu(t,e,t+n,e+r)}}]),Pc),mc=(Bo(Sc,Pu),Gr(Sc,[{key:"render",value:function(){}}]),Sc),bc=(Gr(kc,[{key:"load",value:(Gl=qr(Ur.mark(function t(n,e){var r,i,a;return Ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=this.document,t.next=4,r.canvg.parser.load(e);case 4:i=t.sent,a=i.getElementsByTagName("font"),Array.from(a).forEach(function(t){var e=r.createElement(t);r.definitions[n]=e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error('ERROR: font "'.concat(e,'" not found'),t.t0);case 12:this.loaded=!0;case 13:case"end":return t.stop()}},t,this,[[0,9]])})),function(){return Gl.apply(this,arguments)})}]),kc),xc=(Bo(wc,Ts),wc);function wc(a,t,e){var n;return _r(this,wc),(n=Mo(this,Ho(wc).call(this,a,t,e))).type="style",F(Array.from(t.childNodes).map(function(t){return t.data}).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"")).split("}").forEach(function(t){var e,n,r,i=t.trim();i&&(n=(e=i.split("{"))[0].split(","),r=e[1].split(";"),n.forEach(function(t){var i,n,e=t.trim();e&&(i=a.styles[e]||{},r.forEach(function(t){var e=t.indexOf(":"),n=t.substr(0,e).trim(),r=t.substr(e+1,t.length-e).trim();n&&r&&(i[n]=new Ao(a,n,r))}),a.styles[e]=i,a.stylesSpecificity[e]=h(e),"@font-face"===e&&(n=i["font-family"].getString().replace(/"|'/g,""),i.src.getString().split(",").forEach(function(t){var e;0<t.indexOf('format("svg")')&&((e=c(t))&&new bc(a).load(n,e))})))}))}),n}function kc(t){_r(this,kc),this.document=t,this.loaded=!1,t.fonts.push(this)}function Sc(){var t;return _r(this,Sc),(t=Mo(this,Ho(Sc).apply(this,arguments))).type="symbol",t}function Pc(t,e,n){var r;_r(this,Pc),(r=Mo(this,Ho(Pc).call(this,t,e,n))).type="image",r.loaded=!1;var i=r.getHrefAttribute().getString();if(!i)return Mo(r);var a=/\.svg$/.test(i);return t.images.push(zo(r)),a?r.loadSvg(i):r.loadImage(i),r.isSvg=a,r}function Ac(t,e,n){var r;_r(this,Ac),(r=Mo(this,Ho(Ac).call(this,t,e,n))).type="textPath",r.textWidth=0,r.textHeight=0,r.pathLength=-1,r.glyphInfo=null,r.letterSpacingCache=[],r.measuresCache=new Map([["",0]]);var i=r.getHrefAttribute().getDefinition();return r.text=r.getTextFromNode(),r.dataArray=r.parsePathData(i),r}function Ec(t){var n=tc[t];de(tc,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return n.call(this,0===t?0:t)}:"get"==t?function(t){return n.call(this,0===t?0:t)}:"has"==t?function(t){return n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}function Cc(t,e,n){var r;_r(this,Cc),(r=Mo(this,Ho(Cc).call(this,t,e,n))).type="a";var i=e.childNodes,a=i[0],o=0<i.length&&Array.from(i).every(function(t){return 3===t.nodeType});return r.hasText=o,r.text=o?r.getTextFromNode(a):"",r}function Tc(){var t;return _r(this,Tc),(t=Mo(this,Ho(Tc).apply(this,arguments))).type="tref",t}function Oc(t,e,n){var r;return _r(this,Oc),(r=Mo(this,Ho(Oc).call(this,t,e,n))).type="glyph",r.horizAdvX=r.getAttribute("horiz-adv-x").getNumber(),r.unicode=r.getAttribute("unicode").getString(),r.arabicForm=r.getAttribute("arabic-form").getString(),r}function Vc(){var t;return _r(this,Vc),(t=Mo(this,Ho(Vc).apply(this,arguments))).type="missing-glyph",t.horizAdvX=0,t}function Lc(t,e,n){var r;return _r(this,Lc),(r=Mo(this,Ho(Lc).call(this,t,e,n))).type="font-face",r.ascent=r.getAttribute("ascent").getNumber(),r.descent=r.getAttribute("descent").getNumber(),r.unitsPerEm=r.getAttribute("units-per-em").getNumber(),r}function Nc(t,e,n){var r;_r(this,Nc),(r=Mo(this,Ho(Nc).call(this,t,e,n))).type="font",r.glyphs={},r.horizAdvX=r.getAttribute("horiz-adv-x").getNumber();var i=t.definitions,a=zo(r).children,o=!0,s=!1,u=void 0;try{for(var l,c,h=a[Symbol.iterator]();!(o=(l=h.next()).done);o=!0)switch(c=l.value,c.type){case"font-face":var f=(r.fontFace=c).getStyle("font-family");f.hasValue()&&(i[f.getString()]=zo(r));break;case"missing-glyph":r.missingGlyph=c;break;case"glyph":var g=c;g.arabicForm?(r.isRTL=!0,r.isArabic=!0,void 0===r.glyphs[g.unicode]&&(r.glyphs[g.unicode]={}),r.glyphs[g.unicode][g.arabicForm]=g):r.glyphs[g.unicode]=g}}catch(t){s=!0,u=t}finally{try{o||null==h.return||h.return()}finally{if(s)throw u}}return r}xc.parseExternalUrl=c;var jc=(Bo(_c,Pu),Gr(_c,[{key:"setContext",value:function(t){Ms(Ho(_c.prototype),"setContext",this).call(this,t);var e=this.getAttribute("x"),n=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),n.hasValue()&&t.translate(0,n.getPixels("y"))}},{key:"path",value:function(t){var e=this.element;e&&e.path(t)}},{key:"renderChildren",value:function(t){var e,n,r,i,a=this.document,o=this.element;o&&("symbol"===(e=o).type&&((e=new Ru(a,null)).attributes.viewBox=new Ao(a,"viewBox",o.getAttribute("viewBox").getString()),e.attributes.preserveAspectRatio=new Ao(a,"preserveAspectRatio",o.getAttribute("preserveAspectRatio").getString()),e.attributes.overflow=new Ao(a,"overflow",o.getAttribute("overflow").getString()),e.children=o.children),"svg"===e.type&&(n=this.getAttribute("width"),r=this.getAttribute("height"),n.hasValue()&&(e.attributes.width=new Ao(a,"width",this.getAttribute("width").getString())),r.hasValue()&&(e.attributes.height=new Ao(a,"height",r.getString()))),i=e.parent,e.parent=null,e.render(t),e.parent=i)}},{key:"getBoundingBox",value:function(t){var e=this.element;return e?e.getBoundingBox(t):null}},{key:"elementTransform",value:function(){var t=this.document,e=this.element;return pu.fromElement(t,e)}},{key:"element",get:function(){return this._element||(this._element=this.getHrefAttribute().getDefinition()),this._element}}]),_c),Rc=(Bo(Fc,Ts),Gr(Fc,[{key:"apply",value:function(t,e,n,r,i){for(var a=this.includeOpacity,o=this.matrix,s=t.getImageData(0,0,r,i),u=0;u<i;u++)for(var l=0;l<r;l++){var c=G(s.data,l,u,r,0,0),h=G(s.data,l,u,r,0,1),f=G(s.data,l,u,r,0,2),g=G(s.data,l,u,r,0,3),d=U(o,0,c)+U(o,1,h)+U(o,2,f)+U(o,3,g)+U(o,4,1),p=U(o,5,c)+U(o,6,h)+U(o,7,f)+U(o,8,g)+U(o,9,1),y=U(o,10,c)+U(o,11,h)+U(o,12,f)+U(o,13,g)+U(o,14,1),v=U(o,15,c)+U(o,16,h)+U(o,17,f)+U(o,18,g)+U(o,19,1);a&&(d=p=y=0,v*=g/255),$(s.data,l,u,r,0,0,d),$(s.data,l,u,r,0,1,p),$(s.data,l,u,r,0,2,y),$(s.data,l,u,r,0,3,v)}t.clearRect(0,0,r,i),t.putImageData(s,0,0)}}]),Fc),Ic=(Bo(Bc,Ts),Gr(Bc,[{key:"apply",value:function(e,t){var n,r=this.document,i=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getAttribute("width").getPixels("x"),s=this.getAttribute("height").getPixels("y");o||s||(n=new eu,this.children.forEach(function(t){n.addBoundingBox(t.getBoundingBox(e))}),i=g(n.x1),a=g(n.y1),o=g(n.width),s=g(n.height));var u=t.getStyle("mask").getString();t.getStyle("mask").setValue("");var l=r.createCanvas(i+o,a+s),c=l.getContext("2d");r.screen.setDefaults(c),this.renderChildren(c),new Rc(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(c,0,0,i+o,a+s);var h=r.createCanvas(i+o,a+s),f=h.getContext("2d");r.screen.setDefaults(f),t.render(f),f.globalCompositeOperation="destination-in",f.fillStyle=c.createPattern(l,"no-repeat"),f.fillRect(0,0,i+o,a+s),e.fillStyle=f.createPattern(h,"no-repeat"),e.fillRect(0,0,i+o,a+s),t.getStyle("mask").setValue(u)}},{key:"render",value:function(){}}]),Bc),Dc=Qt("Reflect","apply"),zc=Function.apply,Mc=!J(function(){Dc(function(){})});function Bc(){var t;return _r(this,Bc),(t=Mo(this,Ho(Bc).apply(this,arguments))).type="mask",t}function Fc(t,e,n){var r;_r(this,Fc),(r=Mo(this,Ho(Fc).call(this,t,e,n))).type="feColorMatrix";var i=L(r.getAttribute("values").getString());switch(r.getAttribute("type").getString("matrix")){case"saturate":var a=i[0],i=[.213+.787*a,.715-.715*a,.072-.072*a,0,0,.213-.213*a,.715+.285*a,.072-.072*a,0,0,.213-.213*a,.715-.715*a,.072+.928*a,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var o=i[0]*A/180;i=[q(o,.213,.787,-.213),q(o,.715,-.715,-.715),q(o,.072,-.072,.928),0,0,q(o,.213,-.213,.143),q(o,.715,.285,.14),q(o,.072,-.072,-.283),0,0,q(o,.213,-.213,-.787),q(o,.715,-.715,.715),q(o,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}return r.matrix=i,r.includeOpacity=r.getAttribute("includeOpacity").hasValue(),r}function _c(){var t;return _r(this,_c),(t=Mo(this,Ho(_c).apply(this,arguments))).type="use",t}ie({target:"Reflect",stat:!0,forced:Mc},{apply:function(t,e,n){return ae(t),ut(n),Dc?Dc(t,e,n):zc.call(t,e,n)}}),ie({target:"Reflect",stat:!0,sham:!as},{getPrototypeOf:function(t){return us(ut(t))}});function Gc(){}var $c=(Bo(lh,Ts),Gr(lh,[{key:"apply",value:function(n){var r=this.document,i=Reflect.getPrototypeOf(n),t=n.beginPath,a=n.closePath;i&&(i.beginPath=Gc,i.closePath=Gc),Reflect.apply(t,n,[]),this.children.forEach(function(t){var e;void 0!==t.path&&((e=(e=void 0===t.elementTransform?null:t.elementTransform())||pu.fromElement(r,t))&&e.apply(n),t.path(n),i&&(i.closePath=a),e&&e.unapply(n))}),Reflect.apply(a,n,[]),n.clip(),i&&(i.beginPath=t,i.closePath=a)}},{key:"render",value:function(){}}]),lh),Uc=(Bo(uh,Ts),Gr(uh,[{key:"apply",value:function(t,e){var n=this.document,r=e.getBoundingBox(t),i=g(r.x1),a=g(r.y1),o=g(r.width),s=g(r.height),u=e.getStyle("filter").getString();e.getStyle("filter").setValue("");var l=0,c=0;this.children.forEach(function(t){var e=t.extraFilterDistance||0;l=M(l,e),c=M(c,e)});var h=n.createCanvas(o+2*l,s+2*c),f=h.getContext("2d");n.screen.setDefaults(f),f.translate(-i+l,-a+c),e.render(f),this.children.forEach(function(t){"function"==typeof t.apply&&t.apply(f,0,0,o+2*l,s+2*c)}),t.drawImage(h,0,0,o+2*l,s+2*c,i-l,a-c,o+2*l,s+2*c),e.getStyle("filter",!0).setValue(u)}},{key:"render",value:function(){}}]),uh),qc=(Bo(sh,Ts),Gr(sh,[{key:"apply",value:function(){}}]),sh),Hc=(Bo(oh,Ts),Gr(oh,[{key:"apply",value:function(){}}]),oh),Wc=(Bo(ah,Ts),Gr(ah,[{key:"apply",value:function(){}}]),ah),Xc=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Yc=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],Qc=function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},Zc=(Bo(ih,Ts),Gr(ih,[{key:"apply",value:function(t,e,n,r,i){var a=this.document,o=this.blurRadius,s=a.window?a.window.document.body:null,u=t.canvas;u.id=a.getUniqueId(),s&&(u.style.display="none",s.appendChild(u)),W(u,e,n,r,i,o),s&&s.removeChild(u)}}]),ih),Kc=(Bo(rh,Ts),rh),Jc=(Bo(nh,Ts),nh),th=(Gr(eh,[{key:"popEmSize",value:function(){this.emSizeStack.pop()}},{key:"getUniqueId",value:function(){return"canvg".concat(++this.uniqueId)}},{key:"isImagesLoaded",value:function(){return this.images.every(function(t){return t.loaded})}},{key:"isFontsLoaded",value:function(){return this.fonts.every(function(t){return t.loaded})}},{key:"createDocumentElement",value:function(t){var e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e}},{key:"createElement",value:function(t){var e=t.nodeName.replace(/^[^:]+:/,""),n=eh.elementTypes[e];return new(void 0===n?Vs:n)(this,t)}},{key:"createTextNode",value:function(t){return new Cu(this,t)}},{key:"setViewBox",value:function(t){this.screen.setViewBox(function(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?X(n,!0).forEach(function(t){Hr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}({document:this},t))}},{key:"window",get:function(){return this.screen.window}},{key:"fetch",get:function(){return this.screen.fetch}},{key:"ctx",get:function(){return this.screen.ctx}},{key:"emSize",get:function(){var t=this.emSizeStack;return t[t.length-1]},set:function(t){this.emSizeStack.push(t)}}]),eh);function eh(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.rootEmSize,r=void 0===n?12:n,i=e.emSize,a=void 0===i?12:i,o=e.createCanvas,s=void 0===o?eh.createCanvas:o,u=e.createImage,l=void 0===u?eh.createImage:u;_r(this,eh),this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=r,this.emSize=a,this.createCanvas=s,this.createImage=l,this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}function nh(){var t;return _r(this,nh),(t=Mo(this,Ho(nh).apply(this,arguments))).type="desc",t}function rh(){var t;return _r(this,rh),(t=Mo(this,Ho(rh).apply(this,arguments))).type="title",t}function ih(t,e,n){var r;return _r(this,ih),(r=Mo(this,Ho(ih).call(this,t,e,n))).type="feGaussianBlur",r.blurRadius=g(r.getAttribute("stdDeviation").getNumber()),r.extraFilterDistance=r.blurRadius,r}function ah(){var t;return _r(this,ah),(t=Mo(this,Ho(ah).apply(this,arguments))).type="feComposite",t}function oh(){var t;return _r(this,oh),(t=Mo(this,Ho(oh).apply(this,arguments))).type="feMorphology",t}function sh(t,e,n){var r;return _r(this,sh),(r=Mo(this,Ho(sh).call(this,t,e,n))).type="feDropShadow",r.addStylesFromStyleDefinition(),r}function uh(){var t;return _r(this,uh),(t=Mo(this,Ho(uh).apply(this,arguments))).type="filter",t}function lh(){var t;return _r(this,lh),(t=Mo(this,Ho(lh).apply(this,arguments))).type="clipPath",t}th.createCanvas=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},th.createImage=function(){return Y.apply(this,arguments)},th.elementTypes={svg:Ru,rect:Iu,circle:Du,ellipse:zu,line:Mu,polyline:Bu,polygon:Fu,path:ju,pattern:Zu,marker:Ku,defs:Ju,linearGradient:nl,radialGradient:rl,stop:il,animate:Pl,animateColor:Dl,animateTransform:zl,font:ic,"font-face":ac,"missing-glyph":oc,glyph:sc,text:Au,tspan:Eu,tref:uc,a:lc,textPath:yc,image:vc,g:tl,symbol:mc,style:xc,use:jc,mask:Ic,clipPath:$c,filter:Uc,feDropShadow:qc,feMorphology:Hc,feComposite:Wc,feColorMatrix:Rc,feGaussianBlur:Zc,title:Kc,desc:Jc};var ch,hh,fh=(Gr(dh,[{key:"fork",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return dh.from(t,e,Z({},this.options,{},n))}},{key:"forkString",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return dh.fromString(t,e,Z({},this.options,{},n))}},{key:"ready",value:function(){return this.screen.ready()}},{key:"isReady",value:function(){return this.screen.isReady()}},{key:"render",value:(hh=qr(Ur.mark(function t(){var e,n=arguments;return Ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]?n[0]:{},this.start(Z({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},e)),t.next=4,this.ready();case 4:this.stop();case 5:case"end":return t.stop()}},t,this)})),function(){return hh.apply(this,arguments)})},{key:"start",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this.documentElement,n=this.screen,r=this.options;n.start(e,Z({enableRedraw:!0},r,{},t))}},{key:"stop",value:function(){this.screen.stop()}},{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];this.documentElement.resize(t,e,n)}}],[{key:"from",value:(ch=qr(Ur.mark(function t(e,n){var r,i,a,o=arguments;return Ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=new Uo(r=2<o.length&&void 0!==o[2]?o[2]:{}),t.next=4,i.parse(n);case 4:return a=t.sent,t.abrupt("return",new dh(e,a,r));case 6:case"end":return t.stop()}},t)})),function(){return ch.apply(this,arguments)})},{key:"fromString",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new dh(t,new Uo(n).parseFromString(e),n)}}]),dh),gh=Object.freeze({__proto__:null,offscreen:function(){return{window:null,ignoreAnimation:!0,ignoreMouse:!0,createCanvas:function(t,e){return new OffscreenCanvas(t,e)},createImage:(t=qr(Ur.mark(function t(e){var n,r,i;return Ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.blob();case 5:return r=t.sent,t.next=8,createImageBitmap(r);case 8:return i=t.sent,t.abrupt("return",i);case 10:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})};var t},node:function(t){var e=t.DOMParser,n=t.canvas;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:t.fetch,createCanvas:n.createCanvas,createImage:n.loadImage}}});function dh(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};_r(this,dh),this.parser=new Uo(n),this.screen=new No(t,n),this.options=n;var r=new th(this,n),i=r.createDocumentElement(e);this.document=r,this.documentElement=i}t.AElement=lc,t.AnimateColorElement=Dl,t.AnimateElement=Pl,t.AnimateTransformElement=zl,t.BoundingBox=eu,t.CB1=f,t.CB2=d,t.CB3=p,t.CB4=y,t.Canvg=fh,t.CircleElement=Du,t.ClipPathElement=$c,t.DefsElement=Ju,t.DescElement=Jc,t.Document=th,t.Element=Ts,t.EllipseElement=zu,t.FeColorMatrixElement=Rc,t.FeCompositeElement=Wc,t.FeDropShadowElement=qc,t.FeGaussianBlurElement=Zc,t.FeMorphologyElement=Hc,t.FilterElement=Uc,t.Font=Bs,t.FontElement=ic,t.FontFaceElement=ac,t.GElement=tl,t.GlyphElement=sc,t.GradientElement=el,t.ImageElement=vc,t.LineElement=Mu,t.LinearGradientElement=nl,t.MarkerElement=Ku,t.MaskElement=Ic,t.Matrix=hu,t.MissingGlyphElement=oc,t.Mouse=Oo,t.PSEUDO_ZERO=In,t.Parser=Uo,t.PathElement=ju,t.PathParser=Nu,t.PatternElement=Zu,t.Point=To,t.PolygonElement=Fu,t.PolylineElement=Bu,t.Property=Ao,t.QB1=v,t.QB2=x,t.QB3=w,t.RadialGradientElement=rl,t.RectElement=Iu,t.RenderedElement=Pu,t.Rotate=lu,t.SVGElement=Ru,t.SVGFontLoader=bc,t.Scale=cu,t.Screen=No,t.Skew=fu,t.SkewX=gu,t.SkewY=du,t.StopElement=il,t.StyleElement=xc,t.SymbolElement=mc,t.TRefElement=uc,t.TSpanElement=Eu,t.TextElement=Au,t.TextPathElement=yc,t.TitleElement=Kc,t.Transform=pu,t.Translate=uu,t.UnknownElement=Vs,t.UseElement=jc,t.ViewPort=Co,t.compressSpaces=F,t.default=fh,t.getSelectorSpecificity=h,t.normalizeAttributeName=l,t.parseExternalUrl=c,t.presets=gh,t.toNumbers=L,t.trimLeft=s,t.trimRight=u,t.vectorMagnitude=n,t.vectorsAngle=N,t.vectorsRatio=V,Object.defineProperty(t,"__esModule",{value:!0})});