"use strict";var SpotifyWebApi=function(){function u(t,e){return t.abort=e,t}function a(){var t=Array.prototype.slice.call(arguments),r=t[0],e=t.slice(1),r=r||{};return e.forEach(function(t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])}),r}function p(e,n){function t(r,o){var t=e.type||"GET";p.open(t,function(t,e){var r,o="";for(var n in e){e.hasOwnProperty(n)&&(r=e[n],o+=encodeURIComponent(n)+"="+encodeURIComponent(r)+"&")}return 0<o.length&&(t=t+"?"+(o=o.substring(0,o.length-1))),t}(e.url,e.params)),c&&p.setRequestHeader("Authorization","Bearer "+c),p.onreadystatechange=function(){if(4===p.readyState){var t=null;try{t=p.responseText?JSON.parse(p.responseText):""}catch(t){console.error(t)}200<=p.status&&p.status<300?(e=t,r&&r(e),n&&n(null,e)):(o&&o(p),n&&n(p,null))}var e},"GET"===t?p.send(null):p.send(e.postData?JSON.stringify(e.postData):null)}var r,o,s,a,p=new XMLHttpRequest;return n?(t(),null):(r=t,o=function(){p.abort()},null!==y?(a=y.defer(),r(function(t){a.resolve(t)},function(t){a.reject(t)}),s=a.promise):window.Promise&&(s=new window.Promise(r)),s?new u(s,o):null)}function i(t,e,r,o){var n={},s=null;return"object"==typeof e?(n=e,s=r):"function"==typeof e&&(s=e),"GET"!==(t.type||"GET")&&t.postData&&!o?t.postData=a(t.postData,n):t.params=a(t.params,n),p(t,s)}function t(){}var l="https://api.spotify.com/v1",c=null,y=null;return(t.prototype={constructor:SpotifyWebApi}).getGeneric=function(t,e){return i({url:t},e)},t.prototype.getMe=function(t,e){return i({url:l+"/me"},t,e)},t.prototype.getMySavedTracks=function(t,e){return i({url:l+"/me/tracks"},t,e)},t.prototype.addToMySavedTracks=function(t,e,r){return i({url:l+"/me/tracks",type:"PUT",postData:t},e,r)},t.prototype.removeFromMySavedTracks=function(t,e,r){return i({url:l+"/me/tracks",type:"DELETE",postData:t},e,r)},t.prototype.containsMySavedTracks=function(t,e,r){var o={url:l+"/me/tracks/contains",params:{ids:t.join(",")}};return i(o,e,r)},t.prototype.getMySavedAlbums=function(t,e){return i({url:l+"/me/albums"},t,e)},t.prototype.addToMySavedAlbums=function(t,e,r){return i({url:l+"/me/albums",type:"PUT",postData:t},e,r)},t.prototype.removeFromMySavedAlbums=function(t,e,r){return i({url:l+"/me/albums",type:"DELETE",postData:t},e,r)},t.prototype.containsMySavedAlbums=function(t,e,r){var o={url:l+"/me/albums/contains",params:{ids:t.join(",")}};return i(o,e,r)},t.prototype.getMyTopArtists=function(t,e){return i({url:l+"/me/top/artists"},t,e)},t.prototype.getMyTopTracks=function(t,e){return i({url:l+"/me/top/tracks"},t,e)},t.prototype.getMyRecentlyPlayedTracks=function(t,e){return i({url:l+"/me/player/recently-played"},t,e)},t.prototype.followUsers=function(t,e){var r={url:l+"/me/following/",type:"PUT",params:{ids:t.join(","),type:"user"}};return i(r,e)},t.prototype.followArtists=function(t,e){var r={url:l+"/me/following/",type:"PUT",params:{ids:t.join(","),type:"artist"}};return i(r,e)},t.prototype.followPlaylist=function(t,e,r,o){var n={url:l+"/users/"+encodeURIComponent(t)+"/playlists/"+e+"/followers",type:"PUT",postData:{}};return i(n,r,o)},t.prototype.unfollowUsers=function(t,e){var r={url:l+"/me/following/",type:"DELETE",params:{ids:t.join(","),type:"user"}};return i(r,e)},t.prototype.unfollowArtists=function(t,e){var r={url:l+"/me/following/",type:"DELETE",params:{ids:t.join(","),type:"artist"}};return i(r,e)},t.prototype.unfollowPlaylist=function(t,e,r){var o={url:l+"/users/"+encodeURIComponent(t)+"/playlists/"+e+"/followers",type:"DELETE"};return i(o,r)},t.prototype.isFollowingUsers=function(t,e){var r={url:l+"/me/following/contains",type:"GET",params:{ids:t.join(","),type:"user"}};return i(r,e)},t.prototype.isFollowingArtists=function(t,e){var r={url:l+"/me/following/contains",type:"GET",params:{ids:t.join(","),type:"artist"}};return i(r,e)},t.prototype.areFollowingPlaylist=function(t,e,r,o){var n={url:l+"/users/"+encodeURIComponent(t)+"/playlists/"+e+"/followers/contains",type:"GET",params:{ids:r.join(",")}};return i(n,o)},t.prototype.getFollowedArtists=function(t,e){return i({url:l+"/me/following",type:"GET",params:{type:"artist"}},t,e)},t.prototype.getUser=function(t,e,r){var o={url:l+"/users/"+encodeURIComponent(t)};return i(o,e,r)},t.prototype.getUserPlaylists=function(t,e,r){var o;return"string"==typeof t?o={url:l+"/users/"+encodeURIComponent(t)+"/playlists"}:(o={url:l+"/me/playlists"},r=e,e=t),i(o,e,r)},t.prototype.getPlaylist=function(t,e,r,o){var n={url:l+"/users/"+encodeURIComponent(t)+"/playlists/"+e};return i(n,r,o)},t.prototype.getPlaylistTracks=function(t,e,r,o){var n={url:l+"/users/"+encodeURIComponent(t)+"/playlists/"+e+"/tracks"};return i(n,r,o)},t.prototype.createPlaylist=function(t,e,r){var o={url:l+"/users/"+encodeURIComponent(t)+"/playlists",type:"POST",postData:e};return i(o,e,r)},t.prototype.changePlaylistDetails=function(t,e,r,o){var n={url:l+"/users/"+encodeURIComponent(t)+"/playlists/"+e,type:"PUT",postData:r};return i(n,r,o)},t.prototype.addTracksToPlaylist=function(t,e,r,o,n){var s={url:l+"/users/"+encodeURIComponent(t)+"/playlists/"+e+"/tracks",type:"POST",postData:{uris:r}};return i(s,o,n,!0)},t.prototype.replaceTracksInPlaylist=function(t,e,r,o){var n={url:l+"/users/"+encodeURIComponent(t)+"/playlists/"+e+"/tracks",type:"PUT",postData:{uris:r}};return i(n,{},o)},t.prototype.reorderTracksInPlaylist=function(t,e,r,o,n,s){var a={url:l+"/users/"+encodeURIComponent(t)+"/playlists/"+e+"/tracks",type:"PUT",postData:{range_start:r,insert_before:o}};return i(a,n,s)},t.prototype.removeTracksFromPlaylist=function(t,e,r,o){var n=r.map(function(t){return"string"==typeof t?{uri:t}:t}),s={url:l+"/users/"+encodeURIComponent(t)+"/playlists/"+e+"/tracks",type:"DELETE",postData:{tracks:n}};return i(s,{},o)},t.prototype.removeTracksFromPlaylistWithSnapshotId=function(t,e,r,o,n){var s=r.map(function(t){return"string"==typeof t?{uri:t}:t}),a={url:l+"/users/"+encodeURIComponent(t)+"/playlists/"+e+"/tracks",type:"DELETE",postData:{tracks:s,snapshot_id:o}};return i(a,{},n)},t.prototype.removeTracksFromPlaylistInPositions=function(t,e,r,o,n){var s={url:l+"/users/"+encodeURIComponent(t)+"/playlists/"+e+"/tracks",type:"DELETE",postData:{positions:r,snapshot_id:o}};return i(s,{},n)},t.prototype.getAlbum=function(t,e,r){return i({url:l+"/albums/"+t},e,r)},t.prototype.getAlbumTracks=function(t,e,r){return i({url:l+"/albums/"+t+"/tracks"},e,r)},t.prototype.getAlbums=function(t,e,r){var o={url:l+"/albums/",params:{ids:t.join(",")}};return i(o,e,r)},t.prototype.getTrack=function(t,e,r){var o={};return o.url=l+"/tracks/"+t,i(o,e,r)},t.prototype.getTracks=function(t,e,r){var o={url:l+"/tracks/",params:{ids:t.join(",")}};return i(o,e,r)},t.prototype.getArtist=function(t,e,r){return i({url:l+"/artists/"+t},e,r)},t.prototype.getArtists=function(t,e,r){var o={url:l+"/artists/",params:{ids:t.join(",")}};return i(o,e,r)},t.prototype.getArtistAlbums=function(t,e,r){return i({url:l+"/artists/"+t+"/albums"},e,r)},t.prototype.getArtistTopTracks=function(t,e,r,o){return i({url:l+"/artists/"+t+"/top-tracks",params:{country:e}},r,o)},t.prototype.getArtistRelatedArtists=function(t,e,r){return i({url:l+"/artists/"+t+"/related-artists"},e,r)},t.prototype.getFeaturedPlaylists=function(t,e){return i({url:l+"/browse/featured-playlists"},t,e)},t.prototype.getNewReleases=function(t,e){return i({url:l+"/browse/new-releases"},t,e)},t.prototype.getCategories=function(t,e){return i({url:l+"/browse/categories"},t,e)},t.prototype.getCategory=function(t,e,r){return i({url:l+"/browse/categories/"+t},e,r)},t.prototype.getCategoryPlaylists=function(t,e,r){return i({url:l+"/browse/categories/"+t+"/playlists"},e,r)},t.prototype.search=function(t,e,r,o){var n={url:l+"/search/",params:{q:t,type:e.join(",")}};return i(n,r,o)},t.prototype.searchAlbums=function(t,e,r){return this.search(t,["album"],e,r)},t.prototype.searchArtists=function(t,e,r){return this.search(t,["artist"],e,r)},t.prototype.searchTracks=function(t,e,r){return this.search(t,["track"],e,r)},t.prototype.searchPlaylists=function(t,e,r){return this.search(t,["playlist"],e,r)},t.prototype.getAudioFeaturesForTrack=function(t,e){var r={};return r.url=l+"/audio-features/"+t,i(r,{},e)},t.prototype.getAudioFeaturesForTracks=function(t,e){return i({url:l+"/audio-features",params:{ids:t}},{},e)},t.prototype.getAudioAnalysisForTrack=function(t,e){var r={};return r.url=l+"/audio-analysis/"+t,i(r,{},e)},t.prototype.getRecommendations=function(t,e){return i({url:l+"/recommendations"},t,e)},t.prototype.getAvailableGenreSeeds=function(t){return i({url:l+"/recommendations/available-genre-seeds"},{},t)},t.prototype.getMyDevices=function(t){return i({url:l+"/me/player/devices"},{},t)},t.prototype.getMyCurrentPlaybackState=function(t,e){return i({url:l+"/me/player"},t,e)},t.prototype.getMyCurrentPlayingTrack=function(t,e){return i({url:l+"/me/player/currently-playing"},t,e)},t.prototype.transferMyPlayback=function(t,e,r){var o=e||{};return o.device_ids=t,i({type:"PUT",url:l+"/me/player",postData:o},e,r)},t.prototype.play=function(e,t){var r="device_id"in e?{device_id:e.device_id}:null,o={};return["context_uri","uris","offset"].forEach(function(t){t in e&&(o[t]=e[t])}),i({type:"PUT",url:l+"/me/player/play",params:r,postData:o},"function"==typeof e?e:{},t)},t.prototype.pause=function(t,e){var r="device_id"in t?{device_id:t.device_id}:null;return i({type:"PUT",url:l+"/me/player/pause",params:r},t,e)},t.prototype.skipToNext=function(t,e){var r="device_id"in t?{device_id:t.device_id}:null;return i({type:"POST",url:l+"/me/player/next",params:r},t,e)},t.prototype.skipToPrevious=function(t,e){var r="device_id"in t?{device_id:t.device_id}:null;return i({type:"POST",url:l+"/me/player/previous",params:r},t,e)},t.prototype.seek=function(t,e,r){var o={position_ms:t};return"device_id"in e&&(o.device_id=e.device_id),i({type:"PUT",url:l+"/me/player/seek",params:o},e,r)},t.prototype.setRepeat=function(t,e,r){var o={state:t};return"device_id"in e&&(o.device_id=e.device_id),i({type:"PUT",url:l+"/me/player/repeat",params:o},e,r)},t.prototype.setVolume=function(t,e,r){var o={volume_percent:t};return"device_id"in e&&(o.device_id=e.device_id),i({type:"PUT",url:l+"/me/player/volume",params:o},e,r)},t.prototype.setShuffle=function(t,e,r){var o={state:t};return"device_id"in e&&(o.device_id=e.device_id),i({type:"PUT",url:l+"/me/player/shuffle",params:o},e,r)},t.prototype.getAccessToken=function(){return c},t.prototype.setAccessToken=function(t){c=t},t.prototype.setPromiseImplementation=function(t){var e=!1;try{var r=new t(function(t){t()});"function"==typeof r.then&&"function"==typeof r.catch&&(e=!0)}catch(t){console.error(t)}if(!e)throw new Error("Unsupported implementation of Promises/A+");y=t},t}();"object"==typeof module&&"object"==typeof module.exports&&(module.exports=SpotifyWebApi);