!function(o){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return o(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t=t||window,e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),o(e,t,t.document)}:o(jQuery,window,document)}(function(p,s,c,g){"use strict";var a=p.fn.dataTable,o=0,r=function(t,e){if(!a.versionCheck||!a.versionCheck("1.10.8"))throw"Warning: AutoFill requires DataTables 1.10.8 or greater";this.c=p.extend(!0,{},a.defaults.autoFill,r.defaults,e),this.s={dt:new a.Api(t),namespace:".autoFill"+o++,scroll:{},scrollInterval:null,handle:{height:0,width:0},enabled:!1},this.dom={handle:p('<div class="dt-autofill-handle"/>'),select:{top:p('<div class="dt-autofill-select top"/>'),right:p('<div class="dt-autofill-select right"/>'),bottom:p('<div class="dt-autofill-select bottom"/>'),left:p('<div class="dt-autofill-select left"/>')},background:p('<div class="dt-autofill-background"/>'),list:p('<div class="dt-autofill-list">'+this.s.dt.i18n("autoFill.info","")+"<ul/></div>"),dtScroll:null,offsetParent:null},this._constructor()};p.extend(r.prototype,{enabled:function(){return this.s.enabled},enable:function(t){var e=this;return!1===t?this.disable():(this.s.enabled=!0,this._focusListener(),this.dom.handle.on("mousedown",function(t){return e._mousedown(t),!1}),this)},disable:function(){return this.s.enabled=!1,this._focusListenerRemove(),this},_constructor:function(){var t=this,e=this.s.dt,o=p("div.dataTables_scrollBody",this.s.dt.table().container());e.settings()[0].autoFill=this,o.length&&"static"===(this.dom.dtScroll=o).css("position")&&o.css("position","relative"),!1!==this.c.enable&&this.enable(),e.on("destroy.autoFill",function(){t._focusListenerRemove()})},_attach:function(t){var e,o=this.s.dt,i=o.cell(t).index(),n=this.dom.handle,l=this.s.handle;i&&-1!==o.columns(this.c.columns).indexes().indexOf(i.column)?(this.dom.offsetParent||(this.dom.offsetParent=p(o.table().node()).offsetParent()),l.height&&l.width||(n.appendTo("body"),l.height=n.outerHeight(),l.width=n.outerWidth()),e=this._getPosition(t,this.dom.offsetParent),this.dom.attachedTo=t,n.css({top:e.top+t.offsetHeight-l.height,left:e.left+t.offsetWidth-l.width}).appendTo(this.dom.offsetParent)):this._detach()},_actionSelector:function(o){var t,i,n=this,l=this.s.dt,s=r.actions,a=[];p.each(s,function(t,e){e.available(l,o)&&a.push(t)}),1===a.length&&!1===this.c.alwaysAsk?(t=s[a[0]].execute(l,o),this._update(t,o)):(i=this.dom.list.children("ul").empty(),a.push("cancel"),p.each(a,function(t,e){i.append(p("<li/>").append('<div class="dt-autofill-question">'+s[e].option(l,o)+"<div>").append(p('<div class="dt-autofill-button">').append(p('<button class="'+r.classes.btn+'">'+l.i18n("autoFill.button","&gt;")+"</button>").on("click",function(){var t=s[e].execute(l,o,p(this).closest("li"));n._update(t,o),n.dom.background.remove(),n.dom.list.remove()}))))}),this.dom.background.appendTo("body"),this.dom.list.appendTo("body"),this.dom.list.css("margin-top",this.dom.list.outerHeight()/2*-1))},_detach:function(){this.dom.attachedTo=null,this.dom.handle.detach()},_drawSelection:function(t,e){var o,i,n,l,s,a,r,d=this.s.dt,u=this.s.start,c=p(this.dom.start),h=p(t),f={row:d.rows({page:"current"}).nodes().indexOf(h.parent()[0]),column:h.index()},m=d.column.index("toData",f.column);d.cell(h).any()&&-1!==d.columns(this.c.columns).indexes().indexOf(m)&&(this.s.end=f,o=u.row<f.row?c:h,i=u.row<f.row?h:c,n=u.column<f.column?c:h,l=u.column<f.column?h:c,o=this._getPosition(o).top,n=this._getPosition(n).left,s=this._getPosition(i).top+i.outerHeight()-o,a=this._getPosition(l).left+l.outerWidth()-n,(r=this.dom.select).top.css({top:o,left:n,width:a}),r.left.css({top:o,left:n,height:s}),r.bottom.css({top:o+s,left:n,width:a}),r.right.css({top:o,left:n+a,height:s}))},_editor:function(t){var e=this.s.dt,o=this.c.editor;if(o){for(var i={},n=[],l=o.fields(),s=0,a=t.length;s<a;s++)for(var r=0,d=t[s].length;r<d;r++){var u=t[s][r],c=e.settings()[0].aoColumns[u.index.column],h=c.editField;if(h===g)for(var f=c.mData,m=0,p=l.length;m<p;m++){var v=o.field(l[m]);if(v.dataSrc()===f){h=v.name();break}}if(!h)throw"Could not automatically determine field data. Please see https://datatables.net/tn/11";i[h]||(i[h]={});var b=e.row(u.index.row).id();i[h][b]=u.set,n.push(u.index)}o.bubble(n,!1).multiSet(i).submit()}},_emitEvent:function(o,i){this.s.dt.iterator("table",function(t,e){p(t.nTable).triggerHandler(o+".dt",i)})},_focusListener:function(){var i=this,e=this.s.dt,t=this.s.namespace,o=null!==this.c.focus?this.c.focus:e.init().keys||e.settings()[0].keytable?"focus":"hover";"focus"===o?e.on("key-focus.autoFill",function(t,e,o){i._attach(o.node())}).on("key-blur.autoFill",function(t,e,o){i._detach()}):"click"===o?(p(e.table().body()).on("click"+t,"td, th",function(t){i._attach(this)}),p(c.body).on("click"+t,function(t){p(t.target).parents().filter(e.table().body()).length||i._detach()})):p(e.table().body()).on("mouseenter"+t,"td, th",function(t){i._attach(this)}).on("mouseleave"+t,function(t){p(t.relatedTarget).hasClass("dt-autofill-handle")||i._detach()})},_focusListenerRemove:function(){var t=this.s.dt;t.off(".autoFill"),p(t.table().body()).off(this.s.namespace),p(c.body).off(this.s.namespace)},_getPosition:function(t,e){var o,i,n=p(t),l=0,s=0;e=e||p(this.s.dt.table().node()).offsetParent();do{if(i=n.position(),o=n.offsetParent(),l+=i.top+o.scrollTop(),s+=i.left+o.scrollLeft(),"body"===n.get(0).nodeName.toLowerCase())break;n=o}while(o.get(0)!==e.get(0));return{top:l,left:s}},_mousedown:function(t){var e=this,o=this.s.dt;this.dom.start=this.dom.attachedTo,this.s.start={row:o.rows({page:"current"}).nodes().indexOf(p(this.dom.start).parent()[0]),column:p(this.dom.start).index()},p(c.body).on("mousemove.autoFill",function(t){e._mousemove(t)}).on("mouseup.autoFill",function(t){e._mouseup(t)});var i=this.dom.select,n=p(o.table().node()).offsetParent();i.top.appendTo(n),i.left.appendTo(n),i.right.appendTo(n),i.bottom.appendTo(n),this._drawSelection(this.dom.start,t),this.dom.handle.css("display","none");var l=this.dom.dtScroll;this.s.scroll={windowHeight:p(s).height(),windowWidth:p(s).width(),dtTop:l?l.offset().top:null,dtLeft:l?l.offset().left:null,dtHeight:l?l.outerHeight():null,dtWidth:l?l.outerWidth():null}},_mousemove:function(t){this.s.dt;var e=t.target.nodeName.toLowerCase();"td"!==e&&"th"!==e||(this._drawSelection(t.target,t),this._shiftScroll(t))},_mouseup:function(t){p(c.body).off(".autoFill");var l=this.s.dt,e=this.dom.select;e.top.remove(),e.left.remove(),e.right.remove(),e.bottom.remove(),this.dom.handle.css("display","block");var o=this.s.start,i=this.s.end;if(o.row!==i.row||o.column!==i.column){for(var s=this._range(o.row,i.row),n=this._range(o.column,i.column),a=[],r=l.settings()[0],d=r.aoColumns,u=0;u<s.length;u++)a.push(p.map(n,function(t){var e=l.cell(":eq("+s[u]+")",t+":visible",{page:"current"}),o=e.data(),i=e.index(),n=d[i.column].editField;return n!==g&&(o=r.oApi._fnGetObjectDataFn(n)(l.row(i.row).data())),{cell:e,data:o,label:e.data(),index:i}}));this._actionSelector(a),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null}},_range:function(t,e){var o,i=[];if(t<=e)for(o=t;o<=e;o++)i.push(o);else for(o=t;e<=o;o--)i.push(o);return i},_shiftScroll:function(t){var e,o,i,n,l=this,s=(this.s.dt,this.s.scroll),a=!1,r=t.pageY-c.body.scrollTop,d=t.pageX-c.body.scrollLeft;r<65?e=-5:r>s.windowHeight-65&&(e=5),d<65?o=-5:d>s.windowWidth-65&&(o=5),null!==s.dtTop&&t.pageY<s.dtTop+65?i=-5:null!==s.dtTop&&t.pageY>s.dtTop+s.dtHeight-65&&(i=5),null!==s.dtLeft&&t.pageX<s.dtLeft+65?n=-5:null!==s.dtLeft&&t.pageX>s.dtLeft+s.dtWidth-65&&(n=5),e||o||i||n?(s.windowVert=e,s.windowHoriz=o,s.dtVert=i,s.dtHoriz=n,a=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&a&&(this.s.scrollInterval=setInterval(function(){var t;s.windowVert&&(c.body.scrollTop+=s.windowVert),s.windowHoriz&&(c.body.scrollLeft+=s.windowHoriz),(s.dtVert||s.dtHoriz)&&(t=l.dom.dtScroll[0],s.dtVert&&(t.scrollTop+=s.dtVert),s.dtHoriz&&(t.scrollLeft+=s.dtHoriz))},20))},_update:function(t,e){if(!1!==t){var o,i=this.s.dt;if(this._emitEvent("preAutoFill",[i,e]),this._editor(e),null!==this.c.update?this.c.update:!this.c.editor){for(var n=0,l=e.length;n<l;n++)for(var s=0,a=e[n].length;s<a;s++)(o=e[n][s]).cell.data(o.set);i.draw(!1)}this._emitEvent("autoFill",[i,e])}}}),r.actions={increment:{available:function(t,e){return p.isNumeric(e[0][0].label)},option:function(t,e){return t.i18n("autoFill.increment",'Increment / decrement each cell by: <input type="number" value="1">')},execute:function(t,e,o){for(var i=+e[0][0].data,n=+p("input",o).val(),l=0,s=e.length;l<s;l++)for(var a=0,r=e[l].length;a<r;a++)e[l][a].set=i,i+=n}},fill:{available:function(t,e){return!0},option:function(t,e){return t.i18n("autoFill.fill","Fill all cells with <i>"+e[0][0].label+"</i>")},execute:function(t,e,o){for(var i=e[0][0].data,n=0,l=e.length;n<l;n++)for(var s=0,a=e[n].length;s<a;s++)e[n][s].set=i}},fillHorizontal:{available:function(t,e){return 1<e.length&&1<e[0].length},option:function(t,e){return t.i18n("autoFill.fillHorizontal","Fill cells horizontally")},execute:function(t,e,o){for(var i=0,n=e.length;i<n;i++)for(var l=0,s=e[i].length;l<s;l++)e[i][l].set=e[i][0].data}},fillVertical:{available:function(t,e){return 1<e.length&&1<e[0].length},option:function(t,e){return t.i18n("autoFill.fillVertical","Fill cells vertically")},execute:function(t,e,o){for(var i=0,n=e.length;i<n;i++)for(var l=0,s=e[i].length;l<s;l++)e[i][l].set=e[0][l].data}},cancel:{available:function(){return!1},option:function(t){return t.i18n("autoFill.cancel","Cancel")},execute:function(){return!1}}},r.version="2.2.0",r.defaults={alwaysAsk:!1,focus:null,columns:"",enable:!0,update:null,editor:null},r.classes={btn:"btn"};var t=p.fn.dataTable.Api;return t.register("autoFill()",function(){return this}),t.register("autoFill().enabled()",function(){var t=this.context[0];return!!t.autoFill&&t.autoFill.enabled()}),t.register("autoFill().enable()",function(e){return this.iterator("table",function(t){t.autoFill&&t.autoFill.enable(e)})}),t.register("autoFill().disable()",function(){return this.iterator("table",function(t){t.autoFill&&t.autoFill.disable()})}),p(c).on("preInit.dt.autofill",function(t,e,o){var i,n,l;"dt"===t.namespace&&(i=e.oInit.autoFill,n=a.defaults.autoFill,(i||n)&&(l=p.extend({},i,n),!1!==i&&new r(e,l)))}),a.AutoFill=r,a.AutoFill=r});