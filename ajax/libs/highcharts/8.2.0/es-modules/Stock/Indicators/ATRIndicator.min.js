"use strict";import U from"../../Core/Utilities.js";var UNDEFINED,isArray=U.isArray,seriesType=U.seriesType;function accumulateAverage(e,a,r,t){var s=a[t],u=r[t];e.push([s,u])}function getTR(e,a){var r=e,t=a,s=r[1]-r[2],u=t===UNDEFINED?0:Math.abs(r[1]-t[3]),i=t===UNDEFINED?0:Math.abs(r[2]-t[3]);return Math.max(s,u,i)}function populateAverage(e,a,r,t,s,u){return[a[t-1],(u*(s-1)+getTR(r[t-1],r[t-2]))/s]}seriesType("atr","sma",{params:{period:14}},{getValues:function(e,a){var r,t,s,u=a.period,i=e.xData,p=e.yData,n=p?p.length:0,h=1,o=0,g=0,l=[],D=[],c=[];if(s=[[i[0],p[0]]],!(i.length<=u)&&isArray(p[0])&&4===p[0].length){for(t=1;t<=n;t++)accumulateAverage(s,i,p,t),u<h?(o=(r=populateAverage(s,i,p,t,u,o))[1],l.push(r),D.push(r[0]),c.push(r[1])):u===h?(o=g/(t-1),l.push([i[t-1],o]),D.push(i[t-1]),c.push(o),h++):(g+=getTR(p[t-1],p[t-2]),h++);return{values:l,xData:D,yData:c}}}});