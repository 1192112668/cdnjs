"use strict";import U from"../../Core/Utilities.js";var seriesType=U.seriesType;seriesType("cmf","sma",{params:{period:14,volumeSeriesID:"volume"}},{nameBase:"Chaikin Money Flow",isValid:function(){var e=this.chart,t=this.options,i=this.linkedParent,s=this.volumeSeries||(this.volumeSeries=e.get(t.params.volumeSeriesID)),a=i&&i.yData&&4===i.yData[0].length;function r(e){return e.xData&&e.xData.length>=t.params.period}return!!(i&&s&&r(i)&&r(s)&&a)},getValues:function(e,t){if(this.isValid())return this.getMoneyFlow(e.xData,e.yData,this.volumeSeries.yData,t.period)},getMoneyFlow:function(e,t,i,s){var a,r,n=t.length,l=[],u=0,o=0,h=[],p=[],m=[],f=-1;function v(e,t){var i,s,r,n=e[1],l=e[2],u=e[3];return null!==t&&null!==n&&null!==l&&null!==u&&n!==l?((r=u)-(s=l)-((i=n)-r))/(i-s)*t:(f=a,null)}if(s>0&&s<=n){for(a=0;a<s;a++)l[a]=v(t[a],i[a]),u+=i[a],o+=l[a];for(h.push(e[a-1]),p.push(a-f>=s&&0!==u?o/u:null),m.push([h[0],p[0]]);a<n;a++)l[a]=v(t[a],i[a]),u-=i[a-s],u+=i[a],o-=l[a-s],o+=l[a],r=[e[a],a-f>=s?o/u:null],h.push(r[0]),p.push(r[1]),m.push([r[0],r[1]])}return{values:m,xData:h,yData:p}}});