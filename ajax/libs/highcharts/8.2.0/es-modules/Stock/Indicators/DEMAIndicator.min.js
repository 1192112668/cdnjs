"use strict";import H from"../../Core/Globals.js";import U from"../../Core/Utilities.js";var correctFloat=U.correctFloat,isArray=U.isArray,seriesType=U.seriesType;import requiredIndicator from"../../Mixins/IndicatorRequired.js";var EMAindicator=H.seriesTypes.ema;seriesType("dema","ema",{},{init:function(){var e=arguments,r=this;requiredIndicator.isParentLoaded(EMAindicator,"ema",r.type,function(t){t.prototype.init.apply(r,e)})},getEMA:function(e,r,t,i,a,o){return EMAindicator.prototype.calculateEma(o||[],e,void 0===a?1:a,this.chart.series[0].EMApercent,r,void 0===i?-1:i,t)},getValues:function(e,r){var t,i,a,o,s,n=r.period,c=2*n,p=e.xData,d=e.yData,u=d?d.length:0,y=-1,l=0,m=0,A=[],h=[],E=[],M=0,f=[];if(e.EMApercent=2/(n+1),!(u<2*n-1)){for(isArray(d[0])&&(y=r.index?r.index:0),m=(l=EMAindicator.prototype.accumulatePeriodPoints(n,y,d))/n,l=0,o=n;o<u+2;o++)o<u+1&&(M=this.getEMA(d,i,m,y,o)[1],f.push(M)),i=M,o<c?l+=M:(o===c&&(m=l/n),M=f[o-n-1],t=this.getEMA([M],a,m)[1],s=[p[o-2],correctFloat(2*M-t)],A.push(s),h.push(s[0]),E.push(s[1]),a=t);return{values:A,xData:h,yData:E}}}});