"use strict";import U from"../../Core/Utilities.js";var isArray=U.isArray,seriesType=U.seriesType;function accumulateAverage(e,r,a,u,t){var s=r[u],i=t<0?a[u]:a[u][t];e.push([s,i])}function weightedSumArray(e,r){var a=(r+1)/2*r;return e.reduce(function(e,r,a){return[null,e[1]+r[1]*(a+1)]})[1]/a}function populateAverage(e,r,a,u){var t=weightedSumArray(e,e.length),s=r[u-1];return e.shift(),[s,t]}seriesType("wma","sma",{params:{index:3,period:9}},{getValues:function(e,r){var a,u,t,s=r.period,i=e.xData,n=e.yData,p=n?n.length:0,o=1,l=i[0],c=n[0],h=[],g=[],v=[],A=-1;if(!(i.length<s)){for(isArray(n[0])&&(A=r.index,c=n[0][A]),u=[[l,c]];o!==s;)accumulateAverage(u,i,n,o,A),o++;for(a=o;a<p;a++)t=populateAverage(u,i,n,a),h.push(t),g.push(t[0]),v.push(t[1]),accumulateAverage(u,i,n,a,A);return t=populateAverage(u,i,n,a),h.push(t),g.push(t[0]),v.push(t[1]),{values:h,xData:g,yData:v}}}});