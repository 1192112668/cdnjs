"use strict";!function(a){"object"==typeof module&&module.exports?module.exports=a.default=a:"function"==typeof define&&define.amd?define("highcharts/indicators/pivot-points",["highcharts","highcharts/modules/stock"],function(t){return a(t),a.Highcharts=t,a}):a("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var a=t?t._modules:{};function n(t,a,n,o){t.hasOwnProperty(a)||(t[a]=o.apply(null,n))}n(a,"Stock/Indicators/PivotPointsIndicator.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(t,a){var c=a.defined,g=a.isArray,n=a.seriesType,u=t.seriesTypes.sma;function o(t,a){var n,o=t.series.pointArrayMap,e=o.length;for(u.prototype.pointClass.prototype[a].call(t);e--;)t[n="dataLabel"+o[e]]&&t[n].element&&t[n].destroy(),t[n]=null}n("pivotpoints","sma",{params:{period:28,algorithm:"standard"},marker:{enabled:!1},enableMouseTracking:!1,dataLabels:{enabled:!0,format:"{point.pivotLine}"},dataGrouping:{approximation:"averages"}},{nameBase:"Pivot Points",pointArrayMap:["R4","R3","R2","R1","P","S1","S2","S3","S4"],pointValKey:"P",toYData:function(t){return[t.P]},translate:function(){var n=this;u.prototype.translate.apply(n),n.points.forEach(function(a){n.pointArrayMap.forEach(function(t){c(a[t])&&(a["plot"+t]=n.yAxis.toPixels(a[t],!0))})}),n.plotEndPoint=n.xAxis.toPixels(n.endPoint,!0)},getGraphPath:function(t){for(var a,n,o,e=this,i=t.length,l=[[],[],[],[],[],[],[],[],[]],r=[],s=e.plotEndPoint,p=e.pointArrayMap.length;i--;){for(n=t[i],o=0;o<p;o++)a=e.pointArrayMap[o],c(n[a])&&l[o].push({plotX:n.plotX,plotY:n["plot"+a],isNull:!1},{plotX:s,plotY:n["plot"+a],isNull:!1},{plotX:s,plotY:null,isNull:!0});s=n.plotX}return l.forEach(function(t){r=r.concat(u.prototype.getGraphPath.call(e,t))}),r},drawDataLabels:function(){var n,o,e,i,l=this,r=l.pointArrayMap;l.options.dataLabels.enabled&&(o=l.points.length,r.concat([!1]).forEach(function(t,a){for(i=o;i--;)e=l.points[i],t?(e.y=e[t],e.pivotLine=t,e.plotY=e["plot"+t],n=e["dataLabel"+t],a&&(e["dataLabel"+r[a-1]]=e.dataLabel),e.dataLabels||(e.dataLabels=[]),e.dataLabels[0]=e.dataLabel=n=n&&n.element?n:null):e["dataLabel"+r[a-1]]=e.dataLabel;u.prototype.drawDataLabels.apply(l,arguments)}))},getValues:function(t,a){var n,o,e,i,l,r,s,p=a.period,c=t.xData,u=t.yData,d=u?u.length:0,h=this[a.algorithm+"Placement"],f=[],y=[],m=[];if(!(c.length<p)&&g(u[0])&&4===u[0].length){for(s=p+1;s<=d+p;s+=p)e=c.slice(s-p-1,s),i=u.slice(s-p-1,s),n=e[(o=e.length)-1],r=h(this.getPivotAndHLC(i)),l=f.push([n].concat(r)),y.push(n),m.push(f[l-1].slice(1));return this.endPoint=e[0]+(n-e[0])/o*p,{values:f,xData:y,yData:m}}},getPivotAndHLC:function(t){var a=-1/0,n=1/0,o=t[t.length-1][3];return t.forEach(function(t){a=Math.max(a,t[1]),n=Math.min(n,t[2])}),[(a+n+o)/3,a,n,o]},standardPlacement:function(t){var a=t[1]-t[2];return[null,null,t[0]+a,2*t[0]-t[2],t[0],2*t[0]-t[1],t[0]-a,null,null]},camarillaPlacement:function(t){var a=t[1]-t[2];return[t[3]+1.5*a,t[3]+1.25*a,t[3]+1.1666*a,t[3]+1.0833*a,t[0],t[3]-1.0833*a,t[3]-1.1666*a,t[3]-1.25*a,t[3]-1.5*a]},fibonacciPlacement:function(t){var a=t[1]-t[2];return[null,t[0]+a,t[0]+.618*a,t[0]+.382*a,t[0],t[0]-.382*a,t[0]-.618*a,t[0]-a,null]}},{destroyElements:function(){o(this,"destroyElements")},destroy:function(){o(this,"destroyElements")}})}),n(a,"masters/indicators/pivot-points.src.js",[],function(){})});