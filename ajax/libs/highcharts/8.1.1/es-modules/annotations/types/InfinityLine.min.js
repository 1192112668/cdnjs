"use strict";import Annotation from"../annotations.src.js";import MockPoint from"../MockPoint.js";import H from"../../parts/Globals.js";import U from"../../parts/Utilities.js";var merge=U.merge,CrookedLine=Annotation.types.crookedLine,InfinityLine=function(){CrookedLine.apply(this,arguments)};InfinityLine.findEdgeCoordinate=function(i,n,t,e){var o="x"===t?"y":"x";return(n[t]-i[t])*(e-i[o])/(n[o]-i[o])+i[t]},InfinityLine.findEdgePoint=function(i,n){var t,e,o,r=i.series.xAxis,s=n.series.yAxis,y=MockPoint.pointToPixels(i),a=MockPoint.pointToPixels(n),x=a.x-y.x,p=a.y-y.y,d=r.left,f=d+r.width,L=s.top,c=L+s.height,g=x<0?d:f,P=p<0?L:c,h={x:0===x?y.x:g,y:0===p?y.y:P};return 0!==x&&0!==p&&(e=InfinityLine.findEdgeCoordinate(y,a,"y",g),t=InfinityLine.findEdgeCoordinate(y,a,"x",P),e>=L&&e<=c?(h.x=g,h.y=e):(h.x=t,h.y=P)),h.x-=d,h.y-=L,i.series.chart.inverted&&(o=h.x,h.x=h.y,h.y=o),h};var edgePoint=function(i,n){return function(t){var e=t.annotation,o=e.points,r=e.options.typeOptions.type;return"horizontalLine"===r?o=[o[0],new MockPoint(e.chart,o[0].target,{x:o[0].x+1,y:o[0].y,xAxis:o[0].options.xAxis,yAxis:o[0].options.yAxis})]:"verticalLine"===r&&(o=[o[0],new MockPoint(e.chart,o[0].target,{x:o[0].x,y:o[0].y+1,xAxis:o[0].options.xAxis,yAxis:o[0].options.yAxis})]),InfinityLine.findEdgePoint(o[i],o[n])}};InfinityLine.endEdgePoint=edgePoint(0,1),InfinityLine.startEdgePoint=edgePoint(1,0),H.extendAnnotation(InfinityLine,CrookedLine,{addShapes:function(){var i=this.options.typeOptions,n=[this.points[0],InfinityLine.endEdgePoint];i.type.match(/Line/g)&&(n[0]=InfinityLine.startEdgePoint);var t=this.initShape(merge(i.line,{type:"path",points:n}),!1);i.line=t.options}}),Annotation.types.infinityLine=InfinityLine;export default InfinityLine;