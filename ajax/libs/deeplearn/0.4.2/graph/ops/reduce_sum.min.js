"use strict";var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var environment_1=require("../../environment"),ndarray_1=require("../../math/ndarray"),util=require("../../util"),graph_util=require("../graph_util"),op_1=require("./op"),ReduceSum=function(o){function e(e,t){var r=o.call(this)||this;return r.x=e,r.outTensor=t,util.assertShapesMatch(t.shape,[]),r.ones=environment_1.ENV.math.keep(ndarray_1.NDArray.ones(e.shape)),r}return __extends(e,o),e.prototype.feedForward=function(t,r){var o=this,n=r.get(this.x);t.scope(function(e){r.set(o.outTensor,e(t.sum(n)))})},e.prototype.backProp=function(t,e,r){var o=this;graph_util.shouldBackProp(this.x)&&t.scope(function(){var e=r.get(o.outTensor);r.add(o.x,t.scalarTimesArray(e,o.ones))})},e.prototype.dispose=function(){this.ones.dispose()},e}(op_1.Operation);exports.ReduceSum=ReduceSum;