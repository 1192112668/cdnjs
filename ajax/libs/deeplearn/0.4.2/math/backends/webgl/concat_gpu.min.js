"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var concat_util=require("../../concat_util"),shader_compiler_1=require("./shader_compiler"),ConcatProgram=function(t,r,e){this.variableNames=["A","B"],this.outputShape=[];var o=["yR","yC","yD","yW"][e];this.outputShape=concat_util.computeOutShape(t,r,e);var n=shader_compiler_1.getCoordsDataType(t.length),a=getUnpack(t.length),i=getSampleCoords(t.length);this.userCode="\n      void main() {\n        "+n+" coords = getOutputCoords();\n        "+a+"\n\n        float value = 0.0;\n        if ("+o+" < "+t[e]+") {\n          value = getA("+i+");\n        } else {\n          "+o+" -= "+t[e]+";\n          value = getB("+i+");\n        }\n\n        setOutput(value);\n      }\n    "};function getSampleCoords(t){if(1===t)return"yR";if(2===t)return"yR, yC";if(3===t)return"yR, yC, yD";if(4===t)return"yR, yC, yD, yW";throw Error("Concat for rank "+t+" is not yet supported")}function getUnpack(t){var r=1===t?"int yR = coords;":"int yR = coords.x;";if(1<t&&(r+="\nint yC = coords.y;"),2<t&&(r+="\nint yD = coords.z;"),3<t&&(r+="\nint yW = coords.w;"),4<t)throw Error("Concat for rank "+t+" is not yet supported");return r}exports.ConcatProgram=ConcatProgram;