!function($){$.timer=function(func,time,autostart){return this.set=function(func,time,autostart){if(this.init=!0,"object"==typeof func){var paramList=["autostart","time"];for(var arg in paramList)null!=func[paramList[arg]]&&eval(paramList[arg]+" = func[paramList[arg]]");func=func.action}return"function"==typeof func&&(this.action=func),isNaN(time)||(this.intervalTime=time),autostart&&!this.active&&(this.active=!0,this.setTimer()),this},this.once=function(t){var e=this;return isNaN(t)&&(t=0),window.setTimeout(function(){e.action()},t),this},this.play=function(t){return this.active||(t?this.setTimer():this.setTimer(this.remaining),this.active=!0),this},this.pause=function(){return this.active&&(this.active=!1,this.remaining-=new Date-this.last,this.clearTimer()),this},this.stop=function(){return this.active=!1,this.remaining=this.intervalTime,this.clearTimer(),this},this.toggle=function(t){return this.active?this.pause():t?this.play(!0):this.play(),this},this.reset=function(){return this.active=!1,this.play(!0),this},this.clearTimer=function(){window.clearTimeout(this.timeoutObject)},this.setTimer=function(t){var e=this;"function"==typeof this.action&&(isNaN(t)&&(t=this.intervalTime),this.remaining=t,this.last=new Date,this.clearTimer(),this.timeoutObject=window.setTimeout(function(){e.go()},t))},this.go=function(){this.active&&(this.action(),this.setTimer())},this.init?new $.timer(func,time,autostart):(this.set(func,time,autostart),this)},$.fn.polyglotLanguageSwitcher=function(t){var s,e,o,n,c=$.fn.polyglotLanguageSwitcher,h=$(this),i=$(this).attr("id"),u=$('<ul class="dropdown">'),a=0,r=!1,f=[],l=$.extend({},c.defaults,t),m="static"==l.websiteType;function d(t){l[t.name]&&l[t.name].call($(this),t)}function p(){r||(d({name:"beforeOpen",element:h,instance:c}),s.addClass("active"),T(!0),setTimeout(function(){r=!0,d({name:"afterOpen",element:h,instance:c})},100))}function v(){r&&(d({name:"beforeClose",element:h,instance:c}),T(!1),s.removeClass("active"),r=!1,e&&e.active&&e.clearTimer(),d({name:"afterClose",element:h,instance:c}))}function g(){e&&e.active&&e.pause()}function w(){e&&e.play(!1)}function T(t){"fade"==l.effect?t?u.fadeIn(l.animSpeed):u.fadeOut(l.animSpeed):t?u.slideDown(l.animSpeed):u.slideUp(l.animSpeed)}function N(t){v();var e=$(t).children(":first-child"),i=$(e).attr("id"),n=$(e).text();$(u).children().each(function(){$(this).detach()});for(var a=0;a<f.length;a++)$(f[a]).children(":first-child").attr("id")!=i&&u.append(f[a]);var r=s.children(":first-child");s.attr("id",i),s.text(n),s.append(r),m&&o.set("lang",i)}return m&&(o=new Persist.Store("Polyglot Language Switcher")),$("#"+i+" > form > select > option").each(function(){var i,t=$(this).attr("selected");m&&(o.get("lang",function(t,e){t&&(i=e)}),i==$(this).attr("id")&&(t=!0));var e=function(t){var e,i=$(t).attr("id"),n=$(t).attr("value"),a=$(t).text();{var r,s,o;e=m?(r="http://"+document.domain+"/"+l.pagePrefix+i+"/"+l.indexPage,$('<li><a id="'+i+'" href="'+r+'">'+a+"</a></li>")):(s=document.URL.replace("#",""),(o=function(){var t={},e=window.location.search.substr(1).split("&");if(0<e.length)for(var i=0;i<e.length;++i){var n=e[i].split("=");2==n.length&&(t[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}return t}())[l.paramName]=n,0<s.indexOf("?")&&(s=s.substring(0,s.indexOf("?"))),s+=function(t){{if(l.testMode)return"#";var e="?",i=0;for(var n in t){e+=(0<i?"&":"")+n+"="+t[n],i++}return e}}(o),$('<li><a id="'+i+'" href="'+s+'">'+a+"</a></li>"))}e.bind("click",function(){d({name:"onChange",selectedItem:$(this).children(":first").attr("id"),element:h,instance:c}),N($(this))}),"hover"==l.openMode&&e.hover(function(){g()},function(){w()});return e}($(this));t&&(n=e),f.push(e),0<a?u.append(e):(s=$('<a id="'+$(this).attr("id")+'" class="current" href="#">'+$(this).text()+' <span class="trigger">&raquo;</span></a>'),"hover"==l.openMode?s.hover(function(){p(),g()},function(){w()}):s.click(function(){p()})),a++}),$("#"+i+" form:first-child").remove(),h.append(s),h.append(u),n&&N(n),$(document).click(function(){v()}),$(document).keyup(function(t){27==t.which&&v()}),"hover"==l.openMode&&(e=$.timer(function(){v()})).set({time:l.hoverTimeout,autostart:!0}),c.open=function(){p()},c.close=function(){v()},d({name:"afterLoad",element:h,instance:c}),c};var ls=$.fn.polyglotLanguageSwitcher;ls.defaults={openMode:"click",hoverTimeout:1500,animSpeed:200,effect:"slide",paramName:"lang",pagePrefix:"",indexPage:"index.html",websiteType:"dynamic",testMode:!1,onChange:NaN,afterLoad:NaN,beforeOpen:NaN,afterOpen:NaN,beforeClose:NaN,afterClose:NaN}}(jQuery);