!function($){$.timer=function(func,time,autostart){return this.set=function(func,time,autostart){if(this.init=!0,"object"==typeof func){var paramList=["autostart","time"];for(var arg in paramList)null!=func[paramList[arg]]&&eval(paramList[arg]+" = func[paramList[arg]]");func=func.action}return"function"==typeof func&&(this.action=func),isNaN(time)||(this.intervalTime=time),autostart&&!this.active&&(this.active=!0,this.setTimer()),this},this.once=function(t){var e=this;return isNaN(t)&&(t=0),window.setTimeout(function(){e.action()},t),this},this.play=function(t){return this.active||(t?this.setTimer():this.setTimer(this.remaining),this.active=!0),this},this.pause=function(){return this.active&&(this.active=!1,this.remaining-=new Date-this.last,this.clearTimer()),this},this.stop=function(){return this.active=!1,this.remaining=this.intervalTime,this.clearTimer(),this},this.toggle=function(t){return this.active?this.pause():t?this.play(!0):this.play(),this},this.reset=function(){return this.active=!1,this.play(!0),this},this.clearTimer=function(){window.clearTimeout(this.timeoutObject)},this.setTimer=function(t){var e=this;"function"==typeof this.action&&(isNaN(t)&&(t=this.intervalTime),this.remaining=t,this.last=new Date,this.clearTimer(),this.timeoutObject=window.setTimeout(function(){e.go()},t))},this.go=function(){this.active&&(this.action(),this.setTimer())},this.init?new $.timer(func,time,autostart):(this.set(func,time,autostart),this)},$.fn.polyglotLanguageSwitcher=function(t){var r,e,o,n,c=$.fn.polyglotLanguageSwitcher,h=$(this),i=$(this).attr("id"),u=$('<ul class="dropdown">'),a=0,f=!1,l=[],m=$.extend({},c.defaults,t),d="static"==m.websiteType;function p(t){m[t.name]&&m[t.name].call($(this),t)}function s(){p({name:"beforeOpen",element:h,instance:c}),r.addClass("active"),T(!0),setTimeout(function(){f=!0,p({name:"afterOpen",element:h,instance:c})},100)}function v(){p({name:"beforeClose",element:h,instance:c}),T(!1),r.removeClass("active"),f=!1,e&&e.active&&e.clearTimer(),p({name:"afterClose",element:h,instance:c})}function g(){e&&e.active&&e.pause()}function w(){e&&e.play(!1)}function T(t){"fade"==m.effect?t?u.fadeIn(m.animSpeed):u.fadeOut(m.animSpeed):t?u.slideDown(m.animSpeed):u.slideUp(m.animSpeed)}function N(t){f&&v();var e=$(t).children(":first-child"),i=$(e).attr("id"),n=$(e).text();$(u).children().each(function(){$(this).detach()});for(var a=0;a<l.length;a++)$(l[a]).children(":first-child").attr("id")!=i&&u.append(l[a]);var s=r.children(":first-child");r.attr("id",i),r.text(n),r.append(s),d&&o.set("lang",i)}d&&(o=new Persist.Store("Polyglot Language Switcher")),$("#"+i+" > form > select > option").each(function(){var i,t=$(this).attr("selected");d&&(o.get("lang",function(t,e){t&&(i=e)}),i==$(this).attr("id")&&(t=!0));var e=function(t){var e,i=$(t).attr("id"),n=$(t).attr("value"),a=$(t).text();{var s,r,o;e=d?(s="http://"+document.domain+"/"+m.pagePrefix+i+"/"+m.indexPage,$('<li><a id="'+i+'" href="'+s+'">'+a+"</a></li>")):(r=document.URL.replace("#",""),(o=function(){var t={},e=window.location.search.substr(1).split("&");if(0<e.length)for(var i=0;i<e.length;++i){var n=e[i].split("=");2==n.length&&(t[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}return t}())[m.paramName]=n,0<r.indexOf("?")&&(r=r.substring(0,r.indexOf("?"))),r+=function(t){{if(m.testMode)return"#";var e="?",i=0;for(var n in t){e+=(0<i?"&":"")+n+"="+t[n],i++}return e}}(o),$('<li><a id="'+i+'" href="'+r+'">'+a+"</a></li>"))}e.bind("click",function(){p({name:"onChange",selectedItem:$(this).children(":first").attr("id"),element:h,instance:c}),N($(this))}),"hover"==m.openMode&&e.hover(function(){g()},function(){w()});return e}($(this));t&&(n=e),l.push(e),0<a?u.append(e):(r=$('<a id="'+$(this).attr("id")+'" class="current" href="#">'+$(this).text()+' <span class="trigger">&raquo;</span></a>'),"hover"==m.openMode?r.hover(function(){f||s(),g()},function(){w()}):r.click(function(){f||s()})),a++}),$("#"+i+" form:first-child").remove(),h.append(r),h.append(u),n&&N(n),$(document).click(function(){f&&v()}),$(document).keyup(function(t){27==t.which&&f&&v()}),"hover"==m.openMode&&(e=$.timer(function(){v()})).set({time:m.hoverTimeout,autostart:!0}),c.open=function(){s()},c.close=function(){v()},p({name:"afterLoad",element:h,instance:c})};var ls=$.fn.polyglotLanguageSwitcher;ls.defaults={openMode:"click",hoverTimeout:1500,animSpeed:200,effect:"slide",paramName:"lang",pagePrefix:"",indexPage:"index.html",websiteType:"dynamic",testMode:!1,onChange:NaN,afterLoad:NaN,beforeOpen:NaN,afterOpen:NaN,beforeClose:NaN,afterClose:NaN}}(jQuery);