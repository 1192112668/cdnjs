!function(y){y.fn.polyglotLanguageSwitcher=function(e){var c,t,o,n,i=y.fn.polyglotLanguageSwitcher,a=y(this),r=y(this).attr("id"),d=y('<ul class="dropdown">'),l=0,f=!1,s=new Array,u=y.extend({},i.defaults,e),h="static"==u.websiteType;function p(){c.addClass("active"),w(!0),setTimeout(function(){f=!0},100)}function g(){w(!1),c.removeClass("active"),f=!1,t&&t.active&&t.clearTimer()}function m(){t&&t.active&&t.pause()}function v(){t&&t.play(!1)}function w(e){"fade"==u.effect?e?d.fadeIn(u.animSpeed):d.fadeOut(u.animSpeed):e?d.slideDown(u.animSpeed):d.slideUp(u.animSpeed)}function x(e){f&&g();var t=y(e).children(":first-child"),i=y(t).attr("id"),n=y(t).text();y(d).children().each(function(){y(this).detach()});for(var a=0;a<s.length;a++)y(s[a]).children(":first-child").attr("id")!=i&&d.append(s[a]);var r=c.children(":first-child");c.attr("id",i),c.text(n),c.append(r),h&&o.set("lang",i)}h&&(o=new Persist.Store("Polyglot Language Switcher")),y("#"+r+" > form > select > option").each(function(){var i,e=y(this).attr("selected");h&&(o.get("lang",function(e,t){e&&(i=t)}),i==y(this).attr("id")&&(e=!0));var t=function(e){var t,i=y(e).attr("id"),n=y(e).attr("value"),a=y(e).text();{var r,c,o;t=h?(r="http://"+document.domain+"/"+u.pagePrefix+i+"/"+u.indexPage,y('<li><a id="'+i+'" href="'+r+'">'+a+"</a></li>")):(c=document.URL.replace("#",""),(o=function(){var e={},t=window.location.search.substr(1).split("&");if(0<t.length)for(var i=0;i<t.length;++i){var n=t[i].split("=");2==n.length&&(e[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}return e}())[u.paramName]=n,0<c.indexOf("?")&&(c=c.substring(0,c.indexOf("?"))),c+=function(e){{if(u.testMode)return"#";var t="?",i=0;for(var n in e){t+=(0<i?"&":"")+n+"="+e[n],i++}return t}}(o),y('<li><a id="'+i+'" href="'+c+'">'+a+"</a></li>"))}t.bind("click",function(){x(y(this)),u.callback&&u.callback.call(y(this),y(this).children(":first").attr("id"))}),"hover"==u.openMode&&t.hover(function(){m()},function(){v()});return t}(y(this));e&&(n=t),s.push(t),0<l?d.append(t):(c=y('<a id="'+y(this).attr("id")+'" class="current" href="#">'+y(this).text()+' <span class="trigger">&raquo;</span></a>'),"hover"==u.openMode?c.hover(function(){f||p(),m()},function(){v()}):c.click(function(){f||p()})),l++}),y("#"+r+" form:first-child").remove(),a.append(c),a.append(d),n&&x(n),y(document).click(function(){f&&g()}),y(document).keyup(function(e){27==e.which&&f&&g()}),"hover"==u.openMode&&(t=y.timer(function(){g()})).set({time:u.hoverTimeout,autostart:!0})},y.fn.polyglotLanguageSwitcher.defaults={openMode:"click",hoverTimeout:1500,animSpeed:200,effect:"slide",paramName:"lang",pagePrefix:"",indexPage:"index.html",websiteType:"dynamic",testMode:!1,callback:NaN}}(jQuery);