import*as utils from"./utils";var storage={setItem:function(e,t){if(window.localStorage)try{window.localStorage.setItem(e,t)}catch(e){}},getItem:function(e,t){if(window.localStorage)try{return window.localStorage.getItem(e,t)}catch(e){return}}};function getDefaults(){return{enabled:!1,prefix:"i18next_res_",expirationTime:6048e5}}var Cache=function(){function e(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];babelHelpers.classCallCheck(this,e),this.init(t,i),this.type="cache"}return babelHelpers.createClass(e,[{key:"init",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.services=e,this.options=utils.defaults(t,this.options||{},getDefaults())}},{key:"load",value:function(e,t){var i,a=this,n={},o=(new Date).getTime();window.localStorage&&(i=e.length,e.forEach(function(e){var r=storage.getItem(a.options.prefix+e);r&&(r=JSON.parse(r)).i18nStamp&&r.i18nStamp+a.options.expirationTime>o&&(n[e]=r),0==--i&&t(null,n)}))}},{key:"save",value:function(e){if(window.localStorage)for(var t in e)e[t].i18nStamp=(new Date).getTime(),storage.setItem(this.options.prefix+t,JSON.stringify(e[t]))}}]),e}();Cache.type="cache";export default Cache;