(function(){"use strict";var a=this;function c(t){return"string"==typeof t}function r(t,n,e){return t.call.apply(t.bind,arguments)}function o(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),n.apply(e,t)}}return function(){return n.apply(e,arguments)}}function i(t,n,e){return(i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r:o).apply(null,arguments)}function t(t){var i=J;function n(){}n.prototype=i.prototype,t.G=i.prototype,t.prototype=new n,(t.prototype.constructor=t).F=function(t,n,e){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return i.prototype[n].apply(t,r)}}var h=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function u(t,n){return-1!=t.indexOf(n)}function p(t,n){return t<n?-1:n<t?1:0}var s,f=Array.prototype.indexOf?function(t,n,e){return Array.prototype.indexOf.call(t,n,e)}:function(t,n,e){if(e=null==e?0:e<0?Math.max(0,t.length+e):e,c(t))return c(n)&&1==n.length?t.indexOf(n,e):-1;for(;e<t.length;e++)if(e in t&&t[e]===n)return e;return-1},l=Array.prototype.forEach?function(t,n,e){Array.prototype.forEach.call(t,n,e)}:function(t,n,e){for(var r=t.length,o=c(t)?t.split(""):t,i=0;i<r;i++)i in o&&n.call(e,o[i],i,t)},d=Array.prototype.filter?function(t,n,e){return Array.prototype.filter.call(t,n,e)}:function(t,n,e){for(var r,o=t.length,i=[],a=0,u=c(t)?t.split(""):t,s=0;s<o;s++){s in u&&(r=u[s],n.call(e,r,s,t)&&(i[a++]=r))}return i},g=Array.prototype.reduce?function(t,n,e,r){return r&&(n=i(n,r)),Array.prototype.reduce.call(t,n,e)}:function(e,r,t,o){var i=t;return l(e,function(t,n){i=r.call(o,i,t,n,e)}),i},n=Array.prototype.some?function(t,n,e){return Array.prototype.some.call(t,n,e)}:function(t,n,e){for(var r=t.length,o=c(t)?t.split(""):t,i=0;i<r;i++)if(i in o&&n.call(e,o[i],i,t))return!0;return!1};t:{var e=a.navigator;if(e){var y=e.userAgent;if(y){s=y;break t}}s=""}var v=u(s,"Opera")||u(s,"OPR"),w=u(s,"Trident")||u(s,"MSIE"),b=u(s,"Edge"),m=u(s,"Gecko")&&!(u(s.toLowerCase(),"webkit")&&!u(s,"Edge"))&&!(u(s,"Trident")||u(s,"MSIE"))&&!u(s,"Edge"),E=u(s.toLowerCase(),"webkit")&&!u(s,"Edge");function N(){var t=a.document;return t?t.documentMode:void 0}var x=function(){if(v&&a.opera){var n=a.opera.version;try{e=n()}catch(t){e=n}return e}var t,e="";return t=s,(n=m?/rv\:([^\);]+)(\)|;)/.exec(t):b?/Edge\/([\d\.]+)/.exec(t):w?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):E?/WebKit\/(\S+)/.exec(t):void 0)&&(e=n?n[1]:""),w&&(null!=(n=N())&&n>parseFloat(e))?String(n):e}(),T={};function S(t){if(!T[t]){for(var n=0,e=h(String(x)).split("."),r=h(String(t)).split("."),o=Math.max(e.length,r.length),i=0;0==n&&i<o;i++){var a=e[i]||"",u=r[i]||"",s=/(\d*)(\D*)/g,c=/(\d*)(\D*)/g;do{var f=s.exec(a)||["","",""],l=c.exec(u)||["","",""];if(0==f[0].length&&0==l[0].length)break;n=p(0==f[1].length?0:parseInt(f[1],10),0==l[1].length?0:parseInt(l[1],10))||p(0==f[2].length,0==l[2].length)||p(f[2],l[2])}while(0==n)}T[t]=0<=n}}var A=a.document,O=A&&w?N()||("CSS1Compat"==A.compatMode?parseInt(x,10):5):void 0,R=w&&!(9<=Number(O)),D=w&&!(8<=Number(O));function P(t,n,e,r){this.a=t,this.nodeName=e,this.nodeValue=r,this.nodeType=2,this.parentNode=this.ownerElement=n}function _(t,n){var e=D&&"href"==n.nodeName?t.getAttribute(n.nodeName,2):n.nodeValue;return new P(n,t,n.nodeName,e)}function I(t){var n=null;if(1==(e=t.nodeType)&&(n=null==(n=null==(n=t.textContent)||null==n?t.innerText:n)||null==n?"":n),"string"!=typeof n)if(R&&"title"==t.nodeName.toLowerCase()&&1==e)n=t.text;else if(9==e||1==e){t=9==e?t.documentElement:t.firstChild;for(var e=0,r=[],n="";t;){for(;1!=t.nodeType&&(n+=t.nodeValue),R&&"title"==t.nodeName.toLowerCase()&&(n+=t.text),t=(r[e++]=t).firstChild;);for(;e&&!(t=r[--e].nextSibling););}}else n=t.nodeValue;return""+n}function k(t,n,e){if(null===n)return!0;try{if(!t.getAttribute)return!1}catch(t){return!1}return D&&"class"==n&&(n="className"),null==e?!!t.getAttribute(n):t.getAttribute(n,2)==e}function B(t,n,e,r,o){return(R?function(t,n,e,r,o){if(t instanceof St||8==t.b||e&&null===t.b){var i=n.all;if(!i)return o;if("*"!=(t=Y(t))&&!(i=n.getElementsByTagName(t)))return o;if(e){for(var a=[],u=0;n=i[u++];)k(n,e,r)&&a.push(n);i=a}for(u=0;n=i[u++];)"*"==t&&"!"==n.tagName||G(o,n);return o}return M(t,n,e,r,o),o}:function(n,t,e,r,o){return t.getElementsByName&&r&&"name"==e&&!w?(t=t.getElementsByName(r),l(t,function(t){n.a(t)&&G(o,t)})):t.getElementsByClassName&&r&&"class"==e?(t=t.getElementsByClassName(r),l(t,function(t){t.className==r&&n.a(t)&&G(o,t)})):n instanceof yt?M(n,t,e,r,o):t.getElementsByTagName&&(t=t.getElementsByTagName(n.f()),l(t,function(t){k(t,e,r)&&G(o,t)})),o}).call(null,t,n,c(e)?e:null,c(r)?r:null,o||new V)}function C(t,n,e,r,o){for(n=n.firstChild;n;n=n.nextSibling)k(n,e,r)&&t.a(n)&&G(o,n);return o}function M(t,n,e,r,o){for(n=n.firstChild;n;n=n.nextSibling)k(n,e,r)&&t.a(n)&&G(o,n),M(t,n,e,r,o)}function Y(t){if(t instanceof yt){if(8==t.b)return"!";if(null===t.b)return"*"}return t.f()}function j(t,n){if(t&&n){if(t.contains&&1==n.nodeType)return t==n||t.contains(n);if(void 0!==t.compareDocumentPosition)return t==n||16&t.compareDocumentPosition(n);for(;n&&t!=n;)n=n.parentNode;return n==t}}function U(t,n){if(t==n)return 0;if(t.compareDocumentPosition)return 2&t.compareDocumentPosition(n)?1:-1;if(w&&!(9<=Number(O))){if(9==t.nodeType)return-1;if(9==n.nodeType)return 1}if("sourceIndex"in t||t.parentNode&&"sourceIndex"in t.parentNode){var e=1==t.nodeType,r=1==n.nodeType;if(e&&r)return t.sourceIndex-n.sourceIndex;var o=t.parentNode,i=n.parentNode;return o==i?F(t,n):!e&&j(o,n)?-1*L(t,n):!r&&j(i,t)?L(n,t):(e?t.sourceIndex:o.sourceIndex)-(r?n.sourceIndex:i.sourceIndex)}return(e=(r=9==t.nodeType?t:t.ownerDocument||t.document).createRange()).selectNode(t),e.collapse(!0),(r=r.createRange()).selectNode(n),r.collapse(!0),e.compareBoundaryPoints(a.Range.START_TO_END,r)}function L(t,n){var e=t.parentNode;if(e==n)return-1;for(var r=n;r.parentNode!=e;)r=r.parentNode;return F(r,t)}function F(t,n){for(var e=n;e=e.previousSibling;)if(e==t)return-1;return 1}function V(){this.b=this.a=null,this.l=0}function H(t){this.node=t,this.a=this.b=null}function X(t,n){if(!t.a)return n;if(!n.a)return t;for(var e=t.a,r=n.a,o=null,i=null,a=0;e&&r;){var i=e.node,u=r.node;i==u||i instanceof P&&u instanceof P&&i.a==u.a?(e=(i=e).a,r=r.a):0<U(e.node,r.node)?r=(i=r).a:e=(i=e).a,(i.b=o)?o.a=i:t.a=i,o=i,a++}for(i=e||r;i;)o=(i.b=o).a=i,a++,i=i.a;return t.b=o,t.l=a,t}function G(t,n){var e=new H(n);e.b=t.b,t.a?t.b.a=e:t.a=t.b=e,t.b=e,t.l++}function $(t){return(t=t.a)?t.node:null}function K(t){return(t=$(t))?I(t):""}function W(t,n){return new z(t,!!n)}function z(t,n){this.f=t,this.b=(this.c=n)?t.b:t.a,this.a=null}function q(t){var n=t.b;if(null==n)return null;var e=t.a=n;return t.b=t.c?n.b:n.a,e.node}function J(t){this.i=t,this.b=this.g=!1,this.f=null}function Q(t){return"\n  "+t.toString().split("\n").join("\n  ")}function Z(t,n){t.g=n}function tt(t,n){t.b=n}function nt(t,n){var e=t.a(n);return e instanceof V?+K(e):+e}function et(t,n){var e=t.a(n);return e instanceof V?K(e):""+e}function rt(t,n){var e=t.a(n);return e instanceof V?!!e.l:!!e}function ot(t,n,e){J.call(this,t.i),this.c=t,this.h=n,this.o=e,this.g=n.g||e.g,this.b=n.b||e.b,this.c==ct&&(e.b||e.g||4==e.i||0==e.i||!n.f?n.b||n.g||4==n.i||0==n.i||!e.f||(this.f={name:e.f.name,s:n}):this.f={name:n.f.name,s:e})}function it(t,n,e,r,o){var i;if(n=n.a(r),e=e.a(r),n instanceof V&&e instanceof V){for(r=q(n=W(n));r;r=q(n))for(i=q(o=W(e));i;i=q(o))if(t(I(r),I(i)))return!0;return!1}if(n instanceof V||e instanceof V){for(var a=typeof(r=n instanceof V?(o=n,e):(o=e,n)),u=q(i=W(o));u;u=q(i)){switch(a){case"number":u=+I(u);break;case"boolean":u=!!I(u);break;case"string":u=I(u);break;default:throw Error("Illegal primitive type for comparison.")}if(o==n&&t(u,r)||o==e&&t(r,u))return!0}return!1}return o?"boolean"==typeof n||"boolean"==typeof e?t(!!n,!!e):"number"==typeof n||"number"==typeof e?t(+n,+e):t(n,e):t(+n,+e)}function at(t,n,e,r){this.a=t,this.w=n,this.i=e,this.m=r}!m&&!w||w&&9<=Number(O)||m&&S("1.9.1"),w&&S("9"),V.prototype.unshift=function(t){(t=new H(t)).a=this.a,this.b?this.a.b=t:this.a=this.b=t,this.a=t,this.l++},t(ot),ot.prototype.a=function(t){return this.c.m(this.h,this.o,t)},ot.prototype.toString=function(){return"Binary Expression: "+this.c+Q(this.h)+Q(this.o)},at.prototype.toString=function(){return this.a};var ut={};function st(t,n,e,r){if(ut.hasOwnProperty(t))throw Error("Binary operator already created: "+t);return t=new at(t,n,e,r),ut[t.toString()]=t}st("div",6,1,function(t,n,e){return nt(t,e)/nt(n,e)}),st("mod",6,1,function(t,n,e){return nt(t,e)%nt(n,e)}),st("*",6,1,function(t,n,e){return nt(t,e)*nt(n,e)}),st("+",5,1,function(t,n,e){return nt(t,e)+nt(n,e)}),st("-",5,1,function(t,n,e){return nt(t,e)-nt(n,e)}),st("<",4,2,function(t,n,e){return it(function(t,n){return t<n},t,n,e)}),st(">",4,2,function(t,n,e){return it(function(t,n){return n<t},t,n,e)}),st("<=",4,2,function(t,n,e){return it(function(t,n){return t<=n},t,n,e)}),st(">=",4,2,function(t,n,e){return it(function(t,n){return n<=t},t,n,e)});var ct=st("=",3,2,function(t,n,e){return it(function(t,n){return t==n},t,n,e,!0)});function ft(t,n,e){this.a=t,this.b=n||1,this.f=e||1}function lt(t,n){if(n.a.length&&4!=t.i)throw Error("Primary expression must evaluate to nodeset if filter has predicate(s).");J.call(this,t.i),this.c=t,this.h=n,this.g=t.g,this.b=t.b}function ht(e,t){if(t.length<e.A)throw Error("Function "+e.j+" expects at least"+e.A+" arguments, "+t.length+" given");if(null!==e.v&&t.length>e.v)throw Error("Function "+e.j+" expects at most "+e.v+" arguments, "+t.length+" given");e.B&&l(t,function(t,n){if(4!=t.i)throw Error("Argument "+n+" to function "+e.j+" is not of type Nodeset: "+t)}),J.call(this,e.i),this.h=e,this.c=t,Z(this,e.g||n(t,function(t){return t.g})),tt(this,e.D&&!t.length||e.C&&!!t.length||n(t,function(t){return t.b}))}function pt(t,n,e,r,o,i,a,u,s){this.j=t,this.i=n,this.g=e,this.D=r,this.C=o,this.m=i,this.A=a,this.v=void 0!==u?u:a,this.B=!!s}st("!=",3,2,function(t,n,e){return it(function(t,n){return t!=n},t,n,e,!0)}),st("and",2,2,function(t,n,e){return rt(t,e)&&rt(n,e)}),st("or",1,2,function(t,n,e){return rt(t,e)||rt(n,e)}),t(lt),lt.prototype.a=function(t){return t=this.c.a(t),It(this.h,t)},lt.prototype.toString=function(){return"Filter:"+Q(this.c)+Q(this.h)},t(ht),ht.prototype.a=function(t){return this.h.m.apply(null,function(t){return Array.prototype.concat.apply(Array.prototype,arguments)}(t,this.c))},ht.prototype.toString=function(){var t,n="Function: "+this.h;return this.c.length&&(t=g(this.c,function(t,n){return t+Q(n)},"Arguments:"),n+=Q(t)),n};var dt={};function gt(t,n,e,r,o,i,a,u){if(dt.hasOwnProperty(t))throw Error("Function already created: "+t+".");dt[t]=new pt(t,n,e,r,!1,o,i,a,u)}function yt(t,n){switch(this.h=t,this.c=void 0!==n?n:null,this.b=null,t){case"comment":this.b=8;break;case"text":this.b=3;break;case"processing-instruction":this.b=7;break;case"node":break;default:throw Error("Unexpected argument")}}function vt(t){return"comment"==t||"text"==t||"processing-instruction"==t||"node"==t}function wt(t){this.b=t,this.a=0}gt("boolean",2,!(pt.prototype.toString=function(){return this.j}),!1,function(t,n){return rt(n,t)},1),gt("ceiling",1,!1,!1,function(t,n){return Math.ceil(nt(n,t))},1),gt("concat",3,!1,!1,function(e,t){return g(function(t,n,e){return arguments.length<=2?Array.prototype.slice.call(t,n):Array.prototype.slice.call(t,n,e)}(arguments,1),function(t,n){return t+et(n,e)},"")},2,null),gt("contains",2,!1,!1,function(t,n,e){return u(et(n,t),et(e,t))},2),gt("count",1,!1,!1,function(t,n){return n.a(t).l},1,1,!0),gt("false",2,!1,!1,function(){return!1},0),gt("floor",1,!1,!1,function(t,n){return Math.floor(nt(n,t))},1),gt("id",4,!1,!1,function(t,n){function e(n){if(R){var t=r.all[n];if(t){if(t.nodeType&&n==t.id)return t;if(t.length)return function(t,n){var e;t:{e=t.length;for(var r=c(t)?t.split(""):t,o=0;o<e;o++)if(o in r&&n.call(void 0,r[o],o,t)){e=o;break t}e=-1}return e<0?null:c(t)?t.charAt(e):t[e]}(t,function(t){return n==t.id})}return null}return r.getElementById(n)}var r=9==(o=t.a).nodeType?o:o.ownerDocument,o=et(n,t).split(/\s+/),i=[];l(o,function(t){!(t=e(t))||0<=f(i,t)||i.push(t)}),i.sort(U);var a=new V;return l(i,function(t){G(a,t)}),a},1),gt("lang",2,!1,!1,function(){return!1},1),gt("last",1,!0,!1,function(t){if(1!=arguments.length)throw Error("Function last expects ()");return t.f},0),gt("local-name",3,!1,!0,function(t,n){var e=n?$(n.a(t)):t.a;return e?e.localName||e.nodeName.toLowerCase():""},0,1,!0),gt("name",3,!1,!0,function(t,n){var e=n?$(n.a(t)):t.a;return e?e.nodeName.toLowerCase():""},0,1,!0),gt("namespace-uri",3,!0,!1,function(){return""},0,1,!0),gt("normalize-space",3,!1,!0,function(t,n){return(n?et(n,t):I(t.a)).replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},0,1),gt("not",2,!1,!1,function(t,n){return!rt(n,t)},1),gt("number",1,!1,!0,function(t,n){return n?nt(n,t):+I(t.a)},0,1),gt("position",1,!0,!1,function(t){return t.b},0),gt("round",1,!1,!1,function(t,n){return Math.round(nt(n,t))},1),gt("starts-with",2,!1,!1,function(t,n,e){return n=et(n,t),t=et(e,t),0==n.lastIndexOf(t,0)},2),gt("string",3,!1,!0,function(t,n){return n?et(n,t):I(t.a)},0,1),gt("string-length",1,!1,!0,function(t,n){return(n?et(n,t):I(t.a)).length},0,1),gt("substring",3,!1,!1,function(t,n,e,r){if(e=nt(e,t),isNaN(e)||1/0==e||-1/0==e)return"";if(r=r?nt(r,t):1/0,isNaN(r)||-1/0===r)return"";e=Math.round(e)-1;var o=Math.max(e,0);return t=et(n,t),1/0==r?t.substring(o):t.substring(o,e+Math.round(r))},2,3),gt("substring-after",3,!1,!1,function(t,n,e){return n=et(n,t),t=et(e,t),-1==(e=n.indexOf(t))?"":n.substring(e+t.length)},2),gt("substring-before",3,!1,!1,function(t,n,e){return n=et(n,t),t=et(e,t),-1==(t=n.indexOf(t))?"":n.substring(0,t)},2),gt("sum",1,!1,!1,function(t,n){for(var e=W(n.a(t)),r=0,o=q(e);o;o=q(e))r+=+I(o);return r},1,1,!0),gt("translate",3,!1,!1,function(t,n,e,r){n=et(n,t),e=et(e,t);var o=et(r,t);for(t={},r=0;r<e.length;r++){var i=e.charAt(r);i in t||(t[i]=o.charAt(r))}for(e="",r=0;r<n.length;r++)e+=(i=n.charAt(r))in t?t[i]:i;return e},3),gt("true",2,!1,!1,function(){return!0},0),yt.prototype.a=function(t){return null===this.b||this.b==t.nodeType},yt.prototype.f=function(){return this.h},yt.prototype.toString=function(){var t="Kind Test: "+this.h;return null===this.c||(t+=Q(this.c)),t};var bt=/\$?(?:(?![0-9-\.])(?:\*|[\w-\.]+):)?(?![0-9-\.])(?:\*|[\w-\.]+)|\/\/|\.\.|::|\d+(?:\.\d*)?|\.\d+|"[^"]*"|'[^']*'|[!<>]=|\s+|./g,mt=/^\s/;function Et(t,n){return t.b[t.a+(n||0)]}function Nt(t){return t.b[t.a++]}function xt(t){return t.b.length<=t.a}function Tt(t){J.call(this,3),this.c=t.substring(1,t.length-1)}function St(t,n){var e;this.j=t.toLowerCase(),e="*"==this.j?"*":"http://www.w3.org/1999/xhtml",this.c=n?n.toLowerCase():e}function At(t,n){var e;J.call(this,t.i),this.h=t,this.c=n,this.g=t.g,this.b=t.b,1==this.c.length&&((e=this.c[0]).u||e.c!=Yt||"*"!=(e=e.o).f()&&(this.f={name:e.f(),s:null}))}function Ot(){J.call(this,4)}function Rt(){J.call(this,4)}function Dt(t){return"/"==t||"//"==t}function Pt(t){J.call(this,4),this.c=t,Z(this,n(this.c,function(t){return t.g})),tt(this,n(this.c,function(t){return t.b}))}function _t(t,n){this.a=t,this.b=!!n}function It(t,n,e){for(e=e||0;e<t.a.length;e++)for(var r=t.a[e],o=W(n),i=n.l,a=0;s=q(o);a++){var u=t.b?i-a:a+1;if("number"==typeof(s=r.a(new ft(s,u,i))))u=u==s;else if("string"==typeof s||"boolean"==typeof s)u=!!s;else{if(!(s instanceof V))throw Error("Predicate.evaluate returned an unexpected type.");u=0<s.l}if(!u){var s=(u=o).f;if(!(f=u.a))throw Error("Next must be called at least once before remove.");var c=f.b,f=f.a;c?c.a=f:s.a=f,f?f.b=c:s.b=c,s.l--,u.a=null}}return n}function kt(t,n,e,r){J.call(this,4),this.c=t,this.o=n,this.h=e||new _t([]),this.u=!!r,n=0<(n=this.h).a.length?n.a[0].f:null,t.b&&n&&(t=n.name,t=R?t.toLowerCase():t,this.f={name:t,s:n.s});t:{for(t=this.h,n=0;n<t.a.length;n++)if((e=t.a[n]).g||1==e.i||0==e.i){t=!0;break t}t=!1}this.g=t}function Bt(t,n,e,r){this.j=t,this.f=n,this.a=e,this.b=r}t(Tt),Tt.prototype.a=function(){return this.c},Tt.prototype.toString=function(){return"Literal: "+this.c},St.prototype.a=function(t){var n=t.nodeType;return(1==n||2==n)&&(("*"==this.j||this.j==t.localName.toLowerCase())&&("*"==this.c||this.c==(t.namespaceURI?t.namespaceURI.toLowerCase():"http://www.w3.org/1999/xhtml")))},St.prototype.f=function(){return this.j},St.prototype.toString=function(){return"Name Test: "+("http://www.w3.org/1999/xhtml"==this.c?"":this.c+":")+this.j},t(At),t(Ot),Ot.prototype.a=function(t){var n=new V;return 9==(t=t.a).nodeType?G(n,t):G(n,t.ownerDocument),n},Ot.prototype.toString=function(){return"Root Helper Expression"},t(Rt),Rt.prototype.a=function(t){var n=new V;return G(n,t.a),n},Rt.prototype.toString=function(){return"Context Helper Expression"},At.prototype.a=function(t){var n=this.h.a(t);if(!(n instanceof V))throw Error("Filter expression must evaluate to nodeset.");for(var e=0,r=(t=this.c).length;e<r&&n.l;e++){var o,i=t[e],a=W(n,i.c.a);if(i.g||i.c!=Lt)if(i.g||i.c!=Vt)for(o=q(a),n=i.a(new ft(o));null!=(o=q(a));)n=X(n,o=i.a(new ft(o)));else o=q(a),n=i.a(new ft(o));else{for(o=q(a);(n=q(a))&&(!o.contains||o.contains(n))&&8&n.compareDocumentPosition(o);o=n);n=i.a(new ft(o))}}return n},At.prototype.toString=function(){var t,n="Path Expression:"+Q(this.h);return this.c.length&&(t=g(this.c,function(t,n){return t+Q(n)},"Steps:"),n+=Q(t)),n},t(Pt),Pt.prototype.a=function(n){var e=new V;return l(this.c,function(t){if(!((t=t.a(n))instanceof V))throw Error("Path expression must evaluate to NodeSet.");e=X(e,t)}),e},Pt.prototype.toString=function(){return g(this.c,function(t,n){return t+Q(n)},"Union Expression:")},_t.prototype.toString=function(){return g(this.a,function(t,n){return t+Q(n)},"Predicates:")},t(kt),kt.prototype.a=function(t){var n=t.a,e=null,r=null,o=null,i=0;if((e=this.f)&&(r=e.name,o=e.s?et(e.s,t):null,i=1),this.u)if(this.g||this.c!=jt)if(n=q(t=W(new kt(Ut,new yt("node")).a(t))))for(e=this.m(n,r,o,i);null!=(n=q(t));)e=X(e,this.m(n,r,o,i));else e=new V;else e=B(this.o,n,r,o),e=It(this.h,e,i);else e=this.m(t.a,r,o,i);return e},kt.prototype.m=function(t,n,e,r){return t=this.c.f(this.o,t,n,e),It(this.h,t,r)},kt.prototype.toString=function(){var t,n="Step:"+Q("Operator: "+(this.u?"//":"/"));return this.c.j&&(n+=Q("Axis: "+this.c)),n+=Q(this.o),this.h.a.length&&(t=g(this.h.a,function(t,n){return t+Q(n)},"Predicates:"),n+=Q(t)),n},Bt.prototype.toString=function(){return this.j};var Ct={};function Mt(t,n,e,r){if(Ct.hasOwnProperty(t))throw Error("Axis already created: "+t);return n=new Bt(t,n,e,!!r),Ct[t]=n}Mt("ancestor",function(t,n){for(var e=new V,r=n;r=r.parentNode;)t.a(r)&&e.unshift(r);return e},!0),Mt("ancestor-or-self",function(t,n){for(var e=new V,r=n;t.a(r)&&e.unshift(r),r=r.parentNode;);return e},!0);var Yt=Mt("attribute",function(t,n){var e=new V;if("style"==(i=t.f())&&n.style&&R)return G(e,new P(n.style,n,"style",n.style.cssText)),e;var r=n.attributes;if(r)if(t instanceof yt&&null===t.b||"*"==i)for(var o,i=0;o=r[i];i++)R?o.nodeValue&&G(e,_(n,o)):G(e,o);else(o=r.getNamedItem(i))&&(R?o.nodeValue&&G(e,_(n,o)):G(e,o));return e},!1),jt=Mt("child",function(t,n,e,r,o){return(R?function(t,n,e,r,o){var i;if((t instanceof St||8==t.b||e&&null===t.b)&&(i=n.childNodes)){var a=Y(t);return"*"==a||(i=d(i,function(t){return t.tagName&&t.tagName.toLowerCase()==a}))?(e&&(i=d(i,function(t){return k(t,e,r)})),l(i,function(t){"*"==a&&("!"==t.tagName||"*"==a&&1!=t.nodeType)||G(o,t)}),o):o}return C(t,n,e,r,o)}:C).call(null,t,n,c(e)?e:null,c(r)?r:null,o||new V)},!1,!0);Mt("descendant",B,!1,!0);var Ut=Mt("descendant-or-self",function(t,n,e,r){var o=new V;return k(n,e,r)&&t.a(n)&&G(o,n),B(t,n,e,r,o)},!1,!0),Lt=Mt("following",function(t,n,e,r){var o=new V;do{for(var i=n;i=i.nextSibling;)k(i,e,r)&&t.a(i)&&G(o,i),o=B(t,i,e,r,o)}while(n=n.parentNode);return o},!1,!0);Mt("following-sibling",function(t,n){for(var e=new V,r=n;r=r.nextSibling;)t.a(r)&&G(e,r);return e},!1),Mt("namespace",function(){return new V},!1);var Ft=Mt("parent",function(t,n){var e=new V;if(9==n.nodeType)return e;if(2==n.nodeType)return G(e,n.ownerElement),e;var r=n.parentNode;return t.a(r)&&G(e,r),e},!1),Vt=Mt("preceding",function(t,n,e,r){for(var o=new V,i=[];i.unshift(n),n=n.parentNode;);for(var a=1,u=i.length;a<u;a++){var s=[];for(n=i[a];n=n.previousSibling;)s.unshift(n);for(var c=0,f=s.length;c<f;c++)k(n=s[c],e,r)&&t.a(n)&&G(o,n),o=B(t,n,e,r,o)}return o},!0,!0);Mt("preceding-sibling",function(t,n){for(var e=new V,r=n;r=r.previousSibling;)t.a(r)&&e.unshift(r);return e},!0);var Ht=Mt("self",function(t,n){var e=new V;return t.a(n)&&G(e,n),e},!1);function Xt(t){J.call(this,1),this.c=t,this.g=t.g,this.b=t.b}function Gt(t){J.call(this,1),this.c=t}function $t(t,n){this.a=t,this.b=n}function Kt(t){for(var n,e=[];;){Wt(t,"Missing right hand side of binary expression."),n=nn(t);var r=Nt(t.a);if(!r)break;var o=(r=ut[r]||null)&&r.w;if(!o){t.a.a--;break}for(;e.length&&o<=e[e.length-1].w;)n=new ot(e.pop(),e.pop(),n);e.push(n,r)}for(;e.length;)n=new ot(e.pop(),e.pop(),n);return n}function Wt(t,n){if(xt(t.a))throw Error(n)}function zt(t,n){var e=Nt(t.a);if(e!=n)throw Error("Bad token, expected: "+n+" got: "+e)}function qt(t){if(")"!=(t=Nt(t.a)))throw Error("Bad token: "+t)}function Jt(t){if((t=Nt(t.a)).length<2)throw Error("Unclosed literal string");return new Tt(t)}function Qt(t){var n,e,r=[];if(Dt(Et(t.a))){if(n=Nt(t.a),e=Et(t.a),"/"==n&&(xt(t.a)||"."!=e&&".."!=e&&"@"!=e&&"*"!=e&&!/(?![0-9])[\w]/.test(e)))return new Ot;e=new Ot,Wt(t,"Missing next location step."),n=Zt(t,n),r.push(n)}else{t:{switch(e=(n=Et(t.a)).charAt(0)){case"$":throw Error("Variable reference not allowed in HTML XPath");case"(":Nt(t.a),n=Kt(t),Wt(t,'unclosed "("'),zt(t,")");break;case'"':case"'":n=Jt(t);break;default:if(isNaN(+n)){if(vt(n)||!/(?![0-9])[\w]/.test(e)||"("!=Et(t.a,1)){n=null;break t}for(n=Nt(t.a),n=dt[n]||null,Nt(t.a),e=[];")"!=Et(t.a)&&(Wt(t,"Missing function argument list."),e.push(Kt(t)),","==Et(t.a));)Nt(t.a);Wt(t,"Unclosed function argument list."),qt(t),n=new ht(n,e)}else n=new Gt(+Nt(t.a))}"["==Et(t.a)&&(n=new lt(n,e=new _t(tn(t))))}if(n){if(!Dt(Et(t.a)))return n;e=n}else n=Zt(t,"/"),e=new Rt,r.push(n)}for(;Dt(Et(t.a));)n=Nt(t.a),Wt(t,"Missing next location step."),n=Zt(t,n),r.push(n);return new At(e,r)}function Zt(t,n){var e,r,o,i,a;if("/"!=n&&"//"!=n)throw Error('Step op should be "/" or "//"');if("."==Et(t.a))return r=new kt(Ht,new yt("node")),Nt(t.a),r;if(".."==Et(t.a))return r=new kt(Ft,new yt("node")),Nt(t.a),r;if("@"==Et(t.a))i=Yt,Nt(t.a),Wt(t,"Missing attribute name");else if("::"==Et(t.a,1)){if(!/(?![0-9])[\w]/.test(Et(t.a).charAt(0)))throw Error("Bad token: "+Nt(t.a));if(e=Nt(t.a),!(i=Ct[e]||null))throw Error("No axis with name: "+e);Nt(t.a),Wt(t,"Missing node name")}else i=jt;if(e=Et(t.a),!/(?![0-9])[\w\*]/.test(e.charAt(0)))throw Error("Bad token: "+Nt(t.a));if("("==Et(t.a,1)){if(!vt(e))throw Error("Invalid node type: "+e);if(!vt(e=Nt(t.a)))throw Error("Invalid type name: "+e);zt(t,"("),Wt(t,"Bad nodetype");var u=null;'"'!=(o=Et(t.a).charAt(0))&&"'"!=o||(u=Jt(t)),Wt(t,"Bad nodetype"),qt(t),e=new yt(e,u)}else if(-1==(o=(e=Nt(t.a)).indexOf(":")))e=new St(e);else{if("*"==(u=e.substring(0,o)))a="*";else if(!(a=t.b(u)))throw Error("Namespace prefix not declared: "+u);e=new St(e=e.substr(o+1),a)}return o=new _t(tn(t),i.a),r||new kt(i,e,o,"//"==n)}function tn(t){for(var n=[];"["==Et(t.a);){Nt(t.a),Wt(t,"Missing predicate expression.");var e=Kt(t);n.push(e),Wt(t,"Unclosed predicate expression."),zt(t,"]")}return n}function nn(t){if("-"==Et(t.a))return Nt(t.a),new Xt(nn(t));var n=Qt(t);if("|"!=Et(t.a))t=n;else{for(n=[n];"|"==Nt(t.a);)Wt(t,"Missing next union location path."),n.push(Qt(t));t.a.a--,t=new Pt(n)}return t}function en(t){switch(t.nodeType){case 1:return function(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var t=e.slice();return t.push.apply(t,arguments),n.apply(this,t)}}(on,t);case 9:return en(t.documentElement);case 11:case 10:case 6:case 12:return rn;default:return t.parentNode?en(t.parentNode):rn}}function rn(){return null}function on(t,n){if(t.prefix==n)return t.namespaceURI||"http://www.w3.org/1999/xhtml";var e=t.getAttributeNode("xmlns:"+n);return e&&e.specified?e.value||null:t.parentNode&&9!=t.parentNode.nodeType?on(t.parentNode,n):null}function an(t,n){if(!t.length)throw Error("Empty XPath expression.");var e=function(t){t=t.match(bt);for(var n=0;n<t.length;n++)mt.test(t[n])&&t.splice(n,1);return new wt(t)}(t);if(xt(e))throw Error("Invalid XPath expression.");n?"function"==function(t){var n=typeof t;if("object"==n){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return n;var e=Object.prototype.toString.call(t);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==n&&void 0===t.call)return"object";return n}(n)||(n=i(n.lookupNamespaceURI,n)):n=function(){return null};var r=Kt(new $t(e,n));if(!xt(e))throw Error("Bad token: "+Nt(e));this.evaluate=function(t,n){return new un(r.a(new ft(t)),n)}}function un(t,n){if(0==n)if(t instanceof V)n=4;else if("string"==typeof t)n=2;else if("number"==typeof t)n=1;else{if("boolean"!=typeof t)throw Error("Unexpected evaluation result.");n=3}if(2!=n&&1!=n&&3!=n&&!(t instanceof V))throw Error("value could not be converted to the specified type");switch(this.resultType=n){case 2:this.stringValue=t instanceof V?K(t):""+t;break;case 1:this.numberValue=t instanceof V?+K(t):+t;break;case 3:this.booleanValue=t instanceof V?0<t.l:!!t;break;case 4:case 5:case 6:case 7:for(var e=W(t),r=[],o=q(e);o;o=q(e))r.push(o instanceof P?o.a:o);this.snapshotLength=t.l,this.invalidIteratorState=!1;break;case 8:case 9:e=$(t),this.singleNodeValue=e instanceof P?e.a:e;break;default:throw Error("Unknown XPathResult type.")}var i=0;this.iterateNext=function(){if(4!=n&&5!=n)throw Error("iterateNext called with wrong result type");return i>=r.length?null:r[i++]},this.snapshotItem=function(t){if(6!=n&&7!=n)throw Error("snapshotItem called with wrong result type");return t>=r.length||t<0?null:r[t]}}function sn(t){this.lookupNamespaceURI=en(t)}function cn(t,n){var e=t||a,r=e.document;r.evaluate&&!n||(e.XPathResult=un,r.evaluate=function(t,n,e,r){return new an(t,e).evaluate(n,r)},r.createExpression=function(t,n){return new an(t,n)},r.createNSResolver=function(t){return new sn(t)})}t(Xt),Xt.prototype.a=function(t){return-nt(this.c,t)},Xt.prototype.toString=function(){return"Unary Expression: -"+Q(this.c)},t(Gt),Gt.prototype.a=function(){return this.c},Gt.prototype.toString=function(){return"Number: "+this.c},un.ANY_TYPE=0,un.NUMBER_TYPE=1,un.STRING_TYPE=2,un.BOOLEAN_TYPE=3,un.UNORDERED_NODE_ITERATOR_TYPE=4,un.ORDERED_NODE_ITERATOR_TYPE=5,un.UNORDERED_NODE_SNAPSHOT_TYPE=6,un.ORDERED_NODE_SNAPSHOT_TYPE=7,un.ANY_UNORDERED_NODE_TYPE=8,un.FIRST_ORDERED_NODE_TYPE=9;var fn,ln=["wgxpath","install"],hn=a;ln[0]in hn||!hn.execScript||hn.execScript("var "+ln[0]);for(;ln.length&&(fn=ln.shift());)ln.length?hn=hn[fn]?hn[fn]:hn[fn]={}:hn[fn]=cn;module.exports.install=cn,module.exports.XPathResultType={ANY_TYPE:0,NUMBER_TYPE:1,STRING_TYPE:2,BOOLEAN_TYPE:3,UNORDERED_NODE_ITERATOR_TYPE:4,ORDERED_NODE_ITERATOR_TYPE:5,UNORDERED_NODE_SNAPSHOT_TYPE:6,ORDERED_NODE_SNAPSHOT_TYPE:7,ANY_UNORDERED_NODE_TYPE:8,FIRST_ORDERED_NODE_TYPE:9}}).call(global);