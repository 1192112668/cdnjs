!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/testing"),require("lodash")):"function"==typeof define&&define.amd?define(["exports","rxjs","rxjs/testing","lodash"],t):t(e["jasmine-marbles"]=e["jasmine-marbles"]||{},e.Rx,e.Rx,e._)}(this,function(e,s,n,o){"use strict";function i(e){return JSON.stringify(e,function(e,t){return Array.isArray(t)?"["+t.map(function(e){return"\n\t"+i(e)})+"\n]":t}).replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n")}function a(e){var t,r,n=e.notification;return n&&(t=n.kind,r=n.exception,"E"===t&&r instanceof Error&&(n.exception={name:r.name,message:r.message})),e}function t(e,t){if(Array.isArray(e)&&Array.isArray(t)){e=e.map(a),t=t.map(a);var r=o.isEqual(e,t);if(r)return;var n="\nExpected \n";e.forEach(function(e){return n+="\t"+i(e)+"\n"}),n+="\t\nto deep equal \n",t.forEach(function(e){return n+="\t"+i(e)+"\n"}),expect(r).toEqual(n)}else expect(e).toEqual(t)}var r;function c(){r=new n.TestScheduler(t)}function u(){if(r)return r;throw new Error("No test scheduler initialized")}function f(){r=null}var p,l,m=window&&window.__extends||(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),b=(l=s.Observable,m(h,l),h.prototype.getSubscriptions=function(){return this.source.subscriptions},h);function h(e,t,r){var n=l.call(this)||this;return n.marbles=e,n.values=t,n.error=r,n.source=u().createColdObservable(e,t,r),n}var d,v=(d=s.Observable,m(y,d),y.prototype.getSubscriptions=function(){return this.source.subscriptions},y);function y(e,t,r){var n=d.call(this)||this;return n.marbles=e,n.values=t,n.error=r,n.source=u().createHotObservable(e,t,r),n}function x(){jasmine.addMatchers({toHaveSubscriptions:function(){return{compare:function(e,t){var r=("string"==typeof t?[t]:t).map(function(e){return n.TestScheduler.parseMarblesAsSubscriptions(e)});return expect(r).toEqual(e.getSubscriptions()),{pass:!0}}}},toBeObservable:function(){return{compare:function(e,t){var a=[],c=u();c.schedule(function(){e.subscribe(function(e){var t,r,n,o,i=e;e instanceof s.Observable&&(t=i,r=c.frame,n=[],o=u(),t.subscribe(function(e){n.push({frame:o.frame-r,notification:s.Notification.createNext(e)})},function(e){n.push({frame:o.frame-r,notification:s.Notification.createError(e)})},function(){n.push({frame:o.frame-r,notification:s.Notification.createComplete()})}),i=n),a.push({frame:c.frame,notification:s.Notification.createNext(i)})},function(e){a.push({frame:c.frame,notification:s.Notification.createError(e)})},function(){a.push({frame:c.frame,notification:s.Notification.createComplete()})})}),c.flush();var r=n.TestScheduler.parseMarbles(t.marbles,t.values,t.error,!0);return expect(a).toEqual(r),{pass:!0}}}}})}"object"==typeof module&&module.exports&&(jasmine.getEnv().beforeAll(x),jasmine.getEnv().beforeEach(c),jasmine.getEnv().afterEach(function(){u().flush(),f()})),e.hot=function(e,t,r){return new v(e,t,r)},e.cold=function(e,t,r){return new b(e,t,r)},e.time=function(e){return u().createTime(e)},e.addMatchers=x,e.getTestScheduler=u,e.initTestScheduler=c,e.resetTestScheduler=f,Object.defineProperty(e,"__esModule",{value:!0})});