!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs/Notification"),require("rxjs/Observable"),require("rxjs/testing/TestScheduler"),require("lodash")):"function"==typeof define&&define.amd?define(["exports","rxjs/Notification","rxjs/Observable","rxjs/testing/TestScheduler","lodash"],t):t(e["jasmine-marbles"]=e["jasmine-marbles"]||{},e.rxjs_Notification,e.Rx,e.Rx,e._)}(this,function(e,s,u,n,i){"use strict";function o(e){return JSON.stringify(e,function(e,t){return Array.isArray(t)?"["+t.map(function(e){return"\n\t"+o(e)})+"\n]":t}).replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n")}function a(e){var t,r,n=e.notification;return n&&(t=n.kind,r=n.exception,"E"===t&&r instanceof Error&&(n.exception={name:r.name,message:r.message})),e}function t(e,t){if(Array.isArray(e)&&Array.isArray(t)){e=e.map(a),t=t.map(a);var r=i.isEqual(e,t);if(r)return;var n="\nExpected \n";e.forEach(function(e){return n+="\t"+o(e)+"\n"}),n+="\t\nto deep equal \n",t.forEach(function(e){return n+="\t"+o(e)+"\n"}),expect(r).toEqual(n)}else expect(e).toEqual(t)}var r;function c(){r=new n.TestScheduler(t)}function f(){if(r)return r;throw new Error("No test scheduler initialized")}function l(){r=null}var p,m,d=window&&window.__extends||(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=(m=u.Observable,d(b,m),b);function b(e,t,r){var n=m.call(this)||this;return n.marbles=e,n.values=t,n.error=r,n.source=f().createColdObservable(e,t,r),n}var v,x=(v=u.Observable,d(j,v),j);function j(e,t,r){var n=v.call(this)||this;return n.marbles=e,n.values=t,n.error=r,n.source=f().createHotObservable(e,t,r),n}function y(){jasmine.addMatchers({toBeObservable:function(){return{compare:function(e,t){var a=[],c=f();c.schedule(function(){e.subscribe(function(e){var t,r,n,i,o=e;e instanceof u.Observable&&(t=o,r=c.frame,n=[],i=f(),t.subscribe(function(e){n.push({frame:i.frame-r,notification:s.Notification.createNext(e)})},function(e){n.push({frame:i.frame-r,notification:s.Notification.createError(e)})},function(){n.push({frame:i.frame-r,notification:s.Notification.createComplete()})}),o=n),a.push({frame:c.frame,notification:s.Notification.createNext(o)})},function(e){a.push({frame:c.frame,notification:s.Notification.createError(e)})},function(){a.push({frame:c.frame,notification:s.Notification.createComplete()})})}),c.flush();var r=n.TestScheduler.parseMarbles(t.marbles,t.values,t.error,!0);return expect(a).toEqual(r),{pass:!0}}}}})}"object"==typeof module&&module.exports&&(jasmine.getEnv().beforeAll(y),jasmine.getEnv().beforeEach(c),jasmine.getEnv().afterEach(function(){f().flush(),l()})),e.hot=function(e,t,r){return new x(e,t,r)},e.cold=function(e,t,r){return new h(e,t,r)},e.time=function(e){return f().createTime(e)},e.addMatchers=y,e.getTestScheduler=f,e.initTestScheduler=c,e.resetTestScheduler=l,Object.defineProperty(e,"__esModule",{value:!0})});