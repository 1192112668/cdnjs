(function(){var e,i,n,t,a,s,l,o,d;a=`module-${l="contextmenu"}`,d={silent:!1,debug:!0,observeChanges:!0,target:null,closable:!0,touch:!0,onShow:(e,i,n)=>!0,onHide:()=>!0,onDisable:()=>{},onEnable:()=>{},onSelect:(e,i)=>{}},s={DISABLE:"disable"},t={SHOW:`show${i=`.${l}`}`,HIDE:`hide${i}`,DISABLE:`disable${i}`,ENABLE:`enable${i}`,SELECT:`select${i}`,CONTEXTMENU:`contextmenu${i}`,CLICK:`click${i}`},e={VISIBLE:"visible",ANIMATING:"animating",DOWNWARD:"downward",UPWARD:"upward",RIGHTWARD:"rightward",LEFTWARD:"leftward",HIDDEN:"hidden"},o={BODY:"body",ITEM:":scope > .item"},n={},ts.register({NAME:l,MODULE_NAMESPACE:a,Error:n,Settings:d},({$allModules:n,$this:l,element:d,debug:r,settings:E})=>{var I,h,c,g,m;return h=l.find(o.ITEM),I=ts(o.BODY),c=E.target?ts(E.target):l.parent(),10,g={hidden:80,visible:10},m={show:(e,i)=>(r("顯示複合式選單",d),m.set.position(e,i),m.animate.show(()=>m.remove.animating()),n),hide:()=>{if(r("隱藏複合式選單",d),!m.is.hidden()&&m.trigger.hide())return m.animate.hide(()=>m.remove.animating()),n},animate:{show:i=>l.off("animationend").removeClass(e.HIDDEN).addClass(e.VISIBLE,e.ANIMATING).one("animationend",()=>{if(null!=i)return i.call()}).emulate("animationend",g.visible),hide:i=>l.off("animationend").removeClass(e.VISIBLE).addClass(e.HIDDEN,e.ANIMATING).one("animationend",()=>{if(null!=i)return i.call()}).emulate("animationend",g.hidden)},disable:()=>(r("停用複合式選單",d),m.set.disable(),n),enable:()=>(r("啟用複合式選單",d),m.set.enable(),n),set:{position:(e,i)=>{var n,t,a,s,o;if(a=m.get.rect(),o=window.innerWidth,n=window.innerHeight,m.trigger.show(e,i))return t=e<10?10:e+a.width+10>o?o-a.width-10:e,s=i<10?10:i+a.height+10>n?n-a.height-10:i,l.css("left",`${t}px`).css("top",`${s}px`)},visible:()=>l.addClass(e.VISIBLE),hidden:()=>l.removeClass(e.VISIBLE),disable:()=>l.trigger(t.DISABLE,d).data(s.DISABLE,!0),enable:()=>l.trigger(t.ENABLE,d).data(s.DISABLE,!1)},remove:{animating:()=>l.removeClass(e.ANIMATING)},is:{disable:()=>l.data(s.DISABLE),enable:()=>!l.data(s.DISABLE),visible:()=>l.hasClass(e.VISIBLE),hidden:()=>!l.hasClass(e.VISIBLE),closable:()=>E.closable},get:{rect:()=>{var e;return m.set.visible(),e=d.getBoundingClientRect(),m.set.hidden(),e},value:e=>ts(e).attr("data-value")},trigger:{show:(e,i)=>(r("發生 SHOW 事件",d,document.elementFromPoint(e,i),e,i),E.onShow.call(d,document.elementFromPoint(e,i),e,i)),hide:()=>(r("發生 HIDE 事件",d),E.onHide.call(d))},bind:{events:()=>(I.on(t.CLICK,()=>{if(r("發生 CLICK 事件",d),m.is.closable())return m.hide()}),c.on(t.CONTEXTMENU,e=>{if(r("發生 CONTEXTMENU 事件",d),e.preventDefault(),!m.is.disable()&&(E.touch||!ts.isTouchDevice()))return m.show(e.clientX,e.clientY)}),h.on(t.CLICK,function(){return r("發生 CLICK 事件",d),l.trigger(t.SELECT,d,m.get.value(this),this)}),l.on(t.SELECT,(e,i,n,t)=>(r("發生 SELECT 事件",t,n),E.onSelect.call(i,e,n,t))),l.on(t.DISABLE,(e,i)=>(r("發生 DISABLE 事件",d),E.onDisable.call(i,e))),l.on(t.ENABLE,(e,i)=>(r("發生 ENABLE 事件",d),E.onEnable.call(i,e))))},initialize:()=>(r("初始化複合式選單",d),m.set.enable(),m.bind.events()),instantiate:()=>r("實例化複合式選單",d),refresh:()=>n,destroy:()=>(r("摧毀複合式選單",d),l.removeData(a).off(i),I.off(i),h.off(i),c.off(i),n)}})}).call(this);