(function(){var e,t,r,i,s,n,l,o;i=`module-${n="comparison"}`,o={silent:!1,debug:!0,observeChanges:!0,onResize:function(){},onDisplay:function(){},labels:{before:"Before",after:"After"},resizer:{style:"rounded"}},s={CONTENT:"content"},r={LOAD:`load${e=`.${n}`}`,RESIZE:`resize${e}`,DISPLAY:`display${e}`,MOUSEDOWN:`mousedown${e}`,MOUSEMOVE:`mousemove${e}`,MOUSEUP:`mouseup${e}`,MOUSEOUT:`mouseout${e}`,TOUCHSTART:`touchstart${e}`,TOUCHMOVE:`touchmove${e}`,TOUCHEND:`touchend${e}`},l={AFTER:".after",BEFORE:".before",RESIZER:".resizer",IMG:"img",BODY:"body"},t={},ts.register({NAME:n,MODULE_NAMESPACE:i,Error:t,Settings:o},({$allModules:t,$this:n,element:o,debug:a,settings:g})=>{var c,E,f,d,O,$;return n,E=void 0,c=void 0,d=void 0,f=ts(l.BODY),O=void 0,14,$={show:{after:()=>$.set.resizer(100),before:()=>$.set.resizer(0)},create:{template:()=>{var e,t;return t=n.find(l.BEFORE).attr("src"),e=n.find(l.AFTER).attr("src"),`<div class="before">\n    <img src="${t}" style="filter: blur(5px);">\n    <label>${g.labels.before}</label>\n</div>\n<div class="after">\n    <img src="${e}">\n    <label>${g.labels.after}</label>\n</div>\n<div class="${g.resizer.style} resizer"></div>`}},set:{resizer:e=>(e=e>50?`calc(${e}% - 14px)`:`${e}%`,c.css("width",e),d.css("left",e),$.trigger.resize()),after:{url:e=>$.get.after.$img().prop("src",e)},before:{url:e=>$.get.before.$img().prop("src",e)},html:e=>n.html(e),content:e=>n.data(s.CONTENT,e)},get:{rect:()=>n.get().getBoundingClientRect(),resizer:{rect:()=>d.get().getBoundingClientRect()},after:{rect:()=>c.get().getBoundingClientRect(),$img:()=>c.find(l.IMG)},before:{$img:()=>E.find(l.IMG)},html:()=>n.html(),content:()=>n.data(s.CONTENT),clientX:e=>"touchstart"===e.type||"touchmove"===e.type?e.touches[0].clientX:e.clientX},trigger:{resize:()=>n.trigger(r.RESIZE,o),display:()=>n.trigger(r.DISPLAY,o)},move:{resizer:e=>{var t,i;return i=O,t=$.get.clientX(e)-$.get.resizer.rect().left,n.on(`${r.MOUSEMOVE} ${r.TOUCHMOVE}`,e=>{var r,s;if(!(s={left:(r=$.get.clientX(e)-i.left-t)<0,right:r>i.right-i.left-14}).left&&!s.right)return d.css("left",`${r}px`),c.css("width",`${($.get.resizer.rect().left-i.left)/i.width*100}%`),$.trigger.resize()})}},bind:{events:()=>(n.on(r.RESIZE,(e,t)=>(a("發生 RESIZE 事件",t),g.onResize.call(t,e))),n.on(r.DISPLAY,(e,t)=>(a("發生 DISPLAY 事件",t),g.onDisplay.call(t,e))),f.on(`${r.MOUSEUP} ${r.TOUCHEND}`,e=>(n.off(`${r.MOUSEDOWN} ${r.MOUSEMOVE} ${r.MOUSEUP} ${r.TOUCHSTART} ${r.TOUCHMOVE}`),$.bind.resizer.events())),$.get.after.$img().on(r.LOAD,(e,t)=>(a("發生 LOAD 事件",t),$.trigger.display())),$.get.before.$img().on(r.LOAD,(e,t)=>(a("發生 LOAD 事件",t),$.trigger.display()))),resizer:{events:()=>n.on(`${r.MOUSEDOWN} ${r.TOUCHSTART}`,l.RESIZER,e=>$.move.resizer(e))}},initialize:()=>(a("初始化圖片比較",o),$.set.content($.get.html()),$.set.html($.create.template()),$.refresh(),$.bind.events(),$.bind.resizer.events()),instantiate:()=>a("實例化圖片比較",o),refresh:()=>(c=n.find(l.AFTER),E=n.find(l.BEFORE),d=n.find(l.RESIZER),O=$.get.rect(),t),destroy:()=>(a("摧毀圖片比較",o),n.removeData(i).off(e),$.set.html($.get.content()),t)}})}).call(this);