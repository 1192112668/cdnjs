(function(){var t,a,e,s,n,i,r;r={silent:!1,debug:!0,observeChanges:!0,onFirstLoad:t=>{},onLoad:t=>{},history:!0},n={LOADED:"loaded"},s={FIRSTLOAD:"firstload.tab",LOAD:"load.tab",CLICK:"click.tab",HASHCHANGE:"hashchange.tab",POPSTATE:"popstate.tab"},t={GROUP:"data-tab-group",TAB:"data-tab"},a={ACTIVE:"active",TAB:"tab"},i={TAB:a=>`.tab[${t.TAB}='${a}']`,ANY_TAB:".tab[data-tab]",ACTIVE_TAB:".active.tab[data-tab]",HIDDEN_TAB:".tab[data-tab]:not(.active)",MENU:".menu",MENU_ITEM:a=>`.menu .item[${t.TAB}='${a}']`,ITEM:".item"},e={},ts.register({NAME:"tab",MODULE_NAMESPACE:"module-tab",Error:e,Settings:r},({$allModules:e,$this:r,element:h,debug:o,settings:d,index:l})=>{var b;return",",b={change:{tab:(t,a=!0,n=!0)=>{var r,h,o,d,l,A;for(t=b.decode(t),o=0,d=(A=a?ts(i.TAB(t)).tab("get paths"):[t]).length;o<d;o++)l=A[o],r=ts(i.MENU_ITEM(l)),(h=ts(i.TAB(l))).tab("set active"),r.tab("set active").tab("hide others"),r.tab("not loaded")&&r.trigger(s.FIRSTLOAD,h.get(),l).tab("set loaded",!0),r.trigger(s.LOAD,h.get(),l);return n&&b.update.hash(),e}},hide:{others:()=>{var t;return(t=b.get.relative.$items()).tab("set hidden"),t.each(function(){return ts(this).tab("get $tab").tab("set hidden")})}},get:{name:()=>r.attr(t.TAB),paths:()=>{var t,a;for(a=[],t=r;0!==t.length;)a.push(t.tab("get name")),t=t.tab("get parent $tab");return a},active:{$tab:()=>ts(i.ACTIVE_TAB)},relative:{$items:()=>r.closest(i.MENU).find(i.ITEM).not(r)},parent:{$tab:r.parent().closest(i.ANY_TAB)},tab:()=>b.get.$tab().get(),$tab:()=>ts(i.TAB(b.get.name())),path:()=>b.get.paths().join(","),hash:()=>{var t;return(t=window.location.hash)?b.decode(t.slice(1)):""}},decode:t=>decodeURIComponent(t),has:{hash:()=>!!window.location.hash,parent:{tab:()=>0!==r.parent().closest(i.ANY_TAB).length},hidden:{parent:()=>0!==r.closest(i.HIDDEN_TAB).length},active:{children:()=>0!==r.find(i.ACTIVE_TAB).length}},set:{loaded:t=>r.data(n.LOADED,t),hidden:()=>r.removeClass(a.ACTIVE),active:()=>r.addClass(a.ACTIVE)},is:{active:()=>r.hasClass(a.ACTIVE),tab:()=>r.hasClass(a.TAB),loaded:()=>!0===r.data(n.LOADED)},not:{loaded:()=>!b.is.loaded()},apply:{hash:()=>setTimeout(function(){var t;if(b.has.hash()&&(t=b.get.hash(),!b.same.hash(t)))return t.split(",").forEach(t=>b.change.tab(t,!0,!1))},0)},update:{hash:()=>{var t;return t=[],b.get.active.$tab().each(function(){var a;if(!(a=ts(this)).tab("has hidden parent")&&!a.tab("has active children"))return t.push(a.tab("get name"))}),t=`#${t.join(",")}`,d.history?history.pushState(null,null,t):history.replaceState(null,null,t)}},same:{hash:t=>{var a;return a=!0,t.split(",").forEach(t=>{if(a)return ts(i.TAB(t)).tab("has hidden parent")?a=!1:void 0}),a}},bind:{events:()=>{if(r.on(s.CLICK,()=>{if(!b.is.active())return b.change.tab(b.get.name(),!1)}),r.on(s.FIRSTLOAD,(t,a,e)=>(o("發生 FIRSTLOAD 事件",a,e),d.onFirstLoad.call(a,t,e))),r.on(s.LOAD,(t,a,e)=>(o("發生 LOAD 事件",a,e),d.onLoad.call(a,t,e))),r.attr("href","javascript:void(0)"),d.history)return ts(window).off(s.POPSTATE).on(s.POPSTATE,()=>(o("發生 POPSTATE 事件",window),b.apply.hash()))}},initialize:()=>{if(o("初始化分頁籤",h),!b.is.tab())return b.bind.events(),b.apply.hash()},instantiate:()=>o("實例化分頁籤",h),refresh:()=>e,destroy:()=>(o("摧毀分頁籤",h),r.removeData("module-tab").off(".tab"),e)}})}).call(this);