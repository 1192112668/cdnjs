(function(){var e,t,r,a,s,n,o;o={silent:!1,debug:!0,observeChanges:!0,onRowExpand:(e,t)=>{},onRowCollapse:(e,t)=>{},onSort:(e,t,r)=>{}},s={ASCENDING:"ascending",DESCENDING:"descending"},e={COLSPAN:"colspan"},a={ROW_EXPAND:"rowexpand.table",ROW_COLLAPSE:"rowcollapse.table",SORT:"sort.table",CLICK:"click.table"},t={DESCENDING:"descending",ASCENDING:"ascending",EXPANDED:"expanded",SORTABLE:"sortable",SORTED:"sorted"},n={EXPANDABLE:"tr.expandable",EXPANDABLE_COLUMN:"tr.expandable + tr td",EXPAND_CONTROL:"tr.expandable > td.expand.control",ROW:"tbody tr",HEADER:"thead th",DESCENDING_HEADER:"thead th.sorted.descending",ASCENDING_HEADER:"thead th.sorted.ascending"},r={},ts.register({NAME:"table",MODULE_NAMESPACE:"module-table",Error:r,Settings:o},({$allModules:r,$this:o,element:d,debug:l,settings:E})=>{var i;return i={expand:{row:e=>(i.get.$row(e).addClass(t.EXPANDED),i.trigger.row.expand(e))},collapse:{row:e=>(i.get.$row(e).removeClass(t.EXPANDED),i.trigger.row.collapse(e))},toggle:{row:e=>i.is.expanded(e)?i.collapse.row(e):i.expand.row(e)},sort:{table:(e,r)=>{var a,n,o,l,E,D;for(i.get.$header().removeClass(t.SORTED,t.ASCENDING,t.DESCENDING),E=d.tBodies[0],D=Array.prototype.slice.call(E.rows,0),o=-(+(e===s.ASCENDING)||-1),a=0,n=(D=D.sort((e,t)=>{switch(e=e.cells[r].textContent.replace(",","").trim(),t=t.cells[r].textContent.replace(",","").trim(),!1){case!!isNaN(e):return o*(+e-+t);case!new Date(e).getTime():return o*(new Date(e)-new Date(t));default:return o*e.localeCompare(t)}})).length;a<n;a++)l=D[a],E.appendChild(l);return i.set.sorted(r),i.set.order(e,r),i.trigger.sort(e,r)},ascending:e=>(i.sort.table(s.ASCENDING,e),r),descending:e=>(i.sort.table(s.DESCENDING,e),r)},trigger:{sort:(e,t)=>o.trigger(a.SORT,i.get.$header(t).get(),e,t),row:{expand:e=>o.trigger(a.ROW_EXPAND,i.get.$row(e).get(),e),collapse:e=>o.trigger(a.ROW_COLLAPSE,i.get.$row(e).get(),e)}},is:{sortable:()=>o.hasClass(t.SORTABLE),table:()=>o.is("table"),expanded:e=>i.get.$row(e).hasClass(t.EXPANDED),ascending:()=>0!==o.find(n.ASCENDING_HEADER).length,descending:()=>0!==o.find(n.DESCENDING_HEADER).length},set:{sorted:e=>i.get.$header(e).addClass(t.SORTED),order:(e,r)=>{var a;switch(a=i.get.$header(r),e){case s.ASCENDING:return a.addClass(t.ASCENDING);case s.DESCENDING:return a.addClass(t.DESCENDING)}},colspan:t=>o.find(n.EXPANDABLE_COLUMN).attr(e.COLSPAN,t)},get:{$header:e=>void 0===e?o.find(n.HEADER):o.find(n.HEADER).eq(e),$row:e=>void 0===e?o.find(n.ROW):o.find(n.ROW).eq(e)},bind:{events:()=>(o.on(a.CLICK,n.EXPAND_CONTROL,function(){return l("發生 EXPAND CLICK 事件",this),i.toggle.row(ts(this).closest(n.EXPANDABLE).index())}),o.on(a.SORT,(e,t,r,a)=>(l("發生 SORT 事件",t),E.onSort.call(t,e,r,a))),o.on(a.ROW_COLLAPSE,(e,t,r)=>(l("發生 ROW_COLLAPSE 事件",t),E.onRowCollapse.call(t,e,r))),o.on(a.ROW_EXPAND,(e,t,r)=>(l("發生 ROW_EXPAND 事件",t),E.onRowExpand.call(t,e,r)))),sortable:{events:()=>o.on(a.CLICK,n.HEADER,function(){var e;return l("發生 SORTABLE CLICK 事件",this),e=ts(this).index(),i.is.ascending()?i.sort.descending(e):i.sort.ascending(e)})}},initialize:()=>{if(l("初始化表格",d),i.is.table())return i.bind.events(),i.set.colspan(99),i.is.sortable()?i.bind.sortable.events():void 0},instantiate:()=>l("實例化表格",d),refresh:()=>r,destroy:()=>(l("摧毀表格",d),o.removeData("module-table").off(".table"),r)}})}).call(this);