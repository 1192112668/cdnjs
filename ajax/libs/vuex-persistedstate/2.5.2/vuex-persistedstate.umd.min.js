!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("deepmerge"),require("shvl")):"function"==typeof define&&define.amd?define(["deepmerge","shvl"],t):e.createPersistedState=t(e.deepmerge,e.shvl)}(this,function(i,c){return i=i&&i.hasOwnProperty("default")?i.default:i,function(r,n,u){function o(e,t,r){try{return(r=t.getItem(e))&&void 0!==r?JSON.parse(r):void 0}catch(e){}}if(n=(r=r||{}).storage||window&&window.localStorage,u=r.key||"vuex",!function(e){try{return e.setItem("@@",1),e.removeItem("@@"),1}catch(e){}}(n))throw new Error("Invalid storage instance given");return function(e){var t=c.get(r,"getState",o)(u,n);"object"==typeof t&&null!==t&&e.replaceState(i(e.state,t,{arrayMerge:r.arrayMerger||function(e,t){return t},clone:!1})),(r.subscriber||function(t){return function(e){return t.subscribe(e)}})(e)(function(e,t){(r.filter||function(){return!0})(e)&&(r.setState||function(e,t,r){return r.setItem(e,JSON.stringify(t))})(u,(r.reducer||function(r,e){return 0===e.length?r:e.reduce(function(e,t){return c.set(e,t,c.get(r,t))},{})})(t,r.paths||[]),n)})}}});