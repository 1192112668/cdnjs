function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("deepmerge")),r=e(require("shvl"));module.exports=function(u,o,i){function c(e,t,r){try{return(r=t.getItem(e))&&void 0!==r?JSON.parse(r):void 0}catch(e){}}if(o=(u=u||{}).storage||window&&window.localStorage,i=u.key||"vuex",!function(e){try{return e.setItem("@@",1),e.removeItem("@@"),1}catch(e){}}(o))throw new Error("Invalid storage instance given");return function(e){var n=r.get(u,"getState",c)(i,o);"object"==typeof n&&null!==n&&e.replaceState(t(e.state,n,{arrayMerge:u.arrayMerger||function(e,t){return t},clone:!1})),(u.subscriber||function(t){return function(e){return t.subscribe(e)}})(e)(function(e,t){(u.filter||function(){return!0})(e)&&(u.setState||function(e,t,r){return r.setItem(e,JSON.stringify(t))})(i,(u.reducer||function(n,e){return 0===e.length?n:e.reduce(function(e,t){return r.set(e,t,r.get(n,t))},{})})(t,u.paths||[]),o)})}};