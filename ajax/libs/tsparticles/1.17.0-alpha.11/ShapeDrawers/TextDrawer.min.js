"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextDrawer=void 0;const tslib_1=require("tslib"),Utils_1=require("../Utils"),Enums_1=require("../Enums");class TextDrawer{init(t){var e;return tslib_1.__awaiter(this,void 0,void 0,function*(){const s=t.options;if(Utils_1.Utils.isInArray(Enums_1.ShapeType.char,s.particles.shape.type)||Utils_1.Utils.isInArray(Enums_1.ShapeType.character,s.particles.shape.type)){const t=null!==(e=s.particles.shape.options[Enums_1.ShapeType.character])&&void 0!==e?e:s.particles.shape.options[Enums_1.ShapeType.char];if(t instanceof Array)for(const e of t)yield Utils_1.Utils.loadFont(e);else void 0!==t&&(yield Utils_1.Utils.loadFont(t))}})}draw(t,e,s){const i=e.shapeData;if(void 0===i)return;const r=i.value;if(void 0===r)return;const a=e;void 0===a.text&&(a.text=r instanceof Array?Utils_1.Utils.itemFromArray(r,e.randomIndexData):r);const o=a.text,n=i.style,l=i.weight,p=2*Math.round(s),c=i.font,u=e.fill,d=o.length*s/2;t.font=`${n} ${l} ${p}px "${c}"`;const y={x:-d,y:s/2};u?t.fillText(o,y.x,y.y):t.strokeText(o,y.x,y.y)}}exports.TextDrawer=TextDrawer;