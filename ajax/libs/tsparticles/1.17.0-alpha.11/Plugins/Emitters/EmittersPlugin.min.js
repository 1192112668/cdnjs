"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EmittersPlugin=void 0;const tslib_1=require("tslib"),Utils_1=require("../../Utils"),Emitters_1=require("./Emitters"),Enums_1=require("./Enums"),Emitter_1=require("./Options/Classes/Emitter");class EmittersPlugin{constructor(){this.id="emitters"}getPlugin(t){return new Emitters_1.Emitters(t)}needsPlugin(t){var e,i,r;if(void 0===t)return!1;const s=t.emitters;let n=!1;return s instanceof Array?s.length&&(n=!0):void 0!==s?n=!0:(null===(r=null===(i=null===(e=t.interactivity)||void 0===e?void 0:e.events)||void 0===i?void 0:i.onClick)||void 0===r?void 0:r.mode)&&Utils_1.Utils.isInArray(Enums_1.EmitterClickMode.emitter,t.interactivity.events.onClick.mode)&&(n=!0),n}loadOptions(t,e){var i,r;if(!this.needsPlugin(t)&&!this.needsPlugin(e))return;const s=t;(null==e?void 0:e.emitters)&&((null==e?void 0:e.emitters)instanceof Array?s.emitters=null==e?void 0:e.emitters.map(t=>{const e=new Emitter_1.Emitter;return e.load(t),e}):((s.emitters instanceof Array||void 0===s.emitters)&&(s.emitters=new Emitter_1.Emitter),s.emitters.load(null==e?void 0:e.emitters)));const n=null===(r=null===(i=null==e?void 0:e.interactivity)||void 0===i?void 0:i.modes)||void 0===r?void 0:r.emitters;n&&(n instanceof Array?s.interactivity.modes.emitters=n.map(t=>{const e=new Emitter_1.Emitter;return e.load(t),e}):((s.interactivity.modes.emitters instanceof Array||void 0===s.interactivity.modes.emitters)&&(s.interactivity.modes.emitters=new Emitter_1.Emitter),s.interactivity.modes.emitters.load(n)))}}const plugin=new EmittersPlugin;exports.EmittersPlugin=plugin,tslib_1.__exportStar(require("./Enums"),exports);