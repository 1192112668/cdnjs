"use strict";var __awaiter=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,s){function a(t){try{c(r.next(t))}catch(t){s(t)}}function o(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,o)}c((r=r.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextDrawer=void 0;const Utils_1=require("../Utils"),Enums_1=require("../Enums");class TextDrawer{init(t){var e;return __awaiter(this,void 0,void 0,function*(){const i=t.options;if(Utils_1.Utils.isInArray(Enums_1.ShapeType.char,i.particles.shape.type)||Utils_1.Utils.isInArray(Enums_1.ShapeType.character,i.particles.shape.type)){const t=null!==(e=i.particles.shape.options[Enums_1.ShapeType.character])&&void 0!==e?e:i.particles.shape.options[Enums_1.ShapeType.char];if(t instanceof Array)for(const e of t)yield Utils_1.Utils.loadFont(e);else void 0!==t&&(yield Utils_1.Utils.loadFont(t))}})}draw(t,e,i,r){const n=e.shapeData;if(void 0===n)return;const s=n.value;if(void 0===s)return;const a=e;void 0===a.text&&(s instanceof Array?a.text=Utils_1.Utils.itemFromArray(s,e.randomIndexData):a.text=s);const o=a.text,c=n.style,l=n.weight,p=2*Math.round(i),u=n.font,h=e.fill;t.font=`${c} ${l} ${p}px "${u}"`;const f={x:-i/2,y:i/2};h?t.fillText(o,f.x,f.y):t.strokeText(o,f.x,f.y)}}exports.TextDrawer=TextDrawer;