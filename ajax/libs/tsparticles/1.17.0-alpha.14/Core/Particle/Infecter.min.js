"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Infecter=void 0;class Infecter{constructor(i,t){this.container=i,this.particle=t}startInfection(i){i>this.container.options.infection.stages.length||i<0||(this.infectionDelay=0,this.infectionDelayStage=i)}updateInfectionStage(i){i>this.container.options.infection.stages.length||i<0||void 0!==this.infectionStage&&this.infectionStage>i||(this.infectionStage=i,this.infectionTime=0)}updateInfection(i){const t=this.container.options,e=t.infection,n=t.infection.stages,o=n.length;if(void 0!==this.infectionDelay&&void 0!==this.infectionDelayStage){const t=this.infectionDelayStage;if(t>o||t<0)return;this.infectionDelay>1e3*e.delay?(this.infectionStage=t,this.infectionTime=0,delete this.infectionDelay,delete this.infectionDelayStage):this.infectionDelay+=i}else delete this.infectionDelay,delete this.infectionDelayStage;if(void 0!==this.infectionStage&&void 0!==this.infectionTime){const t=n[this.infectionStage];void 0!==t.duration&&t.duration>=0&&this.infectionTime>1e3*t.duration?this.nextInfectionStage():this.infectionTime+=i}else delete this.infectionStage,delete this.infectionTime}nextInfectionStage(){const i=this.container.options,t=i.infection.stages.length;if(!(t<=0||void 0===this.infectionStage)&&(this.infectionTime=0,t<=++this.infectionStage)){if(i.infection.cure)return delete this.infectionStage,void delete this.infectionTime;this.infectionStage=0,this.infectionTime=0}}}exports.Infecter=Infecter;