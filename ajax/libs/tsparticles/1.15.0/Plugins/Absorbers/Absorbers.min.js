"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Absorbers=void 0;var AbsorberInstance_1=require("./AbsorberInstance"),Utils_1=require("../../Utils"),Absorber_1=require("./Options/Classes/Absorber"),Enums_1=require("./Enums"),Absorbers=function(){function r(r){this.container=r,this.array=[],this.absorbers=[],this.interactivityAbsorbers=[]}return r.prototype.init=function(r){var s,e;if(r){r.absorbers&&(r.absorbers instanceof Array?this.absorbers=r.absorbers.map(function(r){var s=new Absorber_1.Absorber;return s.load(r),s}):(this.absorbers instanceof Array&&(this.absorbers=new Absorber_1.Absorber),this.absorbers.load(r.absorbers)));var t=null===(e=null===(s=r.interactivity)||void 0===s?void 0:s.modes)||void 0===e?void 0:e.absorbers;if(t&&(t instanceof Array?this.interactivityAbsorbers=t.map(function(r){var s=new Absorber_1.Absorber;return s.load(r),s}):(this.interactivityAbsorbers instanceof Array&&(this.interactivityAbsorbers=new Absorber_1.Absorber),this.interactivityAbsorbers.load(t))),this.absorbers instanceof Array)for(var o=0,i=this.absorbers;o<i.length;o++){var b=i[o],a=new AbsorberInstance_1.AbsorberInstance(this,b);this.addAbsorber(a)}else{b=this.absorbers,a=new AbsorberInstance_1.AbsorberInstance(this,b);this.addAbsorber(a)}}},r.prototype.particleUpdate=function(r,s){for(var e=0,t=this.array;e<t.length;e++){if(t[e].attract(r,s),r.destroyed)break}},r.prototype.draw=function(r){for(var s=0,e=this.array;s<e.length;s++){var t=e[s];r.save(),t.draw(r),r.restore()}},r.prototype.stop=function(){this.array=[]},r.prototype.resize=function(){for(var r=0,s=this.array;r<s.length;r++){s[r].resize()}},r.prototype.handleClickMode=function(r){var s,e,t,o,i=this.container,b=this.absorbers,a=this.interactivityAbsorbers;r===Enums_1.AbsorberClickMode.absorber&&(s=void 0,a instanceof Array?0<a.length&&(s=Utils_1.Utils.itemFromArray(a)):s=a,e=null!=s?s:b instanceof Array?Utils_1.Utils.itemFromArray(b):b,t=i.interactivity.mouse.clickPosition,o=new AbsorberInstance_1.AbsorberInstance(this,e,t),this.addAbsorber(o))},r.prototype.addAbsorber=function(r){this.array.push(r)},r.prototype.removeAbsorber=function(r){var s=this.array.indexOf(r);0<=s&&this.array.splice(s,1)},r}();exports.Absorbers=Absorbers;