"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorUtils=void 0;var Utils_1=require("./Utils"),Constants_1=require("./Constants"),ColorUtils=function(){function g(){}return g.colorToRgb=function(r){var t,o;if(void 0!==r){var s,n,l,a,i,e="string"==typeof r?{value:r}:r;return"string"==typeof e.value?n=e.value===Constants_1.Constants.randomColorValue?this.getRandomRgbColor():g.stringToRgb(e.value):e.value instanceof Array?(s=Utils_1.Utils.itemFromArray(e.value),n=g.colorToRgb({value:s})):void 0!==(a=null!==(t=(l=e.value).rgb)&&void 0!==t?t:e.value).r?n=a:void 0!==(i=null!==(o=l.hsl)&&void 0!==o?o:e.value).h&&(n=g.hslToRgb(i)),n}},g.colorToHsl=function(r){var t=this.colorToRgb(r);return void 0!==t?this.rgbToHsl(t):t},g.rgbToHsl=function(r){var t=r.r/255,o=r.g/255,s=r.b/255,n=Math.max(t,o,s),l=Math.min(t,o,s),a={h:0,l:(n+l)/2,s:0};return n!=l&&(a.l<.5?a.s=(n-l)/(n+l):a.s=(n-l)/(2-n-l),a.h=t===n?(o-s)/(n-l):o===n?2+(s-t)/(n-l):4+(t-o)/(n-l)),a.l*=100,a.s*=100,a.h*=60,a.h<0&&(a.h+=360),a},g.stringToAlpha=function(r){var t;return null===(t=g.stringToRgba(r))||void 0===t?void 0:t.a},g.stringToRgb=function(r){return g.stringToRgba(r)},g.hslToRgb=function(r){var t,o,s={b:0,g:0,r:0},n={h:r.h/360,l:r.l/100,s:r.s/100};return 0===n.s?(s.b=n.l,s.g=n.l,s.r=n.l):(o=2*n.l-(t=n.l<.5?n.l*(1+n.s):n.l+n.s-n.l*n.s),s.r=g.hue2rgb(o,t,n.h+1/3),s.g=g.hue2rgb(o,t,n.h),s.b=g.hue2rgb(o,t,n.h-1/3)),s.r=Math.floor(255*s.r),s.g=Math.floor(255*s.g),s.b=Math.floor(255*s.b),s},g.hslaToRgba=function(r){var t=g.hslToRgb(r);return{a:r.a,b:t.b,g:t.g,r:t.r}},g.getRandomRgbColor=function(r){var t,o=r||0,s=o+o*Math.pow(16,2)+o*Math.pow(16,4),n=16777215^s,l=Math.floor(Math.random()*n|s).toString(16);return null!==(t=this.stringToRgb("#"+l))&&void 0!==t?t:{b:0,g:0,r:0}},g.getStyleFromRgb=function(r,t){return"rgba("+r.r+", "+r.g+", "+r.b+", "+(null!=t?t:1)+")"},g.getStyleFromHsl=function(r,t){return"hsla("+r.h+", "+r.s+"%, "+r.l+"%, "+(null!=t?t:1)+")"},g.mix=function(r,t,o,s){var n=r,l=t;return void 0===n.r&&(n=this.hslToRgb(r)),void 0===l.r&&(l=this.hslToRgb(t)),{b:Utils_1.Utils.mix(n.b,l.b,o,s),g:Utils_1.Utils.mix(n.g,l.g,o,s),r:Utils_1.Utils.mix(n.r,l.r,o,s)}},g.hue2rgb=function(r,t,o){var s=o;return s<0&&(s+=1),1<s&&--s,s<1/6?r+6*(t-r)*s:s<.5?t:s<2/3?r+(t-r)*(2/3-s)*6:r},g.stringToRgba=function(r){if(r.startsWith("rgb"))return(t=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.]+)\s*)?\)/i.exec(r))?{a:4<t.length?parseFloat(t[5]):1,b:parseInt(t[3],10),g:parseInt(t[2],10),r:parseInt(t[1],10)}:void 0;if(r.startsWith("hsl"))return(t=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.]+)\s*)?\)/i.exec(r))?g.hslaToRgba({a:4<t.length?parseFloat(t[5]):1,h:parseInt(t[1],10),l:parseInt(t[3],10),s:parseInt(t[2],10)}):void 0;var t,o=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,function(r,t,o,s,n){return t+t+o+o+s+s+(void 0!==n?n+n:"")});return(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(o))?{a:void 0!==t[4]?parseInt(t[4],16)/255:1,b:parseInt(t[3],16),g:parseInt(t[2],16),r:parseInt(t[1],16)}:void 0},g}();exports.ColorUtils=ColorUtils;