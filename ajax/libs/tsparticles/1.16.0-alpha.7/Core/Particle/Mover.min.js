"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mover=void 0;const Utils_1=require("../../Utils"),Enums_1=require("../../Enums");class Mover{constructor(t,i){this.container=t,this.particle=i}move(t){this.moveParticle(t),this.moveParallax(t)}moveParticle(t){var i;const e=this.particle,o=e.particlesOptions;if(!o.move.enable)return;const s=this.container,n=s.options,r=this.getProximitySpeedFactor(),a=n.fpsLimit>0?60*t/1e3:3.6,l=(null!==(i=e.moveSpeed)&&void 0!==i?i:s.retina.moveSpeed)/2*r*a;this.applyNoise(t),e.position.x+=e.velocity.horizontal*l,e.position.y+=e.velocity.vertical*l,o.move.vibrate&&(e.position.x+=Math.sin(e.position.x*Math.cos(e.position.y)),e.position.y+=Math.cos(e.position.y*Math.sin(e.position.x)))}applyNoise(t){const i=this.particle;if(!i.particlesOptions.move.noise.enable)return;const e=this.container;if(i.lastNoiseTime<=i.noiseDelay)return void(i.lastNoiseTime+=t);const o=e.noiseGenerator(i);i.velocity.horizontal+=Math.cos(o.angle)*o.length,i.velocity.horizontal=Utils_1.Utils.clamp(i.velocity.horizontal,-1,1),i.velocity.vertical+=Math.sin(o.angle)*o.length,i.velocity.vertical=Utils_1.Utils.clamp(i.velocity.vertical,-1,1),i.lastNoiseTime-=i.noiseDelay}moveParallax(t){const i=this.container,e=i.options;if(!e.interactivity.events.onHover.parallax.enable)return;const o=this.particle,s=e.interactivity.events.onHover.parallax.force,n=i.interactivity.mouse.position;if(!n)return;const r=window.innerHeight/2,a=window.innerWidth/2,l=e.interactivity.events.onHover.parallax.smooth,c=(n.x-a)*(o.size.value/s),v=(n.y-r)*(o.size.value/s);o.offset.x+=(c-o.offset.x)/l,o.offset.y+=(v-o.offset.y)/l}getProximitySpeedFactor(){const t=this.container,i=t.options;if(!Utils_1.Utils.isInArray(Enums_1.HoverMode.slow,i.interactivity.events.onHover.mode))return 1;const e=this.container.interactivity.mouse.position;if(!e)return 1;const o=this.particle.getPosition(),s=Utils_1.Utils.getDistance(e,o),n=t.retina.slowModeRadius;return s>n?1:(s/n||0)/i.interactivity.modes.slow.factor}}exports.Mover=Mover;