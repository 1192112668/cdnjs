"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Linker=void 0;var Utils_1=require("../../../../Utils"),Linker=function(){function i(){}return i.link=function(i,t,n){for(var s,e=i.particlesOptions.links,l=e.opacity,o=null!==(s=i.linksDistance)&&void 0!==s?s:t.retina.linksDistance,r=t.canvas.size,a=e.warp,c=i.getPosition(),d=a?new Utils_1.CircleWarp(c.x,c.y,o,r):new Utils_1.Circle(c.x,c.y,o),p=0,u=t.particles.quadTree.query(d);p<u.length;p++){var k=u[p],U=k.particlesOptions.links;if(i!==k&&U.enable&&e.id===U.id){var v,x,y,C=k.getPosition(),_=Utils_1.Utils.getDistance(c,C);if(a&&o<_&&(v={x:C.x-r.width,y:C.y},o<(_=Utils_1.Utils.getDistance(c,v))&&(x={x:C.x-r.width,y:C.y-r.height},o<(_=Utils_1.Utils.getDistance(c,x))&&(y={x:C.x,y:C.y-r.height},_=Utils_1.Utils.getDistance(c,y)))),o<_)return;var f,g,h,D,O=l-_*l/o;0<O&&((D=void 0!==(f=i.particlesOptions.links).id?t.particles.linksColors[f.id]:t.particles.linksColor)||(D=(h="string"==typeof(g=f.color)?g:g.value)!==Utils_1.Constants.randomColorValue||f.consent?Utils_1.ColorUtils.colorToRgb({value:h}):f.blink?Utils_1.Constants.randomColorValue:Utils_1.Constants.midColorValue,void 0!==f.id?t.particles.linksColors[f.id]=D:t.particles.linksColor=D),-1===k.links.map(function(i){return i.destination}).indexOf(i)&&-1===i.links.map(function(i){return i.destination}).indexOf(k)&&i.links.push({destination:k,opacity:O}))}}},i}();exports.Linker=Linker;