"use strict";var __awaiter=this&&this.__awaiter||function(t,e,r,s){return new(r||(r=Promise))(function(o,a){function n(t){try{c(s.next(t))}catch(t){a(t)}}function i(t){try{c(s.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(n,i)}c((s=s.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Loader=void 0;const Container_1=require("./Container"),Utils_1=require("../Utils"),tsParticlesDom=[];class Loader{static dom(){return tsParticlesDom}static domItem(t){const e=Loader.dom(),r=e[t];if(r&&!r.destroyed)return r;e.splice(t,1)}static loadFromArray(t,e,r){return __awaiter(this,void 0,void 0,function*(){return Loader.load(t,Utils_1.Utils.itemFromArray(e,r))})}static setFromArray(t,e,r,s){return __awaiter(this,void 0,void 0,function*(){return Loader.set(t,e,Utils_1.Utils.itemFromArray(r,s))})}static load(t,e){return __awaiter(this,void 0,void 0,function*(){const r=document.getElementById(t);if(r)return this.set(t,r,e)})}static set(t,e,r){return __awaiter(this,void 0,void 0,function*(){const s=Loader.dom(),o=s.findIndex(e=>e.id===t);if(o>=0){const t=this.domItem(o);t&&!t.destroyed&&(t.destroy(),s.splice(o,1))}let a,n;if("canvas"===e.tagName)a=e,n=!1;else{const t=e.getElementsByTagName("canvas");t.length?((a=t[0]).className||(a.className=Utils_1.Constants.canvasClass),n=!1):(n=!0,(a=document.createElement("canvas")).className=Utils_1.Constants.canvasClass,a.style.width="100%",a.style.height="100%",e.appendChild(a))}const i=new Container_1.Container(t,r);return o>=0?s.splice(o,0,i):s.push(i),i.canvas.loadCanvas(a,n),yield i.start(),i})}static loadJSON(t,e){return __awaiter(this,void 0,void 0,function*(){const r=yield fetch(e);if(r.ok){const e=yield r.json();return e instanceof Array?Loader.loadFromArray(t,e):Loader.load(t,e)}this.fetchError(r.status)})}static setJSON(t,e,r){return __awaiter(this,void 0,void 0,function*(){const s=yield fetch(r);if(s.ok){const r=yield s.json();return r instanceof Array?Loader.setFromArray(t,e,r):Loader.set(t,e,r)}this.fetchError(s.status)})}static setOnClickHandler(t){const e=Loader.dom();if(0===e.length)throw new Error("Can only set click handlers after calling tsParticles.load() or tsParticles.loadJSON()");for(const r of e){const e=r.interactivity.element;e&&e.addEventListener("click",t)}}static fetchError(t){console.error(`Error tsParticles - fetch status: ${t}`),console.error("Error tsParticles - File config not found")}}exports.Loader=Loader;