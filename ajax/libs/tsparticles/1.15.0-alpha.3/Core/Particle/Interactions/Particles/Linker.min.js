"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Linker=void 0;var Utils_1=require("../../../../Utils"),Linker=function(){function i(){}return i.link=function(i,t,n){for(var s,e=i.particlesOptions.links,l=e.opacity,r=null!==(s=i.linksDistance)&&void 0!==s?s:t.retina.linksDistance,o=t.canvas.size,a=e.warp,c=i.getPosition(),p=a?new Utils_1.CircleWarp(c.x,c.y,r,o):new Utils_1.Circle(c.x,c.y,r),u=0,k=t.particles.quadTree.query(p);u<k.length;u++){var U=k[u];if(i!==U&&U.particlesOptions.links.enable){var d,x,y,C=U.getPosition(),_=Utils_1.Utils.getDistance(c,C);if(a&&r<_&&(d={x:C.x-o.width,y:C.y},r<(_=Utils_1.Utils.getDistance(c,d))&&(x={x:C.x-o.width,y:C.y-o.height},r<(_=Utils_1.Utils.getDistance(c,x))&&(y={x:C.x,y:C.y-o.height},_=Utils_1.Utils.getDistance(c,y)))),r<_)return;var f,g,v=l-_*l/r;0<v&&(t.particles.linksColor||((g="string"==typeof(f=i.particlesOptions.links.color)?f:f.value)!==Utils_1.Constants.randomColorValue||i.particlesOptions.links.consent?t.particles.linksColor=Utils_1.ColorUtils.colorToRgb({value:g}):i.particlesOptions.links.blink?t.particles.linksColor=Utils_1.Constants.randomColorValue:t.particles.linksColor=Utils_1.Constants.midColorValue),-1==U.links.map(function(i){return i.destination}).indexOf(i)&&-1==i.links.map(function(i){return i.destination}).indexOf(U)&&i.links.push({destination:U,opacity:v}))}}},i}();exports.Linker=Linker;