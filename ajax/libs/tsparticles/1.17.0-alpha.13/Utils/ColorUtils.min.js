"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorUtils=void 0;const Utils_1=require("./Utils"),Constants_1=require("./Constants");class ColorUtils{static colorToRgb(t){var s,r;if(void 0===t)return;const l="string"==typeof t?{value:t}:t;let o;if("string"==typeof l.value)o=l.value===Constants_1.Constants.randomColorValue?this.getRandomRgbColor():ColorUtils.stringToRgb(l.value);else if(l.value instanceof Array){const t=Utils_1.Utils.itemFromArray(l.value);o=ColorUtils.colorToRgb({value:t})}else{const t=l.value,a=null!==(s=t.rgb)&&void 0!==s?s:l.value;if(void 0!==a.r)o=a;else{const s=null!==(r=t.hsl)&&void 0!==r?r:l.value;void 0!==s.h&&(o=ColorUtils.hslToRgb(s))}}return o}static colorToHsl(t){const s=this.colorToRgb(t);return void 0!==s?this.rgbToHsl(s):s}static rgbToHsl(t){const s=t.r/255,r=t.g/255,l=t.b/255,o=Math.max(s,r,l),a=Math.min(s,r,l),i={h:0,l:(o+a)/2,s:0};return o!=a&&(i.s=i.l<.5?(o-a)/(o+a):(o-a)/(2-o-a),i.h=s===o?(r-l)/(o-a):i.h=r===o?2+(l-s)/(o-a):4+(s-r)/(o-a)),i.l*=100,i.s*=100,i.h*=60,i.h<0&&(i.h+=360),i}static stringToAlpha(t){var s;return null===(s=ColorUtils.stringToRgba(t))||void 0===s?void 0:s.a}static stringToRgb(t){return ColorUtils.stringToRgba(t)}static hslToRgb(t){const s={b:0,g:0,r:0},r={h:t.h/360,l:t.l/100,s:t.s/100};if(0===r.s)s.b=r.l,s.g=r.l,s.r=r.l;else{const t=r.l<.5?r.l*(1+r.s):r.l+r.s-r.l*r.s,l=2*r.l-t;s.r=ColorUtils.hue2rgb(l,t,r.h+1/3),s.g=ColorUtils.hue2rgb(l,t,r.h),s.b=ColorUtils.hue2rgb(l,t,r.h-1/3)}return s.r=Math.floor(255*s.r),s.g=Math.floor(255*s.g),s.b=Math.floor(255*s.b),s}static hslaToRgba(t){const s=ColorUtils.hslToRgb(t);return{a:t.a,b:s.b,g:s.g,r:s.r}}static getRandomRgbColor(t){const s=null!=t?t:0;return{b:Math.floor(Utils_1.Utils.randomInRange(s,256)),g:Math.floor(Utils_1.Utils.randomInRange(s,256)),r:Math.floor(Utils_1.Utils.randomInRange(s,256))}}static getStyleFromRgb(t,s){return`rgba(${t.r}, ${t.g}, ${t.b}, ${null!=s?s:1})`}static getStyleFromHsl(t,s){return`hsla(${t.h}, ${t.s}%, ${t.l}%, ${null!=s?s:1})`}static mix(t,s,r,l){let o=t,a=s;return void 0===o.r&&(o=this.hslToRgb(t)),void 0===a.r&&(a=this.hslToRgb(s)),{b:Utils_1.Utils.mix(o.b,a.b,r,l),g:Utils_1.Utils.mix(o.g,a.g,r,l),r:Utils_1.Utils.mix(o.r,a.r,r,l)}}static hue2rgb(t,s,r){let l=r;return l<0&&(l+=1),l>1&&(l-=1),l<1/6?t+6*(s-t)*l:l<.5?s:l<2/3?t+(s-t)*(2/3-l)*6:t}static stringToRgba(t){if(t.startsWith("rgb")){const s=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.]+)\s*)?\)/i.exec(t);return s?{a:s.length>4?parseFloat(s[5]):1,b:parseInt(s[3],10),g:parseInt(s[2],10),r:parseInt(s[1],10)}:void 0}if(t.startsWith("hsl")){const s=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.]+)\s*)?\)/i.exec(t);return s?ColorUtils.hslaToRgba({a:s.length>4?parseFloat(s[5]):1,h:parseInt(s[1],10),l:parseInt(s[3],10),s:parseInt(s[2],10)}):void 0}{const s=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,r=t.replace(s,(t,s,r,l,o)=>s+s+r+r+l+l+(void 0!==o?o+o:"")),l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(r);return l?{a:void 0!==l[4]?parseInt(l[4],16)/255:1,b:parseInt(l[3],16),g:parseInt(l[2],16),r:parseInt(l[1],16)}:void 0}}}exports.ColorUtils=ColorUtils;