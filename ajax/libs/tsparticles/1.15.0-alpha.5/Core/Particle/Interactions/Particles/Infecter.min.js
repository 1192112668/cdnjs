"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Infecter=void 0;var Utils_1=require("../../../../Utils"),Infecter=function(){function e(){}return e.infect=function(t,e,n){var i,o;if(t.updateInfection(n),void 0!==t.infectionStage){var a=e.options.infection;if(a.enable&&!(a.stages.length<1))for(var f=a.stages[t.infectionStage],c=e.retina.pixelRatio,r=2*t.size.value+f.radius*c,g=t.getPosition(),s=null!==(i=f.infectedStage)&&void 0!==i?i:t.infectionStage,l=e.particles.quadTree.query(new Utils_1.Circle(g.x,g.y,r)).filter(function(e){return void 0===e.infectionStage||e.infectionStage!==t.infectionStage}),u=f.rate,d=l.length,S=0,v=l;S<v.length;S++){var p,I,x=v[S];Math.random()<u/d&&(void 0===x.infectionStage?x.startInfection(s):x.infectionStage<t.infectionStage?x.updateInfectionStage(s):x.infectionStage>t.infectionStage&&(I=null!==(o=null==(p=a.stages[x.infectionStage])?void 0:p.infectedStage)&&void 0!==o?o:x.infectionStage,t.updateInfectionStage(I)))}}},e}();exports.Infecter=Infecter;