"use strict";var __awaiter=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))(function(r,a){function n(t){try{c(i.next(t))}catch(t){a(t)}}function o(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(n,o)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextDrawer=void 0;const Utils_1=require("../Utils"),Enums_1=require("../Enums");class TextDrawer{init(t){var e,s;return __awaiter(this,void 0,void 0,function*(){const i=t.options;if(Utils_1.Utils.isInArray(Enums_1.ShapeType.char,i.particles.shape.type)||Utils_1.Utils.isInArray(Enums_1.ShapeType.character,i.particles.shape.type)){const t=null!==(e=i.particles.shape.options[Enums_1.ShapeType.character])&&void 0!==e?e:i.particles.shape.options[Enums_1.ShapeType.char];if(t instanceof Array)for(const e of t)yield Utils_1.Utils.loadFont(e);else{const t=null!==(s=i.particles.shape.options[Enums_1.ShapeType.character])&&void 0!==s?s:i.particles.shape.options[Enums_1.ShapeType.char];void 0!==t&&(yield Utils_1.Utils.loadFont(t))}}})}draw(t,e,s,i){const r=e.shapeData;if(void 0===r)return;const a=r.value;if(void 0===a)return;const n=e;void 0===n.text&&(a instanceof Array?n.text=Utils_1.Utils.itemFromArray(a,e.randomIndexData):n.text=a);const o=n.text,c=r.style,l=r.weight,p=2*Math.round(s),u=r.font,h=e.fill;t.font=`${c} ${l} ${p}px "${u}"`;const y={x:-s/2,y:s/2};h?t.fillText(o,y.x,y.y):t.strokeText(o,y.x,y.y)}}exports.TextDrawer=TextDrawer;