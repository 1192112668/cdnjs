"use strict";var __awaiter=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))(function(i,n){function a(t){try{c(o.next(t))}catch(t){n(t)}}function s(t){try{c(o.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Utils=void 0;const Enums_1=require("../Enums"),ColorUtils_1=require("./ColorUtils");class Utils{static replaceColorSvg(t,e,r){if(!t.svgData)return"";return t.svgData.replace(/#([0-9A-F]{3,6})/gi,()=>ColorUtils_1.ColorUtils.getStyleFromHsl(e,r))}static clamp(t,e,r){return Math.min(Math.max(t,e),r)}static isInArray(t,e){return t===e||e instanceof Array&&e.indexOf(t)>-1}static mix(t,e,r,o){return Math.floor((t*r+e*o)/(r+o))}static getParticleBaseVelocity(t){let e;switch(t.direction){case Enums_1.MoveDirection.top:e={x:0,y:-1};break;case Enums_1.MoveDirection.topRight:e={x:.5,y:-.5};break;case Enums_1.MoveDirection.right:e={x:1,y:-0};break;case Enums_1.MoveDirection.bottomRight:e={x:.5,y:.5};break;case Enums_1.MoveDirection.bottom:e={x:0,y:1};break;case Enums_1.MoveDirection.bottomLeft:e={x:-.5,y:1};break;case Enums_1.MoveDirection.left:e={x:-1,y:0};break;case Enums_1.MoveDirection.topLeft:e={x:-.5,y:-.5};break;default:e={x:0,y:0}}return e}static getDistances(t,e){const r=t.x-e.x,o=t.y-e.y;return{dx:r,dy:o,distance:Math.sqrt(r*r+o*o)}}static getDistance(t,e){return this.getDistances(t,e).distance}static loadFont(t){return __awaiter(this,void 0,void 0,function*(){try{yield document.fonts.load(`${t.weight} 36px '${t.font}'`)}catch(t){}})}static arrayRandomIndex(t){return Math.floor(Math.random()*t.length)}static itemFromArray(t,e){return t[void 0!==e?e:this.arrayRandomIndex(t)]}static randomInRange(t,e){return Math.random()*(e-t)+t}static isPointInside(t,e,r){return this.areBoundsInside(this.calculateBounds(t,null!=r?r:0),e)}static areBoundsInside(t,e){return t.left<e.width&&t.right>0&&t.top<e.height&&t.bottom>0}static calculateBounds(t,e){return{bottom:t.y+e,left:t.x-e,right:t.x+e,top:t.y-e}}static loadImage(t){return new Promise((e,r)=>{const o={source:t,type:t.substr(t.length-3)};if(t){const i=new Image;i.addEventListener("load",()=>{o.element=i,e(o)}),i.addEventListener("error",()=>{r(`Error tsParticles - loading image: ${t}`)}),i.src=t}else r("Error tsParticles - No image.src")})}static downloadSvgImage(t){return __awaiter(this,void 0,void 0,function*(){if(t){const e={source:t,type:t.substr(t.length-3)};if("svg"!==e.type)return this.loadImage(t);const r=yield fetch(e.source);if(r.ok)return e.svgData=yield r.text(),e;throw new Error("Error tsParticles - Image not found")}throw new Error("Error tsParticles - No image.src")})}static deepExtend(t,...e){for(const r of e){if(null==r)continue;if("object"===typeof r){Array.isArray(r)?"object"==typeof t&&t&&Array.isArray(t)||(t=[]):"object"==typeof t&&t&&!Array.isArray(t)||(t={});for(const e in r){if("__proto__"===e)continue;const o=r[e],i="object"==typeof o;t[e]=i&&Array.isArray(o)?o.map(r=>this.deepExtend(t[e],r)):this.deepExtend(t[e],o)}}else t=r}return t}}exports.Utils=Utils;