"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Infecter=void 0;var Circle_1=require("../../../../Utils/Circle"),Infecter=function(){function e(){}return e.infect=function(t,e,i){var n,o;if(t.updateInfection(i),void 0!==t.infectionStage){var a=e.options.infection;if(a.enable&&!(a.stages.length<1))for(var c=a.stages[t.infectionStage],r=e.retina.pixelRatio,f=2*t.size.value+c.radius*r,g=t.getPosition(),l=null!==(n=c.infectedStage)&&void 0!==n?n:t.infectionStage,u=e.particles.quadTree.query(new Circle_1.Circle(g.x,g.y,f)).filter(function(e){return void 0===e.infectionStage||e.infectionStage!==t.infectionStage}),s=c.rate,d=u.length,S=0,v=u;S<v.length;S++){var p,I,x=v[S];Math.random()<s/d&&(void 0===x.infectionStage?x.startInfection(l):x.infectionStage<t.infectionStage?x.updateInfectionStage(l):x.infectionStage>t.infectionStage&&(I=null!==(o=null==(p=a.stages[x.infectionStage])?void 0:p.infectedStage)&&void 0!==o?o:x.infectionStage,t.updateInfectionStage(I)))}}},e}();exports.Infecter=Infecter;