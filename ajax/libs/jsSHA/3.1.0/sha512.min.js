!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).jsSHA=t()}(this,function(){"use strict";var e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])})(n,t)},X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function s(n,t,e,r){for(var o,i,u=t||[0],s=(e=e||0)>>>3,h=-1===r?3:0,w=0;w<n.length;w+=1)o=(i=w+s)>>>2,u.length<=o&&u.push(0),u[o]|=n[w]<<8*(h+r*(i%4));return{value:u,binLen:8*n.length+e}}function i(n,e,u){switch(e){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(n){case"HEX":return function(n,t,e){return function(n,t,e,r){var o,i,u;if(0!=n.length%2)throw new Error("String of HEX type must be in byte increments");for(var s=t||[0],h=(e=e||0)>>>3,w=-1===r?3:0,a=0;a<n.length;a+=2){if(o=parseInt(n.substr(a,2),16),isNaN(o))throw new Error("String of HEX type contains invalid characters");for(i=(u=(a>>>1)+h)>>>2;s.length<=i;)s.push(0);s[i]|=o<<8*(w+r*(u%4))}return{value:s,binLen:4*n.length+e}}(n,t,e,u)};case"TEXT":return function(n,X,t){return function(n,t,e,r){var o,i,u,s,h,w,a,f,c=0,p=X||[0],l=(e=e||0)>>>3;if("UTF8"===t)for(a=-1===r?3:0,u=0;u<n.length;u+=1)for(i=[],(o=n.charCodeAt(u))<128?i.push(o):o<2048?(i.push(192|o>>>6),i.push(128|63&o)):o<55296||57344<=o?i.push(224|o>>>12,128|o>>>6&63,128|63&o):(u+=1,o=65536+((1023&o)<<10|1023&n.charCodeAt(u)),i.push(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)),s=0;s<i.length;s+=1){for(h=(w=c+l)>>>2;p.length<=h;)p.push(0);p[h]|=i[s]<<8*(a+r*(w%4)),c+=1}else for(a=-1===r?2:0,f="UTF16LE"===t&&1!==r||"UTF16LE"!==t&&1===r,u=0;u<n.length;u+=1){for(o=n.charCodeAt(u),!0==f&&(o=(s=255&o)<<8|o>>>8),h=(w=c+l)>>>2;p.length<=h;)p.push(0);p[h]|=o<<8*(a+r*(w%4)),c+=2}return{value:p,binLen:8*c+e}}(n,e,t,u)};case"B64":return function(n,l,t){return function(n,t,e){var r,o,i,u,s,h,w=0,a=l||[0],f=(t=t||0)>>>3,c=-1===e?3:0,p=n.indexOf("=");if(-1===n.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(n=n.replace(/=/g,""),-1!==p&&p<n.length)throw new Error("Invalid '=' found in base-64 string");for(r=0;r<n.length;r+=4){for(u=n.substr(r,4),o=i=0;o<u.length;o+=1)i|=X.indexOf(u.charAt(o))<<18-6*o;for(o=0;o<u.length-1;o+=1){for(s=(h=w+f)>>>2;a.length<=s;)a.push(0);a[s]|=(i>>>16-8*o&255)<<8*(c+e*(h%4)),w+=1}}return{value:a,binLen:8*w+t}}(n,t,u)};case"BYTES":return function(n,a,t){return function(n,t,e){for(var r,o,i,u=a||[0],s=(t=t||0)>>>3,h=-1===e?3:0,w=0;w<n.length;w+=1)r=n.charCodeAt(w),o=(i=w+s)>>>2,u.length<=o&&u.push(0),u[o]|=r<<8*(h+e*(i%4));return{value:u,binLen:8*n.length+t}}(n,t,u)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(n){throw new Error("ARRAYBUFFER not supported by this environment")}return function(n,t,e){return r=t,o=e,i=u,s(new Uint8Array(n),r,o,i);var r,o,i};case"UINT8ARRAY":try{new Uint8Array(0)}catch(n){throw new Error("UINT8ARRAY not supported by this environment")}return function(n,t,e){return s(n,t,e,u)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function h(n,h,t,e){switch(n){case"HEX":return function(n){return function(n,t,e){for(var r,o="",i=h/8,u=-1===t?3:0,s=0;s<i;s+=1)r=n[s>>>2]>>>8*(u+t*(s%4)),o+="0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(15&r);return e.outputUpper?o.toUpperCase():o}(n,t,e)};case"B64":return function(n){return function(n,t,e,r){for(var o,i,u,s,h="",w=t/8,a=-1===e?3:0,f=0;f<w;f+=3)for(u=f+1<w?n[f+1>>>2]:0,s=f+2<w?n[f+2>>>2]:0,i=(n[f>>>2]>>>8*(a+e*(f%4))&255)<<16|(u>>>8*(a+e*((f+1)%4))&255)<<8|s>>>8*(a+e*((f+2)%4))&255,o=0;o<4;o+=1)h+=8*f+6*o<=t?X.charAt(i>>>6*(3-o)&63):r.b64Pad;return h}(n,h,t,e)};case"BYTES":return function(n){return function(n,t){for(var e,r="",o=h/8,i=-1===t?3:0,u=0;u<o;u+=1)e=n[u>>>2]>>>8*(i+t*(u%4))&255,r+=String.fromCharCode(e);return r}(n,t)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(n){throw new Error("ARRAYBUFFER not supported by this environment")}return function(n){return function(n,t){for(var e=h/8,r=new ArrayBuffer(e),o=new Uint8Array(r),i=-1===t?3:0,u=0;u<e;u+=1)o[u]=n[u>>>2]>>>8*(i+t*(u%4))&255;return r}(n,t)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(n){throw new Error("UINT8ARRAY not supported by this environment")}return function(n){return function(n,t){for(var e=h/8,r=-1===t?3:0,o=new Uint8Array(e),i=0;i<e;i+=1)o[i]=n[i>>>2]>>>8*(r+t*(i%4))&255;return o}(n,t)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],t=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function w(n){var t={outputUpper:!1,b64Pad:"=",outputLen:-1},e=n||{},r="Output length must be a multiple of 8";if(t.outputUpper=e.outputUpper||!1,e.b64Pad&&(t.b64Pad=e.b64Pad),e.outputLen){if(e.outputLen%8!=0)throw new Error(r);t.outputLen=e.outputLen}else if(e.shakeLen){if(e.shakeLen%8!=0)throw new Error(r);t.outputLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw new Error("Invalid b64Pad formatting option");return t}var o=(u.prototype.update=function(n){for(var t=0,e=this.R>>>5,r=this.U(n,this.u,this.s),o=r.binLen,i=r.value,u=o>>>5,s=0;s<u;s+=e)t+this.R<=o&&(this.T=this.m(i.slice(s,s+e),this.T),t+=this.R);this.v+=t,this.u=i.slice(t>>>5),this.s=o%this.R,this.h=!0},u.prototype.getHash=function(n,t){var e,r,o=this.F,i=w(t);if(!0===this.B){if(-1===i.outputLen)throw new Error("Output length must be specified in options");o=i.outputLen}var u=h(n,o,this.g,i);if(!0===this.A&&this.Y)return u(this.Y(i));for(r=this.H(this.u.slice(),this.s,this.v,this.S(this.T),o),e=1;e<this.numRounds;e+=1)!0===this.B&&o%32!=0&&(r[r.length-1]&=16777215>>>24-o%32),r=this.H(r,o,0,this.I(this.o),o);return u(r)},u.prototype.setHMACKey=function(n,t,e){if(!0!==this.C)throw new Error("Variant does not support HMAC");if(!0===this.h)throw new Error("Cannot set MAC key after calling update");var r=i(t,(e||{}).encoding||"UTF8",this.g);this.L(r(n))},u.prototype.L=function(n){var t,e=this.R>>>3,r=e/4-1;if(1!==this.numRounds)throw new Error("Cannot set numRounds with MAC");if(!0===this.A)throw new Error("MAC key already set");for(e<n.binLen/8&&(n.value=this.H(n.value,n.binLen,0,this.I(this.o),this.F));n.value.length<=r;)n.value.push(0);for(t=0;t<=r;t+=1)this.p[t]=909522486^n.value[t],this.l[t]=1549556828^n.value[t];this.T=this.m(this.p,this.T),this.v=this.R,this.A=!0},u.prototype.getHMAC=function(n,t){var e=w(t);return h(n,this.F,this.g,e)(this.N())},u.prototype.N=function(){if(!1===this.A)throw new Error("Cannot call getHMAC without first setting MAC key");var n=this.H(this.u.slice(),this.s,this.v,this.S(this.T),this.F),t=this.m(this.l,this.I(this.o));return this.H(n,this.F,this.R,t,this.F)},u),W=function(n,t){this.X=n,this.M=t};function u(n,t,e){var r=e||{};if(this.t=t,this.i=r.encoding||"UTF8",this.numRounds=r.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||this.numRounds<1)throw new Error("numRounds must a integer >= 1");this.o=n,this.u=[],this.s=0,this.h=!1,this.v=0,this.A=!1,this.p=[],this.l=[]}function $(n,t){var e;return t<32?(e=32-t,new W(n.X>>>t|n.M<<e,n.M>>>t|n.X<<e)):(e=64-t,new W(n.M>>>t|n.X<<e,n.X>>>t|n.M<<e))}function nn(n,t){return new W(n.X>>>t,n.M>>>t|n.X<<32-t)}function tn(n,t){var e,r=(65535&n.M)+(65535&t.M),o=(65535&(e=(n.M>>>16)+(t.M>>>16)+(r>>>16)))<<16|65535&r;return r=(65535&n.X)+(65535&t.X)+(e>>>16),e=(n.X>>>16)+(t.X>>>16)+(r>>>16),new W((65535&e)<<16|65535&r,o)}var a,f,c,en=[new W(n[0],3609767458),new W(n[1],602891725),new W(n[2],3964484399),new W(n[3],2173295548),new W(n[4],4081628472),new W(n[5],3053834265),new W(n[6],2937671579),new W(n[7],3664609560),new W(n[8],2734883394),new W(n[9],1164996542),new W(n[10],1323610764),new W(n[11],3590304994),new W(n[12],4068182383),new W(n[13],991336113),new W(n[14],633803317),new W(n[15],3479774868),new W(n[16],2666613458),new W(n[17],944711139),new W(n[18],2341262773),new W(n[19],2007800933),new W(n[20],1495990901),new W(n[21],1856431235),new W(n[22],3175218132),new W(n[23],2198950837),new W(n[24],3999719339),new W(n[25],766784016),new W(n[26],2566594879),new W(n[27],3203337956),new W(n[28],1034457026),new W(n[29],2466948901),new W(n[30],3758326383),new W(n[31],168717936),new W(n[32],1188179964),new W(n[33],1546045734),new W(n[34],1522805485),new W(n[35],2643833823),new W(n[36],2343527390),new W(n[37],1014477480),new W(n[38],1206759142),new W(n[39],344077627),new W(n[40],1290863460),new W(n[41],3158454273),new W(n[42],3505952657),new W(n[43],106217008),new W(n[44],3606008344),new W(n[45],1432725776),new W(n[46],1467031594),new W(n[47],851169720),new W(n[48],3100823752),new W(n[49],1363258195),new W(n[50],3750685593),new W(n[51],3785050280),new W(n[52],3318307427),new W(n[53],3812723403),new W(n[54],2003034995),new W(n[55],3602036899),new W(n[56],1575990012),new W(n[57],1125592928),new W(n[58],2716904306),new W(n[59],442776044),new W(n[60],593698344),new W(n[61],3733110249),new W(n[62],2999351573),new W(n[63],3815920427),new W(3391569614,3928383900),new W(3515267271,566280711),new W(3940187606,3454069534),new W(4118630271,4000239992),new W(116418474,1914138554),new W(174292421,2731055270),new W(289380356,3203993006),new W(460393269,320620315),new W(685471733,587496836),new W(852142971,1086792851),new W(1017036298,365543100),new W(1126000580,2618297676),new W(1288033470,3409855158),new W(1501505948,4234509866),new W(1607167915,987167468),new W(1816402316,1246189591)];function p(n){return"SHA-384"===n?[new W(3418070365,t[0]),new W(1654270250,t[1]),new W(2438529370,t[2]),new W(355462360,t[3]),new W(1731405415,t[4]),new W(41048885895,t[5]),new W(3675008525,t[6]),new W(1203062813,t[7])]:[new W(r[0],4089235720),new W(r[1],2227873595),new W(r[2],4271175723),new W(r[3],1595750129),new W(r[4],2917565137),new W(r[5],725511199),new W(r[6],4215389547),new W(r[7],327033209)]}function l(n,t){for(var e,r,o,i,u,s,h,w,a,f,c,p,l,X,M,v,d,A,g,E,R,y,m,U,b,T,F,L,H,B,C,Y,S,I,N,P,O,k,_,j,x=[],K=t[0],z=t[1],V=t[2],Z=t[3],q=t[4],D=t[5],G=t[6],J=t[7],Q=0;Q<80;Q+=1)Q<16?(o=2*Q,x[Q]=new W(n[o],n[1+o])):x[Q]=(0,u=$(i=x[Q-2],19),s=$(i,61),h=nn(i,6),B=new W(u.X^s.X^h.X,u.M^s.M^h.M),C=x[Q-7],O=x[Q-15],0,k=$(O,1),_=$(O,8),j=nn(O,7),Y=new W(k.X^_.X^j.X,k.M^_.M^j.M),S=x[Q-16],N=I=void 0,N=(65535&B.M)+(65535&C.M)+(65535&Y.M)+(65535&S.M),P=(65535&(I=(B.M>>>16)+(C.M>>>16)+(Y.M>>>16)+(S.M>>>16)+(N>>>16)))<<16|65535&N,N=(65535&B.X)+(65535&C.X)+(65535&Y.X)+(65535&S.X)+(I>>>16),I=(B.X>>>16)+(C.X>>>16)+(Y.X>>>16)+(S.X>>>16)+(N>>>16),new W((65535&I)<<16|65535&N,P)),M=J,0,F=$(T=q,14),L=$(T,18),H=$(T,41),v=new W(F.X^L.X^H.X,F.M^L.M^H.M),U=D,b=G,d=new W((m=q).X&U.X^~m.X&b.X,m.M&U.M^~m.M&b.M),A=en[Q],g=x[Q],R=E=void 0,R=(65535&M.M)+(65535&v.M)+(65535&d.M)+(65535&A.M)+(65535&g.M),y=(65535&(E=(M.M>>>16)+(v.M>>>16)+(d.M>>>16)+(A.M>>>16)+(g.M>>>16)+(R>>>16)))<<16|65535&R,R=(65535&M.X)+(65535&v.X)+(65535&d.X)+(65535&A.X)+(65535&g.X)+(E>>>16),E=(M.X>>>16)+(v.X>>>16)+(d.X>>>16)+(A.X>>>16)+(g.X>>>16)+(R>>>16),e=new W((65535&E)<<16|65535&R,y),r=tn((0,p=$(c=K,28),l=$(c,34),X=$(c,39),new W(p.X^l.X^X.X,p.M^l.M^X.M)),(a=z,f=V,new W((w=K).X&a.X^w.X&f.X^a.X&f.X,w.M&a.M^w.M&f.M^a.M&f.M))),J=G,G=D,D=q,q=tn(Z,e),Z=V,V=z,z=K,K=tn(e,r);return t[0]=tn(K,t[0]),t[1]=tn(z,t[1]),t[2]=tn(V,t[2]),t[3]=tn(Z,t[3]),t[4]=tn(q,t[4]),t[5]=tn(D,t[5]),t[6]=tn(G,t[6]),t[7]=tn(J,t[7]),t}return e(f=M,c=a=o),f.prototype=null===c?Object.create(c):(v.prototype=c.prototype,new v),M;function M(r,n,t){var e=this;if(0==("SHA-384"===r||"SHA-512"===r))throw new Error("Chosen SHA variant is not supported");var o=t||{};return(e=a.call(this,r,n,t)||this).Y=e.N,e.C=!0,e.g=-1,e.U=i(e.t,e.i,e.g),e.m=l,e.S=function(n){return n.slice()},e.I=p,e.H=function(n,t,s,e){return function(n,t,e,r){for(var o,i=31+(t+129>>>10<<5),u=t+s;n.length<=i;)n.push(0);for(n[t>>>5]|=128<<24-t%32,n[i]=4294967295&u,n[i-1]=u/4294967296|0,o=0;o<n.length;o+=32)e=l(n.slice(o,o+32),e);return"SHA-384"===r?[(e=e)[0].X,e[0].M,e[1].X,e[1].M,e[2].X,e[2].M,e[3].X,e[3].M,e[4].X,e[4].M,e[5].X,e[5].M]:[e[0].X,e[0].M,e[1].X,e[1].M,e[2].X,e[2].M,e[3].X,e[3].M,e[4].X,e[4].M,e[5].X,e[5].M,e[6].X,e[6].M,e[7].X,e[7].M]}(n,t,e,r)},e.T=p(r),e.R=1024,e.F="SHA-384"===r?384:512,e.B=!1,o.hmacKey&&e.L(function(n,t){var e="hmacKey must include a value and format";if(!n)throw new Error(e);if(void 0===n.value||!n.format)throw new Error(e);return i(n.format,n.encoding||"UTF8",t)(n.value)}(o.hmacKey,e.g)),e}function v(){this.constructor=f}});