!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n=n||self).jsSHA=e()}(this,function(){"use strict";var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])})(n,e)},I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function h(n,e,t,r){for(var i,o,s=e||[0],h=(t=t||0)>>>3,u=-1===r?3:0,w=0;w<n.length;w+=1)i=(o=w+h)>>>2,s.length<=i&&s.push(0),s[i]|=n[w]<<8*(u+r*(o%4));return{value:s,binLen:8*n.length+t}}function w(n,t,s){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(n){case"HEX":return function(n,e,t){return function(n,e,t,r){var i,o,s;if(0!=n.length%2)throw new Error("String of HEX type must be in byte increments");for(var h=e||[0],u=(t=t||0)>>>3,w=-1===r?3:0,a=0;a<n.length;a+=2){if(i=parseInt(n.substr(a,2),16),isNaN(i))throw new Error("String of HEX type contains invalid characters");for(o=(s=(a>>>1)+u)>>>2;h.length<=o;)h.push(0);h[o]|=i<<8*(w+r*(s%4))}return{value:h,binLen:4*n.length+t}}(n,e,t,s)};case"TEXT":return function(n,I,e){return function(n,e,t,r){var i,o,s,h,u,w,a,f,c=0,p=I||[0],L=(t=t||0)>>>3;if("UTF8"===e)for(a=-1===r?3:0,s=0;s<n.length;s+=1)for(o=[],(i=n.charCodeAt(s))<128?o.push(i):i<2048?(o.push(192|i>>>6),o.push(128|63&i)):i<55296||57344<=i?o.push(224|i>>>12,128|i>>>6&63,128|63&i):(s+=1,i=65536+((1023&i)<<10|1023&n.charCodeAt(s)),o.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),h=0;h<o.length;h+=1){for(u=(w=c+L)>>>2;p.length<=u;)p.push(0);p[u]|=o[h]<<8*(a+r*(w%4)),c+=1}else for(a=-1===r?2:0,f="UTF16LE"===e&&1!==r||"UTF16LE"!==e&&1===r,s=0;s<n.length;s+=1){for(i=n.charCodeAt(s),!0==f&&(i=(h=255&i)<<8|i>>>8),u=(w=c+L)>>>2;p.length<=u;)p.push(0);p[u]|=i<<8*(a+r*(w%4)),c+=2}return{value:p,binLen:8*c+t}}(n,t,e,s)};case"B64":return function(n,L,e){return function(n,e,t){var r,i,o,s,h,u,w=0,a=L||[0],f=(e=e||0)>>>3,c=-1===t?3:0,p=n.indexOf("=");if(-1===n.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(n=n.replace(/=/g,""),-1!==p&&p<n.length)throw new Error("Invalid '=' found in base-64 string");for(r=0;r<n.length;r+=4){for(s=n.substr(r,4),i=o=0;i<s.length;i+=1)o|=I.indexOf(s.charAt(i))<<18-6*i;for(i=0;i<s.length-1;i+=1){for(h=(u=w+f)>>>2;a.length<=h;)a.push(0);a[h]|=(o>>>16-8*i&255)<<8*(c+t*(u%4)),w+=1}}return{value:a,binLen:8*w+e}}(n,e,s)};case"BYTES":return function(n,a,e){return function(n,e,t){for(var r,i,o,s=a||[0],h=(e=e||0)>>>3,u=-1===t?3:0,w=0;w<n.length;w+=1)r=n.charCodeAt(w),i=(o=w+h)>>>2,s.length<=i&&s.push(0),s[i]|=r<<8*(u+t*(o%4));return{value:s,binLen:8*n.length+e}}(n,e,s)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(n){throw new Error("ARRAYBUFFER not supported by this environment")}return function(n,e,t){return r=e,i=t,o=s,h(new Uint8Array(n),r,i,o);var r,i,o};case"UINT8ARRAY":try{new Uint8Array(0)}catch(n){throw new Error("UINT8ARRAY not supported by this environment")}return function(n,e,t){return h(n,e,t,s)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function u(n,u,e,t){switch(n){case"HEX":return function(n){return function(n,e,t){for(var r,i="",o=u/8,s=-1===e?3:0,h=0;h<o;h+=1)r=n[h>>>2]>>>8*(s+e*(h%4)),i+="0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(15&r);return t.outputUpper?i.toUpperCase():i}(n,e,t)};case"B64":return function(n){return function(n,e,t,r){for(var i,o,s,h,u="",w=e/8,a=-1===t?3:0,f=0;f<w;f+=3)for(s=f+1<w?n[f+1>>>2]:0,h=f+2<w?n[f+2>>>2]:0,o=(n[f>>>2]>>>8*(a+t*(f%4))&255)<<16|(s>>>8*(a+t*((f+1)%4))&255)<<8|h>>>8*(a+t*((f+2)%4))&255,i=0;i<4;i+=1)u+=8*f+6*i<=e?I.charAt(o>>>6*(3-i)&63):r.b64Pad;return u}(n,u,e,t)};case"BYTES":return function(n){return function(n,e){for(var t,r="",i=u/8,o=-1===e?3:0,s=0;s<i;s+=1)t=n[s>>>2]>>>8*(o+e*(s%4))&255,r+=String.fromCharCode(t);return r}(n,e)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(n){throw new Error("ARRAYBUFFER not supported by this environment")}return function(n){return function(n,e){for(var t=u/8,r=new ArrayBuffer(t),i=new Uint8Array(r),o=-1===e?3:0,s=0;s<t;s+=1)i[s]=n[s>>>2]>>>8*(o+e*(s%4))&255;return r}(n,e)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(n){throw new Error("UINT8ARRAY not supported by this environment")}return function(n){return function(n,e){for(var t=u/8,r=-1===e?3:0,i=new Uint8Array(t),o=0;o<t;o+=1)i[o]=n[o>>>2]>>>8*(r+e*(o%4))&255;return i}(n,e)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],e=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function a(n){var e={outputUpper:!1,b64Pad:"=",shakeLen:-1},t=n||{};if(e.outputUpper=t.outputUpper||!1,t.b64Pad&&(e.b64Pad=t.b64Pad),t.shakeLen){if(t.shakeLen%8!=0)throw new Error("shakeLen must be a multiple of 8");e.shakeLen=t.shakeLen}if("boolean"!=typeof e.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof e.b64Pad)throw new Error("Invalid b64Pad formatting option");return e}var i=(o.prototype.update=function(n){for(var e=0,t=this.U>>>5,r=this.l(n,this.s,this.u),i=r.binLen,o=r.value,s=i>>>5,h=0;h<s;h+=t)e+this.U<=i&&(this.T=this.F(o.slice(h,h+t),this.T),e+=this.U);this.v+=e,this.s=o.slice(e>>>5),this.u=i%this.U,this.h=!0},o.prototype.getHash=function(n,e){var t=this.m;if(!0===this.A)throw new Error("Cannot call getHash after setting HMAC key");var r=a(e);if(!0===this.H){if(-1===r.shakeLen)throw new Error("shakeLen must be specified in options");t=r.shakeLen}for(var i=u(n,t,this.B,r),o=this.g(this.s.slice(),this.u,this.v,this.Y(this.T),t),s=1;s<this.numRounds;s+=1)!0===this.H&&t%32!=0&&(o[o.length-1]&=16777215>>>24-t%32),o=this.g(o,t,0,this.S(this.o),t);return i(o)},o.prototype.setHMACKey=function(n,e,t){var r;if(!0===this.A)throw new Error("HMAC key already set");if(!0===this.h)throw new Error("Cannot set HMAC key after calling update");if(!0===this.H)throw new Error("SHAKE is not supported for HMAC");var i=w(e,(t||{}).encoding||"UTF8",this.B)(n),o=i.binLen,s=this.U>>>3,h=s/4-1,u=i.value;for(s<o/8&&(u=this.g(u,o,0,this.S(this.o),this.m));u.length<=h;)u.push(0);for(r=0;r<=h;r+=1)this.p[r]=909522486^u[r],this.R[r]=1549556828^u[r];this.T=this.F(this.p,this.T),this.v=this.U,this.A=!0},o.prototype.getHMAC=function(n,e){if(!1===this.A)throw new Error("Cannot call getHMAC without first setting HMAC key");var t=a(e),r=u(n,this.m,this.B,t),i=this.g(this.s.slice(),this.u,this.v,this.Y(this.T),this.m),o=this.F(this.R,this.S(this.o));return r(o=this.g(i,this.m,this.U,o,this.m))},o),W=function(n,e){this.I=n,this.L=e};function o(n,e,t){var r=t||{};if(this.t=e,this.i=r.encoding||"UTF8",this.numRounds=r.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||this.numRounds<1)throw new Error("numRounds must a integer >= 1");this.o=n,this.s=[],this.u=0,this.h=!1,this.v=0,this.A=!1,this.p=[],this.R=[]}function $(n,e){var t;return e<32?(t=32-e,new W(n.I>>>e|n.L<<t,n.L>>>e|n.I<<t)):(t=64-e,new W(n.L>>>e|n.I<<t,n.I>>>e|n.L<<t))}function nn(n,e){return new W(n.I>>>e,n.L>>>e|n.I<<32-e)}function en(n,e){var t,r=(65535&n.L)+(65535&e.L),i=(65535&(t=(n.L>>>16)+(e.L>>>16)+(r>>>16)))<<16|65535&r;return r=(65535&n.I)+(65535&e.I)+(t>>>16),t=(n.I>>>16)+(e.I>>>16)+(r>>>16),new W((65535&t)<<16|65535&r,i)}var s,f,c,tn=[new W(n[0],3609767458),new W(n[1],602891725),new W(n[2],3964484399),new W(n[3],2173295548),new W(n[4],4081628472),new W(n[5],3053834265),new W(n[6],2937671579),new W(n[7],3664609560),new W(n[8],2734883394),new W(n[9],1164996542),new W(n[10],1323610764),new W(n[11],3590304994),new W(n[12],4068182383),new W(n[13],991336113),new W(n[14],633803317),new W(n[15],3479774868),new W(n[16],2666613458),new W(n[17],944711139),new W(n[18],2341262773),new W(n[19],2007800933),new W(n[20],1495990901),new W(n[21],1856431235),new W(n[22],3175218132),new W(n[23],2198950837),new W(n[24],3999719339),new W(n[25],766784016),new W(n[26],2566594879),new W(n[27],3203337956),new W(n[28],1034457026),new W(n[29],2466948901),new W(n[30],3758326383),new W(n[31],168717936),new W(n[32],1188179964),new W(n[33],1546045734),new W(n[34],1522805485),new W(n[35],2643833823),new W(n[36],2343527390),new W(n[37],1014477480),new W(n[38],1206759142),new W(n[39],344077627),new W(n[40],1290863460),new W(n[41],3158454273),new W(n[42],3505952657),new W(n[43],106217008),new W(n[44],3606008344),new W(n[45],1432725776),new W(n[46],1467031594),new W(n[47],851169720),new W(n[48],3100823752),new W(n[49],1363258195),new W(n[50],3750685593),new W(n[51],3785050280),new W(n[52],3318307427),new W(n[53],3812723403),new W(n[54],2003034995),new W(n[55],3602036899),new W(n[56],1575990012),new W(n[57],1125592928),new W(n[58],2716904306),new W(n[59],442776044),new W(n[60],593698344),new W(n[61],3733110249),new W(n[62],2999351573),new W(n[63],3815920427),new W(3391569614,3928383900),new W(3515267271,566280711),new W(3940187606,3454069534),new W(4118630271,4000239992),new W(116418474,1914138554),new W(174292421,2731055270),new W(289380356,3203993006),new W(460393269,320620315),new W(685471733,587496836),new W(852142971,1086792851),new W(1017036298,365543100),new W(1126000580,2618297676),new W(1288033470,3409855158),new W(1501505948,4234509866),new W(1607167915,987167468),new W(1816402316,1246189591)];function p(n){return"SHA-384"===n?[new W(3418070365,e[0]),new W(1654270250,e[1]),new W(2438529370,e[2]),new W(355462360,e[3]),new W(1731405415,e[4]),new W(41048885895,e[5]),new W(3675008525,e[6]),new W(1203062813,e[7])]:[new W(r[0],4089235720),new W(r[1],2227873595),new W(r[2],4271175723),new W(r[3],1595750129),new W(r[4],2917565137),new W(r[5],725511199),new W(r[6],4215389547),new W(r[7],327033209)]}function L(n,e){for(var t,r,i,o,s,h,u,w,a,f,c,p,L,I,l,A,d,v,g,E,U,R,y,b,m,T,H,F,B,C,S,Y,k,N,P,M,X,_,O,j,x=[],K=e[0],z=e[1],Z=e[2],q=e[3],D=e[4],G=e[5],J=e[6],Q=e[7],V=0;V<80;V+=1)V<16?(i=2*V,x[V]=new W(n[i],n[1+i])):x[V]=(0,s=$(o=x[V-2],19),h=$(o,61),u=nn(o,6),C=new W(s.I^h.I^u.I,s.L^h.L^u.L),S=x[V-7],X=x[V-15],0,_=$(X,1),O=$(X,8),j=nn(X,7),Y=new W(_.I^O.I^j.I,_.L^O.L^j.L),k=x[V-16],P=N=void 0,P=(65535&C.L)+(65535&S.L)+(65535&Y.L)+(65535&k.L),M=(65535&(N=(C.L>>>16)+(S.L>>>16)+(Y.L>>>16)+(k.L>>>16)+(P>>>16)))<<16|65535&P,P=(65535&C.I)+(65535&S.I)+(65535&Y.I)+(65535&k.I)+(N>>>16),N=(C.I>>>16)+(S.I>>>16)+(Y.I>>>16)+(k.I>>>16)+(P>>>16),new W((65535&N)<<16|65535&P,M)),l=Q,0,H=$(T=D,14),F=$(T,18),B=$(T,41),A=new W(H.I^F.I^B.I,H.L^F.L^B.L),b=G,m=J,d=new W((y=D).I&b.I^~y.I&m.I,y.L&b.L^~y.L&m.L),v=tn[V],g=x[V],U=E=void 0,U=(65535&l.L)+(65535&A.L)+(65535&d.L)+(65535&v.L)+(65535&g.L),R=(65535&(E=(l.L>>>16)+(A.L>>>16)+(d.L>>>16)+(v.L>>>16)+(g.L>>>16)+(U>>>16)))<<16|65535&U,U=(65535&l.I)+(65535&A.I)+(65535&d.I)+(65535&v.I)+(65535&g.I)+(E>>>16),E=(l.I>>>16)+(A.I>>>16)+(d.I>>>16)+(v.I>>>16)+(g.I>>>16)+(U>>>16),t=new W((65535&E)<<16|65535&U,R),r=en((0,p=$(c=K,28),L=$(c,34),I=$(c,39),new W(p.I^L.I^I.I,p.L^L.L^I.L)),(a=z,f=Z,new W((w=K).I&a.I^w.I&f.I^a.I&f.I,w.L&a.L^w.L&f.L^a.L&f.L))),Q=J,J=G,G=D,D=en(q,t),q=Z,Z=z,z=K,K=en(t,r);return e[0]=en(K,e[0]),e[1]=en(z,e[1]),e[2]=en(Z,e[2]),e[3]=en(q,e[3]),e[4]=en(D,e[4]),e[5]=en(G,e[5]),e[6]=en(J,e[6]),e[7]=en(Q,e[7]),e}return t(f=l,c=s=i),f.prototype=null===c?Object.create(c):(A.prototype=c.prototype,new A),l;function l(r,n,e){var t=s.call(this,r,n,e)||this;if(0==("SHA-384"===r||"SHA-512"===r))throw new Error("Chosen SHA variant is not supported");return t.B=-1,t.l=w(t.t,t.i,t.B),t.F=L,t.Y=function(n){return n.slice()},t.S=p,t.g=function(n,e,h,t){return function(n,e,t,r){for(var i,o=31+(e+129>>>10<<5),s=e+h;n.length<=o;)n.push(0);for(n[e>>>5]|=128<<24-e%32,n[o]=4294967295&s,n[o-1]=s/4294967296|0,i=0;i<n.length;i+=32)t=L(n.slice(i,i+32),t);return"SHA-384"===r?[(t=t)[0].I,t[0].L,t[1].I,t[1].L,t[2].I,t[2].L,t[3].I,t[3].L,t[4].I,t[4].L,t[5].I,t[5].L]:[t[0].I,t[0].L,t[1].I,t[1].L,t[2].I,t[2].L,t[3].I,t[3].L,t[4].I,t[4].L,t[5].I,t[5].L,t[6].I,t[6].L,t[7].I,t[7].L]}(n,e,t,r)},t.T=p(r),t.U=1024,t.m="SHA-384"===r?384:512,t.H=!1,t}function A(){this.constructor=f}});