!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).jsSHA=r()}(this,function(){"use strict";var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(t,r)},w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function h(t,r,n,e){for(var i,o,s=r||[0],h=(n=n||0)>>>3,u=-1===e?3:0,a=0;a<t.length;a+=1)i=(o=a+h)>>>2,s.length<=i&&s.push(0),s[i]|=t[a]<<8*(u+e*(o%4));return{value:s,binLen:8*t.length+n}}function a(t,n,s){switch(n){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(t){case"HEX":return function(t,r,n){return function(t,r,n,e){var i,o,s;if(0!=t.length%2)throw new Error("String of HEX type must be in byte increments");for(var h=r||[0],u=(n=n||0)>>>3,a=-1===e?3:0,f=0;f<t.length;f+=2){if(i=parseInt(t.substr(f,2),16),isNaN(i))throw new Error("String of HEX type contains invalid characters");for(o=(s=(f>>>1)+u)>>>2;h.length<=o;)h.push(0);h[o]|=i<<8*(a+e*(s%4))}return{value:h,binLen:4*t.length+n}}(t,r,n,s)};case"TEXT":return function(t,w,r){return function(t,r,n,e){var i,o,s,h,u,a,f,c,p=0,l=w||[0],A=(n=n||0)>>>3;if("UTF8"===r)for(f=-1===e?3:0,s=0;s<t.length;s+=1)for(o=[],(i=t.charCodeAt(s))<128?o.push(i):i<2048?(o.push(192|i>>>6),o.push(128|63&i)):i<55296||57344<=i?o.push(224|i>>>12,128|i>>>6&63,128|63&i):(s+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(s)),o.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),h=0;h<o.length;h+=1){for(u=(a=p+A)>>>2;l.length<=u;)l.push(0);l[u]|=o[h]<<8*(f+e*(a%4)),p+=1}else for(f=-1===e?2:0,c="UTF16LE"===r&&1!==e||"UTF16LE"!==r&&1===e,s=0;s<t.length;s+=1){for(i=t.charCodeAt(s),!0==c&&(i=(h=255&i)<<8|i>>>8),u=(a=p+A)>>>2;l.length<=u;)l.push(0);l[u]|=i<<8*(f+e*(a%4)),p+=2}return{value:l,binLen:8*p+n}}(t,n,r,s)};case"B64":return function(t,A,r){return function(t,r,n){var e,i,o,s,h,u,a=0,f=A||[0],c=(r=r||0)>>>3,p=-1===n?3:0,l=t.indexOf("=");if(-1===t.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(t=t.replace(/=/g,""),-1!==l&&l<t.length)throw new Error("Invalid '=' found in base-64 string");for(e=0;e<t.length;e+=4){for(s=t.substr(e,4),i=o=0;i<s.length;i+=1)o|=w.indexOf(s.charAt(i))<<18-6*i;for(i=0;i<s.length-1;i+=1){for(h=(u=a+c)>>>2;f.length<=h;)f.push(0);f[h]|=(o>>>16-8*i&255)<<8*(p+n*(u%4)),a+=1}}return{value:f,binLen:8*a+r}}(t,r,s)};case"BYTES":return function(t,f,r){return function(t,r,n){for(var e,i,o,s=f||[0],h=(r=r||0)>>>3,u=-1===n?3:0,a=0;a<t.length;a+=1)e=t.charCodeAt(a),i=(o=a+h)>>>2,s.length<=i&&s.push(0),s[i]|=e<<8*(u+n*(o%4));return{value:s,binLen:8*t.length+r}}(t,r,s)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw new Error("ARRAYBUFFER not supported by this environment")}return function(t,r,n){return e=r,i=n,o=s,h(new Uint8Array(t),e,i,o);var e,i,o};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw new Error("UINT8ARRAY not supported by this environment")}return function(t,r,n){return h(t,r,n,s)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function u(t,u,r,n){switch(t){case"HEX":return function(t){return function(t,r,n){for(var e,i="",o=u/8,s=-1===r?3:0,h=0;h<o;h+=1)e=t[h>>>2]>>>8*(s+r*(h%4)),i+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return n.outputUpper?i.toUpperCase():i}(t,r,n)};case"B64":return function(t){return function(t,r,n,e){for(var i,o,s,h,u="",a=r/8,f=-1===n?3:0,c=0;c<a;c+=3)for(s=c+1<a?t[c+1>>>2]:0,h=c+2<a?t[c+2>>>2]:0,o=(t[c>>>2]>>>8*(f+n*(c%4))&255)<<16|(s>>>8*(f+n*((c+1)%4))&255)<<8|h>>>8*(f+n*((c+2)%4))&255,i=0;i<4;i+=1)u+=8*c+6*i<=r?w.charAt(o>>>6*(3-i)&63):e.b64Pad;return u}(t,u,r,n)};case"BYTES":return function(t){return function(t,r){for(var n,e="",i=u/8,o=-1===r?3:0,s=0;s<i;s+=1)n=t[s>>>2]>>>8*(o+r*(s%4))&255,e+=String.fromCharCode(n);return e}(t,r)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw new Error("ARRAYBUFFER not supported by this environment")}return function(t){return function(t,r){for(var n=u/8,e=new ArrayBuffer(n),i=new Uint8Array(e),o=-1===r?3:0,s=0;s<n;s+=1)i[s]=t[s>>>2]>>>8*(o+r*(s%4))&255;return e}(t,r)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw new Error("UINT8ARRAY not supported by this environment")}return function(t){return function(t,r){for(var n=u/8,e=-1===r?3:0,i=new Uint8Array(n),o=0;o<n;o+=1)i[o]=t[o>>>2]>>>8*(e+r*(o%4))&255;return i}(t,r)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var i,t,r,k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],e=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function f(t){var r={outputUpper:!1,b64Pad:"=",shakeLen:-1},n=t||{};if(r.outputUpper=n.outputUpper||!1,n.b64Pad&&(r.b64Pad=n.b64Pad),n.shakeLen){if(n.shakeLen%8!=0)throw new Error("shakeLen must be a multiple of 8");r.shakeLen=n.shakeLen}if("boolean"!=typeof r.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof r.b64Pad)throw new Error("Invalid b64Pad formatting option");return r}function I(t,r){return t>>>r|t<<32-r}function N(t,r){var n=(65535&t)+(65535&r);return(65535&(t>>>16)+(r>>>16)+(n>>>16))<<16|65535&n}function s(t){return"SHA-224"==t?e.slice():o.slice()}function c(t,r){for(var n,e,i,o,s,h,u,a,f,c,p,l,A,w,d,v,g,E,R,U,y,b=[],m=r[0],T=r[1],F=r[2],H=r[3],B=r[4],L=r[5],C=r[6],Y=r[7],S=0;S<64;S+=1)b[S]=S<16?t[S]:(v=I(i=b[S-2],17)^I(i,19)^i>>>10,g=b[S-7],y=b[S-15],E=I(y,7)^I(y,18)^y>>>3,R=b[S-16],(65535&(v>>>16)+(g>>>16)+(E>>>16)+(R>>>16)+((U=(65535&v)+(65535&g)+(65535&E)+(65535&R))>>>16))<<16|65535&U),a=Y,f=I(d=B,6)^I(d,11)^I(d,25),c=(w=B)&L^~w&C,p=k[S],l=b[S],e=N(I(u=m,2)^I(u,13)^I(u,22),(o=m)&(s=T)^o&(h=F)^s&h),Y=C,C=L,L=B,B=N(H,n=(65535&(a>>>16)+(f>>>16)+(c>>>16)+(p>>>16)+(l>>>16)+((A=(65535&a)+(65535&f)+(65535&c)+(65535&p)+(65535&l))>>>16))<<16|65535&A),H=F,F=T,T=m,m=N(n,e);return r[0]=N(m,r[0]),r[1]=N(T,r[1]),r[2]=N(F,r[2]),r[3]=N(H,r[3]),r[4]=N(B,r[4]),r[5]=N(L,r[5]),r[6]=N(C,r[6]),r[7]=N(Y,r[7]),r}return A.prototype.update=function(t){for(var r=0,n=this.R>>>5,e=this.i(t,this.F,this.m),i=e.binLen,o=e.value,s=i>>>5,h=0;h<s;h+=n)r+this.R<=i&&(this.p=this.u(o.slice(h,h+n),this.p),r+=this.R);this.B+=r,this.F=o.slice(r>>>5),this.m=i%this.R,this.H=!0},A.prototype.getHash=function(t,r){var n=this.U;if(!0===this.g)throw new Error("Cannot call getHash after setting HMAC key");var e=f(r);if(!0===this.l){if(-1===e.shakeLen)throw new Error("shakeLen must be specified in options");n=e.shakeLen}for(var i=u(t,n,this.t,e),o=this.v(this.F.slice(),this.m,this.B,this.h(this.p),n),s=1;s<this.numRounds;s+=1)!0===this.l&&n%32!=0&&(o[o.length-1]&=16777215>>>24-n%32),o=this.v(o,n,0,this.A(this.T),n);return i(o)},A.prototype.setHMACKey=function(t,r,n){var e;if(!0===this.g)throw new Error("HMAC key already set");if(!0===this.H)throw new Error("Cannot set HMAC key after calling update");if(!0===this.l)throw new Error("SHAKE is not supported for HMAC");var i=a(r,(n||{}).encoding||"UTF8",this.t)(t),o=i.binLen,s=this.R>>>3,h=s/4-1,u=i.value;for(s<o/8&&(u=this.v(u,o,0,this.A(this.T),this.U));u.length<=h;)u.push(0);for(e=0;e<=h;e+=1)this.Y[e]=909522486^u[e],this.S[e]=1549556828^u[e];this.p=this.u(this.Y,this.p),this.B=this.R,this.g=!0},A.prototype.getHMAC=function(t,r){if(!1===this.g)throw new Error("Cannot call getHMAC without first setting HMAC key");var n=f(r),e=u(t,this.U,this.t,n),i=this.v(this.F.slice(),this.m,this.B,this.h(this.p),this.U),o=this.u(this.S,this.A(this.T));return e(o=this.v(i,this.U,this.R,o,this.U))},n(t=p,r=i=A),t.prototype=null===r?Object.create(r):(l.prototype=r.prototype,new l),p;function p(e,t,r){var n=i.call(this,e,t,r)||this;if(0==("SHA-224"===e||"SHA-256"===e))throw new Error("Chosen SHA variant is not supported");return n.t=-1,n.i=a(n.o,n.s,n.t),n.u=c,n.h=function(t){return t.slice()},n.A=s,n.v=function(t,r,h,n){return function(t,r,n,e){for(var i,o=15+(r+65>>>9<<4),s=r+h;t.length<=o;)t.push(0);for(t[r>>>5]|=128<<24-r%32,t[o]=4294967295&s,t[o-1]=s/4294967296|0,i=0;i<t.length;i+=16)n=c(t.slice(i,i+16),n);return"SHA-224"===e?[n[0],n[1],n[2],n[3],n[4],n[5],n[6]]:n}(t,r,n,e)},n.p=s(e),n.R=512,n.U="SHA-224"===e?224:256,n.l=!1,n}function l(){this.constructor=t}function A(t,r,n){var e=n||{};if(this.o=r,this.s=e.encoding||"UTF8",this.numRounds=e.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||this.numRounds<1)throw new Error("numRounds must a integer >= 1");this.T=t,this.F=[],this.m=0,this.H=!1,this.B=0,this.g=!1,this.Y=[],this.S=[]}});