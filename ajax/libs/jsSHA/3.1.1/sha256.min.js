!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).jsSHA=r()}(this,function(){"use strict";var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(t,r)},A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function s(t,r,n,e){for(var i,o,u=r||[0],s=(n=n||0)>>>3,h=-1===e?3:0,a=0;a<t.length;a+=1)i=(o=a+s)>>>2,u.length<=i&&u.push(0),u[i]|=t[a]<<8*(h+e*(o%4));return{value:u,binLen:8*t.length+n}}function o(t,n,u){switch(n){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(t){case"HEX":return function(t,r,n){return function(t,r,n,e){var i,o,u;if(0!=t.length%2)throw new Error("String of HEX type must be in byte increments");for(var s=r||[0],h=(n=n||0)>>>3,a=-1===e?3:0,f=0;f<t.length;f+=2){if(i=parseInt(t.substr(f,2),16),isNaN(i))throw new Error("String of HEX type contains invalid characters");for(o=(u=(f>>>1)+h)>>>2;s.length<=o;)s.push(0);s[o]|=i<<8*(a+e*(u%4))}return{value:s,binLen:4*t.length+n}}(t,r,n,u)};case"TEXT":return function(t,A,r){return function(t,r,n,e){var i,o,u,s,h,a,f,c,p=0,l=A||[0],w=(n=n||0)>>>3;if("UTF8"===r)for(f=-1===e?3:0,u=0;u<t.length;u+=1)for(o=[],(i=t.charCodeAt(u))<128?o.push(i):i<2048?(o.push(192|i>>>6),o.push(128|63&i)):i<55296||57344<=i?o.push(224|i>>>12,128|i>>>6&63,128|63&i):(u+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(u)),o.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),s=0;s<o.length;s+=1){for(h=(a=p+w)>>>2;l.length<=h;)l.push(0);l[h]|=o[s]<<8*(f+e*(a%4)),p+=1}else for(f=-1===e?2:0,c="UTF16LE"===r&&1!==e||"UTF16LE"!==r&&1===e,u=0;u<t.length;u+=1){for(i=t.charCodeAt(u),!0==c&&(i=(s=255&i)<<8|i>>>8),h=(a=p+w)>>>2;l.length<=h;)l.push(0);l[h]|=i<<8*(f+e*(a%4)),p+=2}return{value:l,binLen:8*p+n}}(t,n,r,u)};case"B64":return function(t,w,r){return function(t,r,n){var e,i,o,u,s,h,a=0,f=w||[0],c=(r=r||0)>>>3,p=-1===n?3:0,l=t.indexOf("=");if(-1===t.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(t=t.replace(/=/g,""),-1!==l&&l<t.length)throw new Error("Invalid '=' found in base-64 string");for(e=0;e<t.length;e+=4){for(u=t.substr(e,4),i=o=0;i<u.length;i+=1)o|=A.indexOf(u.charAt(i))<<18-6*i;for(i=0;i<u.length-1;i+=1){for(s=(h=a+c)>>>2;f.length<=s;)f.push(0);f[s]|=(o>>>16-8*i&255)<<8*(p+n*(h%4)),a+=1}}return{value:f,binLen:8*a+r}}(t,r,u)};case"BYTES":return function(t,f,r){return function(t,r,n){for(var e,i,o,u=f||[0],s=(r=r||0)>>>3,h=-1===n?3:0,a=0;a<t.length;a+=1)e=t.charCodeAt(a),i=(o=a+s)>>>2,u.length<=i&&u.push(0),u[i]|=e<<8*(h+n*(o%4));return{value:u,binLen:8*t.length+r}}(t,r,u)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw new Error("ARRAYBUFFER not supported by this environment")}return function(t,r,n){return e=r,i=n,o=u,s(new Uint8Array(t),e,i,o);var e,i,o};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw new Error("UINT8ARRAY not supported by this environment")}return function(t,r,n){return s(t,r,n,u)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function h(t,h,r,n){switch(t){case"HEX":return function(t){return function(t,r,n){for(var e,i="",o=h/8,u=-1===r?3:0,s=0;s<o;s+=1)e=t[s>>>2]>>>8*(u+r*(s%4)),i+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return n.outputUpper?i.toUpperCase():i}(t,r,n)};case"B64":return function(t){return function(t,r,n,e){for(var i,o,u,s,h="",a=r/8,f=-1===n?3:0,c=0;c<a;c+=3)for(u=c+1<a?t[c+1>>>2]:0,s=c+2<a?t[c+2>>>2]:0,o=(t[c>>>2]>>>8*(f+n*(c%4))&255)<<16|(u>>>8*(f+n*((c+1)%4))&255)<<8|s>>>8*(f+n*((c+2)%4))&255,i=0;i<4;i+=1)h+=8*c+6*i<=r?A.charAt(o>>>6*(3-i)&63):e.b64Pad;return h}(t,h,r,n)};case"BYTES":return function(t){return function(t,r){for(var n,e="",i=h/8,o=-1===r?3:0,u=0;u<i;u+=1)n=t[u>>>2]>>>8*(o+r*(u%4))&255,e+=String.fromCharCode(n);return e}(t,r)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw new Error("ARRAYBUFFER not supported by this environment")}return function(t){return function(t,r){for(var n=h/8,e=new ArrayBuffer(n),i=new Uint8Array(e),o=-1===r?3:0,u=0;u<n;u+=1)i[u]=t[u>>>2]>>>8*(o+r*(u%4))&255;return e}(t,r)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw new Error("UINT8ARRAY not supported by this environment")}return function(t){return function(t,r){for(var n=h/8,e=-1===r?3:0,i=new Uint8Array(n),o=0;o<n;o+=1)i[o]=t[o>>>2]>>>8*(e+r*(o%4))&255;return i}(t,r)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var u,t,r,S=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],e=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],i=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function a(t){var r={outputUpper:!1,b64Pad:"=",outputLen:-1},n=t||{},e="Output length must be a multiple of 8";if(r.outputUpper=n.outputUpper||!1,n.b64Pad&&(r.b64Pad=n.b64Pad),n.outputLen){if(n.outputLen%8!=0)throw new Error(e);r.outputLen=n.outputLen}else if(n.shakeLen){if(n.shakeLen%8!=0)throw new Error(e);r.outputLen=n.shakeLen}if("boolean"!=typeof r.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof r.b64Pad)throw new Error("Invalid b64Pad formatting option");return r}function N(t,r){return t>>>r|t<<32-r}function P(t,r){var n=(65535&t)+(65535&r);return(65535&(t>>>16)+(r>>>16)+(n>>>16))<<16|65535&n}function f(t){return"SHA-224"==t?e.slice():i.slice()}function c(t,r){for(var n,e,i,o,u,s,h,a,f,c,p,l,w,A,d,v,g,E,R,m,y,U=[],b=r[0],T=r[1],F=r[2],L=r[3],C=r[4],H=r[5],B=r[6],Y=r[7],I=0;I<64;I+=1)U[I]=I<16?t[I]:(v=N(i=U[I-2],17)^N(i,19)^i>>>10,g=U[I-7],y=U[I-15],E=N(y,7)^N(y,18)^y>>>3,R=U[I-16],(65535&(v>>>16)+(g>>>16)+(E>>>16)+(R>>>16)+((m=(65535&v)+(65535&g)+(65535&E)+(65535&R))>>>16))<<16|65535&m),a=Y,f=N(d=C,6)^N(d,11)^N(d,25),c=(A=C)&H^~A&B,p=S[I],l=U[I],e=P(N(h=b,2)^N(h,13)^N(h,22),(o=b)&(u=T)^o&(s=F)^u&s),Y=B,B=H,H=C,C=P(L,n=(65535&(a>>>16)+(f>>>16)+(c>>>16)+(p>>>16)+(l>>>16)+((w=(65535&a)+(65535&f)+(65535&c)+(65535&p)+(65535&l))>>>16))<<16|65535&w),L=F,F=T,T=b,b=P(n,e);return r[0]=P(b,r[0]),r[1]=P(T,r[1]),r[2]=P(F,r[2]),r[3]=P(L,r[3]),r[4]=P(C,r[4]),r[5]=P(H,r[5]),r[6]=P(B,r[6]),r[7]=P(Y,r[7]),r}return w.prototype.update=function(t){for(var r=0,n=this.T>>>5,e=this.s(t,this.Y,this.H),i=e.binLen,o=e.value,u=i>>>5,s=0;s<u;s+=n)r+this.T<=i&&(this.U=this.A(o.slice(s,s+n),this.U),r+=this.T);this.I+=r,this.Y=o.slice(r>>>5),this.H=i%this.T,this.S=!0},w.prototype.getHash=function(t,r){var n,e,i=this.m,o=a(r);if(this.F){if(-1===o.outputLen)throw new Error("Output length must be specified in options");i=o.outputLen}var u=h(t,i,this.u,o);if(this.C&&this.t)return u(this.t(o));for(e=this.R(this.Y.slice(),this.H,this.I,this.p(this.U),i),n=1;n<this.numRounds;n+=1)this.F&&i%32!=0&&(e[e.length-1]&=16777215>>>24-i%32),e=this.R(e,i,0,this.l(this.g),i);return u(e)},w.prototype.setHMACKey=function(t,r,n){if(!this.o)throw new Error("Variant does not support HMAC");if(this.S)throw new Error("Cannot set MAC key after calling update");var e=o(r,(n||{}).encoding||"UTF8",this.u);this.B(e(t))},w.prototype.B=function(t){var r,n=this.T>>>3,e=n/4-1;if(1!==this.numRounds)throw new Error("Cannot set numRounds with MAC");if(this.C)throw new Error("MAC key already set");for(n<t.binLen/8&&(t.value=this.R(t.value,t.binLen,0,this.l(this.g),this.m));t.value.length<=e;)t.value.push(0);for(r=0;r<=e;r+=1)this.L[r]=909522486^t.value[r],this.N[r]=1549556828^t.value[r];this.U=this.A(this.L,this.U),this.I=this.T,this.C=!0},w.prototype.getHMAC=function(t,r){var n=a(r);return h(t,this.m,this.u,n)(this.i())},w.prototype.i=function(){if(!this.C)throw new Error("Cannot call getHMAC without first setting MAC key");var t=this.R(this.Y.slice(),this.H,this.I,this.p(this.U),this.m),r=this.A(this.N,this.l(this.g));return this.R(t,this.m,this.T,r,this.m)},n(t=p,r=u=w),t.prototype=null===r?Object.create(r):(l.prototype=r.prototype,new l),p;function p(e,t,r){var n=this;if("SHA-224"!==e&&"SHA-256"!==e)throw new Error("Chosen SHA variant is not supported");var i=r||{};return(n=u.call(this,e,t,r)||this).t=n.i,n.o=!0,n.u=-1,n.s=o(n.h,n.v,n.u),n.A=c,n.p=function(t){return t.slice()},n.l=f,n.R=function(t,r,s,n){return function(t,r,n,e){for(var i,o=15+(r+65>>>9<<4),u=r+s;t.length<=o;)t.push(0);for(t[r>>>5]|=128<<24-r%32,t[o]=4294967295&u,t[o-1]=u/4294967296|0,i=0;i<t.length;i+=16)n=c(t.slice(i,i+16),n);return"SHA-224"===e?[n[0],n[1],n[2],n[3],n[4],n[5],n[6]]:n}(t,r,n,e)},n.U=f(e),n.T=512,n.m="SHA-224"===e?224:256,n.F=!1,i.hmacKey&&n.B(function(t,r){var n="hmacKey must include a value and format";if(!t)throw new Error(n);if(void 0===t.value||!t.format)throw new Error(n);return o(t.format,t.encoding||"UTF8",r)(t.value)}(i.hmacKey,n.u)),n}function l(){this.constructor=t}function w(t,r,n){var e=n||{};if(this.h=r,this.v=e.encoding||"UTF8",this.numRounds=e.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||this.numRounds<1)throw new Error("numRounds must a integer >= 1");this.g=t,this.Y=[],this.H=0,this.S=!1,this.I=0,this.C=!1,this.L=[],this.N=[]}});