define(["../_base/lang","../_base/array"],function(e,i){var u={};return e.setObject("dojo.date.stamp",u),u.fromISOString=function(e,t){u._isoRegExp||(u._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var n,o,s=u._isoRegExp.exec(e),r=null;return s&&(s.shift(),s[1]&&s[1]--,s[6]&&(s[6]*=1e3),t&&(t=new Date(t),i.forEach(i.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(e){return t["get"+e]()}),function(e,t){s[t]=s[t]||e})),r=new Date(s[0]||1970,s[1]||0,s[2]||1,s[3]||0,s[4]||0,s[5]||0,s[6]||0),s[0]<100&&r.setFullYear(s[0]||1970),n=0,"Z"!=(o=s[7]&&s[7].charAt(0))&&(n=60*(s[8]||0)+(Number(s[9])||0),"-"!=o&&(n*=-1)),o&&(n-=r.getTimezoneOffset()),n&&r.setTime(r.getTime()+6e4*n)),r},u.toISOString=function(e,t){function n(e){return e<10?"0"+e:e}var o,s,r,i,u,a=[],l=(t=t||{}).zulu?"getUTC":"get",c="";return"time"!=t.selector&&(o=e[l+"FullYear"](),c=["0000".substr((o+"").length)+o,n(e[l+"Month"]()+1),n(e[l+"Date"]())].join("-")),a.push(c),"date"!=t.selector&&(s=[n(e[l+"Hours"]()),n(e[l+"Minutes"]()),n(e[l+"Seconds"]())].join(":"),r=e[l+"Milliseconds"](),t.milliseconds&&(s+="."+(r<100?"0":"")+n(r)),t.zulu?s+="Z":"time"!=t.selector&&(i=e.getTimezoneOffset(),u=Math.abs(i),s+=(0<i?"-":"+")+n(Math.floor(u/60))+":"+n(u%60)),a.push(s)),a.join("T")},u});