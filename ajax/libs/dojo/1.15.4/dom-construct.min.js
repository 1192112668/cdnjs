define(["exports","./_base/kernel","./sniff","./_base/window","./dom","./dom-attr"],function(d,e,c,f,l,n){var t,p,h={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},b=/<\s*([\w\:]+)/,m={},u=0,v="__"+e._scopeName+"ToDomId";for(var r in h){h.hasOwnProperty(r)&&((t=h[r]).pre="option"==r?'<select multiple="multiple">':"<"+t.join("><")+">",t.post="</"+t.reverse().join("></")+">")}function s(e,t){var r=t.parentNode;r&&r.insertBefore(e,t)}c("ie")<=8&&(p=function(t){t.__dojo_html5_tested="yes";var e=o("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},t.body);1!==e.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(e){t.createElement(e)}),a(e)}),d.toDom=function(e,t){var r=(t=t||f.doc)[v];r||(t[v]=r=++u+"",m[r]=t.createElement("div")),c("ie")<=8&&!t.__dojo_html5_tested&&t.body&&p(t);var o,i,n,a,d=(e+="").match(b),l=d?d[1].toLowerCase():"",s=m[r];if(d&&h[l])for(o=h[l],s.innerHTML=o.pre+e+o.post,i=o.length;i;--i)s=s.firstChild;else s.innerHTML=e;if(1==s.childNodes.length)return s.removeChild(s.firstChild);for(a=t.createDocumentFragment();n=s.firstChild;)a.appendChild(n);return a},d.place=function(e,t,r){if(t=l.byId(t),"string"==typeof e&&(e=/^\s*</.test(e)?d.toDom(e,t.ownerDocument):l.byId(e)),"number"==typeof r){var o=t.childNodes;!o.length||o.length<=r?t.appendChild(e):s(e,o[r<0?0:r])}else switch(r){case"before":s(e,t);break;case"after":i=e,(a=(n=t).parentNode)&&(a.lastChild==n?a.appendChild(i):a.insertBefore(i,n.nextSibling));break;case"replace":t.parentNode.replaceChild(e,t);break;case"only":d.empty(t),t.appendChild(e);break;case"first":if(t.firstChild){s(e,t.firstChild);break}default:t.appendChild(e)}var i,n,a;return e};var o=d.create=function(e,t,r,o){var i=f.doc;return r&&(i=(r=l.byId(r)).ownerDocument),"string"==typeof e&&(e=i.createElement(e)),t&&n.set(e,t),r&&d.place(e,r,o),e};function i(e){if("innerHTML"in e)try{return void(e.innerHTML="")}catch(e){}for(var t;t=e.lastChild;)e.removeChild(t)}d.empty=function(e){i(l.byId(e))};var a=d.destroy=function(e){var t,r;(e=l.byId(e))&&(r=(t=e).parentNode,t.firstChild&&i(t),r&&(c("ie")&&r.canHaveChildren&&"removeNode"in t?t.removeNode(!1):r.removeChild(t)))}});