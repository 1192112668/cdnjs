define(["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style","./dom-construct"],function(t,I,V,j,N,S,l){I.add("rtl-adjust-position-for-verticalScrollBar",function(t,e){var o=V.body(e),i=l.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},o,"last"),n=l.create("div",{style:{overflow:"hidden",direction:"ltr"}},i,"last"),r=0!=N.position(n).x;return i.removeChild(n),o.removeChild(i),r}),I.add("position-fixed-support",function(t,e){var o=V.body(e),i=l.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},o,"last"),n=l.create("span",{style:{position:"fixed",left:"0",top:"0"}},i,"last"),r=N.position(n).x!=N.position(i).x;return i.removeChild(n),o.removeChild(i),r});var d={getBox:function(t){var e,o,i,n="BackCompat"==(t=t||V.doc).compatMode?V.body(t):t.documentElement,r=N.docScroll(t);return i=I("touch")?(o=(e=d.get(t)).innerWidth||n.clientWidth,e.innerHeight||n.clientHeight):(o=n.clientWidth,n.clientHeight),{l:r.x,t:r.y,w:o,h:i}},get:function(t){if(I("ie")&&d!==document.parentWindow){t.parentWindow.execScript("document._parentWindow = window;","Javascript");var e=t._parentWindow;return t._parentWindow=null,e}return t.parentWindow||t.defaultView},scrollIntoView:function(e,t){try{var o=(e=j.byId(e)).ownerDocument||V.doc,i=V.body(o),n=o.documentElement||i.parentNode,r=I("ie")||I("trident"),l=I("webkit");if(e==i||e==n)return;if(!(I("mozilla")||r||l||I("opera")||I("trident")||I("edge"))&&"scrollIntoView"in e)return void e.scrollIntoView(!1);function d(t){return!(r<=6||7==r&&a)&&(I("position-fixed-support")&&"fixed"==S.get(t,"position").toLowerCase())}function c(t,e,o){"BODY"==t.tagName||"HTML"==t.tagName?u.get(t.ownerDocument).scrollBy(e,o):(e&&(t.scrollLeft+=e),o&&(t.scrollTop+=o))}var a="BackCompat"==o.compatMode,s=Math.min(i.clientWidth||n.clientWidth,n.clientWidth||i.clientWidth),h=Math.min(i.clientHeight||n.clientHeight,n.clientHeight||i.clientHeight),p=l||a?i:n,f=t||N.position(e),w=e.parentNode,u=this;if(d(e))return;for(;w;){w==i&&(w=p);var m,x,y,v=N.position(w),g=d(w),W="rtl"==S.getComputedStyle(w).direction.toLowerCase();w==p?(v.w=s,v.h=h,p==n&&(r||I("trident"))&&W&&(v.x+=p.offsetWidth-v.w),v.x=0,v.y=0):(m=N.getPadBorderExtents(w),v.w-=m.w,v.h-=m.h,v.x+=m.l,v.y+=m.t,x=w.clientWidth,y=v.w-x,0<x&&0<y&&(W&&I("rtl-adjust-position-for-verticalScrollBar")&&(v.x+=y),v.w=x),x=w.clientHeight,y=v.h-x,0<x&&0<y&&(v.h=x)),g&&(v.y<0&&(v.h+=v.y,v.y=0),v.x<0&&(v.w+=v.x,v.x=0),v.y+v.h>h&&(v.h=h-v.y),v.x+v.w>s&&(v.w=s-v.x));var b,H,C=f.x-v.x,B=f.y-v.y,M=C+f.w-v.w,L=B+f.h-v.h;0<M*C&&(w.scrollLeft||w==p||w.scrollWidth>w.offsetHeight)&&(b=Math[C<0?"max":"min"](C,M),W&&(8==r&&!a||5<=I("trident"))&&(b=-b),H=w.scrollLeft,c(w,b,0),b=w.scrollLeft-H,f.x-=b),0<L*B&&(w.scrollTop||w==p||w.scrollHeight>w.offsetHeight)&&(b=Math.ceil(Math[B<0?"max":"min"](B,L)),H=w.scrollTop,c(w,0,b),b=w.scrollTop-H,f.y-=b),w=w!=p&&!g&&w.parentNode}}catch(t){console.error("scrollIntoView: "+t),e.scrollIntoView(!1)}}};return I("extend-dojo")&&t.setObject("dojo.window",d),d});