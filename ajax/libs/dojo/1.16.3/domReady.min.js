define(["./global","./has"],function(e,t){var n,a=document,o={loaded:1,complete:1},r="string"!=typeof a.readyState,c=!!o[a.readyState],d=[];function i(t){d.push(t),c&&l()}function l(){if(!n){for(n=!0;d.length;)try{d.shift()(a)}catch(t){console.error(t,"in domReady callback",t.stack)}n=!1,i._onQEmpty()}}if(i.load=function(t,e,n){i(n)},i._Q=d,i._onQEmpty=function(){},r&&(a.readyState="loading"),!c){function f(t){t=t||e.event,c||"readystatechange"==t.type&&!o[a.readyState]||(r&&(a.readyState="complete"),c=1,l())}var u,h=[],s=function(t,e){t.addEventListener(e,f,!1),d.push(function(){t.removeEventListener(e,f,!1)})};if(!t("dom-addeventlistener")){s=function(t,e){e="on"+e,t.attachEvent(e,f),d.push(function(){t.detachEvent(e,f)})};var y=a.createElement("div");try{y.doScroll&&null===e.frameElement&&h.push(function(){try{return y.doScroll("left"),1}catch(t){}})}catch(t){}}s(a,"DOMContentLoaded"),s(e,"load"),"onreadystatechange"in a?s(a,"readystatechange"):r||h.push(function(){return o[a.readyState]}),h.length&&(u=function(){if(!c){for(var t=h.length;t--;)if(h[t]())return void f("poller");setTimeout(u,30)}})()}return i});