define([],function(){"use strict";function e(o){return function(e,r,n,t){var u,i=e[r];i&&i.target==e||(e[r]=u=function(){for(var e=u.nextId,r=arguments,n=u.before;n;)n.advice&&(r=n.advice.apply(this,r)||r),n=n.next;u.around&&(i=u.around.advice(this,r));for(var t,i,a=u.after;a&&a.id<e;){a.advice&&(i=a.receiveArguments?void 0===(t=a.advice.apply(this,r))?i:t:a.advice.call(this,i,r)),a=a.next}return i},i&&(u.around={advice:function(e,r){return i.apply(e,r)}}),u.target=e,u.nextId=u.nextId||0);var a=function(n,t,i,e){var a,u,o=n[t],r="around"==t;if(u=r?(a=i(function(){return o.advice(this,arguments)}),{remove:function(){a=a&&(n=i=null)},advice:function(e,r){return a?a.apply(e,r):o.advice(e,r)}}):{remove:function(){var e,r;u.advice&&(e=u.previous,(r=u.next)||e?(e?e.next=r:n[t]=r,r&&(r.previous=e)):delete n[t],n=i=u.advice=null)},id:n.nextId++,advice:i,receiveArguments:e},o&&!r)if("after"==t){for(;o.next&&(o=o.next););(o.next=u).previous=o}else"before"==t&&(((n[t]=u).next=o).previous=u);else n[t]=u;return u}(u||i,o,n,t);return n=null,a}}var r=e("after");return{before:e("before"),around:e("around"),after:r}});