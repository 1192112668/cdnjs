define(["./_base/lang","./_base/array","./dom"],function(o,t,f){var d="className",r=/\s+/,i=[""];function l(e){if("string"==typeof e||e instanceof String){if(e&&!r.test(e))return i[0]=e,i;var n=e.split(r);return n.length&&!n[0]&&n.shift(),n.length&&!n[n.length-1]&&n.pop(),n}return e?t.filter(e,function(e){return e}):[]}var a,s={};return a={contains:function(e,n){return 0<=(" "+f.byId(e)[d]+" ").indexOf(" "+n+" ")},add:function(e,n){e=f.byId(e),n=l(n);for(var t,r=e[d],i=(r=r?" "+r+" ":" ").length,o=0,a=n.length;o<a;++o)(t=n[o])&&r.indexOf(" "+t+" ")<0&&(r+=t+" ");i<r.length&&(e[d]=r.substr(1,r.length-2))},remove:function(e,n){var t;if(e=f.byId(e),void 0!==n){n=l(n),t=" "+e[d]+" ";for(var r=0,i=n.length;r<i;++r)t=t.replace(" "+n[r]+" "," ");t=o.trim(t)}else t="";e[d]!=t&&(e[d]=t)},replace:function(e,n,t){e=f.byId(e),s[d]=e[d],a.remove(s,t),a.add(s,n),e[d]!==s[d]&&(e[d]=s[d])},toggle:function(e,n,t){if(e=f.byId(e),void 0===t)for(var r,i=0,o=(n=l(n)).length;i<o;++i)r=n[i],a[a.contains(e,r)?"remove":"add"](e,r);else a[t?"add":"remove"](e,n);return t}}});