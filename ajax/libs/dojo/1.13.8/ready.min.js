define(["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(d,o,r,a,i){function n(){e=1,d._postLoad=d.config.afterOnLoad=!0,f()}var e=0,t=[],s=0,f=function(){if(!s){for(s=1;e&&(!a||0==a._Q.length)&&(!r.idle||r.idle())&&t.length;){var o=t.shift();try{o()}catch(o){if(o.info=o.message,!r.signal)throw o;r.signal("error",o)}}s=0}};r.on&&r.on("idle",f),a&&(a._onQEmpty=f);var c,l=d.ready=d.addOnLoad=function(o,r,a){var n=i._toArray(arguments);"number"!=typeof o?(a=r,r=o,o=1e3):n.shift(),(a=a?i.hitch.apply(d,n):function(){r()}).priority=o;for(var e=0;e<t.length&&o>=t[e].priority;e++);t.splice(e,0,a),f()};return o.add("dojo-config-addOnLoad",1),!o("dojo-config-addOnLoad")||(c=d.config.addOnLoad)&&l[i.isArray(c)?"apply":"call"](d,c),o("dojo-sync-loader")&&d.config.parseOnLoad&&!d.isAsync&&l(99,function(){d.parser||(d.deprecated("Add explicit require(['dojo/parser']);","","2.0"),r(["dojo/parser"]))}),a?a(n):n(),l});