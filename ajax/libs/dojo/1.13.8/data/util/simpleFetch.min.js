define(["../../_base/lang","../../_base/kernel","./sorter"],function(e,h,u){var t={};return e.setObject("dojo.data.util.simpleFetch",t),t.errorHandler=function(t,e){var r;e.onError&&(r=e.scope||h.global,e.onError.call(r,t,e))},t.fetchHandler=function(t,e){var r=e.abort||null,o=!1,n=e.start?e.start:0,l=e.count&&e.count!==1/0?n+e.count:t.length;e.abort=function(){o=!0,r&&r.call(e)};var a,c=e.scope||h.global;if(e.store||(e.store=this),e.onBegin&&e.onBegin.call(c,t.length,e),e.sort&&t.sort(u.createSortFunction(e.sort,this)),e.onItem)for(var s=n;s<t.length&&s<l;++s){var i=t[s];o||e.onItem.call(c,i,e)}e.onComplete&&!o&&(a=null,e.onItem||(a=t.slice(n,l)),e.onComplete.call(c,a,e))},t.fetch=function(t){return(t=t||{}).store||(t.store=this),this._fetchItems(t,e.hitch(this,"fetchHandler"),e.hitch(this,"errorHandler")),t},t});