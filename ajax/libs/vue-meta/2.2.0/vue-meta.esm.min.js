import deepmerge from"deepmerge";var version="2.2.0",batchId=null;function triggerUpdate(e,t){e.$root._vueMeta.initialized||!e.$root._vueMeta.initializing&&"watcher"!==t||(e.$root._vueMeta.initialized=null),e.$root._vueMeta.initialized&&!e.$root._vueMeta.paused&&batchUpdate(function(){return e.$meta().refresh()})}function batchUpdate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return clearTimeout(batchId),batchId=setTimeout(function(){e()},t)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _iterableToArrayLimit(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function isArray(e){return Array.isArray(e)}function isUndefined(e){return void 0===e}function isObject(e){return"object"===_typeof(e)}function isPureObject(e){return"object"===_typeof(e)&&null!==e}function isFunction(e){return"function"==typeof e}function isString(e){return"string"==typeof e}function ensureIsArray(e,t){return t&&isObject(e)?(isArray(e[t])||(e[t]=[]),e):isArray(e)?e:[]}function ensuredPush(e,t,n){ensureIsArray(e,t),e[t].push(n)}function hasMetaInfo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return e&&(!0===e._vueMeta||isObject(e._vueMeta))}function inMetaInfoBranch(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return e&&!isUndefined(e._vueMeta)}function addNavGuards(e){if(!e.$root._vueMeta.navGuards&&e.$root.$router){e.$root._vueMeta.navGuards=!0;var t=e.$root.$router,n=e.$root.$meta();t.beforeEach(function(e,t,r){n.pause(),r()}),t.afterEach(function(){var e=n.resume().metaInfo;e&&e.afterNavigation&&isFunction(e.afterNavigation)&&e.afterNavigation(e)})}}function hasGlobalWindowFn(){try{return!isUndefined(window)}catch(e){return!1}}var hasGlobalWindow=hasGlobalWindowFn(),_global=hasGlobalWindow?window:global,console=_global.console=_global.console||{};function warn(e){console&&console.warn&&console.warn(e)}var appId=1;function createMixin(e,t){var n=["activated","deactivated","beforeMount"];return{beforeCreate:function(){var r=this;if(Object.defineProperty(this,"_hasMetaInfo",{configurable:!0,get:function(){return e.config.devtools&&!this.$root._vueMeta.hasMetaInfoDeprecationWarningShown&&(warn("VueMeta DeprecationWarning: _hasMetaInfo has been deprecated and will be removed in a future version. Please use hasMetaInfo(vm) instead"),this.$root._vueMeta.hasMetaInfoDeprecationWarningShown=!0),hasMetaInfo(this)}}),!isUndefined(this.$options[t.keyName])&&null!==this.$options[t.keyName]){if(this.$root._vueMeta||(this.$root._vueMeta={appId:appId},appId++),!this._vueMeta){this._vueMeta=!0;for(var a=this.$parent;a&&a!==this.$root;)isUndefined(a._vueMeta)&&(a._vueMeta=!1),a=a.$parent}isFunction(this.$options[t.keyName])&&(this.$options.computed||(this.$options.computed={}),this.$options.computed.$metaInfo=this.$options[t.keyName],this.$isServer||ensuredPush(this.$options,"created",function(){r.$watch("$metaInfo",function(){triggerUpdate(this,"watcher")})})),isUndefined(this.$root._vueMeta.initialized)&&(this.$root._vueMeta.initialized=this.$isServer,this.$root._vueMeta.initialized||(ensuredPush(this.$options,"beforeMount",function(){r.$root.$el&&r.$root.$el.hasAttribute&&r.$root.$el.hasAttribute("data-server-rendered")&&(r.$root._vueMeta.appId=t.ssrAppId)}),ensuredPush(this.$options,"mounted",function(){r.$root._vueMeta.initialized||(r.$root._vueMeta.initializing=!0,r.$nextTick(function(){var e=this,n=this.$root.$meta().refresh(),r=n.tags,a=n.metaInfo;!1===r&&null===this.$root._vueMeta.initialized&&this.$nextTick(function(){return triggerUpdate(e,"initializing")}),this.$root._vueMeta.initialized=!0,delete this.$root._vueMeta.initializing,!t.refreshOnceOnNavigation&&a.afterNavigation&&addNavGuards(this)}))}),t.refreshOnceOnNavigation&&addNavGuards(this))),this.$isServer||(n.forEach(function(e){ensuredPush(r.$options,e,function(){return triggerUpdate(r,e)})}),ensuredPush(this.$options,"destroyed",function(){var e=setInterval(function(){r.$el&&null!==r.$el.offsetParent||(clearInterval(e),r.$parent&&triggerUpdate(r,"destroyed"))},50)}))}}}}var defaultInfo={title:void 0,titleChunk:"",titleTemplate:"%s",htmlAttrs:{},bodyAttrs:{},headAttrs:{},base:[],link:[],meta:[],style:[],script:[],noscript:[],__dangerouslyDisableSanitizers:[],__dangerouslyDisableSanitizersByTagID:{}},keyName="metaInfo",attribute="data-vue-meta",ssrAttribute="data-vue-meta-server-rendered",tagIDKeyName="vmid",metaTemplateKeyName="template",contentKeyName="content",ssrAppId="ssr",defaultOptions={keyName:keyName,attribute:attribute,ssrAttribute:ssrAttribute,tagIDKeyName:tagIDKeyName,contentKeyName:contentKeyName,metaTemplateKeyName:metaTemplateKeyName,ssrAppId:ssrAppId},metaInfoOptionKeys=["titleChunk","titleTemplate","changed","__dangerouslyDisableSanitizers","__dangerouslyDisableSanitizersByTagID"],disableOptionKeys=["__dangerouslyDisableSanitizers","__dangerouslyDisableSanitizersByTagID"],metaInfoAttributeKeys=["htmlAttrs","headAttrs","bodyAttrs"],tagsSupportingOnload=["link","style","script"],tagsWithoutEndTag=["base","meta","link"],tagsWithInnerContent=["noscript","script","style"],tagAttributeAsInnerContent=["innerHTML","cssText","json"],commonDataAttributes=["body","pbody"],booleanHtmlAttributes=["allowfullscreen","amp","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","truespeed","typemustmatch","visible"];function setOptions(e){for(var t in e=isObject(e)?e:{},defaultOptions)e[t]||(e[t]=defaultOptions[t]);return e}function getOptions(e){var t={};for(var n in e)t[n]=e[n];return t}function pause(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$root._vueMeta.paused=!0,function(){return resume(e)}}function resume(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.$root._vueMeta.paused=!1,e)return this.$root.$meta().refresh()}function findIndex(e,t){if(!Array.prototype.findIndex){for(var n=0;n<e.length;n++)if(t.call(arguments[2],e[n],n,e))return n;return-1}return e.findIndex(t,arguments[2])}function toArray(e){return Array.from?Array.from(e):Array.prototype.slice.call(e)}function includes(e,t){if(!Array.prototype.includes){for(var n in e)if(e[n]===t)return!0;return!1}return e.includes(t)}var serverSequences=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"],[/'/g,"&#x27;"]],clientSequences=[[/&/g,"&"],[/</g,"<"],[/>/g,">"],[/"/g,'"'],[/'/g,"'"]];function escape(e,t,n,r){var a=t.tagIDKeyName,i=n.doEscape,o=void 0===i?function(e){return e}:i,s={};for(var u in e){var c=e[u];if(includes(metaInfoOptionKeys,u))s[u]=c;else{var l=_slicedToArray(disableOptionKeys,1)[0];if(n[l]&&includes(n[l],u))s[u]=c;else{var d=e[a];if(d&&(l=disableOptionKeys[1],n[l]&&n[l][d]&&includes(n[l][d],u)))s[u]=c;else if(isString(c)?s[u]=o(c):isArray(c)?s[u]=c.map(function(e){return isPureObject(e)?escape(e,t,n,!0):o(e)}):isPureObject(c)?s[u]=escape(c,t,n,!0):s[u]=c,r){var f=o(u);u!==f&&(s[f]=s[u],delete s[u])}}}}return s}function escapeMetaInfo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={doEscape:function(e){return n.reduce(function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1];return e.replace(r,a)},e)}};return disableOptionKeys.forEach(function(e,n){if(0===n)ensureIsArray(t,e);else if(1===n)for(var a in t[e])ensureIsArray(t[e],a);r[e]=t[e]}),escape(t,e,r)}function applyTemplate(e,t,n,r){var a=e.component,i=e.metaTemplateKeyName,o=e.contentKeyName;return isUndefined(n)&&(n=t[i],delete t[i]),!!n&&(isUndefined(r)&&(r=t[o]),t[o]=isFunction(n)?n.call(a,r):n.replace(/%s/g,r),!0)}function _arrayMerge(e,t,n){var r=e.component,a=e.tagIDKeyName,i=e.metaTemplateKeyName,o=e.contentKeyName,s=[];return t.forEach(function(e,t){if(e[a]){var u=findIndex(n,function(t){return t[a]===e[a]}),c=n[u];if(-1!==u){if(c.hasOwnProperty(o)&&void 0===c[o]||c.hasOwnProperty("innerHTML")&&void 0===c.innerHTML)return s.push(e),void n.splice(u,1);if(null!==c[o]&&null!==c.innerHTML){var l=e[i];if(l)c[i]?c[o]||applyTemplate({component:r,metaTemplateKeyName:i,contentKeyName:o},c,void 0,e[o]):applyTemplate({component:r,metaTemplateKeyName:i,contentKeyName:o},c,l)}else n.splice(u,1)}else s.push(e)}else s.push(e)}),s.concat(n)}function merge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.hasOwnProperty("title")&&void 0===t.title&&delete t.title,metaInfoAttributeKeys.forEach(function(e){if(t[e])for(var n in t[e])t[e].hasOwnProperty(n)&&void 0===t[e][n]&&(includes(booleanHtmlAttributes,n)&&warn("VueMeta: Please note that since v2 the value undefined is not used to indicate boolean attributes anymore, see migration guide for details"),delete t[e][n])}),deepmerge(e,t,{arrayMerge:function(e,t){return _arrayMerge(n,e,t)}})}function getComponentMetaInfo(){return getComponentOption(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0,defaultInfo)}function getComponentOption(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.keyName,a=e.metaTemplateKeyName,i=e.tagIDKeyName,o=t.$options,s=t.$children;if(t._inactive)return n;if(o[r]){var u=o[r];if(isFunction(u)&&(u=u.call(t)),!isObject(u))return n;n=merge(n,u,e)}return s.length&&s.forEach(function(t){inMetaInfoBranch(t)&&(n=getComponentOption(e,t,n))}),a&&n.meta&&(n.meta.forEach(function(t){return applyTemplate(e,t)}),n.meta=n.meta.filter(function(e,t,n){return!e.hasOwnProperty(i)||t===findIndex(n,function(t){return t[i]===e[i]})})),n}function getMetaInfo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;return t.title&&(t.titleChunk=t.title),t.titleTemplate&&"%s"!==t.titleTemplate&&applyTemplate({component:r,contentKeyName:"title"},t,t.titleTemplate,t.titleChunk||""),t.base&&(t.base=Object.keys(t.base).length?[t.base]:[]),escapeMetaInfo(e,t,n)}function getTag(e,t){return e[t]||(e[t]=document.getElementsByTagName(t)[0]),e[t]}function getElementsKey(e){var t=e.body,n=e.pbody;return t?"body":n?"pbody":"head"}function queryElements(e,t){var n=t.appId,r=t.attribute,a=t.type,i=t.tagIDKeyName,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=["".concat(a,"[").concat(r,'="').concat(n,'"]'),"".concat(a,"[data-").concat(i,"]")].map(function(e){for(var t in o){var n=o[t],r=n&&!0!==n?'="'.concat(n,'"'):"";e+="[data-".concat(t).concat(r,"]")}return e});return toArray(e.querySelectorAll(s.join(", ")))}var callbacks=[];function isDOMComplete(){return"complete"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).readyState}function addCallback(e,t){1===arguments.length&&(t=e,e=""),callbacks.push([e,t])}function addCallbacks(e,t,n,r){var a=e.tagIDKeyName,i=!1;return n.forEach(function(e){e[a]&&e.callback&&(i=!0,addCallback("".concat(t,"[data-").concat(a,'="').concat(e[a],'"]'),e.callback))}),r&&i?addListeners():i}function addListeners(){isDOMComplete()?applyCallbacks():document.onreadystatechange=function(){applyCallbacks()}}function applyCallbacks(e){callbacks.forEach(function(t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i="".concat(r,'[onload="this.__vm_l=1"]'),o=[];e||(o=toArray(document.querySelectorAll(i))),e&&e.matches(i)&&(o=[e]),o.forEach(function(e){if(!e.__vm_cb){var t=function(){e.__vm_cb=!0,e.removeAttribute("onload"),a(e)};e.__vm_l?t():e.__vm_ev||(e.__vm_ev=!0,e.addEventListener("load",t))}})})}function updateAttribute(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).attribute,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=n.getAttribute(e),a=r?r.split(","):[],i=toArray(a),o=[];for(var s in t)if(t.hasOwnProperty(s)){var u=includes(booleanHtmlAttributes,s)?"":isArray(t[s])?t[s].join(" "):t[s];n.setAttribute(s,u||""),includes(a,s)||a.push(s),o.push(i.indexOf(s))}var c=i.filter(function(e,t){return!includes(o,t)}).reduce(function(e,t){return n.removeAttribute(t),e+1},0);a.length===c?n.removeAttribute(e):n.setAttribute(e,a.sort().join(","))}function updateTitle(e){(e||""===e)&&(document.title=e)}function updateTag(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=t.attribute,s=t.tagIDKeyName,u=commonDataAttributes.slice();u.push(s);var c=[],l={appId:e,attribute:o,type:n,tagIDKeyName:s},d={head:queryElements(a,l),pbody:queryElements(i,l,{pbody:!0}),body:queryElements(i,l,{body:!0})};if(r.length>1){var f=[];r=r.filter(function(e){var t=JSON.stringify(e),n=!includes(f,t);return f.push(t),n})}r.forEach(function(t){if(!t.skip){var r=document.createElement(n);r.setAttribute(o,e);var a=function(e){if(!t.hasOwnProperty(e))return"continue";if("innerHTML"===e)return r.innerHTML=t.innerHTML,"continue";if("json"===e)return r.innerHTML=JSON.stringify(t.json),"continue";if("cssText"===e)return r.styleSheet?r.styleSheet.cssText=t.cssText:r.appendChild(document.createTextNode(t.cssText)),"continue";if("callback"===e)return r.onload=function(){return t[e](r)},"continue";var n=includes(u,e)?"data-".concat(e):e,a=includes(booleanHtmlAttributes,e);if(a&&!t[e])return"continue";var i=a?"":t[e];r.setAttribute(n,i)};for(var i in t)a(i);var s,l=d[getElementsKey(t)];l.some(function(e,t){return s=t,r.isEqualNode(e)})&&(s||0===s)?l.splice(s,1):c.push(r)}});var p=[];for(var v in d)Array.prototype.push.apply(p,d[v]);return p.forEach(function(e){e.parentNode.removeChild(e)}),c.forEach(function(e){e.hasAttribute("data-body")?i.appendChild(e):e.hasAttribute("data-pbody")?i.insertBefore(e,i.firstChild):a.appendChild(e)}),{oldTags:p,newTags:c}}function updateClientMetaInfo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.ssrAttribute,a=t.ssrAppId,i={},o=getTag(i,"html");if(e===a&&o.hasAttribute(r)){o.removeAttribute(r);var s=!1;return tagsSupportingOnload.forEach(function(e){n[e]&&addCallbacks(t,e,n[e])&&(s=!0)}),s&&addListeners(),!1}var u={},c={};for(var l in n)if(!includes(metaInfoOptionKeys,l))if("title"!==l){if(includes(metaInfoAttributeKeys,l)){var d=l.substr(0,4);updateAttribute(t,n[l],getTag(i,d))}else if(isArray(n[l])){var f=updateTag(e,t,l,n[l],getTag(i,"head"),getTag(i,"body")),p=f.oldTags,v=f.newTags;v.length&&(u[l]=v,c[l]=p)}}else updateTitle(n.title);return{addedTags:u,removedTags:c}}function _refresh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=getComponentMetaInfo(e,this.$root),n=getMetaInfo(e,t,clientSequences,this.$root),r=updateClientMetaInfo(this.$root._vueMeta.appId,e,n);return r&&isFunction(n.changed)&&n.changed(n,r.addedTags,r.removedTags),{vm:this,metaInfo:n,tags:r}}}function attributeGenerator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attribute,n=e.ssrAttribute,r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return{text:function(e){var i="",o=[];for(var s in a)a.hasOwnProperty(s)&&(o.push(s),i+=isUndefined(a[s])||booleanHtmlAttributes.includes(s)?s:"".concat(s,'="').concat(isArray(a[s])?a[s].join(" "):a[s],'"'),i+=" ");return i&&(i+="".concat(t,'="').concat(o.sort().join(","),'"')),"htmlAttrs"===r&&e?"".concat(n).concat(i?" ":"").concat(i):i}}}function titleGenerator(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).attribute;var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return{text:function(){return t?"<".concat(e,">").concat(t,"</").concat(e,">"):""}}}function tagGenerator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ssrAppId,n=e.attribute,r=e.tagIDKeyName,a=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o=[r].concat(_toConsumableArray(commonDataAttributes));return{text:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.body,s=void 0!==r&&r,u=e.pbody,c=void 0!==u&&u;return i&&i.length?i.reduce(function(e,r){if(r.skip)return e;if(0===Object.keys(r).length)return e;if(Boolean(r.body)!==s||Boolean(r.pbody)!==c)return e;var i=r.once?"":" ".concat(n,'="').concat(t,'"');for(var u in r)if(!tagAttributeAsInnerContent.includes(u)&&"once"!==u)if("callback"!==u){var l="";o.includes(u)&&(l="data-");var d=!l&&booleanHtmlAttributes.includes(u);d&&!r[u]||(i+=" ".concat(l).concat(u)+(d?"":'="'.concat(r[u],'"')))}else i+=' onload="this.__vm_l=1"';var f="";r.json&&(f=JSON.stringify(r.json));var p=r.innerHTML||r.cssText||f,v=!tagsWithoutEndTag.includes(a),h=v&&tagsWithInnerContent.includes(a);return"".concat(e,"<").concat(a).concat(i).concat(!h&&v?"/":"",">")+(h?"".concat(p,"</").concat(a,">"):"")},""):""}}}function generateServerInjector(e,t){for(var n in defaultInfo)metaInfoOptionKeys.includes(n)||("title"!==n?metaInfoAttributeKeys.includes(n)?t[n]=attributeGenerator(e,n,t[n]):t[n]=tagGenerator(e,n,t[n]):t[n]=titleGenerator(e,n,t[n]));return t}function _inject(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=getComponentMetaInfo(e,this.$root),n=getMetaInfo(e,t,serverSequences,this.$root);return generateServerInjector(e,n),n}}function _$meta(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=_refresh(e),n=_inject(e);return function(){return{getOptions:function(){return getOptions(e)},refresh:t.bind(this),inject:n.bind(this),pause:pause.bind(this),resume:resume.bind(this)}}}function generate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return generateServerInjector(t,getMetaInfo(setOptions(t),e,serverSequences))}function install(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.__vuemeta_installed||(e.__vuemeta_installed=!0,t=setOptions(t),e.prototype.$meta=_$meta(t),e.mixin(createMixin(e,t)))}var index={version:version,install:install,hasMetaInfo:hasMetaInfo,generate:generate};export default index;