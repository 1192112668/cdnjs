"use strict";function parsePath(e){return e.replace(/\[([^[\]]*)\]/g,".$1.").split(".").filter(function(e){return""!==e})}function get(e,t){return parsePath(t).reduce(function(e,t){return e&&e[t]},e)}function set(e,t,r){for(var o=parsePath(t),n=e,a=0;a<o.length-1;a++){var s=o[a];n.hasOwnProperty(s)||(n[s]={}),n=n[s]}n[o[o.length-1]]=r}function copy(e,t,r){set(e,r,get(t,r))}var StroageDriverImpl=function(){function e(e){this.storage=e}return e.prototype.set=function(e,t){this.storage.setItem(e,JSON.stringify(t))},e.prototype.get=function(e){return JSON.parse(this.storage.getItem(e))},e.prototype.has=function(e){return!!this.storage.getItem(e)},e}(),localStorage=new StroageDriverImpl(window.localStorage),sessionStorage=new StroageDriverImpl(window.sessionStorage),drivers=Object.freeze({__proto__:null,default:StroageDriverImpl,localStorage:localStorage,sessionStorage:sessionStorage});function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var isobj=function(e){return"object"===_typeof(e)&&!Array.isArray(e)&&null!==e},merge=function e(t,r){for(var o=0,n=Object.keys(r);o<n.length;o++){var a=n[o];isobj(r[a])&&a in t?e(t[a],r[a]):t[a]=r[a]}return t};function applyPersistence(e,t){for(var r=t.keys,o=t.merge,n=void 0===o?merge:o,a=t.namespace,s=t.driver,i=void 0===s?localStorage:s,c={},u=0,l=r;u<l.length;u++){var f=l[u];copy(c,e,f)}var g=null;if(i.has(a))g=i.get(a);else{for(var p={},y=0,v=r;y<v.length;y++){copy(p,c,f=v[y])}g=p,i.set(a,g)}g=n(c,g);for(var h=function(t){copy(e,g,t),e.$watch(t,{handler:function(e){set(g,t,e),i.set(a,g)},deep:!0})},S=0,m=r;S<m.length;S++){h(f=m[S])}}function install(e){e.mixin({created:function(){var e,t=this;"storage"in this.$options&&(e=this.$options.storage,Array.isArray(e)?e.forEach(function(e){return applyPersistence(t,e)}):applyPersistence(this,e))}})}function createVuexPlugin(e){var a=e.keys,t=e.merge,s=void 0===t?merge:t,i=e.namespace,r=e.driver,c=void 0===r?localStorage:r;return function(e){if(c.has(i)){var t=c.get(i);e.replaceState(s(e.state,t))}else{for(var t={},r=0,o=a;r<o.length;r++){var n=o[r];copy(t,e.state,n)}c.set(i,t)}e.subscribe(function(e,t){for(var r={},o=0,n=a;o<n.length;o++){copy(r,t,n[o])}c.set(i,r)})}}var vuejsStorage=function(e){return createVuexPlugin(e)};vuejsStorage.install=install,vuejsStorage.drivers=drivers,module.exports=vuejsStorage;