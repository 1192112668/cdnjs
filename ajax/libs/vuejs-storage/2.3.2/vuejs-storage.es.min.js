var LSStorage=function(){function t(t){var e=t.storage,r=void 0===e?window.localStorage:e,n=t.stringify,a=void 0===n?JSON.stringify:n,s=t.parse,i=void 0===s?JSON.parse:s;this.storage=r,this.stringify=a,this.parse=i}return t.prototype.set=function(t,e){this.storage.setItem(t,this.stringify(e))},t.prototype.get=function(t){return this.parse(this.storage.getItem(t))},t.prototype.has=function(t){return null!=this.storage.getItem(t)},t}();function parsePath(t){return t.replace(/\[([^[\]]*)\]/g,".$1.").split(".").filter(function(t){return""!==t})}function get(t,e){return parsePath(e).reduce(function(t,e){return t&&t[e]},t)}function set(t,e,r){for(var n=parsePath(e),a=t,s=0;s<n.length-1;s++){var i=n[s];a.hasOwnProperty(i)||(a[i]={}),a=a[i]}a[n[n.length-1]]=r}function copy(t,e,r){set(t,r,get(e,r))}function assign(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0,a=e;n<a.length;n++){var s=a[n];for(var i in s)s.hasOwnProperty(i)&&(t[i]=s[i])}return t}function applyPersistence(t,e){for(var r=e.keys,n=e.merge,a=void 0===n?assign:n,s=e.namespace,i=new LSStorage(e),o={},u=0,c=r;u<c.length;u++){var f=c[u];copy(o,t,f)}var g=null;if(i.has(s))g=i.get(s);else{for(var l={},p=0,h=r;p<h.length;p++){copy(l,o,f=h[p])}g=l}i.set(s,g),g=a(o,g);for(var v=function(e){copy(t,g,e),t.$watch(e,{handler:function(t){set(g,e,t),i.set(s,g)},deep:!0})},y=0,S=r;y<S.length;y++){v(f=S[y])}}function install(t){t.mixin({created:function(){var t=this;if("storage"in this.$options){var e=this.$options.storage;if(Array.isArray(e))return void e.forEach(function(e){return applyPersistence(t,e)});applyPersistence(this,e)}}})}function createVuexPlugin(t){var e=new LSStorage(t),r=t.keys,n=t.merge,a=void 0===n?assign:n,s=t.namespace;return function(t){var n=null;if(e.has(s))n=e.get(s);else{for(var i={},o=0,u=r;o<u.length;o++){var c=u[o];copy(i,t.state,c)}n=i}t.replaceState(a(t.state,n)),e.set(s,n),t.subscribe(function(t,a){for(var i={},o=0,u=r;o<u.length;o++){copy(i,a,u[o])}n=i,e.set(s,i)})}}var vuejsStorage=function(t){return createVuexPlugin(t)};vuejsStorage.install=install;export default vuejsStorage;