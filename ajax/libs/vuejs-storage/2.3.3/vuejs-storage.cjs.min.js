"use strict";var LSStorage=function(){function t(t){var e=t.storage,r=void 0===e?window.localStorage:e,n=t.stringify,s=void 0===n?JSON.stringify:n,a=t.parse,i=void 0===a?JSON.parse:a;this.storage=r,this.stringify=s,this.parse=i}return t.prototype.set=function(t,e){this.storage.setItem(t,this.stringify(e))},t.prototype.get=function(t){return this.parse(this.storage.getItem(t))},t.prototype.has=function(t){return null!=this.storage.getItem(t)},t}();function parsePath(t){return t.replace(/\[([^[\]]*)\]/g,".$1.").split(".").filter(function(t){return""!==t})}function get(t,e){return parsePath(e).reduce(function(t,e){return t&&t[e]},t)}function set(t,e,r){for(var n=parsePath(e),s=t,a=0;a<n.length-1;a++){var i=n[a];s.hasOwnProperty(i)||(s[i]={}),s=s[i]}s[n[n.length-1]]=r}function copy(t,e,r){set(t,r,get(e,r))}function assign(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0,s=e;n<s.length;n++){var a=s[n];for(var i in a)a.hasOwnProperty(i)&&(t[i]=a[i])}return t}function applyPersistence(t,e){for(var r=e.keys,n=e.merge,s=void 0===n?assign:n,a=e.namespace,i=new LSStorage(e),o={},u=0,c=r;u<c.length;u++){var g=c[u];copy(o,t,g)}var f=null;if(i.has(a))f=i.get(a);else{for(var l={},p=0,h=r;p<h.length;p++){copy(l,o,g=h[p])}f=l}i.set(a,f),f=s(o,f);for(var v=function(e){copy(t,f,e),t.$watch(e,{handler:function(t){set(f,e,t),i.set(a,f)},deep:!0})},y=0,S=r;y<S.length;y++){v(g=S[y])}}function install(t){t.mixin({created:function(){var e=this;if("storage"in this.$options){var t=this.$options.storage;if(Array.isArray(t))return void t.forEach(function(t){return applyPersistence(e,t)});applyPersistence(this,t)}}})}function createVuexPlugin(t){var i=new LSStorage(t),o=t.keys,e=t.merge,u=void 0===e?assign:e,c=t.namespace;return function(t){var a=null;if(i.has(c))a=i.get(c);else{for(var e={},r=0,n=o;r<n.length;r++){var s=n[r];copy(e,t.state,s)}a=e}t.replaceState(u(t.state,a)),i.set(c,a),t.subscribe(function(t,e){for(var r={},n=0,s=o;n<s.length;n++){copy(r,e,s[n])}a=r,i.set(c,r)})}}var vuejsStorage=function(t){return createVuexPlugin(t)};vuejsStorage.install=install,module.exports=vuejsStorage;