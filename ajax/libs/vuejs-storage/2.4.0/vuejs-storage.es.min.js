var LSStorage=function(){function e(e){var t=e.storage,r=void 0===t?window.localStorage:t,n=e.stringify,a=void 0===n?JSON.stringify:n,o=e.parse,i=void 0===o?JSON.parse:o;this.storage=r,this.stringify=a,this.parse=i}return e.prototype.set=function(e,t){this.storage.setItem(e,this.stringify(t))},e.prototype.get=function(e){return this.parse(this.storage.getItem(e))},e.prototype.has=function(e){return null!=this.storage.getItem(e)},e}();function parsePath(e){return e.replace(/\[([^[\]]*)\]/g,".$1.").split(".").filter(function(e){return""!==e})}function get(e,t){return parsePath(t).reduce(function(e,t){return e&&e[t]},e)}function set(e,t,r){for(var n=parsePath(t),a=e,o=0;o<n.length-1;o++){var i=n[o];a.hasOwnProperty(i)||(a[i]={}),a=a[i]}a[n[n.length-1]]=r}function copy(e,t,r){set(e,r,get(t,r))}var isobj=function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e};function merge(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,a=t;n<a.length;n++){var o=a[n];for(var i in o)o.hasOwnProperty(i)&&(isobj(o[i])?merge(e[i],o[i]):e[i]=o[i])}return e}function applyPersistence(e,t){for(var r=t.keys,n=t.merge,a=void 0===n?merge:n,o=t.namespace,i=new LSStorage(t),s={},u=0,c=r;u<c.length;u++){var f=c[u];copy(s,e,f)}var g=null;if(i.has(o))g=i.get(o);else{for(var l={},p=0,h=r;p<h.length;p++){copy(l,s,f=h[p])}g=l}i.set(o,g),g=a(s,g);for(var v=function(t){copy(e,g,t),e.$watch(t,{handler:function(e){set(g,t,e),i.set(o,g)},deep:!0})},y=0,S=r;y<S.length;y++){v(f=S[y])}}function install(e){e.mixin({created:function(){var e=this;if("storage"in this.$options){var t=this.$options.storage;if(Array.isArray(t))return void t.forEach(function(t){return applyPersistence(e,t)});applyPersistence(this,t)}}})}function createVuexPlugin(e){var t=new LSStorage(e),r=e.keys,n=e.merge,a=void 0===n?merge:n,o=e.namespace;return function(e){var n=null;if(t.has(o))n=t.get(o);else{for(var i={},s=0,u=r;s<u.length;s++){var c=u[s];copy(i,e.state,c)}n=i}e.replaceState(a(e.state,n)),t.set(o,n),e.subscribe(function(e,a){for(var i={},s=0,u=r;s<u.length;s++){copy(i,a,u[s])}n=i,t.set(o,i)})}}var vuejsStorage=function(e){return createVuexPlugin(e)};vuejsStorage.install=install;export default vuejsStorage;