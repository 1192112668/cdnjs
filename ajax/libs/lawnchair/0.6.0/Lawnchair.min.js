var Lawnchair=function(){if(!JSON)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(!(arguments.length<=2&&0<arguments.length))throw"Incorrect # of ctor args!";var a,r="function"==typeof arguments[0]?arguments[0]:arguments[1],t="function"==typeof arguments[0]?{}:arguments[0];if("function"!=typeof r)throw"No callback was provided";if(this.record=t.record||"record",this.name=t.name||"records",t.adapter)a=(a=Lawnchair.adapters[Lawnchair.adapters.indexOf(t.adapter)]).valid()?a:void 0;else for(var i=0,n=Lawnchair.adapters.length;i<n&&!(a=Lawnchair.adapters[i].valid()?Lawnchair.adapters[i]:void 0);i++);if(!a)throw"No valid adapter.";for(var e in a)this[e]=a[e];for(i=0,n=Lawnchair.plugins.length;i<n;i++)Lawnchair.plugins[i].call(this);this.init(t,r)};Lawnchair.adapters=[],Lawnchair.adapter=function(a,r){r.adapter=a;var t="adapter valid init keys save batch get exists all remove nuke".split(" ");for(var i in r)if(-1===t.indexOf(i))throw"Invalid adapter! Nonstandard method: "+i;Lawnchair.adapters.push(r)},Lawnchair.plugins=[],Lawnchair.plugin=function(a){for(var r in a)"init"===r?Lawnchair.plugins.push(a[r]):this.prototype[r]=a[r]},Lawnchair.prototype={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},lambda:function(a){return this.fn(this.record,a)},fn:function(a,r){return"string"==typeof r?new Function(a,r):r},uuid:function(){function a(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},each:function(a){var i=this.lambda(a);if(this.__results)for(var r=0,t=this.__results.length;r<t;r++)i.call(this,this.__results[r],r);else this.all(function(a){for(var r=0,t=a.length;r<t;r++)i.call(this,a[r],r)});return this}};