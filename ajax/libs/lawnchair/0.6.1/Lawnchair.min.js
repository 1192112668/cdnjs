var Lawnchair=function(){if(!JSON)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(!(arguments.length<=2&&0<arguments.length))throw"Incorrect # of ctor args!";var r="function"==typeof arguments[0]?arguments[0]:arguments[1],a="function"==typeof arguments[0]?{}:arguments[0];if("function"!=typeof r)throw"No callback was provided";var t,n=this instanceof Lawnchair?this:new Lawnchair(a,r);if(n.record=a.record||"record",n.name=a.name||"records",a.adapter)t=(t=Lawnchair.adapters[n.indexOf(Lawnchair.adapters,a.adapter)]).valid()?t:void 0;else for(var i=0,e=Lawnchair.adapters.length;i<e&&!(t=Lawnchair.adapters[i].valid()?Lawnchair.adapters[i]:void 0);i++);if(!t)throw"No valid adapter.";for(var o in t)n[o]=t[o];for(i=0,e=Lawnchair.plugins.length;i<e;i++)Lawnchair.plugins[i].call(n);return n.init(a,r),n};Lawnchair.adapters=[],Lawnchair.adapter=function(r,a){a.adapter=r;var t="adapter valid init keys save batch get exists all remove nuke".split(" "),n=this.prototype.indexOf;for(var i in a)if(-1===n(t,i))throw"Invalid adapter! Nonstandard method: "+i;Lawnchair.adapters.push(a)},Lawnchair.plugins=[],Lawnchair.plugin=function(r){for(var a in r)"init"===a?Lawnchair.plugins.push(r[a]):this.prototype[a]=r[a]},Lawnchair.prototype={isArray:Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)},indexOf:function(r,a,t,n){if(r.indexOf)return r.indexOf(a);for(t=0,n=r.length;t<n;t++)if(r[t]===a)return t;return-1},lambda:function(r){return this.fn(this.record,r)},fn:function(r,a){return"string"==typeof a?new Function(r,a):a},uuid:function(){function r(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},each:function(r){var n=this.lambda(r);if(this.__results)for(var a=0,t=this.__results.length;a<t;a++)n.call(this,this.__results[a],a);else this.all(function(r){for(var a=0,t=r.length;a<t;a++)n.call(this,r[a],a)});return this}};