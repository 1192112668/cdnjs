Lawnchair.adapter("dom",function(){var h=window.localStorage;return{valid:function(){return!!h},init:function(t,e){this.indexer={key:this.name+"._index_",all:function(){return null===JSON.parse(h.getItem(this.key))&&h.setItem(this.key,JSON.stringify([])),JSON.parse(h.getItem(this.key))},add:function(t){var e=this.all();e.push(t),h.setItem(this.key,JSON.stringify(e))},del:function(t){for(var e=this.all(),i=[],n=0,s=e.length;n<s;n++)e[n]!=t&&i.push(e[n]);h.setItem(this.key,JSON.stringify(i))},find:function(t){for(var e=this.all(),i=0,n=e.length;i<n;i++)if(t===e[i])return i;return!1}},e&&this.fn(this.name,e).call(this,this)},save:function(t,e){var i=t.key?this.name+"."+t.key:this.name+"."+this.uuid();return!1===this.indexer.find(i)&&this.indexer.add(i),delete t.key,h.setItem(i,JSON.stringify(t)),e&&(t.key=i.replace(this.name+".",""),this.lambda(e).call(this,t)),this},batch:function(t,e){for(var i=[],n=0,s=t.length;n<s;n++)this.save(t[n],function(t){i.push(t)});return e&&this.lambda(e).call(this,i),this},keys:function(t){var e,i;return t&&(e=this.name,i=this.indexer.all().map(function(t){return t.replace(e+".","")}),this.fn("keys",t).call(this,i)),this},get:function(t,e){if(this.isArray(t)){for(var i=[],n=0,s=t.length;n<s;n++){var a=this.name+"."+t[n];(r=JSON.parse(h.getItem(a)))&&(r.key=a,i.push(r))}e&&this.lambda(e).call(this,i)}else{var r,a=this.name+"."+t;(r=JSON.parse(h.getItem(a)))&&(r.key=a),e&&this.lambda(e).call(this,r)}return this},all:function(t){for(var e,i,n=this.indexer.all(),s=[],a=0,r=n.length;a<r;a++)i=n[a],(e=JSON.parse(h.getItem(i))).key=i.replace(this.name+".",""),s.push(e);return t&&this.fn(this.name,t).call(this,s),this},remove:function(t,e){var i=this.name+"."+("string"==typeof t?t:t.key);return this.indexer.del(i),h.removeItem(i),e&&this.lambda(e).call(this),this},nuke:function(n){return this.all(function(t){for(var e=0,i=t.length;e<i;e++)this.remove(t[e]);n&&this.lambda(n).call(this)}),this}}}());