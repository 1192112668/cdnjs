var crypto,alphabet="0123456789abcdefghjkmnpqrtuvwxyz",alias={o:0,i:1,l:1,s:5},lookup=function(){for(var t={},e=0;e<alphabet.length;e++)t[alphabet[e]]=e;for(var r in alias)alias.hasOwnProperty(r)&&(t[r]=t[""+alias[r]]);return lookup=function(){return t},t};function Encoder(){var r=0,o=0;this.output="",this.readByte=function(t){return"string"==typeof t&&(t=t.charCodeAt(0)),r<0?o|=t>>-r:o=t<<r&248,3<r?(r-=8,1):(r<4&&(this.output+=alphabet[o>>3],r+=5),0)},this.finish=function(t){var e=this.output+(r<0?alphabet[o>>3]:"")+(t?"$":"");return this.output="",e}}function Decoder(){var r=0,o=0;this.output="",this.readChar=function(t){t=t.toLowerCase();var e=lookup()[t];if(void 0===e)throw Error('Could not find character "'+t+'" in lookup table.');o|=(e<<=3)>>>r,8<=(r+=5)&&(this.output+=String.fromCharCode(o),o=0<(r-=8)?e<<5-r&255:0)},this.finish=function(t){var e=this.output+(r<0?alphabet[bits>>3]:"")+(t?"$":"");return this.output="",e}}function decode(t){return decoder=new Decoder,decoder.update(t)+decoder.finish()}function encode(t){return encoder=new Encoder,encoder.update(t)+encoder.finish()}function sha1(t){return"undefined"==typeof cryto&&(crypto=require("crypto")),encode(crypto.createHash("sha1").update(t).digest("binary"))}Number.prototype.toBinary=function(t){t=t||0;for(var e=this+0,r="";e||0<t;)r=(1&e?"1":"0")+r,e>>=1,t--;return r},Encoder.prototype.update=function(t){for(var e=0;e<t.length;)e+=this.readByte(t[e]);var r=this.output;return this.output="",r},Decoder.prototype.update=function(t){for(var e=0;e<t.length;e++)this.readChar(t[e]);var r=this.output;return this.output="",r},module.exports={Decoder:Decoder,Encoder:Encoder,encode:encode,decode:decode,sha1:sha1};