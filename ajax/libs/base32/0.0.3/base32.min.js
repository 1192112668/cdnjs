var crypto,fs,alphabet="0123456789abcdefghjkmnpqrtuvwxyz",alias={o:0,i:1,l:1,s:5},lookup=function(){for(var t={},e=0;e<alphabet.length;e++)t[alphabet[e]]=e;for(var r in alias)alias.hasOwnProperty(r)&&(t[r]=t[""+alias[r]]);return lookup=function(){return t},t};function Encoder(){var r=0,o=0;this.output="",this.readByte=function(t){return"string"==typeof t&&(t=t.charCodeAt(0)),r<0?o|=t>>-r:o=t<<r&248,3<r?(r-=8,1):(r<4&&(this.output+=alphabet[o>>3],r+=5),0)},this.finish=function(t){var e=this.output+(r<0?alphabet[o>>3]:"")+(t?"$":"");return this.output="",e}}function Decoder(){var r=0,o=0;this.output="",this.readChar=function(t){"string"!=typeof t&&"number"==typeof t&&(t=String.fromCharCode(t)),t=t.toLowerCase();var e=lookup()[t];void 0!==e&&(o|=(e<<=3)>>>r,8<=(r+=5)&&(this.output+=String.fromCharCode(o),o=0<(r-=8)?e<<5-r&255:0))},this.finish=function(t){var e=this.output+(r<0?alphabet[bits>>3]:"")+(t?"$":"");return this.output="",e}}function decode(t){return decoder=new Decoder,decoder.update(t)+decoder.finish()}function encode(t){return encoder=new Encoder,encoder.update(t)+encoder.finish()}function sha1(t,e){"undefined"==typeof cryto&&(crypto=require("crypto"));var r,o=crypto.createHash("sha1");if(o.digest=(r=o.digest,function(){return encode(r.call(this,"binary"))}),e){if("string"==typeof t||Buffer.isBuffer(t))try{return e(null,sha1(t))}catch(t){return e(t,null)}return t.on,t.on("data",function(t){o.update(t)}),void t.on("end",function(){e(null,o.digest())})}return t?o.update(t).digest():o}Number.prototype.toBinary=function(t){t=t||0;for(var e=this+0,r="";e||0<t;)r=(1&e?"1":"0")+r,e>>=1,t--;return r},Encoder.prototype.update=function(t){for(var e=0;e<t.length;)e+=this.readByte(t[e]);var r=this.output;return this.output="",r},Decoder.prototype.update=function(t){for(var e=0;e<t.length;e++)this.readChar(t[e]);var r=this.output;return this.output="",r},sha1.file=function(r,o){return"-"==r?(process.stdin.resume(),sha1(process.stdin,o)):(void 0===fs&&(fs=require("fs")),fs.stat(r,function(t,e){return t?o(t,null):e.isDirectory()?o({dir:!0,message:"Is a directory"}):sha1(require("fs").createReadStream(r),o)}))},module.exports={Decoder:Decoder,Encoder:Encoder,encode:encode,decode:decode,sha1:sha1};