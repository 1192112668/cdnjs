"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const d3_shape_1=require("d3-shape"),d3_selection_1=require("d3-selection");function annotations(t){const e=t.owner.meta.xScale,n=t.owner.meta.yScale,r=d3_shape_1.line().x(function(t){return t[0]}).y(function(t){return t[1]});return function(t){t.each(function(){const t=d3_selection_1.select(this).selectAll("g.annotations").data(function(t){return t.annotations||[]}),a=t.enter().append("g").attr("class","annotations"),o=n.range(),s=e.range(),i=t.merge(a).selectAll("path").data(function(t){return"x"in t?[[[0,o[0]],[0,o[1]]]]:[[[s[0],0],[s[1],0]]]});i.enter().append("path").attr("stroke","#eee").attr("d",r),i.exit().remove();const u=t.merge(a).selectAll("text").data(function(t){return[{text:t.text||"",hasX:"x"in t}]});u.enter().append("text").attr("y",function(t){return t.hasX?3:0}).attr("x",function(t){return t.hasX?0:3}).attr("dy",function(t){return t.hasX?5:-5}).attr("text-anchor",function(t){return t.hasX?"end":""}).attr("transform",function(t){return t.hasX?"rotate(-90)":""}).text(function(t){return t.text}),u.exit().remove(),t.merge(a).attr("transform",function(t){return"x"in t?"translate("+e(t.x)+", 0)":"translate(0, "+n(t.y)+")"}),t.exit().remove()})}}exports.default=annotations;