"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const d3_selection_1=require("d3-selection"),d3_shape_1=require("d3-shape"),clamp_1=__importDefault(require("clamp")),utils_1=__importDefault(require("../utils")),evaluate_1=__importDefault(require("../evaluate"));function polyline(e){return function t(a){a.each(function(a){const r=t.el=d3_selection_1.select(this),l=a.index,n=evaluate_1.default(e,a),i=utils_1.default.color(a,l),u=r.selectAll(":scope > path.line").data(n),c=e.meta.yScale.range();let o=c[0],s=c[1];const _=o-s;function d(t){return clamp_1.default(e.meta.yScale(t[1]),s,o)}o+=1e6*_,s-=1e6*_,a.skipBoundsCheck&&(o=1/0,s=-1/0);const p=d3_shape_1.line().curve(d3_shape_1.curveLinear).x(function(t){return e.meta.xScale(t[0])}).y(d),f=d3_shape_1.area().x(function(t){return e.meta.yScale(t[0])}).y0(e.meta.yScale(0)).y1(d),m=u.enter().append("path").attr("class","line line-"+l).attr("stroke-width",1).attr("stroke-linecap","round");u.merge(m).each(function(){const t=d3_selection_1.select(this);let r;a.closed?(t.attr("fill",i),t.attr("fill-opacity",.3),r=f):(t.attr("fill","none"),r=p),t.attr("stroke",i).attr("marker-end",function(){return"vector"===a.fnType?"url(#"+e.markerId+")":null}).attr("d",r)}),u.exit().remove()})}}exports.default=polyline;