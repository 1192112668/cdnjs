function cleanLabel(e){return e.replace(/\s*\([0-9a-f]+(:[0-9a-f]+)?\)\s*$/,"")||e}class Camera{constructor(e,t){this.id=e,this.name=t,this.stream=null}start(e){var t={audio:!1,video:{mandatory:{sourceId:this.id,minWidth:600,maxWidth:800,minAspectRatio:1.6},optional:[]}};navigator.webkitGetUserMedia(t,t=>{this.stream=t;var a=window.URL.createObjectURL(t);e(null,a)},t=>{e(t,null)})}stop(){if(this.stream){for(let e of this.stream.getVideoTracks())e.stop();this.stream=null}}static getCameras(e){navigator.mediaDevices.enumerateDevices().then(function(t){var a=t.filter(e=>"videoinput"===e.kind).map(e=>new Camera(e.deviceId,cleanLabel(e.label)));e(null,a)}).catch(function(t){e(t,null)})}}module.exports=Camera;