!function(t){"function"==typeof define&&define.amd?define(["jquery","./core"],t):t(jQuery,Formstone)}(function(r,t){"use strict";function i(t){t.data.$container.addClass(m.focus)}function s(t){l(t.data,0),t.data.$container.removeClass(m.focus)}function o(t){var e=t.data;38!==t.keyCode&&40!==t.keyCode||(t.preventDefault(),l(e,38===t.keyCode?e.step:-e.step))}function d(t){f.killEvent(t),n(t);var e,a=t.data;!a.disabled&&t.which<=1&&(e=r(t.target).hasClass(m.up)?a.step:-a.step,a.timer=f.startTimer(a.timer,300,function(){a.timer=f.startTimer(a.timer,100,function(){l(a,e)},!0)}),l(a,e),b.on([p.touchEnd,p.mouseUp].join(" "),a,n))}function n(t){f.killEvent(t);var e=t.data;f.clearTimer(e.timer,!0),b.off(p.namespace)}function l(t,e){var a,n,i,s=parseFloat(t.$el.val()),o=e;"undefined"===r.type(s)||isNaN(s)?o=!isNaN(s)&&!1!==t.min?t.min:"":!1!==t.min&&s<t.min?o=t.min:o+=s,""!==o&&(!1!==t.min&&o<t.min&&(o=t.min),!1!==t.max&&o>t.max&&(o=t.max)),o===s&&0!=e||(""!==o&&(a=o,n=t.digits,i=Math.pow(10,n),o=Math.round(a*i)/i),t.$el.val(o).trigger(p.raw.change,[!0]))}function u(t){var e=String(t);return-1<e.indexOf(".")?e.length-e.indexOf(".")-1:0}var e=t.Plugin("number",{widget:!0,defaults:{customClass:"",labels:{up:"Up",down:"Down"},theme:"fs-light"},classes:["arrow","up","down","disabled","focus"],methods:{_construct:function(t){var e=parseFloat(this.attr("min")),a=parseFloat(this.attr("max"));t.min=!(!e&&0!==e)&&e,t.max=!(!a&&0!==a)&&a,t.step=parseFloat(this.attr("step"))||1,t.timer=null,t.digits=u(t.step),t.disabled=this.is(":disabled")||this.is("[readonly]");var n="";n+='<button type="button" class="'+[m.arrow,m.up].join(" ")+'" aria-hidden="true" tabindex="-1">'+t.labels.up+"</button>",n+='<button type="button" class="'+[m.arrow,m.down].join(" ")+'" aria-hidden="true" tabindex="-1">'+t.labels.down+"</button>",this.wrap('<div class="'+[m.base,t.theme,t.customClass,t.disabled?m.disabled:""].join(" ")+'"></div>').after(n),t.$container=this.parent(c.base),t.$arrows=t.$container.find(c.arrow),this.on(p.focus,t,i).on(p.blur,t,s).on(p.keyPress,t,o),t.$container.on([p.touchStart,p.mouseDown].join(" "),c.arrow,t,d),l(t,0)},_destruct:function(t){t.$arrows.remove(),this.unwrap().off(p.namespace)},enable:function(t){t.disabled&&(this.prop("disabled",!1),t.$container.removeClass(m.disabled),t.disabled=!1)},disable:function(t){t.disabled||(this.prop("disabled",!0),t.$container.addClass(m.disabled),t.disabled=!0)},update:function(t){var e=parseFloat(t.$el.attr("min")),a=parseFloat(t.$el.attr("max"));t.min=!(!e&&0!==e)&&e,t.max=!(!a&&0!==a)&&a,t.step=parseFloat(t.$el.attr("step"))||1,t.timer=null,t.digits=u(t.step),t.disabled=t.$el.is(":disabled")||t.$el.is("[readonly]"),l(t,0)}}}),c=e.classes,m=c.raw,p=e.events,f=e.functions,b=null;t.Ready(function(){b=t.$body})});