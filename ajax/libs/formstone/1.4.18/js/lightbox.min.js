!function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./touch","./transition","./viewer"],t):t(jQuery,Formstone)}(function(f,w){"use strict";function e(t){if(!D){var i=t.data;!0===i.overlay&&(i.mobile=!0),(D=f.extend({},{visible:!1,gallery:{active:!1},isMobile:w.isMobile||i.mobile,isTouch:w.support.touch,isAnimating:!0,isZooming:!1,oldContentHeight:0,oldContentWidth:0,metaHeight:0,thumbnailHeight:0,captionOpen:!1,thumbnailsOpen:!1,tapTimer:null},i)).isViewer=D.isMobile&&i.viewer&&void 0!==f.fn.fsViewer;var e=i.$el,o=i.$object,n=e&&e[0].href&&e[0].href||"",a=e&&e[0].hash&&e[0].hash||"",l=(n.toLowerCase().split(".").pop().split(/\#|\?/),e?e.data(q+"-type"):""),r="image"===l||n.match(i.fileTypes)||"data:image"===n.substr(0,10),g=O(n),s="url"===l||!r&&!g&&"http"===n.substr(0,4)&&!a,d="element"===l||!r&&!g&&!s&&"#"===a.substr(0,1),h=void 0!==o;if(d&&(n=a),!(r||g||s||d||h))return void(D=null);B.killEvent(t),D.margin*=2,D.type=r?"image":g?"video":"element";var c=e.data(q+"-gallery");c&&(D.gallery.active=!0,D.gallery.id=c,D.gallery.$items=f("a[data-lightbox-gallery= "+D.gallery.id+"], a[rel= "+D.gallery.id+"]"),D.gallery.index=D.gallery.$items.index(D.$el),D.gallery.total=D.gallery.$items.length-1),D.thumbnails&&(r||g)&&D.gallery.active||(D.thumbnails=!1);var m="";D.isMobile||(m+='<div class="'+[R.overlay,D.theme,D.customClass].join(" ")+'"></div>');var p,u,b=[R.base,R.loading,R.animating,D.theme,D.customClass];if(D.fixed&&b.push(R.fixed),D.isMobile&&b.push(R.mobile),D.isTouch&&b.push(R.touch),s&&b.push(R.iframed),(d||h)&&b.push(R.inline),D.thumbnails&&b.push(R.thumbnailed),D.labels.lightbox=D.labels.lightbox.replace("{guid}",i.numGuid),m+='<div class="'+b.join(" ")+'" role="dialog" aria-label="'+D.labels.lightbox+'" tabindex="-1">',m+='<button type="button" class="'+R.close+'">'+D.labels.close+"</button>",m+='<span class="'+R.loading_icon+'"></span>',m+='<div class="'+R.container+'">',D.gallery.active&&D.thumbnails){m+='<div class="'+[R.thumbnails]+'">',m+='<div class="'+[R.thumbnail_container]+'">';for(var v=0,H=D.gallery.$items.length;v<H;v++)u=(u=(p=D.gallery.$items.eq(v)).data("lightbox-thumbnail"))||p.find("img").attr("src"),m+='<button class="'+[R.thumbnail_item]+'">',m+='<img src="'+u+'" alt="">',m+="</button>";m+="</div></div>"}m+='<div class="'+R.content+'"></div>',r||g?(m+='<div class="'+R.tools+'">',m+='<div class="'+R.controls+'">',D.gallery.active&&(m+='<button type="button" class="'+[R.control,R.control_previous].join(" ")+'">'+D.labels.previous+"</button>",m+='<button type="button" class="'+[R.control,R.control_next].join(" ")+'">'+D.labels.next+"</button>"),D.isMobile&&D.isTouch&&(m+='<button type="button" class="'+[R.toggle,R.caption_toggle].join(" ")+'">'+D.labels.captionClosed+"</button>",D.gallery.active&&D.thumbnails&&(m+='<button type="button" class="'+[R.toggle,R.thumbnail_toggle].join(" ")+'">'+D.labels.thumbnailsClosed+"</button>")),m+="</div>",m+='<div class="'+R.meta+'">',m+='<div class="'+R.meta_content+'">',D.gallery.active&&(m+='<p class="'+R.position+'"',D.gallery.total<1&&(m+=' style="display: none;"'),m+=">",m+='<span class="'+R.position_current+'">'+(D.gallery.index+1)+"</span> ",m+=D.labels.count,m+=' <span class="'+R.position_total+'">'+(D.gallery.total+1)+"</span>",m+="</p>"),m+='<div class="'+R.caption+'">',m+=D.formatter.call(e,i),m+="</div></div></div>",m+="</div>"):D.gallery.active&&(m+='<div class="'+R.tools+'">',m+='<div class="'+R.controls+'">',m+='<button type="button" class="'+[R.control,R.control_previous].join(" ")+'">'+D.labels.previous+"</button>",m+='<button type="button" class="'+[R.control,R.control_next].join(" ")+'">'+D.labels.next+"</button>",m+="</div>",m+="</div>"),m+="</div></div>",K.append(m),D.$overlay=f(E.overlay),D.$lightbox=f(E.base),D.$close=f(E.close),D.$container=f(E.container),D.$content=f(E.content),D.$tools=f(E.tools),D.$meta=f(E.meta),D.$metaContent=f(E.meta_content),D.$position=f(E.position),D.$caption=f(E.caption),D.$controlBox=f(E.controls),D.$controls=f(E.control),D.$thumbnails=f(E.thumbnails),D.$thumbnailContainer=f(E.thumbnail_container),D.$thumbnailItems=f(E.thumbnail_item),D.isMobile?(D.paddingVertical=D.$close.outerHeight(),D.paddingHorizontal=0,D.mobilePaddingVertical=parseInt(D.$content.css("paddingTop"),10)+parseInt(D.$content.css("paddingBottom"),10),D.mobilePaddingHorizontal=parseInt(D.$content.css("paddingLeft"),10)+parseInt(D.$content.css("paddingRight"),10)):(D.paddingVertical=parseInt(D.$lightbox.css("paddingTop"),10)+parseInt(D.$lightbox.css("paddingBottom"),10),D.paddingHorizontal=parseInt(D.$lightbox.css("paddingLeft"),10)+parseInt(D.$lightbox.css("paddingRight"),10),D.mobilePaddingVertical=0,D.mobilePaddingHorizontal=0),D.contentHeight=D.$lightbox.outerHeight()-D.paddingVertical,D.contentWidth=D.$lightbox.outerWidth()-D.paddingHorizontal,D.controlHeight=D.$controls.outerHeight(),$=y(),D.$lightbox.css({top:D.fixed?0:$.top}),D.gallery.active&&(D.$lightbox.addClass(R.has_controls),M()),F.on(A.keyDown,j),K.on(A.click,[E.overlay,E.close].join(", "),W).on([A.focus,A.focusIn].join(" "),P),D.gallery.active&&D.$lightbox.on(A.click,E.control,V),D.thumbnails&&D.$lightbox.on(A.click,E.thumbnail_item,T),D.isMobile&&D.isTouch&&D.$lightbox.on(A.click,E.caption_toggle,x).on(A.click,E.thumbnail_toggle,C),D.$lightbox.fsTransition({property:"opacity"},function(){r?_(n):g?I(n):s?z(n):d?k(n):h&&L(D.$object)}).addClass(R.open),D.$overlay.addClass(R.open)}var $}function t(t){"object"!=typeof t&&(D.targetHeight=t,D.targetWidth=arguments[1]),"element"===D.type?h(D.$content.find("> :first-child")):"image"===D.type?i():"video"===D.type&&r(),function(){{var t;D.visible&&!D.isMobile&&(t=y(),D.$controls.css({marginTop:(D.contentHeight-D.controlHeight-D.metaHeight+D.thumbnailHeight)/2}),D.$lightbox.css({height:D.contentHeight+D.paddingVertical,width:D.contentWidth+D.paddingHorizontal,top:D.fixed?0:t.top}),D.oldContentHeight=D.contentHeight,D.oldContentWidth=D.contentWidth)}}()}function W(t){B.killEvent(t),D&&(D.$lightbox.fsTransition("destroy"),D.$content.fsTransition("destroy"),D.$lightbox.addClass(R.animating).fsTransition({property:"opacity"},function(t){void 0!==D.$inlineTarget&&D.$inlineTarget.length&&d(),D.isViewer&&D.$imageContainer&&D.$imageContainer.length&&D.$imageContainer.fsViewer("destroy"),D.$lightbox.off(A.namespace),D.$container.off(A.namespace),F.off(A.keyDown),K.off(A.namespace),K.off(A.namespace),D.$overlay.remove(),D.$lightbox.remove(),void 0!==D.$el&&D.$el&&D.$el.length&&D.$el.focus(),D=null,F.trigger(A.close)}),D.$lightbox.removeClass(R.open),D.$overlay.removeClass(R.open),D.isMobile&&(b.removeClass(R.lock),B.unlockViewport(q)))}function n(){var t=y();D.isMobile||D.duration;D.isMobile?B.lockViewport(q):D.$controls.css({marginTop:(D.contentHeight-D.controlHeight-D.metaHeight+D.thumbnailHeight)/2}),""===D.$caption.html()?(D.$caption.hide(),D.$lightbox.removeClass(R.has_caption),D.gallery.active||D.$tools.hide()):(D.$caption.show(),D.$lightbox.addClass(R.has_caption)),D.$lightbox.fsTransition({property:D.contentHeight!==D.oldContentHeight?"height":"width"},function(){D.$content.fsTransition({property:"opacity"},function(){D.$lightbox.removeClass(R.animating),D.isAnimating=!1}),D.$lightbox.removeClass(R.loading).addClass(R.ready),D.visible=!0,F.trigger(A.open,[{instance:D}]),D.gallery.active&&("element"==D.type||(function(){var t="";0<D.gallery.index&&(O(t=D.gallery.$items.eq(D.gallery.index-1).attr("href"))||f('<img src="'+t+'">'));D.gallery.index<D.gallery.total&&(O(t=D.gallery.$items.eq(D.gallery.index+1).attr("href"))||f('<img src="'+t+'">'))}(),g(),function(){{var t,i;D.thumbnails&&(t=D.$thumbnailItems.eq(D.gallery.index),i=t.position().left+t.outerWidth(!1)/2-D.$thumbnailContainer.outerWidth(!0)/2,D.$thumbnailContainer.stop().animate({scrollLeft:i},200,"linear"))}}())),D.$lightbox.focus()}),D.isMobile||D.$lightbox.css({height:D.contentHeight+D.paddingVertical,width:D.contentWidth+D.paddingHorizontal,top:D.fixed?0:t.top});var i=D.oldContentHeight!==D.contentHeight||D.oldContentWidth!==D.contentWidth;!D.isMobile&&i||D.$lightbox.fsTransition("resolve"),D.oldContentHeight=D.contentHeight,D.oldContentWidth=D.contentWidth,D.isMobile&&b.addClass(R.lock)}function y(){if(D.isMobile)return{left:0,top:0};var t={left:(w.windowWidth-D.contentWidth-D.paddingHorizontal)/2,top:D.top<=0?(w.windowHeight-D.contentHeight-D.paddingVertical)/2:D.top};return!0!==D.fixed&&(t.top+=F.scrollTop()),t}function x(t){var i;B.killEvent(t),D.captionOpen?o():(a(),i=parseInt(D.$metaContent.outerHeight(!0)),i+=parseInt(D.$meta.css("padding-top")),i+=parseInt(D.$meta.css("padding-bottom")),D.$meta.css({height:i}),D.$lightbox.addClass(R.caption_open).find(E.caption_toggle).text(D.labels.captionOpen),D.captionOpen=!0)}function o(){D.$lightbox.removeClass(R.caption_open).find(E.caption_toggle).text(D.labels.captionClosed),D.captionOpen=!1}function C(t){B.killEvent(t),D.thumbnailsOpen?a():(o(),D.$lightbox.addClass(R.thumbnails_open).find(E.thumbnail_toggle).text(D.labels.thumbnailsOpen),D.thumbnailsOpen=!0)}function a(){D.$lightbox.removeClass(R.thumbnails_open).find(E.thumbnail_toggle).text(D.labels.thumbnailsClosed),D.thumbnailsOpen=!1}function _(t){D.isViewer?(D.$imageContainer=f('<div class="'+R.image_container+'"><img></div>'),D.$image=D.$imageContainer.find("img"),D.$image.attr("src",t).addClass(R.image),D.$content.prepend(D.$imageContainer),i(),D.$imageContainer.one("loaded.viewer",function(){n()}).fsViewer({theme:D.theme})):(D.$imageContainer=f('<div class="'+R.image_container+'"><img></div>'),D.$image=D.$imageContainer.find("img"),D.$image.one(A.load,function(){var t=function(t){var i=t[0],e=new Image;{if(void 0!==i.naturalHeight)return{naturalHeight:i.naturalHeight,naturalWidth:i.naturalWidth};if("img"===i.tagName.toLowerCase())return e.src=i.src,{naturalHeight:e.height,naturalWidth:e.width}}return!1}(D.$image);D.naturalHeight=t.naturalHeight,D.naturalWidth=t.naturalWidth,D.retina&&(D.naturalHeight/=2,D.naturalWidth/=2),D.$content.prepend(D.$imageContainer),i(),n()}).on(A.error,c).attr("src",t).addClass(R.image),!D.$image[0].complete&&4!==D.$image[0].readyState||D.$image.trigger(A.load))}function i(){if(D.$image){var t=0;for(D.windowHeight=D.viewportHeight=w.windowHeight-D.mobilePaddingVertical-D.paddingVertical,D.windowWidth=D.viewportWidth=w.windowWidth-D.mobilePaddingHorizontal-D.paddingHorizontal,D.contentHeight=1/0,D.contentWidth=1/0,D.imageMarginTop=0,D.imageMarginLeft=0;D.contentHeight>D.viewportHeight&&t<2;)D.imageHeight=0===t?D.naturalHeight:D.$image.outerHeight(),D.imageWidth=0===t?D.naturalWidth:D.$image.outerWidth(),D.metaHeight=0===t?0:D.metaHeight,D.spacerHeight=0===t?0:D.spacerHeight,D.thumbnailHeight=0===t?0:D.thumbnailHeight,0===t&&(D.ratioHorizontal=D.imageHeight/D.imageWidth,D.ratioVertical=D.imageWidth/D.imageHeight,D.isWide=D.imageWidth>D.imageHeight),D.imageHeight<D.minHeight&&(D.minHeight=D.imageHeight),D.imageWidth<D.minWidth&&(D.minWidth=D.imageWidth),D.isMobile?(D.isTouch?(D.$controlBox.css({width:w.windowWidth}),D.spacerHeight=D.$controls.outerHeight(!0)):(D.$tools.css({width:w.windowWidth}),D.spacerHeight=D.$tools.outerHeight(!0)),D.contentHeight=D.viewportHeight,D.contentWidth=D.viewportWidth,D.isTouch||D.$content.css({height:D.contentHeight-D.spacerHeight}),D.$thumbnails.length&&(D.spacerHeight+=D.$thumbnails.outerHeight(!0)),D.spacerHeight+=10,l(),D.imageMarginTop=(D.contentHeight-D.targetImageHeight-D.spacerHeight)/2,D.imageMarginLeft=(D.contentWidth-D.targetImageWidth)/2):(0===t&&(D.viewportHeight-=D.margin+D.paddingVertical,D.viewportWidth-=D.margin+D.paddingHorizontal),D.viewportHeight-=D.metaHeight,D.thumbnails&&(D.viewportHeight-=D.thumbnailHeight),l(),D.contentHeight=D.targetImageHeight,D.contentWidth=D.targetImageWidth),D.isMobile||D.isTouch||D.$meta.css({width:D.contentWidth}),D.$image.css({height:D.targetImageHeight,width:D.targetImageWidth,marginTop:D.imageMarginTop,marginLeft:D.imageMarginLeft}),D.isMobile||(D.metaHeight=D.$meta.outerHeight(!0),D.contentHeight+=D.metaHeight),D.thumbnails&&(D.thumbnailHeight=D.$thumbnails.outerHeight(!0),D.contentHeight+=D.thumbnailHeight),t++}}function l(){var t=D.isMobile?D.contentHeight-D.spacerHeight:D.viewportHeight,i=D.isMobile?D.contentWidth:D.viewportWidth;D.isWide?(D.targetImageWidth=i,D.targetImageHeight=D.targetImageWidth*D.ratioHorizontal,D.targetImageHeight>t&&(D.targetImageHeight=t,D.targetImageWidth=D.targetImageHeight*D.ratioVertical)):(D.targetImageHeight=t,D.targetImageWidth=D.targetImageHeight*D.ratioVertical,D.targetImageWidth>i&&(D.targetImageWidth=i,D.targetImageHeight=D.targetImageWidth*D.ratioHorizontal)),(D.targetImageWidth>D.imageWidth||D.targetImageHeight>D.imageHeight)&&(D.targetImageHeight=D.imageHeight,D.targetImageWidth=D.imageWidth),(D.targetImageWidth<D.minWidth||D.targetImageHeight<D.minHeight)&&(D.targetImageWidth<D.minWidth?(D.targetImageWidth=D.minWidth,D.targetImageHeight=D.targetImageWidth*D.ratioHorizontal):(D.targetImageHeight=D.minHeight,D.targetImageWidth=D.targetImageHeight*D.ratioVertical))}function I(t){var i=O(t),e=t.split("?"),o="&origin="+encodeURIComponent(window.location.protocol+"//"+window.location.hostname);i?(2<=e.length&&(i+="?"+e.slice(1)[0].trim()),D.$videoWrapper=f('<div class="'+R.video_wrapper+'"></div>'),D.$video=f('<iframe class="'+R.video+'" frameborder="0" seamless="seamless" allowfullscreen></iframe>'),D.$video.attr("src",i+"&enablejsapi=1"+o).addClass(R.video).prependTo(D.$videoWrapper),D.$content.prepend(D.$videoWrapper),r(),n()):c()}function r(){D.windowHeight=D.viewportHeight=w.windowHeight-D.mobilePaddingVertical-D.paddingVertical,D.windowWidth=D.viewportWidth=w.windowWidth-D.mobilePaddingHorizontal-D.paddingHorizontal,D.videoMarginTop=0,D.videoMarginLeft=0,D.isMobile?(D.isTouch?(D.$controlBox.css({width:w.windowWidth}),D.spacerHeight=D.$controls.outerHeight(!0)+10):(D.$tools.css({width:w.windowWidth}),D.spacerHeight=D.$tools.outerHeight(!0),D.spacerHeight+=D.$thumbnails.outerHeight(!0)+10),D.viewportHeight-=D.spacerHeight,D.targetVideoWidth=D.viewportWidth,D.targetVideoHeight=D.targetVideoWidth*D.videoRatio,D.targetVideoHeight>D.viewportHeight&&(D.targetVideoHeight=D.viewportHeight,D.targetVideoWidth=D.targetVideoHeight/D.videoRatio),D.videoMarginTop=(D.viewportHeight-D.targetVideoHeight)/2,D.videoMarginLeft=(D.viewportWidth-D.targetVideoWidth)/2):(D.viewportHeight=D.windowHeight-D.margin,D.viewportWidth=D.windowWidth-D.margin,D.targetVideoWidth=D.videoWidth>D.viewportWidth?D.viewportWidth:D.videoWidth,D.targetVideoWidth<D.minWidth&&(D.targetVideoWidth=D.minWidth),D.targetVideoHeight=D.targetVideoWidth*D.videoRatio,D.contentHeight=D.targetVideoHeight,D.contentWidth=D.targetVideoWidth),D.isMobile||D.isTouch||D.$meta.css({width:D.contentWidth}),D.$videoWrapper.css({height:D.targetVideoHeight,width:D.targetVideoWidth,marginTop:D.videoMarginTop,marginLeft:D.videoMarginLeft}),D.isMobile||(D.metaHeight=D.$meta.outerHeight(!0),D.contentHeight+=D.metaHeight),D.thumbnails&&(D.thumbnailHeight=D.$thumbnails.outerHeight(!0),D.contentHeight+=D.thumbnailHeight)}function V(t){B.killEvent(t);var i=f(t.currentTarget);D.isAnimating||i.hasClass(R.control_disabled)||(D.isAnimating=!0,o(),D.gallery.index+=i.hasClass(R.control_next)?1:-1,D.gallery.index>D.gallery.total&&(D.gallery.index=D.infinite?0:D.gallery.total),D.gallery.index<0&&(D.gallery.index=D.infinite?D.gallery.total:0),g(),D.$lightbox.addClass(R.animating),D.$content.fsTransition({property:"opacity"},s),D.$lightbox.addClass(R.loading))}function T(t){B.killEvent(t);var i=f(t.currentTarget);D.isAnimating||i.hasClass(R.active)||(D.isAnimating=!0,o(),D.gallery.index=D.$thumbnailItems.index(i),g(),D.$lightbox.addClass(R.animating),D.$content.fsTransition({property:"opacity"},s),D.$lightbox.addClass(R.loading))}function g(){var t;D.thumbnails&&(t=D.$thumbnailItems.eq(D.gallery.index),D.$thumbnailItems.removeClass(R.active),t.addClass(R.active))}function s(){var t;"element"==D.type?void 0!==D.$inlineTarget&&D.$inlineTarget.length&&d():(void 0!==D.$imageContainer&&(D.isViewer&&D.$imageContainer.fsViewer("destroy"),D.$imageContainer.remove()),void 0!==D.$videoWrapper&&D.$videoWrapper.remove()),D.$el=D.gallery.$items.eq(D.gallery.index),"element"==D.type?("http"===(t=D.$el[0].href).substr(0,4)?z:k)(t):(D.$caption.html(D.formatter.call(D.$el,D)),D.$position.find(E.position_current).html(D.gallery.index+1),O(t)?(D.type="video",I(t)):(D.type="image",_(t))),M()}function M(){D.$controls.removeClass(R.control_disabled),D.infinite||(0===D.gallery.index&&D.$controls.filter(E.control_previous).addClass(R.control_disabled),D.gallery.index===D.gallery.total&&D.$controls.filter(E.control_next).addClass(R.control_disabled))}function j(t){!D.gallery.active||37!==t.keyCode&&39!==t.keyCode?27===t.keyCode&&D.$close.trigger(A.click):(B.killEvent(t),D.$controls.filter(37===t.keyCode?E.control_previous:E.control_next).trigger(A.click))}function k(t){D.$inlineTarget=f(t),D.$inlineContents=D.$inlineTarget.children().detach(),L(D.$inlineContents)}function d(){D.$inlineTarget.append(D.$inlineContents.detach())}function z(t){t+=-1<t.indexOf("?")?"&"+D.requestKey+"=true":"?"+D.requestKey+"=true",L(f('<iframe class="'+R.iframe+'" src="'+t+'"></iframe>'))}function L(t){D.$content.append(t),h(t),n()}function h(t){D.windowHeight=w.windowHeight-D.mobilePaddingVertical-D.paddingVertical,D.windowWidth=w.windowWidth-D.mobilePaddingHorizontal-D.paddingHorizontal,D.objectHeight=t.outerHeight(!0),D.objectWidth=t.outerWidth(!0),D.targetHeight=D.targetHeight||(D.$el?D.$el.data(q+"-height"):null),D.targetWidth=D.targetWidth||(D.$el?D.$el.data(q+"-width"):null),D.maxHeight=D.windowHeight<0?D.minHeight:D.windowHeight,D.isIframe=t.is("iframe"),D.objectMarginTop=0,D.objectMarginLeft=0,D.isMobile||(D.windowHeight-=D.margin,D.windowWidth-=D.margin),D.contentHeight=D.targetHeight?D.targetHeight:D.isIframe||D.isMobile?D.windowHeight:D.objectHeight,D.contentWidth=D.targetWidth?D.targetWidth:D.isIframe||D.isMobile?D.windowWidth:D.objectWidth,(D.isIframe||D.isObject)&&D.isMobile?(D.contentHeight=D.windowHeight,D.contentWidth=D.windowWidth):D.isObject&&(D.contentHeight=D.contentHeight>D.windowHeight?D.windowHeight:D.contentHeight,D.contentWidth=D.contentWidth>D.windowWidth?D.windowWidth:D.contentWidth),D.isMobile||(D.contentHeight>D.maxHeight&&(D.contentHeight=D.maxHeight),D.contentWidth>D.maxWidth&&(D.contentWidth=D.maxWidth))}function c(){var t=f('<div class="'+R.error+'"><p>Error Loading Resource</p></div>');D.type="element",D.$tools.remove(),D.$image.off(A.namespace),L(t),F.trigger(A.error)}function O(t){var i,e=D.videoFormatter;for(var o in e)if(e.hasOwnProperty(o)&&null!==(i=t.match(e[o].pattern)))return e[o].format.call(D,i);return!1}function P(t){var i=t.target;f.contains(D.$lightbox[0],i)||i===D.$lightbox[0]||i===D.$overlay[0]||(B.killEvent(t),D.$lightbox.focus())}var m=w.Plugin("lightbox",{widget:!0,defaults:{customClass:"",fileTypes:/\.(jpg|sjpg|jpeg|png|gif)/i,fixed:!1,formatter:function(){var t=this.attr("title"),i=!(void 0===t||!t)&&t.replace(/^\s+|\s+$/g,"");return i?'<p class="caption">'+i+"</p>":""},infinite:!1,labels:{close:"Close",count:"of",next:"Next",previous:"Previous",captionClosed:"View Caption",captionOpen:"Close Caption",thumbnailsClosed:"View Thumbnails",thumbnailsOpen:"Close Thumbnails",lightbox:"Lightbox {guid}"},margin:50,maxHeight:1e4,maxWidth:1e4,minHeight:100,minWidth:100,mobile:!1,overlay:!1,retina:!1,requestKey:"fs-lightbox",theme:"fs-light",thumbnails:!1,top:0,videoFormatter:{youtube:{pattern:/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/,format:function(t){return"//www.youtube.com/embed/"+t[1]}},vimeo:{pattern:/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,format:function(t){return"//player.vimeo.com/video/"+t[3]}}},videoRatio:.5625,videoWidth:800,viewer:!0},classes:["loading","animating","fixed","mobile","touch","inline","iframed","open","ready","overlay","close","loading_icon","container","content","image","image_container","video","video_wrapper","tools","meta","meta_content","controls","control","control_previous","control_next","control_disabled","position","position_current","position_total","toggle","caption_toggle","caption","caption_open","thumbnailed","thumbnails_open","thumbnail_toggle","thumbnails","thumbnail_container","thumbnail_item","active","has_controls","has_caption","iframe","error","active","lock"],events:{open:"open",close:"close"},methods:{_construct:function(t){this.on(A.click,t,e);var i=this.data(q+"-gallery");!H&&v&&i===v&&(H=!0,this.trigger(A.click))},_destruct:function(t){W(),this.off(A.namespace)},_resize:function(){D&&t()},resize:t},utilities:{_initialize:function(t,i){t instanceof f&&e.apply(u,[{data:f.extend(!0,{},{$object:t},p,i||{})}])},close:W}}),q=m.namespace,p=m.defaults,E=m.classes,R=E.raw,A=m.events,B=m.functions,u=w.window,F=w.$window,K=null,b=null,v=!1,H=!1,D=null;w.Ready(function(){K=w.$body,b=f("html, body"),v=w.window.location.hash.replace("#","")})});