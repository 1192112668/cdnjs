"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Input;var _react=_interopRequireDefault(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_mergeClassNames=_interopRequireDefault(require("merge-class-names")),_updateInputWidth=_interopRequireWildcard(require("update-input-width"));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e){Object.prototype.hasOwnProperty.call(e,u)&&((n=o?Object.getOwnPropertyDescriptor(e,u):null)&&(n.get||n.set)?Object.defineProperty(r,u,n):r[u]=e[u])}return r.default=e,t&&t.set(e,r),r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function onFocus(e){var t=e.target;requestAnimationFrame(function(){return t.select()})}function updateInputWidthOnFontLoad(e){var t;!document.fonts||(t=(0,_updateInputWidth.getFontShorthand)(e))&&(document.fonts.check(t)||document.fonts.addEventListener("loadingdone",function(){(0,_updateInputWidth.default)(e)}))}function getSelectionString(){return"undefined"==typeof window?null:window.getSelection().toString()}function makeOnKeyPress(u){return function(e){var t=e.key,n=e.target.value,r=!isNaN(parseInt(t,10)),o=getSelectionString();r&&(o||n.length<u)||e.preventDefault()}}function Input(e){var t=e.ariaLabel,n=e.autoFocus,r=e.className,o=e.disabled,u=e.itemRef,a=e.max,p=e.min,i=e.name,l=e.nameForClass,d=e.onChange,s=e.onKeyDown,c=e.onKeyUp,f=e.placeholder,y=void 0===f?"--":f,_=e.required,m=e.showLeadingZeros,g=e.step,b=e.value,h=m&&null!==b&&b<10,q=a.toString().length;return[h&&_react.default.createElement("span",{key:"leadingZero",className:"".concat(r,"__leadingZero")},"0"),_react.default.createElement("input",{key:"input","aria-label":t,autoComplete:"off",autoFocus:n,className:(0,_mergeClassNames.default)("".concat(r,"__input"),"".concat(r,"__").concat(l||i),h&&"".concat(r,"__input--hasLeadingZero")),"data-input":"true",disabled:o,max:a,min:p,name:i,onChange:d,onFocus:onFocus,onKeyDown:s,onKeyPress:makeOnKeyPress(q),onKeyUp:function(e){(0,_updateInputWidth.default)(e.target),c&&c(e)},placeholder:y,ref:function(e){e&&((0,_updateInputWidth.default)(e),updateInputWidthOnFontLoad(e)),u&&u(e,i)},required:_,step:g,type:"number",value:null!==b?b:""})]}Input.propTypes={ariaLabel:_propTypes.default.string,className:_propTypes.default.string.isRequired,disabled:_propTypes.default.bool,itemRef:_propTypes.default.func,max:_propTypes.default.number,min:_propTypes.default.number,onChange:_propTypes.default.func,onKeyDown:_propTypes.default.func,onKeyUp:_propTypes.default.func,required:_propTypes.default.bool,showLeadingZeros:_propTypes.default.bool,step:_propTypes.default.number,value:_propTypes.default.number};