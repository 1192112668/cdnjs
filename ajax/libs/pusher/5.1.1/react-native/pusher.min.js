module.exports=function(n){var o={};function i(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}return i.m=n,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){t.exports=require("@react-native-community/netinfo")},function(t,e,n){t.exports=n(2).default},function(t,e,n){"use strict";n.r(e);for(var o=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={},s=0,c=i.length;s<c;s++)r[i.charAt(s)]=s;function a(t){var e=t.charCodeAt(0);return e<128?t:e<2048?o(192|e>>>6)+o(128|63&e):o(224|e>>>12&15)+o(128|e>>>6&63)+o(128|63&e)}function u(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(1<t.length?t.charCodeAt(1):0)<<8|(2<t.length?t.charCodeAt(2):0);return[i.charAt(n>>>18),i.charAt(n>>>12&63),2<=e?"=":i.charAt(n>>>6&63),1<=e?"=":i.charAt(63&n)].join("")}var h,p=function(t){return t.replace(/[^\x00-\x7F]/g,a)},l=global.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,u)},f=(y.prototype.isRunning=function(){return null!==this.timer},y.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},y),d=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function y(t,e,n,o){var i=this;this.clear=e,this.timer=t(function(){i.timer&&(i.timer=o(i.timer))},n)}function b(t){global.clearTimeout(t)}function g(t){global.clearInterval(t)}var v,m,S=(d(O,m=f),O),_=(d(C,v=f),C),k=function(){return Date.now?Date.now():(new Date).valueOf()},w=function(t){return new S(0,t)},T=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,o.concat(arguments))}};function C(t,e){return v.call(this,setInterval,g,t,function(t){return e(),t})||this}function O(t,e){return m.call(this,setTimeout,b,t,function(t){return e(),null})||this}function P(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=0;o<e.length;o++){var i=e[o];for(var r in i)i[r]&&i[r].constructor&&i[r].constructor===Object?t[r]=P(t[r]||{},i[r]):t[r]=i[r]}return t}function E(t,e){var n=Array.prototype.indexOf;if(null===t)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var o=0,i=t.length;o<i;o++)if(t[o]===e)return o;return-1}function L(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function A(t){var n=[];return L(t,function(t,e){n.push(e)}),n}function x(t,e,n){for(var o=0;o<t.length;o++)e.call(n||global,t[o],o,t)}function R(t,e){for(var n=[],o=0;o<t.length;o++)n.push(e(t[o],o,t,n));return n}function j(t,e){e=e||function(t){return!!t};for(var n=[],o=0;o<t.length;o++)e(t[o],o,t,n)&&n.push(t[o]);return n}function I(n,o){var i={};return L(n,function(t,e){(o&&o(t,e,n,i)||Boolean(t))&&(i[e]=t)}),i}function N(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1}function M(t){var n,o,i,e=I(t,function(t){return void 0!==t});return R((o=function(t){return"object"==typeof t&&(t=H(t)),encodeURIComponent((e=t.toString(),l(p(e))));var e},i={},L(e,function(t,e){i[e]=o(t)}),n=[],L(i,function(t,e){n.push([e,t])}),n),T("join","=")).join("&")}function H(e){try{return JSON.stringify(e)}catch(t){return JSON.stringify((s=[],c=[],function t(e,n){var o,i,r;switch(typeof e){case"object":if(!e)return null;for(o=0;o<s.length;o+=1)if(s[o]===e)return{$ref:c[o]};if(s.push(e),c.push(n),"[object Array]"===Object.prototype.toString.apply(e))for(r=[],o=0;o<e.length;o+=1)r[o]=t(e[o],n+"["+o+"]");else for(i in r={},e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t(e[i],n+"["+JSON.stringify(i)+"]"));return r;case"number":case"string":case"boolean":return e}}(e,"$")))}var s,c}var D="5.1.1",U=7,z="ws.pusherapp.com",F=80,q=443,B="",J="sockjs.pusher.com",W=80,X=443,G="/pusher",Q="stats.pusher.com",Y="/pusher/auth",$="ajax",K=12e4,V=3e4,Z=1e4;function tt(t,e,n){return t+(e.useTLS?"s":"")+"://"+(e.useTLS?e.hostTLS:e.hostNonTLS)+n}function et(t,e){return"/app/"+t+"?protocol="+U+"&client=js&version="+D+(e?"&"+e:"")}var nt={getInitial:function(t,e){return tt("ws",e,(e.httpPath||"")+et(t,"flash=false"))}},ot={getInitial:function(t,e){return tt("http",e,(e.httpPath||"/pusher")+et(t))}},it=(rt.prototype.get=function(t){return this._callbacks[st(t)]},rt.prototype.add=function(t,e,n){var o=st(t);this._callbacks[o]=this._callbacks[o]||[],this._callbacks[o].push({fn:e,context:n})},rt.prototype.remove=function(t,e,n){var o;t||e||n?(o=t?[st(t)]:A(this._callbacks),e||n?this.removeCallback(o,e,n):this.removeAllCallbacks(o)):this._callbacks={}},rt.prototype.removeCallback=function(t,e,n){x(t,function(t){this._callbacks[t]=j(this._callbacks[t]||[],function(t){return e&&e!==t.fn||n&&n!==t.context}),0===this._callbacks[t].length&&delete this._callbacks[t]},this)},rt.prototype.removeAllCallbacks=function(t){x(t,function(t){delete this._callbacks[t]},this)},rt);function rt(){this._callbacks={}}function st(t){return"_"+t}function ct(t){var e,n=te.urls[t];return n?(n.fullUrl?e=n.fullUrl:n.path&&(e=te.baseUrl+n.path),e?"See: "+e:""):""}var at,ut,ht,pt,lt,ft,dt,yt,bt,gt,vt,mt,St,_t,kt,wt,Tt,Ct,Ot,Pt,Et,Lt,At=(Le.prototype.bind=function(t,e,n){return this.callbacks.add(t,e,n),this},Le.prototype.bind_global=function(t){return this.global_callbacks.push(t),this},Le.prototype.unbind=function(t,e,n){return this.callbacks.remove(t,e,n),this},Le.prototype.unbind_global=function(e){return this.global_callbacks=e?j(this.global_callbacks||[],function(t){return t!==e}):[],this},Le.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},Le.prototype.emit=function(t,e,n){for(var o=0;o<this.global_callbacks.length;o++)this.global_callbacks[o](t,e);var i=this.callbacks.get(t),r=[];if(n?r.push(e,n):e&&r.push(e),i&&0<i.length)for(o=0;o<i.length;o++)i[o].fn.apply(i[o].context||global,r);else this.failThrough&&this.failThrough(t,e);return this},Le),xt=(Ee.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLog,t)},Ee.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLogWarn,t)},Ee.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLogError,t)},Ee.prototype.globalLogWarn=function(t){global.console&&global.console.warn?global.console.warn(t):this.globalLog(t)},Ee.prototype.globalLogError=function(t){global.console&&global.console.error?global.console.error(t):this.globalLogWarn(t)},Ee.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=function(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"==typeof arguments[e]?t.push(arguments[e]):t.push(H(arguments[e]));return t.join(" : ")}.apply(this,arguments);jn.log?jn.log(o):jn.logToConsole&&t.bind(this)(o)},new Ee),Rt=((Lt=function(t,e){return(Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Lt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(Pe,Et=At),Pe.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},Pe.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},Pe.prototype.connect=function(){var t=this;if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(e){return w(function(){t.onError(e),t.changeState("closed")}),!1}return this.bindListeners(),xt.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0},Pe.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},Pe.prototype.send=function(t){var e=this;return"open"===this.state&&(w(function(){e.socket&&e.socket.send(t)}),!0)},Pe.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},Pe.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},Pe.prototype.onError=function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))},Pe.prototype.onClose=function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},Pe.prototype.onMessage=function(t){this.emit("message",t)},Pe.prototype.onActivity=function(){this.emit("activity")},Pe.prototype.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=function(){e.onActivity()})},Pe.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},Pe.prototype.changeState=function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)},Pe.prototype.buildTimelineMessage=function(t){return P({cid:this.id},t)},Pe),jt=(Oe.prototype.isSupported=function(t){return this.hooks.isSupported(t)},Oe.prototype.createConnection=function(t,e,n,o){return new Rt(this.hooks,t,e,n,o)},Oe),It=new jt({urls:nt,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(_n.getWebSocketAPI())},isSupported:function(){return Boolean(_n.getWebSocketAPI())},getSocket:function(t){return _n.createWebSocket(t)}}),Nt={urls:ot,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Mt=P({getSocket:function(t){return _n.HTTPFactory.createStreamingSocket(t)}},Nt),Ht=P({getSocket:function(t){return _n.HTTPFactory.createPollingSocket(t)}},Nt),Dt={isSupported:function(){return _n.isXHRSupported()}},Ut={ws:It,xhr_streaming:new jt(P({},Mt,Dt)),xhr_polling:new jt(P({},Ht,Dt))},zt=(Ce.prototype.createConnection=function(t,e,n,o){var i=this;o=P({},o,{activityTimeout:this.pingDelay});var r=this.transport.createConnection(t,e,n,o),s=null,c=function(){r.unbind("open",c),r.bind("closed",a),s=k()},a=function(t){var e;r.unbind("closed",a),1002===t.code||1003===t.code?i.manager.reportDeath():t.wasClean||!s||(e=k()-s)<2*i.maxPingDelay&&(i.manager.reportDeath(),i.pingDelay=Math.max(e/2,i.minPingDelay))};return r.bind("open",c),r},Ce.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},Ce),Ft={decodeMessage:function(t){try{var e=JSON.parse(t.data),n=e.data;if("string"==typeof n)try{n=JSON.parse(e.data)}catch(t){}var o={event:e.event,channel:e.channel,data:n};return e.user_id&&(o.user_id=e.user_id),o}catch(e){throw{type:"MessageParseError",error:e,data:t.data}}},encodeMessage:function(t){return JSON.stringify(t)},processHandshake:function(t){var e=Ft.decodeMessage(t);if("pusher:connection_established"===e.event){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:1e3*e.data.activity_timeout}}if("pusher:error"===e.event)return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},getCloseAction:function(t){return t.code<4e3?1002<=t.code&&t.code<=1004?"backoff":null:4e3===t.code?"tls_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},getCloseError:function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},qt=Ft,Bt=((Pt=function(t,e){return(Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Pt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(Te,Ot=At),Te.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},Te.prototype.send=function(t){return this.transport.send(t)},Te.prototype.send_event=function(t,e,n){var o={event:t,data:e};return n&&(o.channel=n),xt.debug("Event sent",o),this.send(qt.encodeMessage(o))},Te.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},Te.prototype.close=function(){this.transport.close()},Te.prototype.bindListeners=function(){var n=this,t={message:function(t){var e;try{e=qt.decodeMessage(t)}catch(e){n.emit("error",{type:"MessageParseError",error:e,data:t.data})}if(void 0!==e){switch(xt.debug("Event recd",e),e.event){case"pusher:error":n.emit("error",{type:"PusherError",data:e.data});break;case"pusher:ping":n.emit("ping");break;case"pusher:pong":n.emit("pong")}n.emit("message",e)}},activity:function(){n.emit("activity")},error:function(t){n.emit("error",{type:"WebSocketError",error:t})},closed:function(t){e(),t&&t.code&&n.handleCloseEvent(t),n.transport=null,n.emit("closed")}},e=function(){L(t,function(t,e){n.transport.unbind(e,t)})};L(t,function(t,e){n.transport.bind(e,t)})},Te.prototype.handleCloseEvent=function(t){var e=qt.getCloseAction(t),n=qt.getCloseError(t);n&&this.emit("error",n),e&&this.emit(e,{action:e,error:n})},Te),Jt=(we.prototype.close=function(){this.unbindListeners(),this.transport.close()},we.prototype.bindListeners=function(){var o=this;this.onMessage=function(t){var e;o.unbindListeners();try{e=qt.processHandshake(t)}catch(t){return o.finish("error",{error:t}),void o.transport.close()}"connected"===e.action?o.finish("connected",{connection:new Bt(e.id,o.transport),activityTimeout:e.activityTimeout}):(o.finish(e.action,{error:e.error}),o.transport.close())},this.onClosed=function(t){o.unbindListeners();var e=qt.getCloseAction(t)||"backoff",n=qt.getCloseError(t);o.finish(e,{error:n})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},we.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},we.prototype.finish=function(t,e){this.callback(P({transport:this.transport,action:t},e))},we),Wt=(ke.prototype.composeQuery=function(t){var e="socket_id="+encodeURIComponent(t)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return e},ke.prototype.authorize=function(t,e){(ke.authorizers=ke.authorizers||_n.getAuthorizers())[this.type].call(this,_n,t,e)},ke),Xt=(_e.prototype.send=function(t,e){this.timeline.isEmpty()||this.timeline.send(_n.TimelineTransport.getAgent(this,t),e)},_e),Gt=(Ct=function(t,e){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ct(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Qt=(Tt=Error,Gt(Se,Tt),Se),Yt=(wt=Error,Gt(function(t){var e=this.constructor,n=wt.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n},wt),kt=Error,Gt(me,kt),me),$t=(_t=Error,Gt(ve,_t),ve),Kt=(St=Error,Gt(ge,St),ge),Vt=(mt=Error,Gt(be,mt),be),Zt=(vt=Error,Gt(ye,vt),ye),te={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"}}},ee=((gt=function(t,e){return(gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}gt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(de,bt=At),de.prototype.authorize=function(t,e){return e(!1,{auth:""})},de.prototype.trigger=function(t,e){if(0!==t.indexOf("client-"))throw new Qt("Event '"+t+"' does not start with 'client-'");var n;return this.subscribed||(n=ct("triggeringClientEvents"),xt.warn("Client event triggered before channel 'subscription_succeeded' event . "+n)),this.pusher.send_event(t,e,this.name)},de.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},de.prototype.handleEvent=function(t){var e=t.event,n=t.data;"pusher_internal:subscription_succeeded"===e?this.handleSubscriptionSucceededEvent(t):0!==e.indexOf("pusher_internal:")&&this.emit(e,n,{})},de.prototype.handleSubscriptionSucceededEvent=function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",t.data)},de.prototype.subscribe=function(){var n=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(t,e){t?(xt.error(e),n.emit("pusher:subscription_error",e)):(e=e,n.pusher.send_event("pusher:subscribe",{auth:e.auth,channel_data:e.channel_data,channel:n.name}))}))},de.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},de.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},de.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},de),ne=((yt=function(t,e){return(yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}yt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(fe,dt=ee),fe.prototype.authorize=function(t,e){return Ae.createAuthorizer(this,this.pusher.config).authorize(t,e)},fe),oe=(le.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},le.prototype.each=function(n){var o=this;L(this.members,function(t,e){n(o.get(e))})},le.prototype.setMyID=function(t){this.myID=t},le.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},le.prototype.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},le.prototype.removeMember=function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e},le.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},le),ie=((ft=function(t,e){return(ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ft(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(pe,lt=ne),pe.prototype.authorize=function(t,i){var r=this;lt.prototype.authorize.call(this,t,function(t,e){if(!t){if(void 0===(e=e).channel_data){var n=ct("authenticationEndpoint");return xt.error("Invalid auth response for channel '"+r.name+"',expected 'channel_data' field. "+n),void i("Invalid auth response")}var o=JSON.parse(e.channel_data);r.members.setMyID(o.user_id)}i(t,e)})},pe.prototype.handleEvent=function(t){var e,n,o=t.event;0===o.indexOf("pusher_internal:")?this.handleInternalEvent(t):(e=t.data,n={},t.user_id&&(n.user_id=t.user_id),this.emit(o,e,n))},pe.prototype.handleInternalEvent=function(t){var e=t.event,n=t.data;switch(e){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(t);break;case"pusher_internal:member_added":var o=this.members.addMember(n);this.emit("pusher:member_added",o);break;case"pusher_internal:member_removed":var i=this.members.removeMember(n);i&&this.emit("pusher:member_removed",i)}},pe.prototype.handleSubscriptionSucceededEvent=function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(t.data),this.emit("pusher:subscription_succeeded",this.members))},pe.prototype.disconnect=function(){this.members.reset(),lt.prototype.disconnect.call(this)},pe),re=((pt=function(t,e){return(pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}pt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(he,ht=ne),he.prototype.authorize=function(t,i){var r=this;ht.prototype.authorize.call(this,t,function(t,e){var n,o;t?i(!0,e):(n=e.shared_secret)?(r.key=(void 0)(n),delete e.shared_secret,i(!1,e)):(o="No shared_secret key in auth payload for encrypted channel: "+r.name,i(!0,o))})},he.prototype.trigger=function(t,e){throw new Kt("Client events are not currently supported for encrypted channels")},he.prototype.handleEvent=function(t){var e=t.event,n=t.data;0!==e.indexOf("pusher_internal:")&&0!==e.indexOf("pusher:")?this.handleEncryptedEvent(e,n):ht.prototype.handleEvent.call(this,t)},he.prototype.handleEncryptedEvent=function(n,t){var o=this;if(this.key)if(t.ciphertext&&t.nonce){var i=(void 0)(t.ciphertext);if(i.length<(void 0).overheadLength)xt.error("Expected encrypted event ciphertext length to be "+(void 0).overheadLength+", got: "+i.length);else{var r=(void 0)(t.nonce);if(r.length<(void 0).nonceLength)xt.error("Expected encrypted event nonce length to be "+(void 0).nonceLength+", got: "+r.length);else{var s=(void 0).open(i,r,this.key);if(null===s)return xt.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,function(t,e){t?xt.error("Failed to make a request to the authEndpoint: "+e+". Unable to fetch new key, so dropping encrypted event"):null!==(s=(void 0).open(i,r,o.key))?o.emitJSON(n,(void 0)(s)):xt.error("Failed to decrypt event with new key. Dropping encrypted event")});this.emitJSON(n,(void 0)(s))}}}else xt.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);else xt.debug("Received encrypted event before key has been retrieved from the authEndpoint")},he.prototype.emitJSON=function(e,n){try{this.emit(e,JSON.parse(n))}catch(t){this.emit(e,n)}return this},he),se=((ut=function(t,e){return(ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ut(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(ue,at=At),ue.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},ue.prototype.send=function(t){return!!this.connection&&this.connection.send(t)},ue.prototype.send_event=function(t,e,n){return!!this.connection&&this.connection.send_event(t,e,n)},ue.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},ue.prototype.isUsingTLS=function(){return this.usingTLS},ue.prototype.startConnecting=function(){var n=this,o=function(t,e){t?n.runner=n.strategy.connect(0,o):"error"===e.action?(n.emit("error",{type:"HandshakeError",error:e.error}),n.timeline.error({handshakeError:e.error})):(n.abortConnecting(),n.handshakeCallbacks[e.action](e))};this.runner=this.strategy.connect(0,o)},ue.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},ue.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},ue.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},ue.prototype.retryIn=function(t){var e=this;this.timeline.info({action:"retry",delay:t}),0<t&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new S(t||0,function(){e.disconnectInternally(),e.connect()})},ue.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},ue.prototype.setUnavailableTimer=function(){var t=this;this.unavailableTimer=new S(this.options.unavailableTimeout,function(){t.updateState("unavailable")})},ue.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},ue.prototype.sendActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new S(this.options.pongTimeout,function(){t.timeline.error({pong_timed_out:t.options.pongTimeout}),t.retryIn(0)})},ue.prototype.resetActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new S(this.activityTimeout,function(){t.sendActivityCheck()}))},ue.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},ue.prototype.buildConnectionCallbacks=function(t){var e=this;return P({},t,{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},activity:function(){e.resetActivityCheck()},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}})},ue.prototype.buildHandshakeCallbacks=function(t){var e=this;return P({},t,{connected:function(t){e.activityTimeout=Math.min(e.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.updateState("connected",{socket_id:e.socket_id})}})},ue.prototype.buildErrorCallbacks=function(){function t(e){return function(t){t.error&&n.emit("error",{type:"WebSocketError",error:t.error}),e(t)}}var n=this;return{tls_only:t(function(){n.usingTLS=!0,n.updateStrategy(),n.retryIn(0)}),refused:t(function(){n.disconnect()}),backoff:t(function(){n.retryIn(1e3)}),retry:t(function(){n.retryIn(0)})}},ue.prototype.setConnection=function(t){for(var e in this.connection=t,this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()},ue.prototype.abandonConnection=function(){if(this.connection){for(var t in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var e=this.connection;return this.connection=null,e}},ue.prototype.updateState=function(t,e){var n,o=this.state;o!==(this.state=t)&&("connected"===(n=t)&&(n+=" with new socket ID "+e.socket_id),xt.debug("State changed",o+" -> "+n),this.timeline.info({state:t,params:e}),this.emit("state_change",{previous:o,current:t}),this.emit(t,e))},ue.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},ue),ce=(ae.prototype.add=function(t,e){return this.channels[t]||(this.channels[t]=function(t,e){if(0===t.indexOf("private-encrypted-"))throw new Kt("Encrypted channels are not yet supported when using React Native builds.");return 0===t.indexOf("private-")?Ae.createPrivateChannel(t,e):0===t.indexOf("presence-")?Ae.createPresenceChannel(t,e):Ae.createChannel(t,e)}(t,e)),this.channels[t]},ae.prototype.all=function(){return t=this.channels,e=[],L(t,function(t){e.push(t)}),e;var t,e},ae.prototype.find=function(t){return this.channels[t]},ae.prototype.remove=function(t){var e=this.channels[t];return delete this.channels[t],e},ae.prototype.disconnect=function(){L(this.channels,function(t){t.disconnect()})},ae);function ae(){this.channels={}}function ue(t,e){var n=at.call(this)||this;n.key=t,n.options=e||{},n.state="initialized",n.connection=null,n.usingTLS=!!e.useTLS,n.timeline=n.options.timeline,n.errorCallbacks=n.buildErrorCallbacks(),n.connectionCallbacks=n.buildConnectionCallbacks(n.errorCallbacks),n.handshakeCallbacks=n.buildHandshakeCallbacks(n.errorCallbacks);var o=_n.getNetwork();return o.bind("online",function(){n.timeline.info({netinfo:"online"}),"connecting"!==n.state&&"unavailable"!==n.state||n.retryIn(0)}),o.bind("offline",function(){n.timeline.info({netinfo:"offline"}),n.connection&&n.sendActivityCheck()}),n.updateStrategy(),n}function he(){var t=null!==ht&&ht.apply(this,arguments)||this;return t.key=null,t}function pe(t,e){var n=lt.call(this,t,e)||this;return n.members=new oe,n}function le(){this.reset()}function fe(){return null!==dt&&dt.apply(this,arguments)||this}function de(n,t){var e=bt.call(this,function(t,e){xt.debug("No callbacks on "+n+" for "+t)})||this;return e.name=n,e.pusher=t,e.subscribed=!1,e.subscriptionPending=!1,e.subscriptionCancelled=!1,e}function ye(t){var e=this.constructor,n=vt.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}function be(t){var e=this.constructor,n=mt.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}function ge(t){var e=this.constructor,n=St.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}function ve(t){var e=this.constructor,n=_t.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}function me(t){var e=this.constructor,n=kt.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}function Se(t){var e=this.constructor,n=Tt.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}function _e(t,e){this.timeline=t,this.options=e||{}}function ke(t,e){this.channel=t;var n=e.authTransport;if(void 0===_n.getAuthorizers()[n])throw"'"+n+"' is not a recognized auth transport";this.type=n,this.options=e,this.authOptions=(e||{}).auth||{}}function we(t,e){this.transport=t,this.callback=e,this.bindListeners()}function Te(t,e){var n=Ot.call(this)||this;return n.id=t,n.transport=e,n.activityTimeout=e.activityTimeout,n.bindListeners(),n}function Ce(t,e,n){this.manager=t,this.transport=e,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}function Oe(t){this.hooks=t}function Pe(t,e,n,o,i){var r=Et.call(this)||this;return r.initialize=_n.transportConnectionInitializer,r.hooks=t,r.name=e,r.priority=n,r.key=o,r.options=i,r.state="new",r.timeline=i.timeline,r.activityTimeout=i.activityTimeout,r.id=r.timeline.generateUniqueID(),r}function Ee(){this.globalLog=function(t){global.console&&global.console.log&&global.console.log(t)}}function Le(t){this.callbacks=new it,this.global_callbacks=[],this.failThrough=t}var Ae={createChannels:function(){return new ce},createConnectionManager:function(t,e){return new se(t,e)},createChannel:function(t,e){return new ee(t,e)},createPrivateChannel:function(t,e){return new ne(t,e)},createPresenceChannel:function(t,e){return new ie(t,e)},createEncryptedChannel:function(t,e){return new re(t,e)},createTimelineSender:function(t,e){return new Xt(t,e)},createAuthorizer:function(t,e){return e.authorizer?e.authorizer(t,e):new Wt(t,e)},createHandshake:function(t,e){return new Jt(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new zt(t,e,n)}},xe=(Me.prototype.getAssistant=function(t){return Ae.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},Me.prototype.isAlive=function(){return 0<this.livesLeft},Me.prototype.reportDeath=function(){--this.livesLeft},Me),Re=(Ne.prototype.isSupported=function(){return N(this.strategies,T("isSupported"))},Ne.prototype.connect=function(n,o){var i=this,r=this.strategies,s=0,c=this.timeout,a=null,u=function(t,e){e?o(null,e):(s+=1,i.loop&&(s%=r.length),s<r.length?(c&&(c*=2,i.timeoutLimit&&(c=Math.min(c,i.timeoutLimit))),a=i.tryStrategy(r[s],n,{timeout:c,failFast:i.failFast},u)):o(!0))},a=this.tryStrategy(r[s],n,{timeout:c,failFast:this.failFast},u);return{abort:function(){a.abort()},forceMinPriority:function(t){n=t,a&&a.forceMinPriority(t)}}},Ne.prototype.tryStrategy=function(t,e,n,o){var i=null,r=null;return 0<n.timeout&&(i=new S(n.timeout,function(){r.abort(),o(!0)})),r=t.connect(e,function(t,e){t&&i&&i.isRunning()&&!n.failFast||(i&&i.ensureAborted(),o(t,e))}),{abort:function(){i&&i.ensureAborted(),r.abort()},forceMinPriority:function(t){r.forceMinPriority(t)}}},Ne),je=(Ie.prototype.isSupported=function(){return N(this.strategies,T("isSupported"))},Ie.prototype.connect=function(t,s){return e=this.strategies,c=t,n=R(e,function(t,e,n,o){return t.connect(c,(i=e,r=o,function(t,e){(r[i].error=t)?function(t){return function(t){for(var e,n=0;n<t.length;n++)if(e=t[n],!Boolean(e.error))return;return 1}(t)}(r)&&s(!0):(x(r,function(t){t.forceMinPriority(e.transport.priority)}),s(null,e))}));var i,r}),{abort:function(){x(n,He)},forceMinPriority:function(e){x(n,function(t){t.forceMinPriority(e)})}};var e,c,n},Ie);function Ie(t){this.strategies=t}function Ne(t,e){this.strategies=t,this.loop=Boolean(e.loop),this.failFast=Boolean(e.failFast),this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}function Me(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}function He(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}var De=(Ue.prototype.isSupported=function(){return this.strategy.isSupported()},Ue.prototype.connect=function(o,i){var t,r=this.usingTLS,e=function(t){var e=_n.getLocalStorage();if(e)try{var n=e[ze(t)];if(n)return JSON.parse(n)}catch(e){Fe(t)}return null}(r),s=[this.strategy];e&&e.timestamp+this.ttl>=k()&&(t=this.transports[e.transport])&&(this.timeline.info({cached:!0,transport:e.transport,latency:e.latency}),s.push(new Re([t],{timeout:2*e.latency+1e3,failFast:!0})));var c=k(),a=s.pop().connect(o,function t(e,n){e?(Fe(r),0<s.length?(c=k(),a=s.pop().connect(o,t)):i(e)):(function(t,e,n){var o=_n.getLocalStorage();if(o)try{o[ze(t)]=H({timestamp:k(),transport:e,latency:n})}catch(t){}}(r,n.transport.name,k()-c),i(null,n))});return{abort:function(){a.abort()},forceMinPriority:function(t){o=t,a&&a.forceMinPriority(t)}}},Ue);function Ue(t,e,n){this.strategy=t,this.transports=e,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}function ze(t){return"pusherTransport"+(t?"TLS":"NonTLS")}function Fe(t){var e=_n.getLocalStorage();if(e)try{delete e[ze(t)]}catch(t){}}var qe=(Ge.prototype.isSupported=function(){return this.strategy.isSupported()},Ge.prototype.connect=function(e,t){var n,o=this.strategy,i=new S(this.options.delay,function(){n=o.connect(e,t)});return{abort:function(){i.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}},Ge),Be=(Xe.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},Xe.prototype.connect=function(t,e){return(this.test()?this.trueBranch:this.falseBranch).connect(t,e)},Xe),Je=(We.prototype.isSupported=function(){return this.strategy.isSupported()},We.prototype.connect=function(t,n){var o=this.strategy.connect(t,function(t,e){e&&o.abort(),n(t,e)});return o},We);function We(t){this.strategy=t}function Xe(t,e,n){this.test=t,this.trueBranch=e,this.falseBranch=n}function Ge(t,e){var n=e.delay;this.strategy=t,this.options={delay:n}}function Qe(t){return function(){return t.isSupported()}}var Ye,$e,Ke,Ve,Ze=((Ke=function(t,e){return(Ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ke(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(tn,$e=At),tn.prototype.start=function(t){var e=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){e.close()},_n.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)},tn.prototype.close=function(){this.unloader&&(_n.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},tn.prototype.onChunk=function(t,e){for(;;){var n=this.advanceBuffer(e);if(!n)break;this.emit("chunk",{status:t,data:n})}this.isBufferTooLong(e)&&this.emit("buffer_too_long")},tn.prototype.advanceBuffer=function(t){var e=t.slice(this.position),n=e.indexOf("\n");return-1!==n?(this.position+=n+1,e.slice(0,n)):null},tn.prototype.isBufferTooLong=function(t){return this.position===t.length&&262144<t.length},tn);function tn(t,e,n){var o=$e.call(this)||this;return o.hooks=t,o.method=e,o.url=n,o}(Ve=Ye=Ye||{})[Ve.CONNECTING=0]="CONNECTING",Ve[Ve.OPEN=1]="OPEN",Ve[Ve.CLOSED=3]="CLOSED";var en=Ye,nn=1;function on(t){var e=-1===t.indexOf("?")?"?":"&";return t+e+"t="+ +new Date+"&n="+nn++}function rn(t){return Math.floor(Math.random()*t)}var sn,cn=(dn.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},dn.prototype.ping=function(){this.hooks.sendHeartbeat(this)},dn.prototype.close=function(t,e){this.onClose(t,e,!0)},dn.prototype.sendRaw=function(t){if(this.readyState!==en.OPEN)return!1;try{return _n.createSocketRequest("POST",on((e=this.location,n=this.session,e.base+"/"+n+"/xhr_send"))).start(t),!0}catch(t){return!1}var e,n},dn.prototype.reconnect=function(){this.closeStream(),this.openStream()},dn.prototype.onClose=function(t,e,n){this.closeStream(),this.readyState=en.CLOSED,this.onclose&&this.onclose({code:t,reason:e,wasClean:n})},dn.prototype.onChunk=function(t){var e;if(200===t.status)switch(this.readyState===en.OPEN&&this.onActivity(),t.data.slice(0,1)){case"o":e=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(e);break;case"a":e=JSON.parse(t.data.slice(1)||"[]");for(var n=0;n<e.length;n++)this.onEvent(e[n]);break;case"m":e=JSON.parse(t.data.slice(1)||"null"),this.onEvent(e);break;case"h":this.hooks.onHeartbeat(this);break;case"c":e=JSON.parse(t.data.slice(1)||"[]"),this.onClose(e[0],e[1],!0)}},dn.prototype.onOpen=function(t){var e,n,o;this.readyState===en.CONNECTING?(t&&t.hostname&&(this.location.base=(e=this.location.base,n=t.hostname,(o=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e))[1]+n+o[3])),this.readyState=en.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},dn.prototype.onEvent=function(t){this.readyState===en.OPEN&&this.onmessage&&this.onmessage({data:t})},dn.prototype.onActivity=function(){this.onactivity&&this.onactivity()},dn.prototype.onError=function(t){this.onerror&&this.onerror(t)},dn.prototype.openStream=function(){var e=this;this.stream=_n.createSocketRequest("POST",on(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(t){e.onChunk(t)}),this.stream.bind("finished",function(t){e.hooks.onFinished(e,t)}),this.stream.bind("buffer_too_long",function(){e.reconnect()});try{this.stream.start()}catch(t){w(function(){e.onError(t),e.onClose(1006,"Could not start streaming",!1)})}},dn.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},dn),an={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}},un={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}},hn={getRequest:function(t){var e=new(_n.getXHRAPI());return e.onreadystatechange=e.onprogress=function(){switch(e.readyState){case 3:e.responseText&&0<e.responseText.length&&t.onChunk(e.status,e.responseText);break;case 4:e.responseText&&0<e.responseText.length&&t.onChunk(e.status,e.responseText),t.emit("finished",e.status),t.close()}},e},abortRequest:function(t){t.onreadystatechange=null,t.abort()}},pn={getDefaultStrategy:function(s,c){var a={};function t(t,e,n,o,i){var r=c(s,t,e,n,o,i);return a[t]=r}var e={hostNonTLS:s.wsHost+":"+s.wsPort,hostTLS:s.wsHost+":"+s.wssPort,httpPath:s.wsPath},n=P({},e,{useTLS:!0}),o={hostNonTLS:s.httpHost+":"+s.httpPort,hostTLS:s.httpHost+":"+s.httpsPort,httpPath:s.httpPath},i={loop:!0,timeout:15e3,timeoutLimit:6e4},r=new xe({lives:2,minPingDelay:1e4,maxPingDelay:s.activity_timeout}),u=new xe({lives:2,minPingDelay:1e4,maxPingDelay:s.activity_timeout}),h=t("ws","ws",3,e,r),p=t("wss","ws",3,n,r),l=t("xhr_streaming","xhr_streaming",1,o,u),f=t("xhr_polling","xhr_polling",1,o),d=new Re([h],i),y=new Re([p],i),b=new Re([l],i),g=new Re([f],i),v=new Re([new Be(Qe(b),new je([b,new qe(g,{delay:4e3})]),g)],i),m=s.useTLS?new je([d,new qe(v,{delay:2e3})]):new je([d,new qe(y,{delay:2e3}),new qe(v,{delay:5e3})]);return new De(new Je(new Be(Qe(h),m,v)),a,{ttl:18e5,timeline:s.timeline,useTLS:s.useTLS})},Transports:Ut,transportConnectionInitializer:function(){this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.useTLS?"s":"")})),this.hooks.isInitialized()?this.changeState("initialized"):this.onClose()},HTTPFactory:{createStreamingSocket:function(t){return this.createSocket(an,t)},createPollingSocket:function(t){return this.createSocket(un,t)},createSocket:function(t,e){return new cn(t,e)},createXHR:function(t,e){return this.createRequest(hn,t,e)},createRequest:function(t,e,n){return new Ze(t,e,n)}},setup:function(t){t.ready()},getLocalStorage:function(){},getClientFeatures:function(){return A(I({ws:Ut.ws},function(t){return t.isSupported({})}))},getProtocol:function(){return"http:"},isXHRSupported:function(){return!0},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);throw"Cross-origin HTTP requests are not supported"},createXHR:function(){return new(this.getXHRAPI())},createWebSocket:function(t){return new(this.getWebSocketAPI())(t)},addUnloadListener:function(t){},removeUnloadListener:function(t){}},ln=n(0),fn=n.n(ln);function dn(t,e){var n;this.hooks=t,this.session=rn(1e3)+"/"+function(){for(var t=[],e=0;e<8;e++)t.push(rn(32).toString(32));return t.join("")}(),this.location={base:(n=/([^\?]*)\/*(\??.*)/.exec(e))[1],queryString:n[2]},this.readyState=en.CONNECTING,this.openStream()}function yn(t){return"none"!==t.type.toLowerCase()}function bn(t,e,o){var i,r=this;for(var n in(i=_n.createXHR()).open("POST",r.options.authEndpoint,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)i.setRequestHeader(n,this.authOptions.headers[n]);return i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var t,e=!1;try{t=JSON.parse(i.responseText),e=!0}catch(t){o(!0,"JSON returned from auth endpoint was invalid, yet status code was 200. Data was: "+i.responseText)}e&&o(!1,t)}else{var n=ct("authenticationEndpoint");xt.error("Unable to retrieve auth string from auth endpoint - received status "+i.status+" from "+r.options.authEndpoint+". Clients must be authenticated to join private or presence channels. "+n),o(!0,i.status)}},i.send(this.composeQuery(e)),i}var gn,vn,mn,Sn=((sn=function(t,e){return(sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}sn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(kn,vn=At),kn.prototype.isOnline=function(){return this.online},new kn),_n={getDefaultStrategy:pn.getDefaultStrategy,Transports:pn.Transports,setup:pn.setup,getProtocol:pn.getProtocol,isXHRSupported:pn.isXHRSupported,getLocalStorage:pn.getLocalStorage,createXHR:pn.createXHR,createWebSocket:pn.createWebSocket,addUnloadListener:pn.addUnloadListener,removeUnloadListener:pn.removeUnloadListener,transportConnectionInitializer:pn.transportConnectionInitializer,createSocketRequest:pn.createSocketRequest,HTTPFactory:pn.HTTPFactory,TimelineTransport:{name:"xhr",getAgent:function(i,r){return function(t,e){var n="http"+(r?"s":"")+"://"+(i.host||i.options.host)+i.options.path;n+="/2?"+M(t);var o=_n.createXHR();o.open("GET",n,!0),o.onreadystatechange=function(){if(4===o.readyState){var t=o.status,e=o.responseText;if(200!==t)return void xt.debug("TimelineSender Error: received "+t+" from stats.pusher.com");try{var n=JSON.parse(e).host}catch(t){xt.debug("TimelineSenderError: invalid response "+e)}n&&(i.host=n)}},o.send()}}},getAuthorizers:function(){return{ajax:bn}},getWebSocketAPI:function(){return WebSocket},getXHRAPI:function(){return XMLHttpRequest},getNetwork:function(){return Sn}};function kn(){var n=vn.call(this)||this;return n.online=!0,fn.a.fetch().then(function(t){n.online=yn(t)}),fn.a.addEventListener(function(t){var e=yn(t);n.online!==e&&(n.online=e,n.online?n.emit("online"):n.emit("offline"))}),n}(mn=gn=gn||{})[mn.ERROR=3]="ERROR",mn[mn.INFO=6]="INFO",mn[mn.DEBUG=7]="DEBUG";var wn=gn,Tn=(Pn.prototype.log=function(t,e){t<=this.options.level&&(this.events.push(P({},e,{timestamp:k()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},Pn.prototype.error=function(t){this.log(wn.ERROR,t)},Pn.prototype.info=function(t){this.log(wn.INFO,t)},Pn.prototype.debug=function(t){this.log(wn.DEBUG,t)},Pn.prototype.isEmpty=function(){return 0===this.events.length},Pn.prototype.send=function(t,n){var o=this,e=P({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(e,function(t,e){t||o.sent++,n&&n(t,e)}),!0},Pn.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},Pn),Cn=(On.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},On.prototype.connect=function(t,e){var n=this;if(!this.isSupported())return En(new Zt,e);if(this.priority<t)return En(new Yt,e);function o(){a=Ae.createHandshake(c,function(t){s=!0,h(),e(null,t)})}function i(t){h(),e(t)}function r(){var t;h(),t=H(c),e(new $t(t))}var s=!1,c=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),a=null,u=function(){c.unbind("initialized",u),c.connect()},h=function(){c.unbind("initialized",u),c.unbind("open",o),c.unbind("error",i),c.unbind("closed",r)};return c.bind("initialized",u),c.bind("open",o),c.bind("error",i),c.bind("closed",r),c.initialize(),{abort:function(){s||(h(),a?a.close():c.close())},forceMinPriority:function(t){s||n.priority<t&&(a?a.close():c.close())}}},On);function On(t,e,n,o){this.name=t,this.priority=e,this.transport=n,this.options=o||{}}function Pn(t,e,n){this.key=t,this.session=e,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}function En(t,e){return w(function(){e(t)}),{abort:function(){},forceMinPriority:function(){}}}function Ln(t,e,n,o,i,r){var s=An[n];if(!s)throw new Vt(n);return t.enabledTransports&&-1===E(t.enabledTransports,e)||t.disabledTransports&&-1!==E(t.disabledTransports,e)?xn:new Cn(e,o,r?r.getAssistant(s):s,P({key:t.key,useTLS:t.useTLS,timeline:t.timeline,ignoreNullOrigin:t.ignoreNullOrigin},i))}var An=_n.Transports,xn={isSupported:function(){return!1},connect:function(t,e){var n=w(function(){e(new Zt)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},Rn=(In.ready=function(){In.isReady=!0;for(var t=0,e=In.instances.length;t<e;t++)In.instances[t].connect()},In.getClientFeatures=function(){return A(I({ws:_n.Transports.ws},function(t){return t.isSupported({})}))},In.prototype.channel=function(t){return this.channels.find(t)},In.prototype.allChannels=function(){return this.channels.all()},In.prototype.connect=function(){var t,e;this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer&&(t=this.connection.isUsingTLS(),e=this.timelineSender,this.timelineSenderTimer=new _(6e4,function(){e.send(t)}))},In.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},In.prototype.bind=function(t,e,n){return this.global_emitter.bind(t,e,n),this},In.prototype.unbind=function(t,e,n){return this.global_emitter.unbind(t,e,n),this},In.prototype.bind_global=function(t){return this.global_emitter.bind_global(t),this},In.prototype.unbind_global=function(t){return this.global_emitter.unbind_global(t),this},In.prototype.unbind_all=function(t){return this.global_emitter.unbind_all(),this},In.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},In.prototype.subscribe=function(t){var e=this.channels.add(t,this);return e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.connection.state||e.subscribe(),e},In.prototype.unsubscribe=function(t){var e=this.channels.find(t);e&&e.subscriptionPending?e.cancelSubscription():(e=this.channels.remove(t))&&"connected"===this.connection.state&&e.unsubscribe()},In.prototype.send_event=function(t,e,n){return this.connection.send_event(t,e,n)},In.prototype.shouldUseTLS=function(){return"https:"===_n.getProtocol()||!0===this.config.forceTLS||Boolean(this.config.encrypted)},In.instances=[],In.isReady=!1,In.logToConsole=!1,In.Runtime=_n,In.ScriptReceivers=_n.ScriptReceivers,In.DependenciesReceivers=_n.DependenciesReceivers,In.auth_callbacks=_n.auth_callbacks,In),jn=e.default=Rn;function In(t,e){var n,o,i=this;(function(){if(null==t)throw"You must pass your app key when you instantiate Pusher."})(),(e=e||{}).cluster||e.wsHost||e.httpHost||(o=ct("javascriptQuickStart"),xt.warn("You should always specify a cluster when connecting. "+o)),"disableStats"in e&&(xt.warn("The disableStats option is deprecated in favor of enableStats"),"enableStats"in e||(e.enableStats=!e.disableStats)),this.key=t,this.config=P({wsHost:z,wsPort:F,wssPort:q,wsPath:B,httpHost:J,httpPort:W,httpsPort:X,httpPath:G,statsHost:Q,authEndpoint:Y,authTransport:$,activity_timeout:K,pong_timeout:V,unavailable_timeout:Z},e.cluster?{wsHost:"ws-"+(n=e.cluster)+".pusher.com",httpHost:"sockjs-"+n+".pusher.com"}:{},e),this.channels=Ae.createChannels(),this.global_emitter=new At,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new Tn(this.key,this.sessionID,{cluster:this.config.cluster,features:In.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:wn.INFO,version:D}),this.config.enableStats&&(this.timelineSender=Ae.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+_n.TimelineTransport.name})),this.connection=Ae.createConnectionManager(this.key,P({getStrategy:function(t){var e=P({},i.config,t);return _n.getDefaultStrategy(e,Ln)},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{useTLS:this.shouldUseTLS()})),this.connection.bind("connected",function(){i.subscribeAll(),i.timelineSender&&i.timelineSender.send(i.connection.isUsingTLS())}),this.connection.bind("message",function(t){var e,n=0===t.event.indexOf("pusher_internal:");!t.channel||(e=i.channel(t.channel))&&e.handleEvent(t),n||i.global_emitter.emit(t.event,t.data)}),this.connection.bind("connecting",function(){i.channels.disconnect()}),this.connection.bind("disconnected",function(){i.channels.disconnect()}),this.connection.bind("error",function(t){xt.warn(t)}),In.instances.push(this),this.timeline.info({instances:In.instances.length}),In.isReady&&this.connect()}_n.setup(Rn)}]);