!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.htmPreact={})}(this,function(e){function p(){}var i={},u=[],c=[];function t(e,t){for(var n,o,r,i=arguments,l=c,a=arguments.length;2<a--;)u.push(i[a]);for(t&&null!=t.children&&(u.length||u.push(t.children),delete t.children);u.length;)if((o=u.pop())&&void 0!==o.pop)for(a=o.length;a--;)u.push(o[a]);else"boolean"==typeof o&&(o=null),(r="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(r=!1)),r&&n?l[l.length-1]+=o:l===c?l=[o]:l.push(o),n=r;var s=new p;return s.nodeName=e,s.children=l,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,s}function S(e,t){for(var n in t)e[n]=t[n];return e}function s(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}var n="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,o=[];function l(e){!e._dirty&&(e._dirty=!0)&&1==o.push(e)&&n(r)}function r(){for(var e;e=o.pop();)e._dirty&&A(e)}function P(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function B(e){var t=S({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===t[o]&&(t[o]=n[o]);return t}function U(e){var t=e.parentNode;t&&t.removeChild(e)}function v(e,t,n,o,r){if("className"===t&&(t="class"),"key"!==t)if("ref"===t)s(n,null),s(o,e);else if("class"!==t||r)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var i in n)i in o||(e.style[i]="");for(var i in o)e.style[i]="number"==typeof o[i]&&!1===f.test(i)?o[i]+"px":o[i]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var l=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,d,l):e.removeEventListener(t,d,l),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e){try{e[t]=null==o?"":o}catch(e){}null!=o&&!1!==o||"spellcheck"==t||e.removeAttribute(t)}else{var a=r&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function d(e){return this._listeners[e.type](e)}var L=[],T=0,m=!1,_=!1;function M(){for(var e;e=L.shift();)e.componentDidMount&&e.componentDidMount()}function W(e,t,n,o,r,i){T++||(m=null!=r&&void 0!==r.ownerSVGElement,_=null!=e&&!("__preactattr_"in e));var l=function k(e,t,n,o,r){var i=e,l=m;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),D(e,!0))),i.__preactattr_=!0,i;var a,s,p=t.nodeName;if("function"==typeof p)return function(e,t,n,o){for(var r=e&&e._component,i=r,l=e,a=r&&e._componentConstructor===t.nodeName,s=a,p=B(t);r&&!s&&(r=r._parentComponent);)s=r.constructor===t.nodeName;return r&&s&&(!o||r._component)?(V(r,p,3,n,o),e=r.base):(i&&!a&&(j(i),e=l=null),r=E(t.nodeName,p,n),e&&!r.nextBase&&(r.nextBase=e,l=null),V(r,p,1,n,o),e=r.base,l&&e!==l&&(l._component=null,D(l,!1))),e}(e,t,n,o);if(m="svg"===p||"foreignObject"!==p&&m,p=String(p),(!e||!P(e,p))&&(a=p,(s=m?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)).normalizedNodeName=a,i=s,e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),D(e,!0)}var u=i.firstChild,c=i.__preactattr_,f=t.children;if(null==c){c=i.__preactattr_={};for(var d=i.attributes,h=d.length;h--;)c[d[h].name]=d[h].value}return!_&&f&&1===f.length&&"string"==typeof f[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=f[0]&&(u.nodeValue=f[0]):(f&&f.length||null!=u)&&function(e,t,n,o,r){var i,l,a,s,p,u,c,f=e.childNodes,d=[],h={},v=0,m=0,_=f.length,y=0,g=t?t.length:0;if(0!==_)for(var b=0;b<_;b++){var C=f[b],x=C.__preactattr_;null!=(N=g&&x?C._component?C._component.__key:x.key:null)?(v++,h[N]=C):(x||(void 0!==C.splitText?!r||C.nodeValue.trim():r))&&(d[y++]=C)}if(0!==g)for(b=0;b<g;b++){var N,w=null;if(null!=(N=(s=t[b]).key))v&&void 0!==h[N]&&(w=h[N],h[N]=void 0,v--);else if(m<y)for(i=m;i<y;i++)if(void 0!==d[i]&&(p=l=d[i],c=r,"string"==typeof(u=s)||"number"==typeof u?void 0!==p.splitText:"string"==typeof u.nodeName?!p._componentConstructor&&P(p,u.nodeName):c||p._componentConstructor===u.nodeName)){w=l,d[i]=void 0,i===y-1&&y--,i===m&&m++;break}w=k(w,s,n,o),a=f[b],w&&w!==e&&w!==a&&(null==a?e.appendChild(w):w===a.nextSibling?U(a):e.insertBefore(w,a))}if(v)for(var b in h)void 0!==h[b]&&D(h[b],!1);for(;m<=y;)void 0!==(w=d[y--])&&D(w,!1)}(i,f,n,o,_||null!=c.dangerouslySetInnerHTML),function(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||v(e,o,n[o],n[o]=void 0,m);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||v(e,o,n[o],n[o]=t[o],m)}(i,t.attributes,c),m=l,i}(e,t,n,o,i);return r&&l.parentNode!==r&&r.appendChild(l),--T||(_=!1,i||M()),l}function D(e,t){var n=e._component;n?j(n):(null!=e.__preactattr_&&s(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||U(e),a(e))}function a(e){for(e=e.lastChild;e;){var t=e.previousSibling;D(e,!0),e=t}}var h=[];function E(e,t,n){var o,r=h.length;for(e.prototype&&e.prototype.render?(o=new e(t,n),g.call(o,t,n)):((o=new g(t,n)).constructor=e,o.render=y);r--;)if(h[r].constructor===e)return o.nextBase=h[r].nextBase,h.splice(r,1),o;return o}function y(e,t,n){return this.constructor(e,n)}function V(e,t,n,o,r){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o)),o&&o!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===i.syncComponentUpdates&&e.base?l(e):A(e,1,r)),s(e.__ref,e))}function A(e,t,n,o){if(!e._disable){var r,i,l,a=e.props,s=e.state,p=e.context,u=e.prevProps||a,c=e.prevState||s,f=e.prevContext||p,d=e.base,h=e.nextBase,v=d||h,m=e._component,_=!1,y=f;if(e.constructor.getDerivedStateFromProps&&(s=S(S({},s),e.constructor.getDerivedStateFromProps(a,s)),e.state=s),d&&(e.props=u,e.state=c,e.context=f,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(a,s,p)?_=!0:e.componentWillUpdate&&e.componentWillUpdate(a,s,p),e.props=a,e.state=s,e.context=p),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!_){r=e.render(a,s,p),e.getChildContext&&(p=S(S({},p),e.getChildContext())),d&&e.getSnapshotBeforeUpdate&&(y=e.getSnapshotBeforeUpdate(u,c));var g,b,C,x,N=r&&r.nodeName;if("function"==typeof N?(C=B(r),(i=m)&&i.constructor===N&&C.key==i.__key?V(i,C,1,p,!1):(g=i,e._component=i=E(N,C,p),i.nextBase=i.nextBase||h,i._parentComponent=e,V(i,C,0,p,!1),A(i,1,n,!0)),b=i.base):(l=v,(g=m)&&(l=e._component=null),!v&&1!==t||(l&&(l._component=null),b=W(l,r,p,n||!d,v&&v.parentNode,!0))),!v||b===v||i===m||(x=v.parentNode)&&b!==x&&(x.replaceChild(b,v),g||(v._component=null,D(v,!1))),g&&j(g),(e.base=b)&&!o){for(var w=e,k=e;k=k._parentComponent;)(w=k).base=b;b._component=w,b._componentConstructor=w.constructor}}for(!d||n?L.push(e):_||e.componentDidUpdate&&e.componentDidUpdate(u,c,y);e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);T||o||M()}}function j(e){var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?j(n):t&&(null!=t.__preactattr_&&s(t.__preactattr_.ref,null),U(e.nextBase=t),h.push(e),a(t)),s(e.__ref,null)}function g(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}S(g.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=S(S({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),l(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),A(this,2)},render:function(){}});function b(e){function t(e){1===r&&(e||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(e||i,0):3===r&&(e||i)?(a.push(e||i,1),r=2):2===r&&"..."===i&&e?a.push(e,3):2===r&&i&&!e?a.push(!0,2,i):4===r&&o&&(a.push(e||i,2,o),o=""),i=""}for(var n,o,r=1,i="",l="",a=[0],s=0;s<e.length;s++){s&&(1===r&&t(),t(s));for(var p=0;p<e[s].length;p++)n=e[s][p],1===r?"<"===n?(t(),a=[a],r=3):i+=n:l?n===l?l="":i+=n:'"'===n||"'"===n?l=n:">"===n?(t(),r=1):r&&("="===n?(r=4,o=i,i=""):"/"===n?(t(),3===r&&(a=a[0]),(a=(r=a)[0]).push(r,4),r=0):" "===n||"\t"===n||"\n"===n||"\r"===n?(t(),r=2):i+=n)}return t(),a}var C=function(e,t,n,o){for(var r=1;r<t.length;r++){var i=t[r++],l="number"==typeof i?n[i]:i;1===t[r]?o[0]=l:2===t[r]?(o[1]=o[1]||{})[t[++r]]=l:3===t[r]?o[1]=Object.assign(o[1]||{},l):o.push(t[r]?e.apply(null,C(e,l,n,["",null])):l)}return o},x="function"==typeof Map,N=x?new Map:{},w=x?function(e){var t=N.get(e);return t||N.set(e,t=b(e)),t}:function(e){for(var t="",n=0;n<e.length;n++)t+=e[n].length+"-"+e[n];return N[t]||(N[t]=b(e))},k=function(e){var t=C(this,w(e),arguments,[]);return 1<t.length?t:t[0]}.bind(t);e.h=t,e.html=k,e.render=function(e,t){W(t.firstElementChild,e,{},!1,t,!1)},e.Component=g});