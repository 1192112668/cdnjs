!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.htm=e()}(this,function(){function r(n){function e(n){1===u&&(n||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?p.push(n||o,0):3===u&&(n||o)?(p.push(n||o,1),u=2):2===u&&"..."===o&&n?p.push(n,3):2===u&&o&&!n?p.push(!0,2,o):4===u&&r&&(p.push(n||o,2,r),r=""),o=""}for(var t,r,u=1,o="",f="",p=[0],s=0;s<n.length;s++){s&&(1===u&&e(),e(s));for(var i=0;i<n[s].length;i++)t=n[s][i],1===u?"<"===t?(e(),p=[p],u=3):o+=t:f?t===f?f="":o+=t:'"'===t||"'"===t?f=t:">"===t?(e(),u=1):u&&("="===t?(u=4,r=o,o=""):"/"===t?(e(),3===u&&(p=p[0]),(p=(u=p)[0]).push(u,4),u=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(e(),u=2):o+=t)}return e(),p}var p=function(n,e,t,r){for(var u=1;u<e.length;u++){var o=e[u++],f="number"==typeof o?t[o]:o;1===e[u]?r[0]=f:2===e[u]?(r[1]=r[1]||{})[e[++u]]=f:3===e[u]?r[1]=Object.assign(r[1]||{},f):r.push(e[u]?n.apply(null,p(n,f,t,["",null])):f)}return r},n="function"==typeof Map,u=n?new Map:{},t=n?function(n){var e=u.get(n);return e||u.set(n,e=r(n)),e}:function(n){for(var e="",t=0;t<n.length;t++)e+=n[t].length+"-"+n[t];return u[e]||(u[e]=r(n))};return function(n){var e=p(this,t(n),arguments,[]);return 1<e.length?e:e[0]}});