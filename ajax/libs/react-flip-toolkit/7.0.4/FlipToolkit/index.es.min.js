import{parse as t,translateX as e,translateY as i,scaleX as n,scaleY as r,multiply as o}from"rematrix";var a=function(t){return"number"==typeof t},s=function(t){return"function"==typeof t},p=function(t){return"[object Object]"===Object.prototype.toString.call(t)},l=function(t){return Array.prototype.slice.apply(t)},c=function(t){var e=t.reduce(function(t,e){return t[e]=(t[e]||0)+1,t},{});return Object.keys(e).filter(function(t){return e[t]>1})};function u(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return e.forEach(function(e){if(e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}),t}var f,d=function(t,e,i){return t+(e-t)*i},h={isNumber:a,isFunction:s,isObject:p,toArray:l,getDuplicateValsAsStrings:c,assign:u,tweenProp:d},g={DATA_FLIP_ID:"data-flip-id",DATA_INVERSE_FLIP_ID:"data-inverse-flip-id",DATA_FLIP_COMPONENT_ID:"data-flip-component-id",DATA_FLIP_CONFIG:"data-flip-config",DATA_PORTAL_KEY:"data-portal-key",DATA_EXIT_CONTAINER:"data-exit-container"},m={noWobble:{stiffness:200,damping:26},gentle:{stiffness:120,damping:14},veryGentle:{stiffness:130,damping:17},wobbly:{stiffness:180,damping:12},stiff:{stiffness:260,damping:26}},v=function(t){return p(t)?t:Object.keys(m).indexOf(t)>-1?m[t]:{}};"undefined"!=typeof window&&(f=window.requestAnimationFrame);var y=f=f||function(t){window.setTimeout(t,1e3/60)},_=Date.now(),S="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()-_};function E(t,e){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}var A=function(){};A.prototype.run=function(){var t=this;y(function(){t.springSystem.loop(S())})};var C=function(){this.position=0,this.velocity=0},b=0,I=function(t){this._id="s"+b++,this._springSystem=t,this.listeners=[],this._startValue=0,this._currentState=new C,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new C,this._restSpeedThreshold=.001,this._tempState=new C,this._timeAccumulator=0,this._wasAtRest=!0,this._cachedSpringConfig={}};I.prototype.getId=function(){return this._id},I.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},I.prototype.setSpringConfig=function(t){return this._springConfig=t,this},I.prototype.getCurrentValue=function(){return this._currentState.position},I.prototype.getDisplacementDistanceForState=function(t){return Math.abs(this._endValue-t.position)},I.prototype.setEndValue=function(t){if(t===this._endValue)return this;if(this.prevEndValue=t,this._endValue===t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var e=0,i=this.listeners.length;e<i;e++){var n=this.listeners[e].onSpringEndStateChange;n&&n(this)}return this},I.prototype.setVelocity=function(t){return t===this._currentState.velocity?this:(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId()),this)},I.prototype.setCurrentValue=function(t){this._startValue=t,this._currentState.position=t;for(var e=0,i=this.listeners.length;e<i;e++){var n=this.listeners[e];n.onSpringUpdate&&n.onSpringUpdate(this)}return this},I.prototype.setAtRest=function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},I.prototype.setOvershootClampingEnabled=function(t){return this._overshootClampingEnabled=t,this},I.prototype.isOvershooting=function(){var t=this._startValue,e=this._endValue;return this._springConfig.tension>0&&(t<e&&this.getCurrentValue()>e||t>e&&this.getCurrentValue()<e)},I.prototype.advance=function(t,e){var i=this.isAtRest();if(!i||!this._wasAtRest){var n=e;e>.064&&(n=.064),this._timeAccumulator+=n;for(var r,a,s,o,l,p,c=this._springConfig.tension,u=this._springConfig.friction,f=this._currentState.position,d=this._currentState.velocity,h=this._tempState.position,g=this._tempState.velocity;this._timeAccumulator>=.001;)this._timeAccumulator-=.001,this._timeAccumulator<.001&&(this._previousState.position=f,this._previousState.velocity=d),a=c*(this._endValue-h)-u*d,o=c*(this._endValue-(h=f+.001*(r=d)*.5))-u*(g=d+.001*a*.5),p=c*(this._endValue-(h=f+.001*(s=g)*.5))-u*(g=d+.001*o*.5),h=f+.001*(l=g),f+=1/6*(r+2*(s+l)+(g=d+.001*p))*.001,d+=1/6*(a+2*(o+p)+(c*(this._endValue-h)-u*g))*.001;this._tempState.position=h,this._tempState.velocity=g,this._currentState.position=f,this._currentState.velocity=d,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/.001),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),i=!0);var m=!1;this._wasAtRest&&(this._wasAtRest=!1,m=!0);var v=!1;i&&(this._wasAtRest=!0,v=!0),this.notifyPositionUpdated(m,v)}},I.prototype.notifyPositionUpdated=function(t,e){var i=this;this.listeners.filter(Boolean).forEach(function(n){t&&n.onSpringActivate&&!i._onActivateCalled&&(n.onSpringActivate(i),i._onActivateCalled=!0),n.onSpringUpdate&&n.onSpringUpdate(i),e&&n.onSpringAtRest&&n.onSpringAtRest(i)})},I.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},I.prototype.wasAtRest=function(){return this._wasAtRest},I.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},I.prototype._interpolate=function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},I.prototype.addListener=function(t){return this.listeners.push(t),this},I.prototype.addOneTimeListener=function(t){var e=this;return Object.keys(t).forEach(function(i){var n;t[i]=(n=t[i],function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];n.apply(void 0,i),e.removeListener(t)})}),this.listeners.push(t),this},I.prototype.removeListener=function(t){return E(this.listeners,t),this};var O=function(t){this.looper=t||new A,this.looper.springSystem=this,this.listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={}};O.prototype.createSpring=function(t,e){return this.createSpringWithConfig({tension:t,friction:e})},O.prototype.createSpringWithConfig=function(t){var e=new I(this);return this.registerSpring(e),e.setSpringConfig(t),e},O.prototype.getIsIdle=function(){return this._isIdle},O.prototype.registerSpring=function(t){this._springRegistry[t.getId()]=t},O.prototype.deregisterSpring=function(t){E(this._activeSprings,t),delete this._springRegistry[t.getId()]},O.prototype.advance=function(t,e){for(var i=this;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(this._activeSprings.filter(Boolean).forEach(function(n){n.systemShouldAdvance()?n.advance(t/1e3,e/1e3):i._idleSpringIndices.push(i._activeSprings.indexOf(n))});this._idleSpringIndices.length>0;){var n=this._idleSpringIndices.pop();n>=0&&this._activeSprings.splice(n,1)}},O.prototype.loop=function(t){var e;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var i=t-this._lastTimeMillis;this._lastTimeMillis=t;var n=0,r=this.listeners.length;for(n=0;n<r;n++)(e=this.listeners[n]).onBeforeIntegrate&&e.onBeforeIntegrate(this);for(this.advance(t,i),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),n=0;n<r;n++)(e=this.listeners[n]).onAfterIntegrate&&e.onAfterIntegrate(this);this._isIdle||this.looper.run()},O.prototype.activateSpring=function(t){var e=this._springRegistry[t];-1===this._activeSprings.indexOf(e)&&this._activeSprings.push(e),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())};var w=new O,x=function(t){var e=t.springConfig,i=e.overshootClamping,n=t.getOnUpdateFunc,r=t.onAnimationEnd,a=t.onSpringActivate,s=w.createSpring(e.stiffness,e.damping);s.setOvershootClampingEnabled(!!i);var o={onSpringActivate:a,onSpringAtRest:function(){s.destroy(),r()},onSpringUpdate:n({spring:s,onAnimationEnd:r})};return s.addListener(o),s},V=function(t){var e=x(t);return e.setEndValue(1),e},U=function(t,e){if(void 0===e&&(e={}),t&&t.length){e.reverse&&t.reverse();var i,n="number"!=typeof(i=e.speed)?1.1:1+Math.min(Math.max(5*i,0),5),r=1/Math.max(Math.min(t.length,100),10),a=t.map(function(t,e){var i=t.getOnUpdateFunc;return t.getOnUpdateFunc=function(t){var s=i(t);return function(t){var i=t.getCurrentValue();(i=i<.01?0:i>.99?1:i)>=r&&a[e+1]&&a[e+1](Math.max(Math.min(i*n,1),0)),s(t)}},t}).map(function(t){var e=x(t);if(e)return e.setEndValue.bind(e)}).filter(Boolean);a[0]&&a[0](1)}},F=function(t){return[0,1,4,5,12,13].map(function(e){return t[e]})},P=function(t){return t.top<window.innerHeight&&t.bottom>0&&t.left<window.innerWidth&&t.right>0},R=function(t,e){var i;return u(t,((i={})[e[0]]=e[1],i))},D=function(t,e){return l(e?document.querySelectorAll('[data-portal-key="'+e+'"]'):t.querySelectorAll("[data-flip-id]"))},T=function(t){return t.map(function(t){return[t,t.getBoundingClientRect()]})},M=function(p){var f=p.cachedOrderedFlipIds;void 0===f&&(f=[]);var h=p.inProgressAnimations;void 0===h&&(h={});var g=p.flippedElementPositionsBeforeUpdate;void 0===g&&(g={});var y=p.flipCallbacks;void 0===y&&(y={});var _=p.containerEl,S=p.applyTransformOrigin,E=p.spring,I=p.debug,A=p.portalKey,C=p.staggerConfig;void 0===C&&(C={});var b=p.decisionData;void 0===b&&(b={});var O=p.handleEnterUpdateDelete,w=p.onComplete,x=p.onStart,M=function(t){return T(D(t.element,t.portalKey)).map(function(t){var e=t[0],i=t[1],n=window.getComputedStyle(e);return[e.dataset.flipId,{element:e,rect:i,opacity:parseFloat(n.opacity),transform:n.transform}]}).reduce(R,{})}({element:_,portalKey:A}),k=function(t){var e=t.containerEl,i=t.portalKey;return i?function(t){return function(e){return l(document.querySelectorAll('[data-portal-key="'+t+'"]'+e))}}(i):e?function(t){var e=Math.random().toFixed(5);return t.dataset.flipperId=e,function(i){return l(t.querySelectorAll('[data-flipper-id="'+e+'"] '+i))}}(e):function(){return[]}}({containerEl:_,portalKey:A}),j=function(t){return function(e){return t('[data-flip-id="'+e+'"]')[0]}}(k),B=function(t){return g[t]&&M[t]},N=Object.keys(g).concat(Object.keys(M)).filter(function(t){return!B(t)}),L={flipCallbacks:y,getElement:j,flippedElementPositionsBeforeUpdate:g,flippedElementPositionsAfterUpdate:M,inProgressAnimations:h,decisionData:b},X=function(t){var e,i=t.unflippedIds,n=t.flipCallbacks,r=t.getElement,a=t.flippedElementPositionsBeforeUpdate,s=t.flippedElementPositionsAfterUpdate,o=t.inProgressAnimations,l=t.decisionData,p=i.filter(function(t){return s[t]}).filter(function(t){return n[t]&&n[t].onAppear}),c=i.filter(function(t){return a[t]&&n[t]&&n[t].onExit}),u=new Promise(function(t){e=t}),f=[],d=0,h=c.map(function(t,i){var r=a[t].domDataForExitAnimations,s=r.element,p=r.parent,c=r.childPosition,u=c.top,h=c.left,g=c.width,m=c.height;"static"===getComputedStyle(p).position&&(p.style.position="relative"),s.style.transform="matrix(1, 0, 0, 1, 0, 0)",s.style.position="absolute",s.style.top=u+"px",s.style.left=h+"px",s.style.height=m+"px",s.style.width=g+"px";var v=f.filter(function(t){return t[0]===p})[0];v||(v=[p,document.createDocumentFragment()],f.push(v)),v[1].appendChild(s),d+=1;var y=function(){try{p.removeChild(s)}catch(t){}finally{0==(d-=1)&&e()}};return o[t]={stop:y},function(){return n[t].onExit(s,i,y,l)}});return f.forEach(function(t){t[0].appendChild(t[1])}),h.length||e(),{hideEnteringElements:function(){p.forEach(function(t){var e=r(t);e&&(e.style.opacity="0")})},animateEnteringElements:function(){p.forEach(function(t,e){var i=r(t);i&&n[t].onAppear(i,e,l)})},animateExitingElements:function(){return h.forEach(function(t){return t()}),u}}}(u({},L,{unflippedIds:N})),Y=X.hideEnteringElements,q=X.animateEnteringElements,K=X.animateExitingElements,W=u({},L,{containerEl:_,flippedIds:f.filter(B),applyTransformOrigin:S,spring:E,debug:I,staggerConfig:C,scopedSelector:k,onComplete:w});x&&x(_,b);var J=function(p){var f=W.flippedIds,h=W.flipCallbacks,g=W.inProgressAnimations,y=W.flippedElementPositionsBeforeUpdate,_=W.flippedElementPositionsAfterUpdate,S=W.applyTransformOrigin,E=W.spring,I=W.getElement,A=W.debug,C=W.staggerConfig;void 0===C&&(C={});var b=W.decisionData;void 0===b&&(b={});var O,w=W.onComplete,x=W.containerEl,R=new Promise(function(t){O=t});if(w&&R.then(function(){return w(x,b)}),!f.length)return function(){return O([]),R};var D=[],T=I(f[0]),M=T?T.ownerDocument.querySelector("body"):document.querySelector("body");c(f);var k=f.map(function(p){var c=y[p].rect,f=_[p].rect,I=y[p].opacity,A=_[p].opacity,C=f.width<1||f.height<1,w=_[p].element;if(!P(c)&&!P(f))return!1;if(!w)return!1;var x=JSON.parse(w.dataset.flipConfig),U=function(t){void 0===t&&(t={});var e=t.flippedSpring;return u({},m.noWobble,v(t.flipperSpring),v(e))}({flipperSpring:E,flippedSpring:x.spring}),V=!0===x.stagger?"default":x.stagger,R={element:w,id:p,stagger:V,springConfig:U};if(h[p]&&h[p].shouldFlip&&!h[p].shouldFlip(b.previous,b.current))return!1;var T=Math.abs(c.left-f.left),j=Math.abs(c.top-f.top),B=T+j,N=Math.abs(c.width-f.width)+Math.abs(c.height-f.height),L=Math.abs(A-I);if(B<.5&&N<.5&&L<.01)return!1;var X=t(_[p].transform),Y={matrix:X},q={matrix:[]},K=[X];x.translate&&(K.push(e(c.left-f.left)),K.push(i(c.top-f.top))),x.scale&&(K.push(n(Math.max(c.width,1)/Math.max(f.width,1))),K.push(r(Math.max(c.height,1)/Math.max(f.height,1)))),x.opacity&&(q.opacity=I,Y.opacity=A);var W=[];if(!h[p]||!h[p].shouldInvert||h[p].shouldInvert(b.previous,b.current)){var J=function(t,e){return l(w.querySelectorAll('[data-inverse-flip-id="'+e+'"]'))}(0,p);W=J.map(function(t){return[t,JSON.parse(t.dataset.flipConfig)]})}q.matrix=F(K.reduce(o)),Y.matrix=F(Y.matrix);var H,z=function(t){var e=t.element,i=t.invertedChildren,n=t.body;return function(t){var r=t.matrix,s=t.opacity,o=t.forceMinVals;if(a(s)&&(e.style.opacity=s+""),o&&(e.style.minHeight="1px",e.style.minWidth="1px"),r){var l="matrix("+r.join(", ")+")";e.style.transform=l,i&&function(t){var e=t.matrix,i=t.body;t.invertedChildren.forEach(function(t){var n=t[0],r=t[1];if(i.contains(n)){var a=e[0],s=e[3],o=e[5],l={translateX:0,translateY:0,scaleX:1,scaleY:1},p="";r.translate&&(l.translateX=-e[4]/a,l.translateY=-o/s,p+="translate("+l.translateX+"px, "+l.translateY+"px)"),r.scale&&(l.scaleX=1/a,l.scaleY=1/s,p+=" scale("+l.scaleX+", "+l.scaleY+")"),n.style.transform=p}})}({invertedChildren:i,matrix:r,body:n})}}}({element:w,invertedChildren:W,body:M});if(h[p]&&h[p].onComplete){var G=h[p].onComplete;H=function(){return G(w,b)}}var Q=a(q.opacity)&&a(Y.opacity)&&q.opacity!==Y.opacity,Z=!1;return u({},R,{stagger:V,springConfig:U,getOnUpdateFunc:function(t){return g[p]={spring:t.spring,onAnimationEnd:t.onAnimationEnd,difference:{translateXDifference:T,translateYDifference:j,prevRect:c,currentRect:f}},function(t){h[p]&&h[p].onSpringUpdate&&h[p].onSpringUpdate(t.getCurrentValue()),Z||(Z=!0,h[p]&&h[p].onStart&&h[p].onStart(w,b));var e=t.getCurrentValue();if(M.contains(w)){var i={matrix:[]};i.matrix=q.matrix.map(function(t,i){return d(t,Y.matrix[i],e)}),Q&&(i.opacity=d(q.opacity,Y.opacity,e)),z(i)}else t.destroy()}},initializeFlip:function(){z({matrix:q.matrix,opacity:Q?q.opacity:void 0,forceMinVals:C}),h[p]&&h[p].onStartImmediate&&h[p].onStartImmediate(w,b),x.transformOrigin?w.style.transformOrigin=x.transformOrigin:S&&(w.style.transformOrigin="0 0"),W.forEach(function(t){var e=t[0],i=t[1];i.transformOrigin?e.style.transformOrigin=i.transformOrigin:S&&(e.style.transformOrigin="0 0")})},onAnimationEnd:function(){delete g[p],s(H)&&H(),w.style.transform="",W.forEach(function(t){t[0].style.transform=""}),C&&w&&(w.style.minHeight="",w.style.minWidth=""),D.push(p),D.length>=k.length&&O(D)},delayUntil:x.delayUntil})}).filter(Boolean);if(k.forEach(function(t){return(0,t.initializeFlip)()}),A)return function(){};var j=k.filter(function(t){return t.delayUntil&&(e=t.delayUntil,k.filter(function(t){return t.id===e}).length);var e}),B={},N={},L={};j.forEach(function(t){t.stagger?(L[t.stagger]=!0,N[t.delayUntil]?N[t.delayUntil].push(t.stagger):N[t.delayUntil]=[t.stagger]):B[t.delayUntil]?B[t.delayUntil].push(t):B[t.delayUntil]=[t]});var X=k.filter(function(t){return t.stagger}).reduce(function(t,e){return t[e.stagger]?t[e.stagger].push(e):t[e.stagger]=[e],t},{}),Y=k.filter(function(t){return-1===j.indexOf(t)});return Y.forEach(function(t){t.onSpringActivate=function(){B[t.id]&&B[t.id].forEach(V),N[t.id]&&Object.keys(N[t.id].reduce(function(t,e){var i;return u(t,((i={})[e]=!0,i))},{})).forEach(function(t){U(X[t],C[t])})}}),function(){return k.length||O([]),Y.filter(function(t){return!t.stagger}).forEach(V),Object.keys(X).forEach(function(t){L[t]||U(X[t],C[t])}),R}}();O?O({hideEnteringElements:Y,animateEnteringElements:q,animateExitingElements:K,animateFlippedElements:J}):(Y(),K().then(q),J())},k=function(t){var e=t.element,i=t.flipCallbacks;void 0===i&&(i={});var n=t.inProgressAnimations;void 0===n&&(n={});var r=D(e,t.portalKey),a=l(e.querySelectorAll("[data-inverse-flip-id]")),s={},o=[],p={};r.filter(function(t){return i&&i[t.dataset.flipId]&&i[t.dataset.flipId].onExit}).forEach(function(t){var e=t.parentNode;if(t.closest){var i=t.closest("[data-exit-container]");i&&(e=i)}var n=o.findIndex(function(t){return t[0]===e});-1===n&&(o.push([e,e.getBoundingClientRect()]),n=o.length-1),s[t.dataset.flipId]=o[n][1],p[t.dataset.flipId]=e});var c=T(r),f=c.map(function(t){var e=t[0],n=t[1],r={};if(i&&i[e.dataset.flipId]&&i[e.dataset.flipId].onExit){var a=s[e.dataset.flipId];u(r,{element:e,parent:p[e.dataset.flipId],childPosition:{top:n.top-a.top,left:n.left-a.left,width:n.width,height:n.height}})}return[e.dataset.flipId,{rect:n,opacity:parseFloat(window.getComputedStyle(e).opacity||"1"),domDataForExitAnimations:r}]}).reduce(R,{});return function(t,e){Object.keys(t).forEach(function(e){t[e].spring&&t[e].spring.destroy(),delete t[e]}),e.forEach(function(t){t.style.transform="",t.style.opacity=""})}(n,r.concat(a)),{flippedElementPositions:f,cachedOrderedFlipIds:c.map(function(t){return t[0].dataset.flipId})}},j=function(t){this.applyTransformOrigin=!0,u(this,t),this.inProgressAnimations={},this.flipCallbacks={},this.recordBeforeUpdate=this.recordBeforeUpdate.bind(this),this.update=this.update.bind(this),this.addFlipped=this.addFlipped.bind(this),this.addInverted=this.addInverted.bind(this)};j.prototype.recordBeforeUpdate=function(){this.snapshot=k({element:this.element,flipCallbacks:this.flipCallbacks,inProgressAnimations:this.inProgressAnimations})},j.prototype.update=function(t,e){this.snapshot&&(M({flippedElementPositionsBeforeUpdate:this.snapshot.flippedElementPositions,cachedOrderedFlipIds:this.snapshot.cachedOrderedFlipIds,containerEl:this.element,inProgressAnimations:this.inProgressAnimations,flipCallbacks:this.flipCallbacks,applyTransformOrigin:this.applyTransformOrigin,spring:this.spring,debug:this.debug,staggerConfig:this.staggerConfig,handleEnterUpdateDelete:this.handleEnterUpdateDelete,decisionData:{previous:t,current:e},onComplete:this.onComplete,onStart:this.onStart}),delete this.snapshot)},j.prototype.addFlipped=function(t){var e=t.element,i=t.flipId,n=t.opacity,r=t.translate,a=t.scale,s=t.transformOrigin,o=t.spring,l=t.stagger,p=t.onAppear,c=t.onStart,f=t.onSpringUpdate,d=t.onComplete,h=t.onExit,g=t.shouldFlip,m=t.shouldInvert;if(!e)throw new Error("no element provided");if(!i)throw new Error("No flipId provided");var v={scale:a,translate:r,opacity:n,transformOrigin:s,spring:o,stagger:l};v.scale||v.translate||v.opacity||u(v,{translate:!0,scale:!0,opacity:!0}),i&&(e.dataset.flipId=String(i)),e.dataset.flipConfig=JSON.stringify(v),this.flipCallbacks[i]={shouldFlip:g,shouldInvert:m,onAppear:p,onStart:c,onSpringUpdate:f,onComplete:d,onExit:h}},j.prototype.addInverted=function(t){var e=t.element,i=t.parent,n=t.opacity,r=t.translate,a=t.scale,s=t.transformOrigin;if(!e)throw new Error("no element provided");if(!i)throw new Error("parent must be provided");var o=i.dataset.flipId,l={scale:a,translate:r,opacity:n,transformOrigin:s};l.scale||l.translate||l.opacity||u(l,{translate:!0,scale:!0,opacity:!0}),e.dataset.inverseFlipId=o,e.dataset.flipConfig=JSON.stringify(l)};var B=new O,N=function(t){var e=t.values,i=t.onUpdate,n=t.delay;void 0===n&&(n=0);var r=t.onComplete,a=u({},m.noWobble,v(t.config)),s=a.overshootClamping,o=B.createSpring(a.stiffness,a.damping);return o.setOvershootClampingEnabled(!!s),o.addListener({onSpringAtRest:function(t){r&&r(),t.destroy()},onSpringUpdate:function(t){var n=t.getCurrentValue();if(!e)return i(n);var r=Object.keys(e).map(function(t){return[t,d(e[t][0],e[t][1],n)]}).reduce(function(t,e){var i;return Object.assign(t,((i={})[e[0]]=e[1],i))},{});i(r)}}),n?setTimeout(function(){o.setEndValue(1)},n):o.setEndValue(1),o};export{h as utilities,g as constants,j as Flipper,k as getFlippedElementPositionsBeforeUpdate,M as onFlipKeyUpdate,N as spring};