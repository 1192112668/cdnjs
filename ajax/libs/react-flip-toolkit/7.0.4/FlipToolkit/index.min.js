var t=require("rematrix"),e=function(t){return"number"==typeof t},i=function(t){return"function"==typeof t},n=function(t){return"[object Object]"===Object.prototype.toString.call(t)},r=function(t){return Array.prototype.slice.apply(t)},o=function(t){var e=t.reduce(function(t,e){return t[e]=(t[e]||0)+1,t},{});return Object.keys(e).filter(function(t){return 1<e[t]})};function s(i){for(var t=[],e=arguments.length-1;0<e--;)t[e]=arguments[e+1];return t.forEach(function(t){if(t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])}),i}var a,p=function(t,e,i){return t+(e-t)*i},l={isNumber:e,isFunction:i,isObject:n,toArray:r,getDuplicateValsAsStrings:o,assign:s,tweenProp:p},c={noWobble:{stiffness:200,damping:26},gentle:{stiffness:120,damping:14},veryGentle:{stiffness:130,damping:17},wobbly:{stiffness:180,damping:12},stiff:{stiffness:260,damping:26}},u=function(t){return n(t)?t:-1<Object.keys(c).indexOf(t)?c[t]:{}};"undefined"!=typeof window&&(a=window.requestAnimationFrame);var f=a=a||function(t){window.setTimeout(t,1e3/60)},d=Date.now(),h="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()-d};function g(t,e){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}var m=function(){};m.prototype.run=function(){var t=this;f(function(){t.springSystem.loop(h())})};var v=function(){this.position=0,this.velocity=0},y=0,_=function(t){this._id="s"+y++,this._springSystem=t,this.listeners=[],this._startValue=0,this._currentState=new v,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new v,this._restSpeedThreshold=.001,this._tempState=new v,this._timeAccumulator=0,this._wasAtRest=!0,this._cachedSpringConfig={}};_.prototype.getId=function(){return this._id},_.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},_.prototype.setSpringConfig=function(t){return this._springConfig=t,this},_.prototype.getCurrentValue=function(){return this._currentState.position},_.prototype.getDisplacementDistanceForState=function(t){return Math.abs(this._endValue-t.position)},_.prototype.setEndValue=function(t){if(t===this._endValue)return this;if(this.prevEndValue=t,this._endValue===t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var e=0,i=this.listeners.length;e<i;e++){var n=this.listeners[e].onSpringEndStateChange;n&&n(this)}return this},_.prototype.setVelocity=function(t){return t===this._currentState.velocity||(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId())),this},_.prototype.setCurrentValue=function(t){this._startValue=t,this._currentState.position=t;for(var e=0,i=this.listeners.length;e<i;e++){var n=this.listeners[e];n.onSpringUpdate&&n.onSpringUpdate(this)}return this},_.prototype.setAtRest=function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},_.prototype.setOvershootClampingEnabled=function(t){return this._overshootClampingEnabled=t,this},_.prototype.isOvershooting=function(){var t=this._startValue,e=this._endValue;return 0<this._springConfig.tension&&(t<e&&this.getCurrentValue()>e||e<t&&this.getCurrentValue()<e)},_.prototype.advance=function(t,e){var i=this.isAtRest();if(!i||!this._wasAtRest){var n=.064<e?.064:e;this._timeAccumulator+=n;for(var r,s,o,a,p=this._springConfig.tension,l=this._springConfig.friction,c=this._currentState.position,u=this._currentState.velocity,d=this._tempState.position,f=this._tempState.velocity;.001<=this._timeAccumulator;)this._timeAccumulator-=.001,this._timeAccumulator<.001&&(this._previousState.position=c,this._previousState.velocity=u),r=p*(this._endValue-d)-l*u,o=p*(this._endValue-(d=c+.001*u*.5))-l*(f=u+.001*r*.5),a=p*(this._endValue-(d=c+.001*(s=f)*.5))-l*(f=u+.001*o*.5),d=c+.001*f,c+=1/6*(u+2*(s+f)+(f=u+.001*a))*.001,u+=1/6*(r+2*(o+a)+(p*(this._endValue-d)-l*f))*.001;this._tempState.position=d,this._tempState.velocity=f,this._currentState.position=c,this._currentState.velocity=u,0<this._timeAccumulator&&this._interpolate(this._timeAccumulator/.001),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(0<this._springConfig.tension?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),i=!0);var h=!1;this._wasAtRest&&(h=!(this._wasAtRest=!1));var g=!1;i&&(g=this._wasAtRest=!0),this.notifyPositionUpdated(h,g)}},_.prototype.notifyPositionUpdated=function(e,i){var n=this;this.listeners.filter(Boolean).forEach(function(t){e&&t.onSpringActivate&&!n._onActivateCalled&&(t.onSpringActivate(n),n._onActivateCalled=!0),t.onSpringUpdate&&t.onSpringUpdate(n),i&&t.onSpringAtRest&&t.onSpringAtRest(n)})},_.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},_.prototype.wasAtRest=function(){return this._wasAtRest},_.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},_.prototype._interpolate=function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},_.prototype.addListener=function(t){return this.listeners.push(t),this},_.prototype.addOneTimeListener=function(n){var r=this;return Object.keys(n).forEach(function(t){var i;n[t]=(i=n[t],function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];i.apply(void 0,t),r.removeListener(n)})}),this.listeners.push(n),this},_.prototype.removeListener=function(t){return g(this.listeners,t),this};var S=function(t){this.looper=t||new m,(this.looper.springSystem=this).listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={}};S.prototype.createSpring=function(t,e){return this.createSpringWithConfig({tension:t,friction:e})},S.prototype.createSpringWithConfig=function(t){var e=new _(this);return this.registerSpring(e),e.setSpringConfig(t),e},S.prototype.getIsIdle=function(){return this._isIdle},S.prototype.registerSpring=function(t){this._springRegistry[t.getId()]=t},S.prototype.deregisterSpring=function(t){g(this._activeSprings,t),delete this._springRegistry[t.getId()]},S.prototype.advance=function(e,i){for(var n=this;0<this._idleSpringIndices.length;)this._idleSpringIndices.pop();for(this._activeSprings.filter(Boolean).forEach(function(t){t.systemShouldAdvance()?t.advance(e/1e3,i/1e3):n._idleSpringIndices.push(n._activeSprings.indexOf(t))});0<this._idleSpringIndices.length;){var t=this._idleSpringIndices.pop();0<=t&&this._activeSprings.splice(t,1)}},S.prototype.loop=function(t){var e;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var i=t-this._lastTimeMillis;this._lastTimeMillis=t;for(var n=0,r=this.listeners.length,n=0;n<r;n++)(e=this.listeners[n]).onBeforeIntegrate&&e.onBeforeIntegrate(this);for(this.advance(t,i),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),n=0;n<r;n++)(e=this.listeners[n]).onAfterIntegrate&&e.onAfterIntegrate(this);this._isIdle||this.looper.run()},S.prototype.activateSpring=function(t){var e=this._springRegistry[t];-1===this._activeSprings.indexOf(e)&&this._activeSprings.push(e),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())};var E=new S,A=function(t){var e=t.springConfig,i=e.overshootClamping,n=t.getOnUpdateFunc,r=t.onAnimationEnd,s=t.onSpringActivate,o=E.createSpring(e.stiffness,e.damping);o.setOvershootClampingEnabled(!!i);var a={onSpringActivate:s,onSpringAtRest:function(){o.destroy(),r()},onSpringUpdate:n({spring:o,onAnimationEnd:r})};return o.addListener(a),o},C=function(t){var e=A(t);return e.setEndValue(1),e},b=function(t,e){var i,r,s,o;void 0===e&&(e={}),t&&t.length&&(e.reverse&&t.reverse(),r="number"!=typeof(i=e.speed)?1.1:1+Math.min(Math.max(5*i,0),5),s=1/Math.max(Math.min(t.length,100),10),(o=t.map(function(t,n){var e=t.getOnUpdateFunc;return t.getOnUpdateFunc=function(t){var i=e(t);return function(t){var e=t.getCurrentValue();(e=e<.01?0:.99<e?1:e)>=s&&o[n+1]&&o[n+1](Math.max(Math.min(e*r,1),0)),i(t)}},t}).map(function(t){var e=A(t);if(e)return e.setEndValue.bind(e)}).filter(Boolean))[0]&&o[0](1))},I=function(e){return[0,1,4,5,12,13].map(function(t){return e[t]})},O=function(t){return t.top<window.innerHeight&&0<t.bottom&&t.left<window.innerWidth&&0<t.right},x=function(t,e){var i;return s(t,((i={})[e[0]]=e[1],i))},w=function(t,e){return r(e?document.querySelectorAll('[data-portal-key="'+e+'"]'):t.querySelectorAll("[data-flip-id]"))},U=function(t){return t.map(function(t){return[t,t.getBoundingClientRect()]})},V=function(n){var a=n.cachedOrderedFlipIds;void 0===a&&(a=[]);var l=n.inProgressAnimations;void 0===l&&(l={});var d=n.flippedElementPositionsBeforeUpdate;void 0===d&&(d={});var f=n.flipCallbacks;void 0===f&&(f={});var h=n.containerEl,g=n.applyTransformOrigin,m=n.spring,v=n.debug,y=n.portalKey,_=n.staggerConfig;void 0===_&&(_={});var S=n.decisionData;void 0===S&&(S={});function E(t){return d[t]&&et[t]}var A,V,F,P,R,D,T,M,k,j,B,N,L,q,X,Y,K,W,J,H,z,G,Q,Z=n.handleEnterUpdateDelete,$=n.onComplete,tt=n.onStart,et=U(w((Q={element:h,portalKey:y}).element,Q.portalKey)).map(function(t){var e=t[0],i=t[1],n=window.getComputedStyle(e);return[e.dataset.flipId,{element:e,rect:i,opacity:parseFloat(n.opacity),transform:n.transform}]}).reduce(x,{}),it=(z=(K={containerEl:h,portalKey:y}).containerEl,(G=K.portalKey)?(H=G,function(t){return r(document.querySelectorAll('[data-portal-key="'+H+'"]'+t))}):z?(W=z,J=Math.random().toFixed(5),W.dataset.flipperId=J,function(t){return r(W.querySelectorAll('[data-flipper-id="'+J+'"] '+t))}):function(){return[]}),nt=(Y=it,function(t){return Y('[data-flip-id="'+t+'"]')[0]}),rt=Object.keys(d).concat(Object.keys(et)).filter(function(t){return!E(t)}),st={flipCallbacks:f,getElement:nt,flippedElementPositionsBeforeUpdate:d,flippedElementPositionsAfterUpdate:et,inProgressAnimations:l,decisionData:S},ot=(A=s({},st,{unflippedIds:rt}),F=A.unflippedIds,P=A.flipCallbacks,R=A.getElement,D=A.flippedElementPositionsBeforeUpdate,T=A.flippedElementPositionsAfterUpdate,M=A.inProgressAnimations,k=A.decisionData,j=F.filter(function(t){return T[t]}).filter(function(t){return P[t]&&P[t].onAppear}),B=F.filter(function(t){return D[t]&&P[t]&&P[t].onExit}),N=new Promise(function(t){V=t}),L=[],q=0,X=B.map(function(t,e){var i=D[t].domDataForExitAnimations,n=i.element,r=i.parent,s=i.childPosition,o=s.top,a=s.left,p=s.width,l=s.height;"static"===getComputedStyle(r).position&&(r.style.position="relative"),n.style.transform="matrix(1, 0, 0, 1, 0, 0)",n.style.position="absolute",n.style.top=o+"px",n.style.left=a+"px",n.style.height=l+"px",n.style.width=p+"px";var c=L.filter(function(t){return t[0]===r})[0];c||(c=[r,document.createDocumentFragment()],L.push(c)),c[1].appendChild(n),q+=1;function u(){try{r.removeChild(n)}catch(t){}finally{0==--q&&V()}}return M[t]={stop:u},function(){return P[t].onExit(n,e,u,k)}}),L.forEach(function(t){t[0].appendChild(t[1])}),X.length||V(),{hideEnteringElements:function(){j.forEach(function(t){var e=R(t);e&&(e.style.opacity="0")})},animateEnteringElements:function(){j.forEach(function(t,e){var i=R(t);i&&P[t].onAppear(i,e,k)})},animateExitingElements:function(){return X.forEach(function(t){return t()}),N}}),at=ot.hideEnteringElements,pt=ot.animateEnteringElements,lt=ot.animateExitingElements,ct=s({},st,{containerEl:h,flippedIds:a.filter(E),applyTransformOrigin:g,spring:m,debug:v,staggerConfig:_,scopedSelector:it,onComplete:$});tt&&tt(h,S);var ut=function(){var n=ct.flippedIds,N=ct.flipCallbacks,L=ct.inProgressAnimations,q=ct.flippedElementPositionsBeforeUpdate,X=ct.flippedElementPositionsAfterUpdate,Y=ct.applyTransformOrigin,K=ct.spring,a=ct.getElement,l=ct.debug,d=ct.staggerConfig;void 0===d&&(d={});var W=ct.decisionData;void 0===W&&(W={});var J,f=ct.onComplete,h=ct.containerEl,g=new Promise(function(t){J=t});if(f&&g.then(function(){return f(h,W)}),!n.length)return function(){return J([]),g};var H=[],m=a(n[0]),z=m?m.ownerDocument.querySelector("body"):document.querySelector("body");o(n);var G=n.map(function(n){var o=q[n].rect,a=X[n].rect,l=q[n].opacity,d=X[n].opacity,f=a.width<1||a.height<1,h=X[n].element;if(!O(o)&&!O(a))return!1;if(!h)return!1;var g=JSON.parse(h.dataset.flipConfig),m=function(t){void 0===t&&(t={});var e=t.flippedSpring;return s({},c.noWobble,u(t.flipperSpring),u(e))}({flipperSpring:K,flippedSpring:g.spring}),v=!0===g.stagger?"default":g.stagger,y={element:h,id:n,stagger:v,springConfig:m};if(N[n]&&N[n].shouldFlip&&!N[n].shouldFlip(W.previous,W.current))return!1;var _=Math.abs(o.left-a.left),S=Math.abs(o.top-a.top),E=_+S,A=Math.abs(o.width-a.width)+Math.abs(o.height-a.height),C=Math.abs(d-l);if(E<.5&&A<.5&&C<.01)return!1;var b=t.parse(X[n].transform),x={matrix:b},w={matrix:[]},U=[b];g.translate&&(U.push(t.translateX(o.left-a.left)),U.push(t.translateY(o.top-a.top))),g.scale&&(U.push(t.scaleX(Math.max(o.width,1)/Math.max(a.width,1))),U.push(t.scaleY(Math.max(o.height,1)/Math.max(a.height,1)))),g.opacity&&(w.opacity=l,x.opacity=d);var V=[];N[n]&&N[n].shouldInvert&&!N[n].shouldInvert(W.previous,W.current)||(V=r(h.querySelectorAll('[data-inverse-flip-id="'+n+'"]')).map(function(t){return[t,JSON.parse(t.dataset.flipConfig)]})),w.matrix=I(U.reduce(t.multiply)),x.matrix=I(x.matrix);var F,P,R,D,T,M,k=(P=(F={element:h,invertedChildren:V,body:z}).element,R=F.invertedChildren,D=F.body,function(t){var i,n,p,l,r=t.matrix,s=t.opacity,o=t.forceMinVals;e(s)&&(P.style.opacity=s+""),o&&(P.style.minHeight="1px",P.style.minWidth="1px"),r&&(i="matrix("+r.join(", ")+")",P.style.transform=i,R&&(p=(n={invertedChildren:R,matrix:r,body:D}).matrix,l=n.body,n.invertedChildren.forEach(function(t){var e,i,n,r,s,o=t[0],a=t[1];l.contains(o)&&(e=p[0],i=p[3],n=p[5],r={translateX:0,translateY:0,scaleX:1,scaleY:1},s="",a.translate&&(r.translateX=-p[4]/e,r.translateY=-n/i,s+="translate("+r.translateX+"px, "+r.translateY+"px)"),a.scale&&(r.scaleX=1/e,r.scaleY=1/i,s+=" scale("+r.scaleX+", "+r.scaleY+")"),o.style.transform=s)})))});N[n]&&N[n].onComplete&&(T=N[n].onComplete,M=function(){return T(h,W)});var j=e(w.opacity)&&e(x.opacity)&&w.opacity!==x.opacity,B=!1;return s({},y,{stagger:v,springConfig:m,getOnUpdateFunc:function(t){return L[n]={spring:t.spring,onAnimationEnd:t.onAnimationEnd,difference:{translateXDifference:_,translateYDifference:S,prevRect:o,currentRect:a}},function(t){N[n]&&N[n].onSpringUpdate&&N[n].onSpringUpdate(t.getCurrentValue()),B||(B=!0,N[n]&&N[n].onStart&&N[n].onStart(h,W));var e,i=t.getCurrentValue();z.contains(h)?((e={matrix:[]}).matrix=w.matrix.map(function(t,e){return p(t,x.matrix[e],i)}),j&&(e.opacity=p(w.opacity,x.opacity,i)),k(e)):t.destroy()}},initializeFlip:function(){k({matrix:w.matrix,opacity:j?w.opacity:void 0,forceMinVals:f}),N[n]&&N[n].onStartImmediate&&N[n].onStartImmediate(h,W),g.transformOrigin?h.style.transformOrigin=g.transformOrigin:Y&&(h.style.transformOrigin="0 0"),V.forEach(function(t){var e=t[0],i=t[1];i.transformOrigin?e.style.transformOrigin=i.transformOrigin:Y&&(e.style.transformOrigin="0 0")})},onAnimationEnd:function(){delete L[n],i(M)&&M(),h.style.transform="",V.forEach(function(t){t[0].style.transform=""}),f&&h&&(h.style.minHeight="",h.style.minWidth=""),H.push(n),H.length>=G.length&&J(H)},delayUntil:g.delayUntil})}).filter(Boolean);if(G.forEach(function(t){return(0,t.initializeFlip)()}),l)return function(){};var v=G.filter(function(t){return t.delayUntil&&(e=t.delayUntil,G.filter(function(t){return t.id===e}).length);var e}),y={},_={},S={};v.forEach(function(t){t.stagger?(S[t.stagger]=!0,_[t.delayUntil]?_[t.delayUntil].push(t.stagger):_[t.delayUntil]=[t.stagger]):y[t.delayUntil]?y[t.delayUntil].push(t):y[t.delayUntil]=[t]});var E=G.filter(function(t){return t.stagger}).reduce(function(t,e){return t[e.stagger]?t[e.stagger].push(e):t[e.stagger]=[e],t},{}),A=G.filter(function(t){return-1===v.indexOf(t)});return A.forEach(function(t){t.onSpringActivate=function(){y[t.id]&&y[t.id].forEach(C),_[t.id]&&Object.keys(_[t.id].reduce(function(t,e){var i;return s(t,((i={})[e]=!0,i))},{})).forEach(function(t){b(E[t],d[t])})}}),function(){return G.length||J([]),A.filter(function(t){return!t.stagger}).forEach(C),Object.keys(E).forEach(function(t){S[t]||b(E[t],d[t])}),g}}();Z?Z({hideEnteringElements:at,animateEnteringElements:pt,animateExitingElements:lt,animateFlippedElements:ut}):(at(),lt().then(pt),ut())},F=function(t){var e=t.element,o=t.flipCallbacks;void 0===o&&(o={});var i=t.inProgressAnimations;void 0===i&&(i={});var n=w(e,t.portalKey),a=r(e.querySelectorAll("[data-inverse-flip-id]")),p={},l=[],c={};n.filter(function(t){return o&&o[t.dataset.flipId]&&o[t.dataset.flipId].onExit}).forEach(function(t){var e,i=t.parentNode;!t.closest||(e=t.closest("[data-exit-container]"))&&(i=e);var n=l.findIndex(function(t){return t[0]===i});-1===n&&(l.push([i,i.getBoundingClientRect()]),n=l.length-1),p[t.dataset.flipId]=l[n][1],c[t.dataset.flipId]=i});var u,d,f=U(n),h=f.map(function(t){var e,i=t[0],n=t[1],r={};return o&&o[i.dataset.flipId]&&o[i.dataset.flipId].onExit&&(e=p[i.dataset.flipId],s(r,{element:i,parent:c[i.dataset.flipId],childPosition:{top:n.top-e.top,left:n.left-e.left,width:n.width,height:n.height}})),[i.dataset.flipId,{rect:n,opacity:parseFloat(window.getComputedStyle(i).opacity||"1"),domDataForExitAnimations:r}]}).reduce(x,{});return u=i,d=n.concat(a),Object.keys(u).forEach(function(t){u[t].spring&&u[t].spring.destroy(),delete u[t]}),d.forEach(function(t){t.style.transform="",t.style.opacity=""}),{flippedElementPositions:h,cachedOrderedFlipIds:f.map(function(t){return t[0].dataset.flipId})}},P=function(t){this.applyTransformOrigin=!0,s(this,t),this.inProgressAnimations={},this.flipCallbacks={},this.recordBeforeUpdate=this.recordBeforeUpdate.bind(this),this.update=this.update.bind(this),this.addFlipped=this.addFlipped.bind(this),this.addInverted=this.addInverted.bind(this)};P.prototype.recordBeforeUpdate=function(){this.snapshot=F({element:this.element,flipCallbacks:this.flipCallbacks,inProgressAnimations:this.inProgressAnimations})},P.prototype.update=function(t,e){this.snapshot&&(V({flippedElementPositionsBeforeUpdate:this.snapshot.flippedElementPositions,cachedOrderedFlipIds:this.snapshot.cachedOrderedFlipIds,containerEl:this.element,inProgressAnimations:this.inProgressAnimations,flipCallbacks:this.flipCallbacks,applyTransformOrigin:this.applyTransformOrigin,spring:this.spring,debug:this.debug,staggerConfig:this.staggerConfig,handleEnterUpdateDelete:this.handleEnterUpdateDelete,decisionData:{previous:t,current:e},onComplete:this.onComplete,onStart:this.onStart}),delete this.snapshot)},P.prototype.addFlipped=function(t){var e=t.element,i=t.flipId,n=t.opacity,r=t.translate,o=t.scale,a=t.transformOrigin,p=t.spring,l=t.stagger,c=t.onAppear,u=t.onStart,d=t.onSpringUpdate,f=t.onComplete,h=t.onExit,g=t.shouldFlip,m=t.shouldInvert;if(!e)throw new Error("no element provided");if(!i)throw new Error("No flipId provided");var v={scale:o,translate:r,opacity:n,transformOrigin:a,spring:p,stagger:l};v.scale||v.translate||v.opacity||s(v,{translate:!0,scale:!0,opacity:!0}),i&&(e.dataset.flipId=String(i)),e.dataset.flipConfig=JSON.stringify(v),this.flipCallbacks[i]={shouldFlip:g,shouldInvert:m,onAppear:c,onStart:u,onSpringUpdate:d,onComplete:f,onExit:h}},P.prototype.addInverted=function(t){var e=t.element,i=t.parent,n=t.opacity,r=t.translate,o=t.scale,a=t.transformOrigin;if(!e)throw new Error("no element provided");if(!i)throw new Error("parent must be provided");var p=i.dataset.flipId,l={scale:o,translate:r,opacity:n,transformOrigin:a};l.scale||l.translate||l.opacity||s(l,{translate:!0,scale:!0,opacity:!0}),e.dataset.inverseFlipId=p,e.dataset.flipConfig=JSON.stringify(l)};var R=new S;exports.utilities=l,exports.constants={DATA_FLIP_ID:"data-flip-id",DATA_INVERSE_FLIP_ID:"data-inverse-flip-id",DATA_FLIP_COMPONENT_ID:"data-flip-component-id",DATA_FLIP_CONFIG:"data-flip-config",DATA_PORTAL_KEY:"data-portal-key",DATA_EXIT_CONTAINER:"data-exit-container"},exports.Flipper=P,exports.getFlippedElementPositionsBeforeUpdate=F,exports.onFlipKeyUpdate=V,exports.spring=function(t){var n=t.values,r=t.onUpdate,e=t.delay;void 0===e&&(e=0);var i=t.onComplete,o=s({},c.noWobble,u(t.config)),a=o.overshootClamping,l=R.createSpring(o.stiffness,o.damping);return l.setOvershootClampingEnabled(!!a),l.addListener({onSpringAtRest:function(t){i&&i(),t.destroy()},onSpringUpdate:function(t){var e=t.getCurrentValue();if(!n)return r(e);var i=Object.keys(n).map(function(t){return[t,p(n[t][0],n[t][1],e)]}).reduce(function(t,e){var i;return Object.assign(t,((i={})[e[0]]=e[1],i))},{});r(i)}}),e?setTimeout(function(){l.setEndValue(1)},e):l.setEndValue(1),l};