function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var e=require("rematrix"),n=(t(require("prop-types")),require("react")),i=t(n),r=function(t){return"number"==typeof t},o=function(t){return"[object Object]"===Object.prototype.toString.call(t)},a=function(t){return Array.prototype.slice.apply(t)};function s(n){for(var t=[],e=arguments.length-1;0<e--;)t[e]=arguments[e+1];return t.forEach(function(t){if(t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}),n}var l,p=function(t,e,n){return t+(e-t)*n},c={noWobble:{stiffness:200,damping:26},gentle:{stiffness:120,damping:14},veryGentle:{stiffness:130,damping:17},wobbly:{stiffness:180,damping:12},stiff:{stiffness:260,damping:26}},u=function(t){return o(t)?t:-1<Object.keys(c).indexOf(t)?c[t]:{}};"undefined"!=typeof window&&(l=window.requestAnimationFrame);var f=l=l||function(t){window.setTimeout(t,1e3/60)},d=Date.now(),h="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()-d};function g(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var m=function(){};m.prototype.run=function(){var t=this;f(function(){t.springSystem.loop(h())})};var v=function(){this.position=0,this.velocity=0},y=0,S=function(t){this._id="s"+y++,this._springSystem=t,this.listeners=[],this._startValue=0,this._currentState=new v,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new v,this._restSpeedThreshold=.001,this._tempState=new v,this._timeAccumulator=0,this._wasAtRest=!0,this._cachedSpringConfig={}};S.prototype.getId=function(){return this._id},S.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},S.prototype.setSpringConfig=function(t){return this._springConfig=t,this},S.prototype.getCurrentValue=function(){return this._currentState.position},S.prototype.getDisplacementDistanceForState=function(t){return Math.abs(this._endValue-t.position)},S.prototype.setEndValue=function(t){if(t===this._endValue)return this;if(this.prevEndValue=t,this._endValue===t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var e=0,n=this.listeners.length;e<n;e++){var i=this.listeners[e].onSpringEndStateChange;i&&i(this)}return this},S.prototype.setVelocity=function(t){return t===this._currentState.velocity||(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId())),this},S.prototype.setCurrentValue=function(t){this._startValue=t,this._currentState.position=t;for(var e=0,n=this.listeners.length;e<n;e++){var i=this.listeners[e];i.onSpringUpdate&&i.onSpringUpdate(this)}return this},S.prototype.setAtRest=function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},S.prototype.setOvershootClampingEnabled=function(t){return this._overshootClampingEnabled=t,this},S.prototype.isOvershooting=function(){var t=this._startValue,e=this._endValue;return 0<this._springConfig.tension&&(t<e&&this.getCurrentValue()>e||e<t&&this.getCurrentValue()<e)},S.prototype.advance=function(t,e){var n=this.isAtRest();if(!n||!this._wasAtRest){var i=.064<e?.064:e;this._timeAccumulator+=i;for(var r,o,s,a,l=this._springConfig.tension,p=this._springConfig.friction,c=this._currentState.position,u=this._currentState.velocity,f=this._tempState.position,d=this._tempState.velocity;.001<=this._timeAccumulator;)this._timeAccumulator-=.001,this._timeAccumulator<.001&&(this._previousState.position=c,this._previousState.velocity=u),r=l*(this._endValue-f)-p*u,s=l*(this._endValue-(f=c+.001*u*.5))-p*(d=u+.001*r*.5),a=l*(this._endValue-(f=c+.001*(o=d)*.5))-p*(d=u+.001*s*.5),f=c+.001*d,c+=1/6*(u+2*(o+d)+(d=u+.001*a))*.001,u+=1/6*(r+2*(s+a)+(l*(this._endValue-f)-p*d))*.001;this._tempState.position=f,this._tempState.velocity=d,this._currentState.position=c,this._currentState.velocity=u,0<this._timeAccumulator&&this._interpolate(this._timeAccumulator/.001),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(0<this._springConfig.tension?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),n=!0);var h=!1;this._wasAtRest&&(h=!(this._wasAtRest=!1));var g=!1;n&&(g=this._wasAtRest=!0),this.notifyPositionUpdated(h,g)}},S.prototype.notifyPositionUpdated=function(e,n){var i=this;this.listeners.filter(Boolean).forEach(function(t){e&&t.onSpringActivate&&!i._onActivateCalled&&(t.onSpringActivate(i),i._onActivateCalled=!0),t.onSpringUpdate&&t.onSpringUpdate(i),n&&t.onSpringAtRest&&t.onSpringAtRest(i)})},S.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},S.prototype.wasAtRest=function(){return this._wasAtRest},S.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},S.prototype._interpolate=function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},S.prototype.addListener=function(t){return this.listeners.push(t),this},S.prototype.addOneTimeListener=function(i){var r=this;return Object.keys(i).forEach(function(t){var n;i[t]=(n=i[t],function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];n.apply(void 0,t),r.removeListener(i)})}),this.listeners.push(i),this},S.prototype.removeListener=function(t){return g(this.listeners,t),this};var _=function(t){this.looper=t||new m,(this.looper.springSystem=this).listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={}};_.prototype.createSpring=function(t,e){return this.createSpringWithConfig({tension:t,friction:e})},_.prototype.createSpringWithConfig=function(t){var e=new S(this);return this.registerSpring(e),e.setSpringConfig(t),e},_.prototype.getIsIdle=function(){return this._isIdle},_.prototype.registerSpring=function(t){this._springRegistry[t.getId()]=t},_.prototype.deregisterSpring=function(t){g(this._activeSprings,t),delete this._springRegistry[t.getId()]},_.prototype.advance=function(e,n){for(var i=this;0<this._idleSpringIndices.length;)this._idleSpringIndices.pop();for(this._activeSprings.filter(Boolean).forEach(function(t){t.systemShouldAdvance()?t.advance(e/1e3,n/1e3):i._idleSpringIndices.push(i._activeSprings.indexOf(t))});0<this._idleSpringIndices.length;){var t=this._idleSpringIndices.pop();0<=t&&this._activeSprings.splice(t,1)}},_.prototype.loop=function(t){var e;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var n=t-this._lastTimeMillis;this._lastTimeMillis=t;for(var i=0,r=this.listeners.length,i=0;i<r;i++)(e=this.listeners[i]).onBeforeIntegrate&&e.onBeforeIntegrate(this);for(this.advance(t,n),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),i=0;i<r;i++)(e=this.listeners[i]).onAfterIntegrate&&e.onAfterIntegrate(this);this._isIdle||this.looper.run()},_.prototype.activateSpring=function(t){var e=this._springRegistry[t];-1===this._activeSprings.indexOf(e)&&this._activeSprings.push(e),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())};var E=new _,C=function(t){var e=t.springConfig,n=e.overshootClamping,i=t.getOnUpdateFunc,r=t.onAnimationEnd,o=t.onSpringActivate,s=E.createSpring(e.stiffness,e.damping);s.setOvershootClampingEnabled(!!n);var a={onSpringActivate:o,onSpringAtRest:function(){s.destroy(),r()},onSpringUpdate:i({spring:s,onAnimationEnd:r})};return s.addListener(a),s},A=function(t){var e=C(t);return e.setEndValue(1),e},b=function(t,e){var n,r,o,s;void 0===e&&(e={}),t&&t.length&&(e.reverse&&t.reverse(),r="number"!=typeof(n=e.speed)?1.1:1+Math.min(Math.max(5*n,0),5),o=1/Math.max(Math.min(t.length,100),10),(s=t.map(function(t,i){var e=t.getOnUpdateFunc;return t.getOnUpdateFunc=function(t){var n=e(t);return function(t){var e=t.getCurrentValue();(e=e<.01?0:.99<e?1:e)>=o&&s[i+1]&&s[i+1](Math.max(Math.min(e*r,1),0)),n(t)}},t}).map(function(t){var e=C(t);if(e)return e.setEndValue.bind(e)}).filter(Boolean))[0]&&s[0](1))},I=function(e){return[0,1,4,5,12,13].map(function(t){return e[t]})},x=function(t){return t.top<window.innerHeight&&0<t.bottom&&t.left<window.innerWidth&&0<t.right},O=function(t,e){var n;return s(t,((n={})[e[0]]=e[1],n))},w=function(t,e){return a(e?document.querySelectorAll('[data-portal-key="'+e+'"]'):t.querySelectorAll("[data-flip-id]"))},U=function(t){return t.map(function(t){return[t,t.getBoundingClientRect()]})},V=new _,F=n.createContext({}),P=n.createContext("portal"),R=function(t){function n(){t.apply(this,arguments),this.inProgressAnimations={},this.flipCallbacks={},this.el=void 0}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).prototype.getSnapshotBeforeUpdate=function(t){return t.flipKey!==this.props.flipKey&&this.el?function(t){var e=t.element,o=t.flipCallbacks;void 0===o&&(o={});var n=t.inProgressAnimations;void 0===n&&(n={});var i=w(e,t.portalKey),r=a(e.querySelectorAll("[data-inverse-flip-id]")),l={},p=[],c={};i.filter(function(t){return o&&o[t.dataset.flipId]&&o[t.dataset.flipId].onExit}).forEach(function(t){var e,n=t.parentNode;!t.closest||(e=t.closest("[data-exit-container]"))&&(n=e);var i=p.findIndex(function(t){return t[0]===n});-1===i&&(p.push([n,n.getBoundingClientRect()]),i=p.length-1),l[t.dataset.flipId]=p[i][1],c[t.dataset.flipId]=n});var u,f,d=U(i),h=d.map(function(t){var e,n=t[0],i=t[1],r={};return o&&o[n.dataset.flipId]&&o[n.dataset.flipId].onExit&&(e=l[n.dataset.flipId],s(r,{element:n,parent:c[n.dataset.flipId],childPosition:{top:i.top-e.top,left:i.left-e.left,width:i.width,height:i.height}})),[n.dataset.flipId,{rect:i,opacity:parseFloat(window.getComputedStyle(n).opacity||"1"),domDataForExitAnimations:r}]}).reduce(O,{});return u=n,f=i.concat(r),Object.keys(u).forEach(function(t){u[t].spring&&u[t].spring.destroy(),delete u[t]}),f.forEach(function(t){t.style.transform="",t.style.opacity=""}),{flippedElementPositions:h,cachedOrderedFlipIds:d.map(function(t){return t[0].dataset.flipId})}}({element:this.el,flipCallbacks:this.flipCallbacks,inProgressAnimations:this.inProgressAnimations,portalKey:this.props.portalKey}):null},n.prototype.componentDidUpdate=function(t,n,i){this.props.flipKey!==t.flipKey&&this.el&&function(t){var n=t.cachedOrderedFlipIds;void 0===n&&(n=[]);var i=t.inProgressAnimations;void 0===i&&(i={});var o=t.flippedElementPositionsBeforeUpdate;void 0===o&&(o={});var l=t.flipCallbacks;void 0===l&&(l={});var f=t.containerEl,d=t.applyTransformOrigin,h=t.spring,g=t.debug,m=t.portalKey,y=t.staggerConfig;void 0===y&&(y={});var v=t.decisionData;void 0===v&&(v={});function S(t){return o[t]&&$[t]}var _,E,C,V,F,P,R,M,k,D,j,T,K,B,q,X,Y,W,N,L,H,J,z,G=t.handleEnterUpdateDelete,Q=t.onComplete,Z=t.onStart,$=U(w((z={element:f,portalKey:m}).element,z.portalKey)).map(function(t){var e=t[0],n=t[1],i=window.getComputedStyle(e);return[e.dataset.flipId,{element:e,rect:n,opacity:parseFloat(i.opacity),transform:i.transform}]}).reduce(O,{}),tt=(H=(Y={containerEl:f,portalKey:m}).containerEl,(J=Y.portalKey)?(L=J,function(t){return a(document.querySelectorAll('[data-portal-key="'+L+'"]'+t))}):H?(W=H,N=Math.random().toFixed(5),W.dataset.flipperId=N,function(t){return a(W.querySelectorAll('[data-flipper-id="'+N+'"] '+t))}):function(){return[]}),et=(X=tt,function(t){return X('[data-flip-id="'+t+'"]')[0]}),nt=Object.keys(o).concat(Object.keys($)).filter(function(t){return!S(t)}),it={flipCallbacks:l,getElement:et,flippedElementPositionsBeforeUpdate:o,flippedElementPositionsAfterUpdate:$,inProgressAnimations:i,decisionData:v},rt=(_=s({},it,{unflippedIds:nt}),C=_.unflippedIds,V=_.flipCallbacks,F=_.getElement,P=_.flippedElementPositionsBeforeUpdate,R=_.flippedElementPositionsAfterUpdate,M=_.inProgressAnimations,k=_.decisionData,D=C.filter(function(t){return R[t]}).filter(function(t){return V[t]&&V[t].onAppear}),j=C.filter(function(t){return P[t]&&V[t]&&V[t].onExit}),T=new Promise(function(t){E=t}),K=[],B=0,q=j.map(function(t,e){var n=P[t].domDataForExitAnimations,i=n.element,r=n.parent,o=n.childPosition,s=o.top,a=o.left,l=o.width,p=o.height;"static"===getComputedStyle(r).position&&(r.style.position="relative"),i.style.transform="matrix(1, 0, 0, 1, 0, 0)",i.style.position="absolute",i.style.top=s+"px",i.style.left=a+"px",i.style.height=p+"px",i.style.width=l+"px";var c=K.filter(function(t){return t[0]===r})[0];c||(c=[r,document.createDocumentFragment()],K.push(c)),c[1].appendChild(i),B+=1;function u(){try{r.removeChild(i)}catch(t){}finally{0==--B&&E()}}return M[t]={stop:u},function(){return V[t].onExit(i,e,u,k)}}),K.forEach(function(t){t[0].appendChild(t[1])}),q.length||E(),{hideEnteringElements:function(){D.forEach(function(t){var e=F(t);e&&(e.style.opacity="0")})},animateEnteringElements:function(){D.forEach(function(t,e){var n=F(t);n&&V[t].onAppear(n,e,k)})},animateExitingElements:function(){return q.forEach(function(t){return t()}),T}}),ot=rt.hideEnteringElements,st=rt.animateEnteringElements,at=rt.animateExitingElements,lt=s({},it,{containerEl:f,flippedIds:n.filter(S),applyTransformOrigin:d,spring:h,debug:g,staggerConfig:y,scopedSelector:tt,onComplete:Q});Z&&Z(f,v);var pt=function(){var t=lt.flippedIds,K=lt.flipCallbacks,B=lt.inProgressAnimations,q=lt.flippedElementPositionsBeforeUpdate,X=lt.flippedElementPositionsAfterUpdate,Y=lt.applyTransformOrigin,W=lt.spring,n=lt.getElement,i=lt.debug,o=lt.staggerConfig;void 0===o&&(o={});var N=lt.decisionData;void 0===N&&(N={});var L,l=lt.onComplete,f=lt.containerEl,d=new Promise(function(t){L=t});if(l&&d.then(function(){return l(f,N)}),!t.length)return function(){return L([]),d};var H=[],h=n(t[0]),J=h?h.ownerDocument.querySelector("body"):document.querySelector("body"),g=t.reduce(function(t,e){return t[e]=(t[e]||0)+1,t},{});Object.keys(g).filter(function(t){return 1<g[t]});var z=t.map(function(i){var n=q[i].rect,o=X[i].rect,t=q[i].opacity,l=X[i].opacity,f=o.width<1||o.height<1,d=X[i].element;if(!x(n)&&!x(o))return!1;if(!d)return!1;var h=JSON.parse(d.dataset.flipConfig),g=function(t){void 0===t&&(t={});var e=t.flippedSpring;return s({},c.noWobble,u(t.flipperSpring),u(e))}({flipperSpring:W,flippedSpring:h.spring}),m=!0===h.stagger?"default":h.stagger,y={element:d,id:i,stagger:m,springConfig:g};if(K[i]&&K[i].shouldFlip&&!K[i].shouldFlip(N.previous,N.current))return!1;var v=Math.abs(n.left-o.left),S=Math.abs(n.top-o.top),_=v+S,E=Math.abs(n.width-o.width)+Math.abs(n.height-o.height),C=Math.abs(l-t);if(_<.5&&E<.5&&C<.01)return!1;var A=e.parse(X[i].transform),b={matrix:A},O={matrix:[]},w=[A];h.translate&&(w.push(e.translateX(n.left-o.left)),w.push(e.translateY(n.top-o.top))),h.scale&&(w.push(e.scaleX(Math.max(n.width,1)/Math.max(o.width,1))),w.push(e.scaleY(Math.max(n.height,1)/Math.max(o.height,1)))),h.opacity&&(O.opacity=t,b.opacity=l);var U=[];K[i]&&K[i].shouldInvert&&!K[i].shouldInvert(N.previous,N.current)||(U=a(d.querySelectorAll('[data-inverse-flip-id="'+i+'"]')).map(function(t){return[t,JSON.parse(t.dataset.flipConfig)]})),O.matrix=I(w.reduce(e.multiply)),b.matrix=I(b.matrix);var V,F,P,R,M,k,D=(F=(V={element:d,invertedChildren:U,body:J}).element,P=V.invertedChildren,R=V.body,function(t){var e,n,l,p,i=t.matrix,o=t.opacity,s=t.forceMinVals;r(o)&&(F.style.opacity=o+""),s&&(F.style.minHeight="1px",F.style.minWidth="1px"),i&&(e="matrix("+i.join(", ")+")",F.style.transform=e,P&&(l=(n={invertedChildren:P,matrix:i,body:R}).matrix,p=n.body,n.invertedChildren.forEach(function(t){var e,n,i,r,o,s=t[0],a=t[1];p.contains(s)&&(e=l[0],n=l[3],i=l[5],r={translateX:0,translateY:0,scaleX:1,scaleY:1},o="",a.translate&&(r.translateX=-l[4]/e,r.translateY=-i/n,o+="translate("+r.translateX+"px, "+r.translateY+"px)"),a.scale&&(r.scaleX=1/e,r.scaleY=1/n,o+=" scale("+r.scaleX+", "+r.scaleY+")"),s.style.transform=o)})))});K[i]&&K[i].onComplete&&(M=K[i].onComplete,k=function(){return M(d,N)});var j=r(O.opacity)&&r(b.opacity)&&O.opacity!==b.opacity,T=!1;return s({},y,{stagger:m,springConfig:g,getOnUpdateFunc:function(t){return B[i]={spring:t.spring,onAnimationEnd:t.onAnimationEnd,difference:{translateXDifference:v,translateYDifference:S,prevRect:n,currentRect:o}},function(t){K[i]&&K[i].onSpringUpdate&&K[i].onSpringUpdate(t.getCurrentValue()),T||(T=!0,K[i]&&K[i].onStart&&K[i].onStart(d,N));var e,n=t.getCurrentValue();J.contains(d)?((e={matrix:[]}).matrix=O.matrix.map(function(t,e){return p(t,b.matrix[e],n)}),j&&(e.opacity=p(O.opacity,b.opacity,n)),D(e)):t.destroy()}},initializeFlip:function(){D({matrix:O.matrix,opacity:j?O.opacity:void 0,forceMinVals:f}),K[i]&&K[i].onStartImmediate&&K[i].onStartImmediate(d,N),h.transformOrigin?d.style.transformOrigin=h.transformOrigin:Y&&(d.style.transformOrigin="0 0"),U.forEach(function(t){var e=t[0],n=t[1];n.transformOrigin?e.style.transformOrigin=n.transformOrigin:Y&&(e.style.transformOrigin="0 0")})},onAnimationEnd:function(){delete B[i],"function"==typeof k&&k(),d.style.transform="",U.forEach(function(t){t[0].style.transform=""}),f&&d&&(d.style.minHeight="",d.style.minWidth=""),H.push(i),H.length>=z.length&&L(H)},delayUntil:h.delayUntil})}).filter(Boolean);if(z.forEach(function(t){return(0,t.initializeFlip)()}),i)return function(){};var m=z.filter(function(t){return t.delayUntil&&(e=t.delayUntil,z.filter(function(t){return t.id===e}).length);var e}),y={},v={},S={};m.forEach(function(t){t.stagger?(S[t.stagger]=!0,v[t.delayUntil]?v[t.delayUntil].push(t.stagger):v[t.delayUntil]=[t.stagger]):y[t.delayUntil]?y[t.delayUntil].push(t):y[t.delayUntil]=[t]});var _=z.filter(function(t){return t.stagger}).reduce(function(t,e){return t[e.stagger]?t[e.stagger].push(e):t[e.stagger]=[e],t},{}),E=z.filter(function(t){return-1===m.indexOf(t)});return E.forEach(function(t){t.onSpringActivate=function(){y[t.id]&&y[t.id].forEach(A),v[t.id]&&Object.keys(v[t.id].reduce(function(t,e){var n;return s(t,((n={})[e]=!0,n))},{})).forEach(function(t){b(_[t],o[t])})}}),function(){return z.length||L([]),E.filter(function(t){return!t.stagger}).forEach(A),Object.keys(_).forEach(function(t){S[t]||b(_[t],o[t])}),d}}();G?G({hideEnteringElements:ot,animateEnteringElements:st,animateExitingElements:at,animateFlippedElements:pt}):(ot(),at().then(st),pt())}({flippedElementPositionsBeforeUpdate:i.flippedElementPositions,cachedOrderedFlipIds:i.cachedOrderedFlipIds,containerEl:this.el,inProgressAnimations:this.inProgressAnimations,flipCallbacks:this.flipCallbacks,applyTransformOrigin:this.props.applyTransformOrigin,spring:this.props.spring,debug:this.props.debug,portalKey:this.props.portalKey,staggerConfig:this.props.staggerConfig,handleEnterUpdateDelete:this.props.handleEnterUpdateDelete,decisionData:{previous:t.decisionData,current:this.props.decisionData},onComplete:this.props.onComplete,onStart:this.props.onStart})},n.prototype.render=function(){var e=this,t=this.props,n=t.portalKey,r=i.createElement(F.Provider,{value:this.flipCallbacks},i.createElement(t.element,{className:t.className,ref:function(t){return e.el=t}},this.props.children));return n&&(r=i.createElement(P.Provider,{value:n},r)),r},n}(n.Component);function M(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&-1===e.indexOf(i)&&(n[i]=t[i]);return n}R.defaultProps={applyTransformOrigin:!0,element:"div"};var k=function(t){var e=t.children,i=t.flipId,r=t.inverseFlipId,o=t.portalKey,a=M(t,["children","flipId","inverseFlipId","portalKey"]),l=e,p="function"==typeof l;if(!p)try{l=n.Children.only(e)}catch(t){throw new Error("Each Flipped component must wrap a single child")}a.scale||a.translate||a.opacity||s(a,{translate:!0,scale:!0,opacity:!0});var c={};return c["data-flip-config"]=JSON.stringify(a),i?c["data-flip-id"]=String(i):r&&(c["data-inverse-flip-id"]=String(r)),o&&(c["data-portal-key"]=o),p?l(c):n.cloneElement(l,c)},D=function(t){var n=t.children,r=t.flipId,s=t.shouldFlip,a=t.shouldInvert,l=t.onAppear,p=t.onStart,c=t.onStartImmediate,u=t.onComplete,f=t.onExit,d=t.onSpringUpdate,h=M(t,["children","flipId","shouldFlip","shouldInvert","onAppear","onStart","onStartImmediate","onComplete","onExit","onSpringUpdate"]);return n?h.inverseFlipId?i.createElement(k,Object.assign({},h),n):i.createElement(P.Consumer,null,function(e){return i.createElement(F.Consumer,null,function(t){return o(t)&&r&&(t[r]={shouldFlip:s,shouldInvert:a,onAppear:l,onStart:p,onStartImmediate:c,onComplete:u,onExit:f,onSpringUpdate:d}),i.createElement(k,Object.assign({flipId:r},h,{portalKey:e}),n)})}):null};D.displayName="Flipped",exports.Flipper=R,exports.Flipped=D,exports.ExitContainer=function(t){var e;return n.cloneElement(t.children,((e={})["data-exit-container"]=!0,e))},exports.spring=function(t){var i=t.values,r=t.onUpdate,e=t.delay;void 0===e&&(e=0);var n=t.onComplete,o=s({},c.noWobble,u(t.config)),a=o.overshootClamping,l=V.createSpring(o.stiffness,o.damping);return l.setOvershootClampingEnabled(!!a),l.addListener({onSpringAtRest:function(t){n&&n(),t.destroy()},onSpringUpdate:function(t){var e=t.getCurrentValue();if(!i)return r(e);var n=Object.keys(i).map(function(t){return[t,p(i[t][0],i[t][1],e)]}).reduce(function(t,e){var n;return Object.assign(t,((n={})[e[0]]=e[1],n))},{});r(n)}}),e?setTimeout(function(){l.setEndValue(1)},e):l.setEndValue(1),l};