"use strict";!function(r){var e=r.scrypt,n=2147483647;function c(r){var y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],g=1779033703,d=3144134277,m=1013904242,b=2773480762,B=1359893119,k=2600822924,E=528734635,I=1541459225,A=new Array(64);function e(r){for(var e=0,n=r.length;64<=n;){for(var f,t,o,a,i=g,u=d,c=m,s=b,l=B,h=k,p=E,v=I,w=0;w<16;w++)t=e+4*w,A[w]=(255&r[t])<<24|(255&r[t+1])<<16|(255&r[t+2])<<8|255&r[t+3];for(w=16;w<64;w++)o=((f=A[w-2])>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,a=((f=A[w-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,A[w]=(o+A[w-7]|0)+(a+A[w-16]|0)|0;for(w=0;w<64;w++)o=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&h^~l&p)|0)+(v+(y[w]+A[w]|0)|0)|0,a=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&u^i&c^u&c)|0,v=p,p=h,h=l,l=s+o|0,s=c,c=u,u=i,i=o+a|0;g=g+i|0,d=d+u|0,m=m+c|0,b=b+s|0,B=B+l|0,k=k+h|0,E=E+p|0,I=I+v|0,e+=64,n-=64}}e(r);var n,f=r.length%64,t=r.length/536870912|0,o=r.length<<3,a=f<56?56:120,i=r.slice(r.length-f,r.length);for(i.push(128),n=1+f;n<a;n++)i.push(0);return i.push(t>>>24&255),i.push(t>>>16&255),i.push(t>>>8&255),i.push(t>>>0&255),i.push(o>>>24&255),i.push(o>>>16&255),i.push(o>>>8&255),i.push(o>>>0&255),e(i),[g>>>24&255,g>>>16&255,g>>>8&255,g>>>0&255,d>>>24&255,d>>>16&255,d>>>8&255,d>>>0&255,m>>>24&255,m>>>16&255,m>>>8&255,m>>>0&255,b>>>24&255,b>>>16&255,b>>>8&255,b>>>0&255,B>>>24&255,B>>>16&255,B>>>8&255,B>>>0&255,k>>>24&255,k>>>16&255,k>>>8&255,k>>>0&255,E>>>24&255,E>>>16&255,E>>>8&255,E>>>0&255,I>>>24&255,I>>>16&255,I>>>8&255,I>>>0&255]}function L(r,e,n){r=r.length<=64?r:c(r);for(var f=64+e.length+4,t=new Array(f),o=new Array(64),a=[],i=0;i<64;i++)t[i]=54;for(i=0;i<r.length;i++)t[i]^=r[i];for(i=0;i<e.length;i++)t[64+i]=e[i];for(i=f-4;i<f;i++)t[i]=0;for(i=0;i<64;i++)o[i]=92;for(i=0;i<r.length;i++)o[i]^=r[i];function u(){for(var r=f-1;f-4<=r;r--){if(t[r]++,t[r]<=255)return;t[r]=0}}for(;32<=n;)u(),a=a.concat(c(o.concat(c(t)))),n-=32;return 0<n&&(u(),a=a.concat(c(o.concat(c(t))).slice(0,n))),new Buffer(a)}function S(r,e,n,f,t,o,a){var i;for(s(r,e+64*(2*f-1),a,0,64),i=0;i<2*f;i++)T(r,64*i,a,0,64),u(a,t,o),s(a,0,r,n+64*i,64);for(i=0;i<f;i++)s(r,n+2*i*64,r,e+64*i,64);for(i=0;i<f;i++)s(r,n+64*(2*i+1),r,e+64*(i+f),64)}function o(r,e){return r<<e|r>>>32-e}function u(r,e,n){for(var f=0;f<16;f++)e[f]=(255&r[4*f+0])<<0,e[f]|=(255&r[4*f+1])<<8,e[f]|=(255&r[4*f+2])<<16,e[f]|=(255&r[4*f+3])<<24;s(e,0,n,0,16);for(f=8;0<f;f-=2)n[4]^=o(n[0]+n[12],7),n[8]^=o(n[4]+n[0],9),n[12]^=o(n[8]+n[4],13),n[0]^=o(n[12]+n[8],18),n[9]^=o(n[5]+n[1],7),n[13]^=o(n[9]+n[5],9),n[1]^=o(n[13]+n[9],13),n[5]^=o(n[1]+n[13],18),n[14]^=o(n[10]+n[6],7),n[2]^=o(n[14]+n[10],9),n[6]^=o(n[2]+n[14],13),n[10]^=o(n[6]+n[2],18),n[3]^=o(n[15]+n[11],7),n[7]^=o(n[3]+n[15],9),n[11]^=o(n[7]+n[3],13),n[15]^=o(n[11]+n[7],18),n[1]^=o(n[0]+n[3],7),n[2]^=o(n[1]+n[0],9),n[3]^=o(n[2]+n[1],13),n[0]^=o(n[3]+n[2],18),n[6]^=o(n[5]+n[4],7),n[7]^=o(n[6]+n[5],9),n[4]^=o(n[7]+n[6],13),n[5]^=o(n[4]+n[7],18),n[11]^=o(n[10]+n[9],7),n[8]^=o(n[11]+n[10],9),n[9]^=o(n[8]+n[11],13),n[10]^=o(n[9]+n[8],18),n[12]^=o(n[15]+n[14],7),n[13]^=o(n[12]+n[15],9),n[14]^=o(n[13]+n[12],13),n[15]^=o(n[14]+n[13],18);for(f=0;f<16;++f)e[f]=n[f]+e[f];for(f=0;f<16;f++){var t=4*f;r[0+t]=e[f]>>0&255,r[1+t]=e[f]>>8&255,r[2+t]=e[f]>>16&255,r[3+t]=e[f]>>24&255}}function T(r,e,n,f,t){for(var o=0;o<t;o++)n[f+o]^=r[e+o]}function s(r,e,n,f,t){for(;t--;)n[f++]=r[e++]}function f(r){if("string"==typeof r)return new Buffer(r);if(Buffer.isBuffer(r))return r;if(r.length){for(var e=!0,n=0;n<r.length;n++){var f=parseInt(r[n]);if(f!=r[n]||f<0||256<=f){e=!1;break}}if(e)return new Buffer(r)}throw new Error("invalid value (must be a buffer, array of bytes or string)")}function t(t,r,o,a,i,u,c){if(!c)throw new Error("missing callback");if(0===o||0!=(o&o-1))throw new Error("invalid parameter N");if(n/128/a<o)throw new Error("invalid parameter N");if(n/128/i<a)throw new Error("invalid parameter r");t=f(t),r=f(r);var s,l,h,p=new Buffer(256*a),v=new Buffer(128*a*o),w=128*a,y=new Int32Array(16),g=new Int32Array(16),d=new Buffer(64),m=L(t,r,128*i*a),b=i*o*2,B=0,k=!1,E=0,I=0,A=parseInt(1e3/a),x="undefined"!=typeof setImmediate?setImmediate:setTimeout,N=function(){if(k)return c(new Error("cancelled"),B/b);switch(E){case 0:l=128*I*a,h=0,m.copy(p,h,l,l+w),E=1,s=0;case 1:A<(e=o-s)&&(e=A);for(var r=0;r<e;r++)p.copy(v,(s+r)*w,h,h+w),S(p,h,w,a,y,g,d);if(s+=e,k=c(null,(B+=e)/b))break;if(s<o)break;s=0,E=2;case 2:var e;A<(e=o-s)&&(e=A);for(r=0;r<e;r++){var n=h+64*(2*a-1),f=p.readUInt32LE(n)&o-1;T(v,f*w,p,h,w),S(p,h,w,a,y,g,d)}if(s+=e,k=c(null,(B+=e)/b))break;if(s<o)break;if(p.copy(m,l,h,h+w),++I<i){E=0;break}return c(null,1,L(t,m,u))}x(N)};N()}"undefined"!=typeof exports?module.exports=t:(r.scrypt=t,e&&(r.scrypt._previousScrypt=e))}(this);