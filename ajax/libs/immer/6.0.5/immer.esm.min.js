function n(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if("production"!==process.env.NODE_ENV){var o=H[t],i=o?"function"==typeof o?o.apply(null,n):o:"unknown error nr: "+t;throw Error("[Immer] "+i)}throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function t(t){return!!t&&!!t[B]}function r(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype}(t)||Array.isArray(t)||!!t[q]||!!t.constructor[q]||c(t)||s(t))}function e(t){if(t&&t[B])return t[B].t}function i(t,e,n){void 0===n&&(n=!1),0===o(t)?(n?Object.keys:L)(t).forEach(function(n){return e(n,t[n],t)}):t.forEach(function(n,r){return e(r,n,t)})}function o(t){var e=t[B];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:c(t)?2:s(t)?3:0}function u(t,e){return 2===o(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function a(t,e){return 2===o(t)?t.get(e):t[e]}function f(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function c(t){return $&&t instanceof Map}function s(t){return U&&t instanceof Set}function v(t){return t.o||t.t}function p(t,e){if(void 0===e&&(e=!1),Array.isArray(t))return t.slice();var r=Object.create(Object.getPrototypeOf(t));return i(t,function(o){if(o!==B){var i=Object.getOwnPropertyDescriptor(t,o),a=i.value;i.get&&(e||n(1),a=i.get.call(t)),i.enumerable?r[o]=a:Object.defineProperty(r,o,{value:a,writable:!0,configurable:!0})}}),r}function d(e,n){t(e)||Object.isFrozen(e)||!r(e)||(o(e)>1&&(e.set=e.add=e.clear=e.delete=l),Object.freeze(e),n&&i(e,function(t,e){return d(e,!0)},!0))}function l(){n(2)}function h(t){var e=Q[t];return e||n("production"!==process.env.NODE_ENV?18:19,t),e}function y(t,e){Q[t]=e}function b(){return"production"===process.env.NODE_ENV||J||n(0),J}function m(t,e){e&&(h("Patches"),t.u=[],t.s=[],t.v=e)}function _(t){j(t),t.p.forEach(g),t.p=null}function j(t){t===J&&(J=t.l)}function O(t){return J={p:[],l:J,h:t,m:!0,_:0}}function g(t){var e=t[B];0===e.i||1===e.i?e.j():e.O=!0}function w(t,e){e._=e.p.length;var o=e.p[0],i=void 0!==t&&t!==o;return e.h.g||h("ES5").S(e,t,i),i?(o[B].P&&(_(e),n(4)),r(t)&&(t=S(e,t),e.l||M(e,t)),e.u&&h("Patches").M(o[B],t,e.u,e.s)):t=S(e,o,[]),_(e),e.u&&e.v(e.u,e.s),t!==X?t:void 0}function S(t,e,n){if(Object.isFrozen(e))return e;var r=e[B];if(!r)return i(e,function(o,i){return P(t,r,e,o,i,n)},!0),e;if(r.A!==t)return e;if(!r.P)return M(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=p(r.k,!0):r.o;i(o,function(e,i){return P(t,r,o,e,i,n)}),M(t,o,!1),n&&t.u&&h("Patches").R(r,n,t.u,t.s)}return r.o}function P(e,i,c,s,p,h){if("production"!==process.env.NODE_ENV&&p===c&&n(5),t(p)){var l=S(e,p,h&&i&&3!==i.i&&!u(i.D,s)?h.concat(s):void 0);if(d=s,y=l,2===(b=o(v=c))?v.set(d,y):3===b?(v.delete(d),v.add(y)):v[d]=y,!t(l))return;e.m=!1}var v,d,y,b;if((!i||!f(p,a(i.t,s)))&&r(p)){if(!e.h.N&&e._<1)return;S(e,p),i&&i.A.l||M(e,p)}}function M(t,e,n){void 0===n&&(n=!1),t.h.N&&t.m&&d(e,n)}function A(t,e){var n=t[B],r=Reflect.getOwnPropertyDescriptor(n?v(n):t,e);return r&&r.value}function z(t){if(!t.P){if(t.P=!0,0===t.i||1===t.i){var e=t.o=p(t.t);i(t.p,function(t,n){e[t]=n}),t.p=void 0}t.l&&z(t.l)}}function x(t){t.o||(t.o=p(t.t))}function I(t,e,n){var r=c(e)?h("MapSet").T(e,n):s(e)?h("MapSet").F(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:b(),P:!1,I:!1,D:{},l:e,t:t,k:null,p:{},o:null,j:null,C:!1},o=r,i=V;n&&(o=[r],i=Y);var a=Proxy.revocable(o,i),u=a.revoke,c=a.proxy;return r.k=c,r.j=u,c}(e,n):h("ES5").J(e,n);return(n?n.A:b()).p.push(r),r}function E(t,e){t.g?z(e):h("ES5").K(e)}function k(){function e(t,e){var n=t[B];if(n&&!n.$){n.$=!0;var r=t[e];return n.$=!1,r}return t[e]}function o(t){t.P||(t.P=!0,t.l&&o(t.l))}function a(t){t.o||(t.o=c(t.t))}function c(t){var e=t&&t[B];if(e){e.$=!0;var n=p(e.k,!0);return e.$=!1,n}return p(t)}function s(t){for(var e=t.length-1;e>=0;e--){var n=t[e][B];if(!n.P)switch(n.i){case 5:l(n)&&o(n);break;case 4:h(n)&&o(n)}}}function h(t){for(var e=t.t,n=t.k,r=Object.keys(n),o=r.length-1;o>=0;o--){var i=r[o],a=e[i];if(void 0===a&&!u(e,i))return!0;var c=n[i],s=c&&c[B];if(s?s.t!==a:!f(c,a))return!0}return r.length!==Object.keys(e).length}function l(t){var e=t.k;if(e.length!==t.t.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);return!(!n||n.get)}function d(t){t.O&&n(3,JSON.stringify(v(t)))}var g={};y("ES5",{J:function(t,n){var u=Array.isArray(t),s=c(t);i(s,function(n){!function(t,n,i){var u=g[n];u?u.enumerable=i:g[n]=u={enumerable:i,get:function(){return function(t,n){d(t);var o=e(v(t),n);return t.$?o:o===e(t.t,n)&&r(o)?(a(t),t.o[n]=I(t.A.h,o,t)):o}(this[B],n)},set:function(t){!function(t,n,r){if(d(t),t.D[n]=!0,!t.P){if(f(r,e(v(t),n)))return;o(t),a(t)}t.o[n]=r}(this[B],n,t)}},Object.defineProperty(t,n,u)}(s,n,u||function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(!n||!n.enumerable)}(t,n))});var p={i:u?5:4,A:n?n.A:b(),P:!1,$:!1,I:!1,D:{},l:n,t:t,k:s,o:null,O:!1,C:!1};return Object.defineProperty(s,B,{value:p,writable:!0}),s},K:o,S:function(e,n,r){e.p.forEach(function(t){t[B].$=!0}),r?t(n)&&n[B].A===e&&s(e.p):(e.u&&function t(e){if(e&&"object"==typeof e){var n=e[B];if(n){var r=n.t,a=n.k,c=n.D,f=n.i;if(4===f)i(a,function(e){e!==B&&(void 0!==r[e]||u(r,e)?c[e]||t(a[e]):(c[e]=!0,o(n)))}),i(r,function(t){void 0!==a[t]||u(a,t)||(c[t]=!1,o(n))});else if(5===f){if(l(n)&&(o(n),c.length=!0),a.length<r.length)for(var s=a.length;s<r.length;s++)c[s]=!1;else for(var p=r.length;p<a.length;p++)c[p]=!0;for(var h=Math.min(a.length,r.length),v=0;v<h;v++)void 0===c[v]&&t(a[v])}}}}(e.p[0]),s(e.p))}})}function R(){function e(t){if(!t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(e);if(c(t))return new Map(Array.from(t.entries()).map(function(t){return[t[0],e(t[1])]}));if(s(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var r in t)n[r]=e(t[r]);return n}function r(n){return t(n)?e(n):n}var f="add";y("Patches",{U:function(t,r){return r.forEach(function(r){for(var i=r.path,u=r.op,c=t,s=0;s<i.length-1;s++)"object"!=typeof(c=a(c,i[s]))&&n(15,i.join("/"));var p=o(c),h=e(r.value),l=i[i.length-1];switch(u){case"replace":switch(p){case 2:return c.set(l,h);case 3:n(16);default:return c[l]=h}case f:switch(p){case 1:return c.splice(l,0,h);case 2:return c.set(l,h);case 3:return c.add(h);default:return c[l]=h}case"remove":switch(p){case 1:return c.splice(l,1);case 2:return c.delete(l);case 3:return c.delete(r.value);default:return delete c[l]}default:n(17,u)}}),t},R:function(t,e,n,o){switch(t.i){case 0:case 4:case 2:return function(t,e,n,o){var c=t.t,s=t.o;i(t.D,function(t,i){var p=a(c,t),h=a(s,t),l=i?u(c,t)?"replace":f:"remove";if(p!==h||"replace"!==l){var v=e.concat(t);n.push("remove"===l?{op:l,path:v}:{op:l,path:v,value:h}),o.push(l===f?{op:"remove",path:v}:"remove"===l?{op:f,path:v,value:r(p)}:{op:"replace",path:v,value:r(p)})}})}(t,e,n,o);case 5:case 1:return function(t,e,n,o){var i=t.t,a=t.D,u=t.o;if(u.length<i.length){var c=[u,i];i=c[0],u=c[1];var s=[o,n];n=s[0],o=s[1]}for(var p=u.length-i.length,h=0;i[h]===u[h]&&h<i.length;)++h;for(var l=i.length;l>h&&i[l-1]===u[l+p-1];)--l;for(var v=h;v<l;++v)if(a[v]&&u[v]!==i[v]){var d=e.concat([v]);n.push({op:"replace",path:d,value:r(u[v])}),o.push({op:"replace",path:d,value:r(i[v])})}for(var y=n.length,b=l+p-1;b>=l;--b){var g=e.concat([b]);n[y+b-l]={op:f,path:g,value:r(u[b])},o.push({op:"remove",path:g})}}(t,e,n,o);case 3:return function(t,e,n,r){var o=t.t,i=t.o,a=0;o.forEach(function(t){if(!i.has(t)){var o=e.concat([a]);n.push({op:"remove",path:o,value:t}),r.unshift({op:f,path:o,value:t})}a++}),a=0,i.forEach(function(t){if(!o.has(t)){var i=e.concat([a]);n.push({op:f,path:i,value:t}),r.unshift({op:"remove",path:i,value:t})}a++})}(t,e,n,o)}},M:function(t,e,n,r){n.push({op:"replace",path:[],value:e}),r.push({op:"replace",path:[],value:t.t})}})}function D(){function t(t,e){function n(){this.constructor=t}a(t,e),t.prototype=(n.prototype=e.prototype,new n)}function e(t){t.o||(t.D=new Map,t.o=new Map(t.t))}function o(t){t.o||(t.o=new Set,t.t.forEach(function(e){if(r(e)){var n=I(t.A.h,e,t);t.p.set(e,n),t.o.add(n)}else t.o.add(e)}))}function i(t){t.O&&n(3,JSON.stringify(v(t)))}var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},u=function(){function n(t,e){return this[B]={i:2,l:e,A:e?e.A:b(),P:!1,I:!1,o:void 0,D:void 0,t:t,k:this,C:!1,O:!1},this}t(n,Map);var o=n.prototype;return Object.defineProperty(o,"size",{get:function(){return v(this[B]).size}}),o.has=function(t){return v(this[B]).has(t)},o.set=function(t,n){var r=this[B];return i(r),v(r).get(t)!==n&&(e(r),E(r.A.h,r),r.D.set(t,!0),r.o.set(t,n),r.D.set(t,!0)),this},o.delete=function(t){if(!this.has(t))return!1;var n=this[B];return i(n),e(n),E(n.A.h,n),n.D.set(t,!1),n.o.delete(t),!0},o.clear=function(){var t=this[B];return i(t),e(t),E(t.A.h,t),t.D=new Map,t.o.clear()},o.forEach=function(t,e){var n=this;v(this[B]).forEach(function(r,o){t.call(e,n.get(o),o,n)})},o.get=function(t){var n=this[B];i(n);var o=v(n).get(t);if(n.I||!r(o))return o;if(o!==n.t.get(t))return o;var a=I(n.A.h,o,n);return e(n),n.o.set(t,a),a},o.keys=function(){return v(this[B]).keys()},o.values=function(){var t,e=this,n=this.keys();return(t={})[G]=function(){return e.values()},t.next=function(){var t=n.next();return t.done?t:{done:!1,value:e.get(t.value)}},t},o.entries=function(){var t,e=this,n=this.keys();return(t={})[G]=function(){return e.entries()},t.next=function(){var t=n.next();if(t.done)return t;var r=e.get(t.value);return{done:!1,value:[t.value,r]}},t},o[G]=function(){return this.entries()},n}(),c=function(){function e(t,e){return this[B]={i:3,l:e,A:e?e.A:b(),P:!1,I:!1,o:void 0,t:t,k:this,p:new Map,O:!1,C:!1},this}t(e,Set);var n=e.prototype;return Object.defineProperty(n,"size",{get:function(){return v(this[B]).size}}),n.has=function(t){var e=this[B];return i(e),e.o?!!e.o.has(t)||!(!e.p.has(t)||!e.o.has(e.p.get(t))):e.t.has(t)},n.add=function(t){var e=this[B];return i(e),e.o?e.o.add(t):e.t.has(t)||(o(e),E(e.A.h,e),e.o.add(t)),this},n.delete=function(t){if(!this.has(t))return!1;var e=this[B];return i(e),o(e),E(e.A.h,e),e.o.delete(t)||!!e.p.has(t)&&e.o.delete(e.p.get(t))},n.clear=function(){var t=this[B];return i(t),o(t),E(t.A.h,t),t.o.clear()},n.values=function(){var t=this[B];return i(t),o(t),t.o.values()},n.entries=function(){var t=this[B];return i(t),o(t),t.o.entries()},n.keys=function(){return this.values()},n[G]=function(){return this.values()},n.forEach=function(t,e){for(var n=this.values(),r=n.next();!r.done;)t.call(e,r.value,r.value,this),r=n.next()},e}();y("MapSet",{T:function(t,e){return new u(t,e)},F:function(t,e){return new c(t,e)}})}function N(){k(),D(),R()}function T(t){return t}function F(t){return t}var C,J,K="undefined"!=typeof Symbol,$="undefined"!=typeof Map,U="undefined"!=typeof Set,W="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,X=K?Symbol("immer-nothing"):((C={})["immer-nothing"]=!0,C),q=K?Symbol("immer-draftable"):"__$immer_draftable",B=K?Symbol("immer-state"):"__$immer_state",G=K?Symbol.iterator:"@@iterator",H={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},19:"plugin not loaded",20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available"},L="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Q={},V={get:function(t,e){if(e===B)return t;var n=t.p;if(!t.P&&u(n,e))return n[e];var o=v(t)[e];if(t.I||!r(o))return o;if(t.P){if(o!==A(t.t,e))return o;n=t.o}return n[e]=I(t.A.h,o,t)},has:function(t,e){return e in v(t)},ownKeys:function(t){return Reflect.ownKeys(v(t))},set:function(t,e,n){if(!t.P){var r=A(t.t,e);if(n?f(r,n)||n===t.p[e]:f(r,n)&&e in t.t)return!0;x(t),z(t)}return t.D[e]=!0,t.o[e]=n,!0},deleteProperty:function(t,e){return void 0!==A(t.t,e)||e in t.t?(t.D[e]=!1,x(t),z(t)):t.D[e]&&delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=v(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&(r.writable=!0,r.configurable=1!==t.i||"length"!==e),r},defineProperty:function(){n(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){n(12)}},Y={};i(V,function(t,e){Y[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Y.deleteProperty=function(t,e){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(e))&&n(13),V.deleteProperty.call(this,t[0],e)},Y.set=function(t,e,r){return"production"!==process.env.NODE_ENV&&"length"!==e&&isNaN(parseInt(e))&&n(14),V.set.call(this,t[0],e,r,t[0])};var Z=function(){function e(t){this.g=W,this.N="production"!==process.env.NODE_ENV,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var o=e.prototype;return o.produce=function(t,e,o){if("function"==typeof t&&"function"!=typeof e){var i=e;e=t;var a=this;return function(t){var n=this;void 0===t&&(t=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(t,function(t){var r;return(r=e).call.apply(r,[n,t].concat(o))})}}var u;if("function"!=typeof e&&n(6),void 0!==o&&"function"!=typeof o&&n(7),r(t)){var c=O(this),f=I(this,t,void 0),s=!0;try{u=e(f),s=!1}finally{s?_(c):j(c)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then(function(t){return m(c,o),w(t,c)},function(t){throw _(c),t}):(m(c,o),w(u,c))}if((u=e(t))!==X)return void 0===u&&(u=t),this.N&&d(u,!0),u},o.produceWithPatches=function(t,e){var n,r,o=this;return"function"==typeof t?function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return o.produceWithPatches(e,function(e){return t.apply(void 0,[e].concat(r))})}:[this.produce(t,e,function(t,e){n=t,r=e}),n,r]},o.createDraft=function(t){r(t)||n(8);var e=O(this),o=I(this,t,void 0);return o[B].C=!0,j(e),o},o.finishDraft=function(t,e){var r=t&&t[B];"production"!==process.env.NODE_ENV&&(r&&r.C||n(9),r.I&&n(10));var o=r.A;return m(o,e),w(void 0,o)},o.setAutoFreeze=function(t){this.N=t},o.setUseProxies=function(t){W||n(20),this.g=t},o.applyPatches=function(e,n){var r;for(r=n.length-1;r>=0;r--){var o=n[r];if(0===o.path.length&&"replace"===o.op){e=o.value;break}}var i=h("Patches").U;return t(e)?i(e,n):this.produce(e,function(t){return i(t,n.slice(r+1))})},e}(),nn=new Z,tn=nn.produce,rn=nn.produceWithPatches.bind(nn),en=nn.setAutoFreeze.bind(nn),on=nn.setUseProxies.bind(nn),un=nn.applyPatches.bind(nn),an=nn.createDraft.bind(nn),fn=nn.finishDraft.bind(nn);export default tn;export{Z as Immer,un as applyPatches,T as castDraft,F as castImmutable,an as createDraft,N as enableAllPlugins,k as enableES5,D as enableMapSet,R as enablePatches,fn as finishDraft,q as immerable,t as isDraft,r as isDraftable,X as nothing,e as original,tn as produce,rn as produceWithPatches,en as setAutoFreeze,on as setUseProxies};