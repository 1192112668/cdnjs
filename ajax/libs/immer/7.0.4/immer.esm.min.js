function t(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if("production"!==process.env.NODE_ENV){var o=Q[t],i=o?"function"==typeof o?o.apply(null,r):o:"unknown error nr: "+t;throw Error("[Immer] "+i)}throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function n(t){return!!t&&!!t[H]}function r(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype}(t)||Array.isArray(t)||!!t[B]||!!t.constructor[B]||s(t)||v(t))}function e(e){return n(e)||t(23,e),e[H].t}function i(t,e,r){void 0===r&&(r=!1),0===o(t)?(r?Object.keys:V)(t).forEach(function(n){r&&"symbol"==typeof n||e(n,t[n],t)}):t.forEach(function(r,n){return e(n,r,t)})}function o(t){var e=t[H];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:s(t)?2:v(t)?3:0}function u(t,e){return 2===o(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function a(t,e){return 2===o(t)?t.get(e):t[e]}function f(t,e,r){var n=o(t);2===n?t.set(e,r):3===n?(t.delete(e),t.add(r)):t[e]=r}function c(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function s(t){return U&&t instanceof Map}function v(t){return W&&t instanceof Set}function p(t){return t.o||t.t}function l(t){if(Array.isArray(t))return t.slice();var e=Y(t);delete e[H];for(var r=V(e),n=0;n<r.length;n++){var o=r[n],i=e[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),e)}function d(t,e){Object.isFrozen(t)||n(t)||!r(t)||(o(t)>1&&(t.set=t.add=t.clear=t.delete=h),Object.freeze(t),e&&i(t,function(t,e){return d(e,!0)},!0))}function h(){t(2)}function b(e){var r=Z[e];return r||t("production"!==process.env.NODE_ENV?18:19,e),r}function y(t,e){Z[t]=e}function m(){return"production"===process.env.NODE_ENV||$||t(0),$}function _(t,e){e&&(b("Patches"),t.u=[],t.s=[],t.v=e)}function j(t){O(t),t.p.forEach(w),t.p=null}function O(t){t===$&&($=t.l)}function g(t){return $={p:[],l:$,h:t,m:!0,_:0}}function w(t){var e=t[H];0===e.i||1===e.i?e.j():e.O=!0}function S(e,n){n._=n.p.length;var o=n.p[0],i=void 0!==e&&e!==o;return n.h.g||b("ES5").S(n,e,i),i?(o[H].P&&(j(n),t(4)),r(e)&&(e=P(n,e),n.l||A(n,e)),n.u&&b("Patches").M(o[H],e,n.u,n.s)):e=P(n,o,[]),j(n),n.u&&n.v(n.u,n.s),e!==q?e:void 0}function P(t,e,r){if(null==(n=e)||"object"!=typeof n||Object.isFrozen(n))return e;var n,o=e[H];if(!o)return i(e,function(n,i){return M(t,o,e,n,i,r)},!0),e;if(o.A!==t)return e;if(!o.P)return A(t,o.t,!0),o.t;if(!o.I){o.I=!0,o.A._--;var a=4===o.i||5===o.i?o.o=l(o.k):o.o;i(a,function(e,n){return M(t,o,a,e,n,r)}),A(t,a,!1),r&&t.u&&b("Patches").R(o,r,t.u,t.s)}return o.o}function M(e,o,i,a,c,s){if("production"!==process.env.NODE_ENV&&c===i&&t(5),n(c)){var p=P(e,c,s&&o&&3!==o.i&&!u(o.D,a)?s.concat(a):void 0);if(f(i,a,p),!n(p))return;e.m=!1}if(r(c)&&!Object.isFrozen(c)){if(!e.h.N&&e._<1)return;P(e,c),o&&o.A.l||A(e,c)}}function A(t,e,r){void 0===r&&(r=!1),t.h.N&&t.m&&d(e,r)}function x(t,e){var r=t[H];return(r?p(r):t)[e]}function z(t){t.P||(t.P=!0,t.l&&z(t.l))}function I(t){t.o||(t.o=l(t.t))}function E(t,e,r){var n=s(e)?b("MapSet").T(e,r):v(e)?b("MapSet").F(e,r):t.g?function(t,e){var r=Array.isArray(t),n={i:r?1:0,A:e?e.A:m(),P:!1,I:!1,D:{},l:e,t:t,k:null,o:null,j:null,C:!1},o=n,i=tt;r&&(o=[n],i=nt);var a=Proxy.revocable(o,i),u=a.revoke,c=a.proxy;return n.k=c,n.j=u,c}(e,r):b("ES5").J(e,r);return(r?r.A:m()).p.push(n),n}function k(e){return n(e)||t(22,e),function t(e){if(!r(e))return e;var n,u=e[H],c=o(e);if(u){if(!u.P&&(u.i<4||!b("ES5").K(u)))return u.t;u.I=!0,n=R(e,c),u.I=!1}else n=R(e,c);return i(n,function(e,r){u&&a(u.t,e)===r||f(n,e,t(r))}),3===c?new Set(n):n}(e)}function R(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return l(t)}function D(){function e(t,e){var r=s[t];return r?r.enumerable=e:s[t]=r={configurable:!0,enumerable:e,get:function(){var e=this[H];return"production"!==process.env.NODE_ENV&&f(e),tt.get(e,t)},set:function(e){var r=this[H];"production"!==process.env.NODE_ENV&&f(r),tt.set(r,t,e)}},r}function r(t){for(var e=t.length-1;e>=0;e--){var r=t[e][H];if(!r.P)switch(r.i){case 5:a(r)&&z(r);break;case 4:o(r)&&z(r)}}}function o(t){for(var e=t.t,r=t.k,n=V(r),o=n.length-1;o>=0;o--){var i=n[o];if(i!==H){var a=e[i];if(void 0===a&&!u(e,i))return!0;var f=r[i],s=f&&f[H];if(s?s.t!==a:!c(f,a))return!0}}var p=!!e[H];return n.length!==V(e).length+(p?0:1)}function a(t){var e=t.k;if(e.length!==t.t.length)return!0;var r=Object.getOwnPropertyDescriptor(e,e.length-1);return!(!r||r.get)}function f(e){e.O&&t(3,JSON.stringify(p(e)))}var s={};y("ES5",{J:function(t,r){var n=Array.isArray(t),o=function(t,r){var n=Y(r);t&&delete n.length,delete n[H];for(var o=V(n),i=0;i<o.length;i++){var a=o[i];n[a]=e(a,t||!!n[a].enumerable)}if(t){var u=Array(r.length);return Object.defineProperties(u,n),u}return Object.create(Object.getPrototypeOf(r),n)}(n,t),i={i:n?5:4,A:r?r.A:m(),P:!1,I:!1,D:{},l:r,t:t,k:o,o:null,O:!1,C:!1};return Object.defineProperty(o,H,{value:i,writable:!0}),o},S:function(t,e,o){o?n(e)&&e[H].A===t&&r(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var r=e[H];if(r){var n=r.t,o=r.k,c=r.D,f=r.i;if(4===f)i(o,function(e){e!==H&&(void 0!==n[e]||u(n,e)?c[e]||t(o[e]):(c[e]=!0,z(r)))}),i(n,function(t){void 0!==o[t]||u(o,t)||(c[t]=!1,z(r))});else if(5===f){if(a(r)&&(z(r),c.length=!0),o.length<n.length)for(var s=o.length;s<n.length;s++)c[s]=!1;else for(var p=n.length;p<o.length;p++)c[p]=!0;for(var l=Math.min(o.length,n.length),h=0;h<l;h++)void 0===c[h]&&t(o[h])}}}}(t.p[0]),r(t.p))},K:function(t){return 4===t.i?o(t):a(t)}})}function N(){function e(t){if(!t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(e);if(s(t))return new Map(Array.from(t.entries()).map(function(t){return[t[0],e(t[1])]}));if(v(t))return new Set(Array.from(t).map(e));var r=Object.create(Object.getPrototypeOf(t));for(var n in t)r[n]=e(t[n]);return r}function r(t){return n(t)?e(t):t}var c="add";y("Patches",{$:function(r,n){return n.forEach(function(n){for(var i=n.path,u=n.op,f=r,s=0;s<i.length-1;s++)"object"!=typeof(f=a(f,i[s]))&&t(15,i.join("/"));var p=o(f),l=e(n.value),h=i[i.length-1];switch(u){case"replace":switch(p){case 2:return f.set(h,l);case 3:t(16);default:return f[h]=l}case c:switch(p){case 1:return f.splice(h,0,l);case 2:return f.set(h,l);case 3:return f.add(l);default:return f[h]=l}case"remove":switch(p){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(n.value);default:return delete f[h]}default:t(17,u)}}),r},R:function(t,e,n,o){switch(t.i){case 0:case 4:case 2:return function(t,e,n,o){var f=t.t,s=t.o;i(t.D,function(t,i){var p=a(f,t),l=a(s,t),h=i?u(f,t)?"replace":c:"remove";if(p!==l||"replace"!==h){var v=e.concat(t);n.push("remove"===h?{op:h,path:v}:{op:h,path:v,value:l}),o.push(h===c?{op:"remove",path:v}:"remove"===h?{op:c,path:v,value:r(p)}:{op:"replace",path:v,value:r(p)})}})}(t,e,n,o);case 5:case 1:return function(t,e,n,o){var i=t.t,a=t.D,u=t.o;if(u.length<i.length){var f=[u,i];i=f[0],u=f[1];var s=[o,n];n=s[0],o=s[1]}for(var p=0;p<i.length;p++)if(a[p]&&u[p]!==i[p]){var l=e.concat([p]);n.push({op:"replace",path:l,value:r(u[p])}),o.push({op:"replace",path:l,value:r(i[p])})}for(var h=i.length;h<u.length;h++){var v=e.concat([h]);n.push({op:c,path:v,value:r(u[h])})}i.length<u.length&&o.push({op:"replace",path:e.concat(["length"]),value:i.length})}(t,e,n,o);case 3:return function(t,e,r,n){var o=t.t,i=t.o,a=0;o.forEach(function(t){if(!i.has(t)){var o=e.concat([a]);r.push({op:"remove",path:o,value:t}),n.unshift({op:c,path:o,value:t})}a++}),a=0,i.forEach(function(t){if(!o.has(t)){var i=e.concat([a]);r.push({op:c,path:i,value:t}),n.unshift({op:"remove",path:i,value:t})}a++})}(t,e,n,o)}},M:function(t,e,r,n){r.push({op:"replace",path:[],value:e}),n.push({op:"replace",path:[],value:t.t})}})}function T(){function e(t,e){function r(){this.constructor=t}a(t,e),t.prototype=(r.prototype=e.prototype,new r)}function n(t){t.o||(t.D=new Map,t.o=new Map(t.t))}function o(t){t.o||(t.o=new Set,t.t.forEach(function(e){if(r(e)){var n=E(t.A.h,e,t);t.p.set(e,n),t.o.add(n)}else t.o.add(e)}))}function i(e){e.O&&t(3,JSON.stringify(p(e)))}var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},u=function(){function t(t,e){return this[H]={i:2,l:e,A:e?e.A:m(),P:!1,I:!1,o:void 0,D:void 0,t:t,k:this,C:!1,O:!1},this}e(t,Map);var o=t.prototype;return Object.defineProperty(o,"size",{get:function(){return p(this[H]).size}}),o.has=function(t){return p(this[H]).has(t)},o.set=function(t,e){var r=this[H];return i(r),p(r).has(t)&&p(r).get(t)===e||(n(r),z(r),r.D.set(t,!0),r.o.set(t,e),r.D.set(t,!0)),this},o.delete=function(t){if(!this.has(t))return!1;var e=this[H];return i(e),n(e),z(e),e.D.set(t,!1),e.o.delete(t),!0},o.clear=function(){var t=this[H];return i(t),n(t),z(t),t.D=new Map,t.o.clear()},o.forEach=function(t,e){var r=this;p(this[H]).forEach(function(n,o){t.call(e,r.get(o),o,r)})},o.get=function(t){var e=this[H];i(e);var o=p(e).get(t);if(e.I||!r(o))return o;if(o!==e.t.get(t))return o;var a=E(e.A.h,o,e);return n(e),e.o.set(t,a),a},o.keys=function(){return p(this[H]).keys()},o.values=function(){var t,e=this,r=this.keys();return(t={})[L]=function(){return e.values()},t.next=function(){var t=r.next();return t.done?t:{done:!1,value:e.get(t.value)}},t},o.entries=function(){var t,e=this,r=this.keys();return(t={})[L]=function(){return e.entries()},t.next=function(){var t=r.next();if(t.done)return t;var n=e.get(t.value);return{done:!1,value:[t.value,n]}},t},o[L]=function(){return this.entries()},t}(),c=function(){function t(t,e){return this[H]={i:3,l:e,A:e?e.A:m(),P:!1,I:!1,o:void 0,t:t,k:this,p:new Map,O:!1,C:!1},this}e(t,Set);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return p(this[H]).size}}),r.has=function(t){var e=this[H];return i(e),e.o?!!e.o.has(t)||!(!e.p.has(t)||!e.o.has(e.p.get(t))):e.t.has(t)},r.add=function(t){var e=this[H];return i(e),this.has(t)||(o(e),z(e),e.o.add(t)),this},r.delete=function(t){if(!this.has(t))return!1;var e=this[H];return i(e),o(e),z(e),e.o.delete(t)||!!e.p.has(t)&&e.o.delete(e.p.get(t))},r.clear=function(){var t=this[H];return i(t),o(t),z(t),t.o.clear()},r.values=function(){var t=this[H];return i(t),o(t),t.o.values()},r.entries=function(){var t=this[H];return i(t),o(t),t.o.entries()},r.keys=function(){return this.values()},r[L]=function(){return this.values()},r.forEach=function(t,e){for(var r=this.values(),n=r.next();!n.done;)t.call(e,n.value,n.value,this),n=r.next()},t}();y("MapSet",{T:function(t,e){return new u(t,e)},F:function(t,e){return new c(t,e)}})}function F(){D(),T(),N()}function C(t){return t}function J(t){return t}var K,$,G="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),U="undefined"!=typeof Map,W="undefined"!=typeof Set,X="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,q=G?Symbol("immer-nothing"):((K={})["immer-nothing"]=!0,K),B=G?Symbol("immer-draftable"):"__$immer_draftable",H=G?Symbol("immer-state"):"__$immer_state",L="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",Q={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},19:"plugin not loaded",20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(t){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+t+"'"},22:function(t){return"'current' expects a draft, got: "+t},23:function(t){return"'original' expects a draft, got: "+t}},V="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Y=Object.getOwnPropertyDescriptors||function(t){var e={};return V(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},Z={},tt={get:function(t,e){if(e===H)return t;var n=p(t);if(!u(n,e))return function(t,e,r){if(r in e)for(var n=Object.getPrototypeOf(e);n;){var o,i=Object.getOwnPropertyDescriptor(n,r);if(i)return"value"in i?i.value:null===(o=i.get)||void 0===o?void 0:o.call(t.k);n=Object.getPrototypeOf(n)}}(t,n,e);var o=n[e];return t.I||!r(o)?o:o===x(t.t,e)?(I(t),t.o[e]=E(t.A.h,o,t)):o},has:function(t,e){return e in p(t)},ownKeys:function(t){return Reflect.ownKeys(p(t))},set:function(t,e,r){if(t.D[e]=!0,!t.P){if(c(r,x(p(t),e))&&void 0!==r)return!0;I(t),z(t)}return t.o[e]=r,!0},deleteProperty:function(t,e){return void 0!==x(t.t,e)||e in t.t?(t.D[e]=!1,I(t),z(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=p(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:n.enumerable,value:r[e]}:n},defineProperty:function(){t(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){t(12)}},nt={};i(tt,function(t,e){nt[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),nt.deleteProperty=function(e,r){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(r))&&t(13),tt.deleteProperty.call(this,e[0],r)},nt.set=function(e,r,n){return"production"!==process.env.NODE_ENV&&"length"!==r&&isNaN(parseInt(r))&&t(14),tt.set.call(this,e[0],r,n,e[0])};var rt=function(){function e(t){this.g=X,this.N="production"!==process.env.NODE_ENV,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var o=e.prototype;return o.produce=function(e,n,o){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=this;return function(t){var e=this;void 0===t&&(t=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(t,function(t){var r;return(r=n).call.apply(r,[e,t].concat(o))})}}var u;if("function"!=typeof n&&t(6),void 0!==o&&"function"!=typeof o&&t(7),r(e)){var c=g(this),f=E(this,e,void 0),s=!0;try{u=n(f),s=!1}finally{s?j(c):O(c)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then(function(t){return _(c,o),S(t,c)},function(t){throw j(c),t}):(_(c,o),S(u,c))}if(!e||"object"!=typeof e){if((u=n(e))===q)return;return void 0===u&&(u=e),this.N&&d(u,!0),u}t(21,e)},o.produceWithPatches=function(t,e){var r,n,o=this;return"function"==typeof t?function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o.produceWithPatches(e,function(e){return t.apply(void 0,[e].concat(n))})}:[this.produce(t,e,function(t,e){r=t,n=e}),r,n]},o.createDraft=function(e){r(e)||t(8),n(e)&&(e=k(e));var o=g(this),i=E(this,e,void 0);return i[H].C=!0,O(o),i},o.finishDraft=function(e,r){var n=e&&e[H];"production"!==process.env.NODE_ENV&&(n&&n.C||t(9),n.I&&t(10));var o=n.A;return _(o,r),S(void 0,o)},o.setAutoFreeze=function(t){this.N=t},o.setUseProxies=function(e){e&&!X&&t(20),this.g=e},o.applyPatches=function(t,e){var r;for(r=e.length-1;r>=0;r--){var o=e[r];if(0===o.path.length&&"replace"===o.op){t=o.value;break}}var i=b("Patches").$;return n(t)?i(t,e):this.produce(t,function(t){return i(t,e.slice(r+1))})},e}(),et=new rt,it=et.produce,ot=et.produceWithPatches.bind(et),ut=et.setAutoFreeze.bind(et),at=et.setUseProxies.bind(et),ft=et.applyPatches.bind(et),ct=et.createDraft.bind(et),st=et.finishDraft.bind(et);export default it;export{rt as Immer,ft as applyPatches,C as castDraft,J as castImmutable,ct as createDraft,k as current,F as enableAllPlugins,D as enableES5,T as enableMapSet,N as enablePatches,st as finishDraft,B as immerable,n as isDraft,r as isDraftable,q as nothing,e as original,it as produce,ot as produceWithPatches,ut as setAutoFreeze,at as setUseProxies};