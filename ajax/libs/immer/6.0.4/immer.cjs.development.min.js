"use strict";var _ref;Object.defineProperty(exports,"__esModule",{value:!0});var hasSymbol="undefined"!=typeof Symbol,hasMap="undefined"!=typeof Map,hasSet="undefined"!=typeof Set,hasProxies="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,NOTHING=hasSymbol?Symbol("immer-nothing"):((_ref={})["immer-nothing"]=!0,_ref),DRAFTABLE=hasSymbol?Symbol("immer-draftable"):"__$immer_draftable",DRAFT_STATE=hasSymbol?Symbol("immer-state"):"__$immer_state",iteratorSymbol=hasSymbol?Symbol.iterator:"@@iterator",errors={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},19:"plugin not loaded",20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available"};function die(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=errors[e],o=a?"function"==typeof a?a.apply(null,r):a:"unknown error nr: "+e;throw new Error("[Immer] "+o)}var ArchtypeObject=0,ArchtypeArray=1,ArchtypeMap=2,ArchtypeSet=3,ProxyTypeProxyObject=0,ProxyTypeProxyArray=1,ProxyTypeES5Object=4,ProxyTypeES5Array=5,ProxyTypeMap=2,ProxyTypeSet=3;function isDraft(e){return!!e&&!!e[DRAFT_STATE]}function isDraftable(e){return!!e&&(isPlainObject(e)||Array.isArray(e)||!!e[DRAFTABLE]||!!e.constructor[DRAFTABLE]||isMap(e)||isSet(e))}function isPlainObject(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}function original(e){if(e&&e[DRAFT_STATE])return e[DRAFT_STATE].base_}var ownKeys="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function each(r,n){getArchtype(r)===ArchtypeObject?ownKeys(r).forEach(function(e){return n(e,r[e],r)}):r.forEach(function(e,t){return n(t,e,r)})}function getArchtype(e){var t=e[DRAFT_STATE];return t?3<t.type_?t.type_-4:t.type_:Array.isArray(e)?ArchtypeArray:isMap(e)?ArchtypeMap:isSet(e)?ArchtypeSet:ArchtypeObject}function has(e,t){return getArchtype(e)===ArchtypeMap?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function get(e,t){return getArchtype(e)===ArchtypeMap?e.get(t):e[t]}function set(e,t,r){var n=getArchtype(e);n===ArchtypeMap?e.set(t,r):n===ArchtypeSet?(e.delete(t),e.add(r)):e[t]=r}function is(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function isMap(e){return hasMap&&e instanceof Map}function isSet(e){return hasSet&&e instanceof Set}function latest(e){return e.copy_||e.base_}function shallowCopy(n,a){if(void 0===a&&(a=!1),Array.isArray(n))return n.slice();var o=Object.create(Object.getPrototypeOf(n));return each(n,function(e){var t,r;e!==DRAFT_STATE&&(r=(t=Object.getOwnPropertyDescriptor(n,e)).value,t.get&&(a||die(1),r=t.get.call(n)),t.enumerable?o[e]=r:Object.defineProperty(o,e,{value:r,writable:!0,configurable:!0}))}),o}function freeze(e,t){isDraft(e)||Object.isFrozen(e)||!isDraftable(e)||(1<getArchtype(e)&&(e.set=e.add=e.clear=e.delete=dontMutateFrozenCollections),Object.freeze(e),t&&each(e,function(e,t){return freeze(t,!0)}))}function dontMutateFrozenCollections(){die(2)}var currentScope,plugins={};function getPlugin(e){var t=plugins[e];return t||die(18,e),t}function loadPlugin(e,t){plugins[e]=t}function getCurrentScope(){return currentScope||die(0),currentScope}function createScope(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(e,t){t&&(getPlugin("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function revokeScope(e){leaveScope(e),e.drafts_.forEach(revokeDraft),e.drafts_=null}function leaveScope(e){e===currentScope&&(currentScope=e.parent_)}function enterScope(e){return currentScope=createScope(currentScope,e)}function revokeDraft(e){var t=e[DRAFT_STATE];t.type_===ProxyTypeProxyObject||t.type_===ProxyTypeProxyArray?t.revoke_():t.revoked_=!0}function processResult(e,t){t.unfinalizedDrafts_=t.drafts_.length;var r=t.drafts_[0],n=void 0!==e&&e!==r;return t.immer_.useProxies_||getPlugin("ES5").willFinalizeES5_(t,e,n),n?(r[DRAFT_STATE].modified_&&(revokeScope(t),die(4)),isDraftable(e)&&(e=finalize(t,e),t.parent_||maybeFreeze(t,e)),t.patches_&&getPlugin("Patches").generateReplacementPatches_(r[DRAFT_STATE],e,t.patches_,t.inversePatches_)):e=finalize(t,r,[]),revokeScope(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==NOTHING?e:void 0}function finalize(r,n,a){if(Object.isFrozen(n))return n;var o,i=n[DRAFT_STATE];return i?i.scope_!==r?n:i.modified_?(i.finalized_||(i.finalized_=!0,i.scope_.unfinalizedDrafts_--,each(o=i.type_===ProxyTypeES5Object||i.type_===ProxyTypeES5Array?i.copy_=shallowCopy(i.draft_,!0):i.copy_,function(e,t){return finalizeProperty(r,i,o,e,t,a)}),maybeFreeze(r,o,!1),a&&r.patches_&&getPlugin("Patches").generatePatches_(i,a,r.patches_,r.inversePatches_)),i.copy_):(maybeFreeze(r,i.base_,!0),i.base_):(each(n,function(e,t){return finalizeProperty(r,i,n,e,t,a)}),n)}function finalizeProperty(e,t,r,n,a,o){if(a===r&&die(5),isDraft(a)){var i=finalize(e,a,o&&t&&t.type_!==ProxyTypeSet&&!has(t.assigned_,n)?o.concat(n):void 0);if(set(r,n,i),!isDraft(i))return;e.canAutoFreeze_=!1}if((!t||!is(a,get(t.base_,n)))&&isDraftable(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;finalize(e,a),t&&t.scope_.parent_||maybeFreeze(e,a)}}function maybeFreeze(e,t,r){void 0===r&&(r=!1),e.immer_.autoFreeze_&&e.canAutoFreeze_&&freeze(t,r)}function createProxyProxy(e,t){var r=Array.isArray(e),n={type_:r?ProxyTypeProxyArray:ProxyTypeProxyObject,scope_:t?t.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,drafts_:{},copy_:null,revoke_:null,isManual_:!1},a=n,o=objectTraps;r&&(a=[n],o=arrayTraps);var i=Proxy.revocable(a,o),s=i.revoke,c=i.proxy;return n.draft_=c,n.revoke_=s,c}var objectTraps={get:function(e,t){if(t===DRAFT_STATE)return e;var r=e.drafts_;if(!e.modified_&&has(r,t))return r[t];var n=latest(e)[t];if(e.finalized_||!isDraftable(n))return n;if(e.modified_){if(n!==peek(e.base_,t))return n;r=e.copy_}return r[t]=createProxy(e.scope_.immer_,n,e)},has:function(e,t){return t in latest(e)},ownKeys:function(e){return Reflect.ownKeys(latest(e))},set:function(e,t,r){if(!e.modified_){var n=peek(e.base_,t);if(r?is(n,r)||r===e.drafts_[t]:is(n,r)&&t in e.base_)return!0;prepareCopy(e),markChangedProxy(e)}return e.assigned_[t]=!0,e.copy_[t]=r,!0},deleteProperty:function(e,t){return void 0!==peek(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,prepareCopy(e),markChangedProxy(e)):e.assigned_[t]&&delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor:function(e,t){var r=latest(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&(n.writable=!0,n.configurable=e.type_!==ProxyTypeProxyArray||"length"!==t),n},defineProperty:function(){die(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.base_)},setPrototypeOf:function(){die(12)}},arrayTraps={};function peek(e,t){var r=e[DRAFT_STATE],n=Reflect.getOwnPropertyDescriptor(r?latest(r):e,t);return n&&n.value}function markChangedProxy(e){var r;e.modified_||(e.modified_=!0,e.type_!==ProxyTypeProxyObject&&e.type_!==ProxyTypeProxyArray||(r=e.copy_=shallowCopy(e.base_),each(e.drafts_,function(e,t){r[e]=t}),e.drafts_=void 0),e.parent_&&markChangedProxy(e.parent_))}function prepareCopy(e){e.copy_||(e.copy_=shallowCopy(e.base_))}each(objectTraps,function(e,t){arrayTraps[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),arrayTraps.deleteProperty=function(e,t){return isNaN(parseInt(t))&&die(13),objectTraps.deleteProperty.call(this,e[0],t)},arrayTraps.set=function(e,t,r){return"length"!==t&&isNaN(parseInt(t))&&die(14),objectTraps.set.call(this,e[0],t,r,e[0])};var Immer=function(){function e(e){this.useProxies_=hasProxies,this.autoFreeze_=!0,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,o,t){if("function"==typeof e&&"function"!=typeof o){var i=o;o=e;var s=this;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,n=new Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return s.produce(e,function(e){return o.call.apply(o,[t,e].concat(n))})}}var r;if("function"!=typeof o&&die(6),void 0!==t&&"function"!=typeof t&&die(7),isDraftable(e)){var n=enterScope(this),a=createProxy(this,e,void 0),c=!0;try{r=o(a),c=!1}finally{(c?revokeScope:leaveScope)(n)}return"undefined"!=typeof Promise&&r instanceof Promise?r.then(function(e){return usePatchesInScope(n,t),processResult(e,n)},function(e){throw revokeScope(n),e}):(usePatchesInScope(n,t),processResult(r,n))}if((r=o(e))!==NOTHING)return void 0===r&&(r=e),this.autoFreeze_&&freeze(r,!0),r},t.produceWithPatches=function(a,e){var r,n,o=this;return"function"==typeof a?function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return o.produceWithPatches(e,function(e){return a.apply(void 0,[e].concat(r))})}:[this.produce(a,e,function(e,t){r=e,n=t}),r,n]},t.createDraft=function(e){isDraftable(e)||die(8);var t=enterScope(this),r=createProxy(this,e,void 0);return r[DRAFT_STATE].isManual_=!0,leaveScope(t),r},t.finishDraft=function(e,t){var r=e&&e[DRAFT_STATE];r&&r.isManual_||die(9),r.finalized_&&die(10);var n=r.scope_;return usePatchesInScope(n,t),processResult(void 0,n)},t.setAutoFreeze=function(e){this.autoFreeze_=e},t.setUseProxies=function(e){hasProxies||die(20),this.useProxies_=e},t.applyPatches=function(e,t){for(var r=t.length-1;0<=r;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}var a=getPlugin("Patches").applyPatches_;return isDraft(e)?a(e,t):this.produce(e,function(e){return a(e,t.slice(r+1))})},e}();function createProxy(e,t,r){var n=isMap(t)?getPlugin("MapSet").proxyMap_(t,r):isSet(t)?getPlugin("MapSet").proxySet_(t,r):e.useProxies_?createProxyProxy(t,r):getPlugin("ES5").createES5Proxy_(t,r);return(r?r.scope_:getCurrentScope()).drafts_.push(n),n}function markChanged(e,t){e.useProxies_?markChangedProxy(t):getPlugin("ES5").markChangedES5_(t)}function enableES5(){function s(e,t){var r=e[DRAFT_STATE];if(!r||r.finalizing_)return e[t];r.finalizing_=!0;var n=e[t];return r.finalizing_=!1,n}function f(e){e.modified_||(e.modified_=!0,e.parent_&&f(e.parent_))}function c(e){e.copy_||(e.copy_=r(e.base_))}function r(e){var t=e&&e[DRAFT_STATE];if(t){t.finalizing_=!0;var r=shallowCopy(t.draft_,!0);return t.finalizing_=!1,r}return shallowCopy(e)}var u={};function n(e){for(var t=e.length-1;0<=t;t--){var r=e[t][DRAFT_STATE];if(!r.modified_)switch(r.type_){case ProxyTypeES5Array:l(r)&&f(r);break;case ProxyTypeES5Object:a(r)&&f(r)}}}function a(e){for(var t=e.base_,r=e.draft_,n=Object.keys(r),a=n.length-1;0<=a;a--){var o=n[a],i=t[o];if(void 0===i&&!has(t,o))return 1;var s=r[o],c=s&&s[DRAFT_STATE];if(c?c.base_!==i:!is(s,i))return 1}return n.length!==Object.keys(t).length}function l(e){var t=e.draft_;if(t.length!==e.base_.length)return 1;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}function p(e){e.revoked_&&die(3,JSON.stringify(latest(e)))}loadPlugin("ES5",{createES5Proxy_:function(a,e){var o=Array.isArray(a),i=r(a);each(i,function(e){var t,r,n;!function(e,t,r){var n=u[t];n?n.enumerable=r:u[t]=n={enumerable:r,get:function(){return function(e,t){p(e);var r=s(latest(e),t);if(e.finalizing_)return r;if(r===s(e.base_,t)&&isDraftable(r))return c(e),e.copy_[t]=createProxy(e.scope_.immer_,r,e);return r}(this[DRAFT_STATE],t)},set:function(e){!function(e,t,r){if(p(e),e.assigned_[t]=!0,!e.modified_){if(is(r,s(latest(e),t)))return;f(e),c(e)}e.copy_[t]=r}(this[DRAFT_STATE],t,e)}};Object.defineProperty(e,t,n)}(i,e,o||(t=a,r=e,!(!(n=Object.getOwnPropertyDescriptor(t,r))||!n.enumerable)))});var t={type_:o?ProxyTypeES5Array:ProxyTypeES5Object,scope_:e?e.scope_:getCurrentScope(),modified_:!1,finalizing_:!1,finalized_:!1,assigned_:{},parent_:e,base_:a,draft_:i,copy_:null,revoked_:!1,isManual_:!1};return Object.defineProperty(i,DRAFT_STATE,{value:t,writable:!0}),i},markChangedES5_:f,willFinalizeES5_:function(e,t,r){e.drafts_.forEach(function(e){e[DRAFT_STATE].finalizing_=!0}),r?isDraft(t)&&t[DRAFT_STATE].scope_===e&&n(e.drafts_):(e.patches_&&function t(e){if(!e||"object"!=typeof e)return;var r=e[DRAFT_STATE];if(!r)return;var n=r.base_,a=r.draft_,o=r.assigned_,i=r.type_;if(i===ProxyTypeES5Object)each(a,function(e){e!==DRAFT_STATE&&(void 0!==n[e]||has(n,e)?o[e]||t(a[e]):(o[e]=!0,f(r)))}),each(n,function(e){void 0!==a[e]||has(a,e)||(o[e]=!1,f(r))});else if(i===ProxyTypeES5Array){if(l(r)&&(f(r),o.length=!0),a.length<n.length)for(var s=a.length;s<n.length;s++)o[s]=!1;else for(var c=n.length;c<a.length;c++)o[c]=!0;for(var u=Math.min(a.length,n.length),p=0;p<u;p++)void 0===o[p]&&t(a[p])}}(e.drafts_[0]),n(e.drafts_))}})}function enablePatches(){var v="replace",m="add",b="remove";function u(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(u);if(isMap(e))return new Map(Array.from(e.entries()).map(function(e){return[e[0],u(e[1])]}));if(isSet(e))return new Set(Array.from(e).map(u));var t=Object.create(Object.getPrototypeOf(e));for(var r in e)t[r]=u(e[r]);return t}function T(e){return isDraft(e)?u(e):e}loadPlugin("Patches",{applyPatches_:function(c,e){return e.forEach(function(e){for(var t=e.path,r=e.op,n=c,a=0;a<t.length-1;a++)"object"!=typeof(n=get(n,t[a]))&&die(15,t.join("/"));var o=getArchtype(n),i=u(e.value),s=t[t.length-1];switch(r){case v:switch(o){case ArchtypeMap:return n.set(s,i);case ArchtypeSet:die(16);default:return n[s]=i}case m:switch(o){case ArchtypeArray:return n.splice(s,0,i);case ArchtypeMap:return n.set(s,i);case ArchtypeSet:return n.add(i);default:return n[s]=i}case b:switch(o){case ArchtypeArray:return n.splice(s,1);case ArchtypeMap:return n.delete(s);case ArchtypeSet:return n.delete(e.value);default:return delete n[s]}default:die(17,r)}}),c},generatePatches_:function(e,t,r,n){switch(e.type_){case ProxyTypeProxyObject:case ProxyTypeES5Object:case ProxyTypeMap:return l=t,y=r,_=n,h=(f=e).base_,d=f.copy_,void each(f.assigned_,function(e,t){var r,n=get(h,e),a=get(d,e),o=t?has(h,e)?v:m:b;n===a&&o===v||(r=l.concat(e),y.push(o===b?{op:o,path:r}:{op:o,path:r,value:a}),_.push(o===m?{op:b,path:r}:o===b?{op:m,path:r,value:T(n)}:{op:v,path:r,value:T(n)}))});case ProxyTypeES5Array:case ProxyTypeProxyArray:return function(e,t,r,n){var a=e.base_,o=e.assigned_,i=e.copy_;{var s,c;i.length<a.length&&(a=(s=[i,a])[0],i=s[1],r=(c=[n,r])[0],n=c[1])}var u=i.length-a.length,p=0;for(;a[p]===i[p]&&p<a.length;)++p;var f=a.length;for(;p<f&&a[f-1]===i[f+u-1];)--f;for(var l=p;l<f;++l){var y;o[l]&&i[l]!==a[l]&&(y=t.concat([l]),r.push({op:v,path:y,value:T(i[l])}),n.push({op:v,path:y,value:T(a[l])}))}for(var _=r.length,h=f+u-1;f<=h;--h){var d=t.concat([h]);r[_+h-f]={op:m,path:d,value:T(i[h])},n.push({op:b,path:d})}}(e,t,r,n);case ProxyTypeSet:return o=t,i=r,s=n,c=(a=e).base_,u=a.copy_,p=0,c.forEach(function(e){var t;u.has(e)||(t=o.concat([p]),i.push({op:b,path:t,value:e}),s.unshift({op:m,path:t,value:e})),p++}),p=0,void u.forEach(function(e){var t;c.has(e)||(t=o.concat([p]),i.push({op:m,path:t,value:e}),s.unshift({op:b,path:t,value:e})),p++})}var a,o,i,s,c,u,p,f,l,y,_,h,d},generateReplacementPatches_:function(e,t,r,n){r.push({op:v,path:[],value:t}),n.push({op:v,path:[],value:e.base_})}})}function enableMapSet(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function r(e,t){function r(){this.constructor=e}n(e,t),e.prototype=(r.prototype=t.prototype,new r)}var a=function(){function e(e,t){return this[DRAFT_STATE]={type_:ProxyTypeMap,parent_:t,scope_:t?t.scope_:getCurrentScope(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:e,draft_:this,isManual_:!1,revoked_:!1},this}r(e,Map);var t=e.prototype;return Object.defineProperty(t,"size",{get:function(){return latest(this[DRAFT_STATE]).size}}),t.has=function(e){return latest(this[DRAFT_STATE]).has(e)},t.set=function(e,t){var r=this[DRAFT_STATE];return c(r),latest(r).get(e)!==t&&(o(r),markChanged(r.scope_.immer_,r),r.assigned_.set(e,!0),r.copy_.set(e,t),r.assigned_.set(e,!0)),this},t.delete=function(e){if(!this.has(e))return!1;var t=this[DRAFT_STATE];return c(t),o(t),markChanged(t.scope_.immer_,t),t.assigned_.set(e,!1),t.copy_.delete(e),!0},t.clear=function(){var e=this[DRAFT_STATE];return c(e),o(e),markChanged(e.scope_.immer_,e),e.assigned_=new Map,e.copy_.clear()},t.forEach=function(n,a){var o=this;latest(this[DRAFT_STATE]).forEach(function(e,t,r){n.call(a,o.get(t),t,o)})},t.get=function(e){var t=this[DRAFT_STATE];c(t);var r=latest(t).get(e);if(t.finalized_||!isDraftable(r))return r;if(r!==t.base_.get(e))return r;var n=createProxy(t.scope_.immer_,r,t);return o(t),t.copy_.set(e,n),n},t.keys=function(){return latest(this[DRAFT_STATE]).keys()},t.values=function(){var t=this,r=this.keys(),e={};return e[iteratorSymbol]=function(){return t.values()},e.next=function(){var e=r.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},t.entries=function(){var r=this,n=this.keys(),e={};return e[iteratorSymbol]=function(){return r.entries()},e.next=function(){var e=n.next();if(e.done)return e;var t=r.get(e.value);return{done:!1,value:[e.value,t]}},e},t[iteratorSymbol]=function(){return this.entries()},e}();function o(e){e.copy_||(e.assigned_=new Map,e.copy_=new Map(e.base_))}var i=function(){function e(e,t){return this[DRAFT_STATE]={type_:ProxyTypeSet,parent_:t,scope_:t?t.scope_:getCurrentScope(),modified_:!1,finalized_:!1,copy_:void 0,base_:e,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1},this}r(e,Set);var t=e.prototype;return Object.defineProperty(t,"size",{get:function(){return latest(this[DRAFT_STATE]).size}}),t.has=function(e){var t=this[DRAFT_STATE];return c(t),t.copy_?!!t.copy_.has(e)||!(!t.drafts_.has(e)||!t.copy_.has(t.drafts_.get(e))):t.base_.has(e)},t.add=function(e){var t=this[DRAFT_STATE];return c(t),t.copy_?t.copy_.add(e):t.base_.has(e)||(s(t),markChanged(t.scope_.immer_,t),t.copy_.add(e)),this},t.delete=function(e){if(!this.has(e))return!1;var t=this[DRAFT_STATE];return c(t),s(t),markChanged(t.scope_.immer_,t),t.copy_.delete(e)||!!t.drafts_.has(e)&&t.copy_.delete(t.drafts_.get(e))},t.clear=function(){var e=this[DRAFT_STATE];return c(e),s(e),markChanged(e.scope_.immer_,e),e.copy_.clear()},t.values=function(){var e=this[DRAFT_STATE];return c(e),s(e),e.copy_.values()},t.entries=function(){var e=this[DRAFT_STATE];return c(e),s(e),e.copy_.entries()},t.keys=function(){return this.values()},t[iteratorSymbol]=function(){return this.values()},t.forEach=function(e,t){for(var r=this.values(),n=r.next();!n.done;)e.call(t,n.value,n.value,this),n=r.next()},e}();function s(r){r.copy_||(r.copy_=new Set,r.base_.forEach(function(e){var t;isDraftable(e)?(t=createProxy(r.scope_.immer_,e,r),r.drafts_.set(e,t),r.copy_.add(t)):r.copy_.add(e)}))}function c(e){e.revoked_&&die(3,JSON.stringify(latest(e)))}loadPlugin("MapSet",{proxyMap_:function(e,t){return new a(e,t)},proxySet_:function(e,t){return new i(e,t)}})}function enableAllPlugins(){enableES5(),enableMapSet(),enablePatches()}var immer=new Immer,produce=immer.produce,produceWithPatches=immer.produceWithPatches.bind(immer),setAutoFreeze=immer.setAutoFreeze.bind(immer),setUseProxies=immer.setUseProxies.bind(immer),applyPatches=immer.applyPatches.bind(immer),createDraft=immer.createDraft.bind(immer),finishDraft=immer.finishDraft.bind(immer);function castDraft(e){return e}function castImmutable(e){return e}exports.Immer=Immer,exports.applyPatches=applyPatches,exports.castDraft=castDraft,exports.castImmutable=castImmutable,exports.createDraft=createDraft,exports.default=produce,exports.enableAllPlugins=enableAllPlugins,exports.enableES5=enableES5,exports.enableMapSet=enableMapSet,exports.enablePatches=enablePatches,exports.finishDraft=finishDraft,exports.immerable=DRAFTABLE,exports.isDraft=isDraft,exports.isDraftable=isDraftable,exports.nothing=NOTHING,exports.original=original,exports.produce=produce,exports.produceWithPatches=produceWithPatches,exports.setAutoFreeze=setAutoFreeze,exports.setUseProxies=setUseProxies;