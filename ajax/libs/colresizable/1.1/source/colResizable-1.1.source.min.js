!function(o){var a=o(document),l=o("head"),d=null,c=[],n=0,s="id",p="px",g="JColResizer",f=parseInt,h=Math,u=o.browser.msie;l.append("<style type='text/css'>  .JColResizer{table-layout:fixed;} .JColResizer td, .JColResizer th{overflow:hidden; padding-left:0!important; padding-right:0!important;}  .JCLRgrips{ height:0px; position:relative;} .JCLRgrip{margin-left:-5px; position:absolute; z-index:5; } .JCLRgrip .JColResizer{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;cursor:e-resize;height:100%;} .JCLRLastGrip{position:absolute; width:1px; } .JCLRgripDrag{ border-left:1px dotted black;\t}</style>");function v(t,e,i){var r=d.x-d.l,n=t.c[e],s=t.c[e+1],o=n.w+r,a=s.w-r;n.width(o+p),s.width(a+p),i&&(n.w=o,s.w=a)}function w(t){if(d){var e,i=d.t,r=t.pageX-d.ox+d.l,n=i.opt.minWidth,s=d.i,o=1.5*i.cs+n+i.b,a=s==i.ln-1?i.w-o:i.g[s+1].position().left-i.cs-n,l=s?i.g[s-1].position().left+i.cs+n:o,r=h.max(l,h.min(a,r));return d.x=r,d.css("left",r+p),i.opt.liveDrag&&(v(i,s),x(i),(e=i.opt.onDrag)&&(t.currentTarget=i[0],e(t))),!1}}function m(t){var e,i;a.unbind("mousemove."+g).unbind("mouseup."+g),o("head :last-child").remove(),d&&(d.removeClass(d.t.opt.draggingClass),i=(e=d.t).opt.onResize,d.x&&(v(e,d.i,!0),x(e),i&&(t.currentTarget=e[0],i(t))),d=null)}var C=function(t){var e=t.attr(s);(t=c[e])&&t.is("table")&&(t.removeClass(g).gc.remove(),delete c[e])},b=function(r){var t=r.find("tr:first th");t.length||(t=r.find("tr:first td")),r.ln=t.length,t.each(function(t){var e=o(this),i=o(r.gc.append('<div class="JCLRgrip"></div>')[0].lastChild);i.t=r,i.i=t,(i.c=e).w=e.width(),r.g.push(i),r.c.push(e),e.width(e.w).removeAttr("width"),t<r.ln-1?i.mousedown(R).append(r.opt.gripInnerHtml).append('<div class="'+g+'"></div>'):i.addClass("JCLRLastGrip").removeClass("JCLRgrip"),i.data(g,{i:t,t:r.attr(s)})}),x(r),r.find("tr:not(:first)").find("td, th").each(function(){o(this).removeAttr("width")})},x=function(t){t.gc.width(t.w);for(var e=0;e<t.ln;e++){var i=t.c[e];t.g[e].css({left:i.offset().left-t.offset().left+i.outerWidth()+t.cs/2+p,height:t.outerHeight()})}},R=function(t){var e=o(this).data(g),i=c[e.t],r=i.g[e.i];if(r.ox=t.pageX,r.l=r.position().left,a.bind("mousemove."+g,w).bind("mouseup."+g,m),l.append("<style type='text/css'>*{cursor:e-resize!important}</style>"),r.addClass(i.opt.draggingClass),d=r,i.c[e.i].l)for(var n,s=0;s<i.ln;s++)(n=i.c[s]).l=!1,n.w=n.width();return!1};o(window).bind("resize."+g,function(){for(e in c){var t,e=c[e],i=0;if(e.removeClass(g),e.w!=e.width()){for(e.w=e.width(),t=0;t<e.ln;t++)i+=e.c[t].w;for(t=0;t<e.ln;t++)e.c[t].css("width",h.round(1e3*e.c[t].w/i)/10+"%").l=!0}x(e.addClass(g))}}),o.fn.extend({colResizable:function(t){t=o.extend({draggingClass:"JCLRgripDrag",gripInnerHtml:"",liveDrag:!1,minWidth:15,disable:!1,onDrag:null,onResize:null},t);return this.each(function(){!function(t,e){var i=o(t);if(e.disable)return C(i);var r=i.attr(s)||g+n++;i.is("table")&&!c[r]&&(i.addClass(g).attr(s,r).before('<div class="JCLRgrips"/>'),i.opt=e,i.g=[],i.c=[],i.w=i.width(),i.gc=i.prev(),i.cs=f(u?t.cellSpacing||t.currentStyle.borderSpacing:i.css("border-spacing"))||2,i.b=f(u?t.border||t.currentStyle.borderLeftWidth:i.css("border-left-width"))||1,c[r]=i,b(i))}(this,t)})}})}(jQuery);