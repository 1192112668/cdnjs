!function(s){var a=s(document),l=s("head"),d=null,p=[],n=0,o="id",c="px",g="JColResizer",h=parseInt,f=Math,u=s.browser.msie;l.append("<style type='text/css'>  .JColResizer{table-layout:fixed;} .JColResizer td, .JColResizer th{overflow:hidden; padding-left:0!important; padding-right:0!important;}  .JCLRgrips{ height:0px; position:relative;} .JCLRgrip{margin-left:-5px; position:absolute; z-index:5; } .JCLRgrip .JColResizer{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;cursor:e-resize;height:100%;top:0px} .JCLRLastGrip{position:absolute; width:1px; } .JCLRgripDrag{ border-left:1px dotted black;\t}</style>");function v(t,e,i){var r=d.x-d.l,n=t.c[e],o=t.c[e+1],s=n.w+r,a=o.w-r;n.width(s+c),o.width(a+c),i&&(n.w=s,o.w=a)}function w(t){if(d){var e,i=d.t,r=t.pageX-d.ox+d.l,n=i.opt.minWidth,o=d.i,s=1.5*i.cs+n+i.b,a=o==i.ln-1?i.w-s:i.g[o+1].position().left-i.cs-n,l=o?i.g[o-1].position().left+i.cs+n:s,r=f.max(l,f.min(a,r));return d.x=r,d.css("left",r+c),i.opt.liveDrag&&(v(i,o),x(i),(e=i.opt.onDrag)&&(t.currentTarget=i[0],e(t))),!1}}function m(t){var e,i;a.unbind("mousemove."+g).unbind("mouseup."+g),s("head :last-child").remove(),d&&(d.removeClass(d.t.opt.draggingClass),i=(e=d.t).opt.onResize,d.x&&(v(e,d.i,!0),x(e),i&&(t.currentTarget=e[0],i(t))),d=null)}var C=function(t){var e=t.attr(o);(t=p[e])&&t.is("table")&&(t.removeClass(g).gc.remove(),delete p[e])},b=function(r){var t=r.find("tr:first th");t.length||(t=r.find("tr:first td")),r.ln=t.length,t.each(function(t){var e=s(this),i=s(r.gc.append('<div class="JCLRgrip"></div>')[0].lastChild);i.t=r,i.i=t,(i.c=e).w=e.width(),r.g.push(i),r.c.push(e),e.width(e.w).removeAttr("width"),t<r.ln-1?i.mousedown(R).append(r.opt.gripInnerHtml).append('<div class="'+g+'"></div>'):i.addClass("JCLRLastGrip").removeClass("JCLRgrip"),i.data(g,{i:t,t:r.attr(o)})}),x(r),r.find("tr:not(:first)").find("td, th").each(function(){s(this).removeAttr("width")})},x=function(t){t.gc.width(t.w);for(var e=0;e<t.ln;e++){var i=t.c[e];t.g[e].css({left:i.offset().left-t.offset().left+i.outerWidth()+t.cs/2+c,height:t.opt.headerOnly?t.c[0].outerHeight():t.outerHeight()})}},R=function(t){var e=s(this).data(g),i=p[e.t],r=i.g[e.i];if(r.ox=t.pageX,r.l=r.position().left,a.bind("mousemove."+g,w).bind("mouseup."+g,m),l.append("<style type='text/css'>*{cursor:e-resize!important}</style>"),r.addClass(i.opt.draggingClass),d=r,i.c[e.i].l)for(var n,o=0;o<i.ln;o++)(n=i.c[o]).l=!1,n.w=n.width();return!1};s(window).bind("resize."+g,function(){for(e in p){var t,e=p[e],i=0;if(e.removeClass(g),e.w!=e.width()){for(e.w=e.width(),t=0;t<e.ln;t++)i+=e.c[t].w;for(t=0;t<e.ln;t++)e.c[t].css("width",f.round(1e3*e.c[t].w/i)/10+"%").l=!0}x(e.addClass(g))}}),s.fn.extend({colResizable:function(t){t=s.extend({draggingClass:"JCLRgripDrag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,disable:!1,onDrag:null,onResize:null},t);return this.each(function(){!function(t,e){var i=s(t);if(e.disable)return C(i);var r=i.attr(o)||g+n++;i.is("table")&&!p[r]&&(i.addClass(g).attr(o,r).before('<div class="JCLRgrips"/>'),i.opt=e,i.g=[],i.c=[],i.w=i.width(),i.gc=i.prev(),i.cs=h(u?t.cellSpacing||t.currentStyle.borderSpacing:i.css("border-spacing"))||2,i.b=h(u?t.border||t.currentStyle.borderLeftWidth:i.css("border-left-width"))||1,p[r]=i,b(i))}(this,t)})}})}(jQuery);