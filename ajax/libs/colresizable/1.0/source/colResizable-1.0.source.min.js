!function(o){var a=o(document),l=o("head"),d=null,c=[],s=0,n="id",p="px",f="JColResizer",g=parseInt,h=Math,u=o.browser.msie;l.append("<style type='text/css'>  .JColResizer{table-layout:fixed;} .JColResizer td, .JColResizer th{overflow:hidden; } .JCLRgrips{ height:0px; position:relative;} .JCLRgrip{margin-left:-5px; position:absolute; z-index:5; } .JCLRgrip .JColResizer{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;cursor:e-resize;height:100%;} .JCLRLastGrip{position:absolute; width:1px; } .JCLRgripDrag{ border-left:1px dotted black;\t}</style>");function v(t,e,i){var r=d.x-d.l,s=t.c[e],n=t.c[e+1],o=s.w+r,a=n.w-r;s.width(o+p),n.width(a+p),i&&(s.w=o,n.w=a)}function w(t){if(d){var e=d.t,i=t.pageX-d.ox+d.l,r=d.i,s=1.5*e.cs+20+e.b,n=r==e.ln-1?e.w-s:e.g[r+1].position().left-e.cs-20,o=r?e.g[r-1].position().left+e.cs+20:s,i=h.max(o,h.min(n,i));return d.x=i,d.css("left",i+p),e.opt.liveDrag&&(v(e,r),x(e)),!1}}function C(t){var e,i;a.unbind("mousemove."+f).unbind("mouseup."+f),o("head :last-child").remove(),d&&(d.removeClass(d.t.opt.draggingClass),i=(e=d.t).opt.onResize,d.x&&(v(e,d.i,!0),x(e),i&&(t.currentTarget=e[0],i(t))),d=null)}var b=function(t){var e=t.attr(n);(t=c[e])&&t.is("table")&&(t.removeClass(f).gc.remove(),delete c[e])},m=function(r){var t=r.find("tr:first th");t.length||(t=r.find("tr:first td")),r.ln=t.length,t.each(function(t){var e=o(this),i=o(r.gc.append('<div class="JCLRgrip"></div>')[0].lastChild);i.t=r,i.i=t,(i.c=e).w=e.width(),r.g.push(i),r.c.push(e),e.width(e.w).removeAttr("width"),t<r.ln-1?i.mousedown(R).html('<div class="'+f+'"></div>').append(r.opt.gripInnerHtml):i.addClass("JCLRLastGrip").removeClass("JCLRgrip"),i.data(f,{i:t,t:r.attr(n)})}),x(r),r.find("tr:not(:first)").find("td, th").each(function(){o(this).removeAttr("width")})},x=function(t){t.gc.width(t.w);for(var e=0;e<t.ln;e++){var i=t.c[e];t.g[e].css({left:i.offset().left-t.offset().left+i.outerWidth()+t.cs/2+p,height:t.outerHeight()})}},R=function(t){var e=o(this).data(f),i=c[e.t],r=i.g[e.i];if(r.ox=t.pageX,r.l=r.position().left,a.bind("mousemove."+f,w).bind("mouseup."+f,C),l.append("<style type='text/css'>*{cursor:e-resize!important}</style>"),r.addClass(i.opt.draggingClass),d=r,i.c[e.i].l)for(var s,n=0;n<i.ln;n++)(s=i.c[n]).l=!1,s.w=s.width();return!1};o(window).bind("resize."+f,function(){for(e in c){var t,e=c[e],i=0;if(e.removeClass(f),e.w!=e.width()){for(e.w=e.width(),t=0;t<e.ln;t++)i+=e.c[t].w;for(t=0;t<e.ln;t++)e.c[t].css("width",h.round(1e3*e.c[t].w/i)/10+"%").l=!0}x(e.addClass(f))}}),o.fn.extend({colResizable:function(t){t=o.extend({draggingClass:"JCLRgripDrag",gripInnerHtml:"",onResize:null,liveDrag:!1,disable:!1},t);return this.each(function(){!function(t,e){var i=o(t);if(e.disable)return b(i);var r=i.attr(n)||f+s++;i.is("table")&&!c[r]&&(i.addClass(f).attr(n,r).before('<div class="JCLRgrips"/>'),i.opt=e,i.g=[],i.c=[],i.w=i.width(),i.gc=i.prev(),i.cs=g(u?t.cellSpacing||t.currentStyle.borderSpacing:i.css("border-spacing"))||2,i.b=g(u?t.border||t.currentStyle.borderLeftWidth:i.css("border-left-width"))||1,c[r]=i,m(i))}(this,t)})}})}(jQuery);