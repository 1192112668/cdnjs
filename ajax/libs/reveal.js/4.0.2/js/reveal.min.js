import SlideContent from"./controllers/slidecontent.js";import SlideNumber from"./controllers/slidenumber.js";import Backgrounds from"./controllers/backgrounds.js";import AutoAnimate from"./controllers/autoanimate.js";import Fragments from"./controllers/fragments.js";import Overview from"./controllers/overview.js";import Keyboard from"./controllers/keyboard.js";import Location from"./controllers/location.js";import Controls from"./controllers/controls.js";import Progress from"./controllers/progress.js";import Pointer from"./controllers/pointer.js";import Plugins from"./controllers/plugins.js";import Print from"./controllers/print.js";import Touch from"./controllers/touch.js";import Focus from"./controllers/focus.js";import Notes from"./controllers/notes.js";import Playback from"./components/playback.js";import defaultConfig from"./config.js";import*as Util from"./utils/util.js";import*as Device from"./utils/device.js";import{SLIDES_SELECTOR,HORIZONTAL_SLIDES_SELECTOR,VERTICAL_SLIDES_SELECTOR,POST_MESSAGE_METHOD_BLACKLIST}from"./utils/constants.js";export const VERSION="4.0.2";export default function(e,t){arguments.length<2&&(t=arguments[0],e=document.querySelector(".reveal"));const i={};let n,r,a,s,o,l={},d=!1,u={hasNavigatedHorizontally:!1,hasNavigatedVertically:!1},c=[],p=1,g={layout:"",overview:""},f={},v=!1,h="idle",m=0,y=0,b=-1,w=!1,S=new SlideContent(i),L=new SlideNumber(i),E=new AutoAnimate(i),A=new Backgrounds(i),x=new Fragments(i),T=new Overview(i),N=new Keyboard(i),O=new Location(i),C=new Controls(i),P=new Progress(i),R=new Pointer(i),k=new Plugins(i),I=new Print(i),M=new Focus(i),q=new Touch(i),U=new Notes(i);function D(){d=!0,function(){f.slides.classList.add("no-transition"),Device.isMobile?f.wrapper.classList.add("no-hover"):f.wrapper.classList.remove("no-hover");A.render(),L.render(),C.render(),P.render(),U.render(),f.pauseOverlay=Util.createSingletonNode(f.wrapper,"div","pause-overlay",l.controls?'<button class="resume-button">Resume presentation</button>':null),f.statusElement=function(){let e=f.wrapper.querySelector(".aria-status");e||((e=document.createElement("div")).style.position="absolute",e.style.height="1px",e.style.width="1px",e.style.overflow="hidden",e.style.clip="rect( 1px, 1px, 1px, 1px )",e.classList.add("aria-status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),f.wrapper.appendChild(e));return e}(),f.wrapper.setAttribute("role","application")}(),l.postMessage&&window.addEventListener("message",e=>{let t=e.data;if("string"==typeof t&&"{"===t.charAt(0)&&"}"===t.charAt(t.length-1)&&(t=JSON.parse(t)).method&&"function"==typeof i[t.method])if(!1===POST_MESSAGE_METHOD_BLACKLIST.test(t.method)){const e=i[t.method].apply(i,t.args);Z("callback",{method:t.method,result:e})}else console.warn('reveal.js: "'+t.method+'" is is blacklisted from the postMessage API')},!1),setInterval(()=>{0===f.wrapper.scrollTop&&0===f.wrapper.scrollLeft||(f.wrapper.scrollTop=0,f.wrapper.scrollLeft=0)},1e3),we().forEach(e=>{Util.queryAll(e,"section").forEach((e,t)=>{t>0&&(e.classList.remove("present"),e.classList.remove("past"),e.classList.add("future"),e.setAttribute("aria-hidden","true"))})}),j(),O.readURL(),A.update(!0),setTimeout(()=>{f.slides.classList.remove("no-transition"),f.wrapper.classList.add("ready"),W({type:"ready",data:{indexh:n,indexv:r,currentSlide:s}})},1),I.isPrintingPDF()&&(F(),"complete"===document.readyState?I.setupPDF():window.addEventListener("load",()=>{I.setupPDF()}))}function H(e){f.statusElement.textContent=e}function _(e){let t="";if(3===e.nodeType)t+=e.textContent;else if(1===e.nodeType){let i=e.getAttribute("aria-hidden"),n="none"===window.getComputedStyle(e).display;"true"===i||n||Array.from(e.childNodes).forEach(e=>{t+=_(e)})}return""===(t=t.trim())?"":t+" "}function j(e){const t={...l};if("object"==typeof e&&Util.extend(l,e),!1===i.isReady())return;const n=f.wrapper.querySelectorAll(SLIDES_SELECTOR).length;f.wrapper.classList.remove(t.transition),f.wrapper.classList.add(l.transition),f.wrapper.setAttribute("data-transition-speed",l.transitionSpeed),f.wrapper.setAttribute("data-background-transition",l.backgroundTransition),l.shuffle&&ge(),Util.toggleClass(f.wrapper,"embedded",l.embedded),Util.toggleClass(f.wrapper,"rtl",l.rtl),Util.toggleClass(f.wrapper,"center",l.center),!1===l.pause&&le(),l.previewLinks?($(),Q("[data-preview-link=false]")):(Q(),$("[data-preview-link]:not([data-preview-link=false])")),E.reset(),o&&(o.destroy(),o=null),n>1&&l.autoSlide&&l.autoSlideStoppable&&((o=new Playback(f.wrapper,()=>Math.min(Math.max((Date.now()-b)/m,0),1))).on("click",ze),w=!1),"default"!==l.navigationMode?f.wrapper.setAttribute("data-navigation-mode",l.navigationMode):f.wrapper.removeAttribute("data-navigation-mode"),U.configure(l,t),M.configure(l,t),R.configure(l,t),C.configure(l,t),P.configure(l,t),N.configure(l,t),x.configure(l,t),L.configure(l,t),pe()}function z(){v=!0,window.addEventListener("resize",He,!1),l.touch&&q.bind(),l.keyboard&&N.bind(),l.progress&&P.bind(),l.respondToHashChanges&&O.bind(),C.bind(),M.bind(),f.slides.addEventListener("transitionend",De,!1),f.pauseOverlay.addEventListener("click",le,!1),l.focusBodyOnPageVisibilityChange&&document.addEventListener("visibilitychange",_e,!1)}function F(){v=!1,q.unbind(),M.unbind(),N.unbind(),C.unbind(),P.unbind(),O.unbind(),window.removeEventListener("resize",He,!1),f.slides.removeEventListener("transitionend",De,!1),f.pauseOverlay.removeEventListener("click",le,!1)}function V(t,i,n){e.addEventListener(t,i,n)}function B(t,i,n){e.removeEventListener(t,i,n)}function K(e){"string"==typeof e.layout&&(g.layout=e.layout),"string"==typeof e.overview&&(g.overview=e.overview),g.layout?Util.transformElement(f.slides,g.layout+" "+g.overview):Util.transformElement(f.slides,g.overview)}function W({target:e=f.wrapper,type:t,data:i,bubbles:n=!0}){let r=document.createEvent("HTMLEvents",1,2);r.initEvent(t,n,!0),Util.extend(r,i),e.dispatchEvent(r),e===f.wrapper&&Z(t)}function Z(e,t){if(l.postMessageEvents&&window.parent!==window.self){let i={namespace:"reveal",eventName:e,state:Te()};Util.extend(i,t),window.parent.postMessage(JSON.stringify(i),"*")}}function $(e="a"){Array.from(f.wrapper.querySelectorAll(e)).forEach(e=>{/^(http|www)/gi.test(e.getAttribute("href"))&&e.addEventListener("click",je,!1)})}function Q(e="a"){Array.from(f.wrapper.querySelectorAll(e)).forEach(e=>{/^(http|www)/gi.test(e.getAttribute("href"))&&e.removeEventListener("click",je,!1)})}function G(){if(l.help){J(),f.overlay=document.createElement("div"),f.overlay.classList.add("overlay"),f.overlay.classList.add("overlay-help"),f.wrapper.appendChild(f.overlay);let e='<p class="title">Keyboard Shortcuts</p><br/>',t=N.getShortcuts(),i=N.getBindings();e+="<table><th>KEY</th><th>ACTION</th>";for(let i in t)e+=`<tr><td>${i}</td><td>${t[i]}</td></tr>`;for(let t in i)i[t].key&&i[t].description&&(e+=`<tr><td>${i[t].key}</td><td>${i[t].description}</td></tr>`);e+="</table>",f.overlay.innerHTML=`\n\t\t\t\t<header>\n\t\t\t\t\t<a class="close" href="#"><span class="icon"></span></a>\n\t\t\t\t</header>\n\t\t\t\t<div class="viewport">\n\t\t\t\t\t<div class="viewport-inner">${e}</div>\n\t\t\t\t</div>\n\t\t\t`,f.overlay.querySelector(".close").addEventListener("click",e=>{J(),e.preventDefault()},!1)}}function J(){return!!f.overlay&&(f.overlay.parentNode.removeChild(f.overlay),f.overlay=null,!0)}function X(){if(f.wrapper&&!I.isPrintingPDF()){if(!l.disableLayout){Device.isMobile&&!l.embedded&&document.documentElement.style.setProperty("--vh",.01*window.innerHeight+"px");const e=ee(),t=p;Y(l.width,l.height),f.slides.style.width=e.width+"px",f.slides.style.height=e.height+"px",p=Math.min(e.presentationWidth/e.width,e.presentationHeight/e.height),p=Math.max(p,l.minScale),1===(p=Math.min(p,l.maxScale))?(f.slides.style.zoom="",f.slides.style.left="",f.slides.style.top="",f.slides.style.bottom="",f.slides.style.right="",K({layout:""})):p>1&&Device.supportsZoom&&window.devicePixelRatio<2?(f.slides.style.zoom=p,f.slides.style.left="",f.slides.style.top="",f.slides.style.bottom="",f.slides.style.right="",K({layout:""})):(f.slides.style.zoom="",f.slides.style.left="50%",f.slides.style.top="50%",f.slides.style.bottom="auto",f.slides.style.right="auto",K({layout:"translate(-50%, -50%) scale("+p+")"}));const i=Array.from(f.wrapper.querySelectorAll(SLIDES_SELECTOR));for(let t=0,n=i.length;t<n;t++){const n=i[t];"none"!==n.style.display&&(l.center||n.classList.contains("center")?n.classList.contains("stack")?n.style.top=0:n.style.top=Math.max((e.height-n.scrollHeight)/2,0)+"px":n.style.top="")}t!==p&&W({type:"resize",data:{oldScale:t,scale:p,size:e}})}P.update(),A.updateParallax(),T.isActive()&&T.update()}}function Y(e,t){Util.queryAll(f.slides,"section > .stretch, section > .r-stretch").forEach(i=>{let n=Util.getRemainingHeight(i,t);if(/(img|video)/gi.test(i.nodeName)){const t=i.naturalWidth||i.videoWidth,r=i.naturalHeight||i.videoHeight,a=Math.min(e/t,n/r);i.style.width=t*a+"px",i.style.height=r*a+"px"}else i.style.width=e+"px",i.style.height=n+"px"})}function ee(e,t){const i={width:l.width,height:l.height,presentationWidth:e||f.wrapper.offsetWidth,presentationHeight:t||f.wrapper.offsetHeight};return i.presentationWidth-=i.presentationWidth*l.margin,i.presentationHeight-=i.presentationHeight*l.margin,"string"==typeof i.width&&/%$/.test(i.width)&&(i.width=parseInt(i.width,10)/100*i.presentationWidth),"string"==typeof i.height&&/%$/.test(i.height)&&(i.height=parseInt(i.height,10)/100*i.presentationHeight),i}function te(e,t){"object"==typeof e&&"function"==typeof e.setAttribute&&e.setAttribute("data-previous-indexv",t||0)}function ie(e){if("object"==typeof e&&"function"==typeof e.setAttribute&&e.classList.contains("stack")){const t=e.hasAttribute("data-start-indexv")?"data-start-indexv":"data-previous-indexv";return parseInt(e.getAttribute(t)||0,10)}return 0}function ne(e=s){return e&&e.parentNode&&!!e.parentNode.nodeName.match(/section/i)}function re(){return!(!s||!ne(s))&&!s.nextElementSibling}function ae(){return 0===n&&0===r}function se(){return!!s&&(!s.nextElementSibling&&(!ne(s)||!s.parentNode.nextElementSibling))}function oe(){if(l.pause){const e=f.wrapper.classList.contains("paused");Oe(),f.wrapper.classList.add("paused"),!1===e&&W({type:"paused"})}}function le(){const e=f.wrapper.classList.contains("paused");f.wrapper.classList.remove("paused"),Ne(),e&&W({type:"resumed"})}function de(e){"boolean"==typeof e?e?oe():le():ue()?le():oe()}function ue(){return f.wrapper.classList.contains("paused")}function ce(e,t,i,o){a=s;const d=f.wrapper.querySelectorAll(HORIZONTAL_SLIDES_SELECTOR);if(0===d.length)return;void 0!==t||T.isActive()||(t=ie(d[e])),a&&a.parentNode&&a.parentNode.classList.contains("stack")&&te(a.parentNode,r);const u=c.concat();c.length=0;let p=n||0,g=r||0;n=fe(HORIZONTAL_SLIDES_SELECTOR,void 0===e?n:e),r=fe(VERTICAL_SLIDES_SELECTOR,void 0===t?r:t);let v=n!==p||r!==g;v||(a=null);let m=d[n],y=m.querySelectorAll("section");s=y[r]||m;let b=!1;v&&a&&s&&!T.isActive()&&(a.hasAttribute("data-auto-animate")&&s.hasAttribute("data-auto-animate")&&(b=!0,f.slides.classList.add("disable-slide-transitions")),h="running"),ve(),X(),T.isActive()&&T.update(),void 0!==i&&x.goto(i),a&&a!==s&&(a.classList.remove("present"),a.setAttribute("aria-hidden","true"),ae()&&setTimeout(()=>{Util.queryAll(f.wrapper,HORIZONTAL_SLIDES_SELECTOR+".stack").forEach(e=>{te(e,0)})},0));e:for(let e=0,t=c.length;e<t;e++){for(let t=0;t<u.length;t++)if(u[t]===c[e]){u.splice(t,1);continue e}f.viewport.classList.add(c[e]),W({type:c[e]})}for(;u.length;)f.viewport.classList.remove(u.pop());v&&W({type:"slidechanged",data:{indexh:n,indexv:r,previousSlide:a,currentSlide:s,origin:o}}),!v&&a||(S.stopEmbeddedContent(a),S.startEmbeddedContent(s)),H(_(s)),P.update(),C.update(),U.update(),A.update(),A.updateParallax(),L.update(),x.update(),O.writeURL(),Ne(),b&&(setTimeout(()=>{f.slides.classList.remove("disable-slide-transitions")},0),l.autoAnimate&&E.run(a,s))}function pe(){F(),z(),X(),m=l.autoSlide,Ne(),A.create(),O.writeURL(),x.sortAll(),C.update(),P.update(),ve(),U.update(),U.updateVisibility(),A.update(!0),L.update(),S.formatEmbeddedContent(),!1===l.autoPlayMedia?S.stopEmbeddedContent(s,{unloadIframes:!1}):S.startEmbeddedContent(s),T.isActive()&&T.layout()}function ge(){we().forEach((e,t,i)=>{f.slides.insertBefore(e,i[Math.floor(Math.random()*i.length)])})}function fe(e,t){let i=Util.queryAll(f.wrapper,e),n=i.length,r=I.isPrintingPDF();if(n){l.loop&&(t%=n)<0&&(t=n+t),t=Math.max(Math.min(t,n-1),0);for(let e=0;e<n;e++){let n=i[e],a=l.rtl&&!ne(n);n.classList.remove("past"),n.classList.remove("present"),n.classList.remove("future"),n.setAttribute("hidden",""),n.setAttribute("aria-hidden","true"),n.querySelector("section")&&n.classList.add("stack"),r?n.classList.add("present"):e<t?(n.classList.add(a?"future":"past"),l.fragments&&Util.queryAll(n,".fragment").forEach(e=>{e.classList.add("visible"),e.classList.remove("current-fragment")})):e>t&&(n.classList.add(a?"past":"future"),l.fragments&&Util.queryAll(n,".fragment.visible").forEach(e=>{e.classList.remove("visible","current-fragment")}))}let e=i[t],a=e.classList.contains("present");e.classList.add("present"),e.removeAttribute("hidden"),e.removeAttribute("aria-hidden"),a||W({target:e,type:"visible",bubbles:!1});let s=e.getAttribute("data-state");s&&(c=c.concat(s.split(" ")))}else t=0;return t}function ve(){let e,t,i=we(),a=i.length;if(a&&void 0!==n){let s=T.isActive()?10:l.viewDistance;Device.isMobile&&(s=T.isActive()?6:l.mobileViewDistance),I.isPrintingPDF()&&(s=Number.MAX_VALUE);for(let o=0;o<a;o++){let d=i[o],u=Util.queryAll(d,"section"),c=u.length;if(e=Math.abs((n||0)-o)||0,l.loop&&(e=Math.abs(((n||0)-o)%(a-s))||0),e<s?S.load(d):S.unload(d),c){let i=ie(d);for(let a=0;a<c;a++){let l=u[a];e+(t=o===(n||0)?Math.abs((r||0)-a):Math.abs(a-i))<s?S.load(l):S.unload(l)}}}Ee()?f.wrapper.classList.add("has-vertical-slides"):f.wrapper.classList.remove("has-vertical-slides"),Le()?f.wrapper.classList.add("has-horizontal-slides"):f.wrapper.classList.remove("has-horizontal-slides")}}function he({includeFragments:e=!1}={}){let t=f.wrapper.querySelectorAll(HORIZONTAL_SLIDES_SELECTOR),i=f.wrapper.querySelectorAll(VERTICAL_SLIDES_SELECTOR),a={left:n>0,right:n<t.length-1,up:r>0,down:r<i.length-1};if(l.loop&&(t.length>1&&(a.left=!0,a.right=!0),i.length>1&&(a.up=!0,a.down=!0)),t.length>1&&"linear"===l.navigationMode&&(a.right=a.right||a.down,a.left=a.left||a.up),!0===e){let e=x.availableRoutes();a.left=a.left||e.prev,a.up=a.up||e.prev,a.down=a.down||e.next,a.right=a.right||e.next}if(l.rtl){let e=a.left;a.left=a.right,a.right=e}return a}function me(e=s){let t=we(),i=0;e:for(let n=0;n<t.length;n++){let r=t[n],a=r.querySelectorAll("section");for(let t=0;t<a.length;t++){if(a[t]===e)break e;"uncounted"!==a[t].dataset.visibility&&i++}if(r===e)break;!1===r.classList.contains("stack")&&"uncounted"!==!r.dataset.visibility&&i++}return i}function ye(e){let t,i=n,a=r;if(e){let t=ne(e),n=t?e.parentNode:e,r=we();i=Math.max(r.indexOf(n),0),a=void 0,t&&(a=Math.max(Util.queryAll(e.parentNode,"section").indexOf(e),0))}if(!e&&s){if(s.querySelectorAll(".fragment").length>0){let e=s.querySelector(".current-fragment");t=e&&e.hasAttribute("data-fragment-index")?parseInt(e.getAttribute("data-fragment-index"),10):s.querySelectorAll(".fragment.visible").length-1}}return{h:i,v:a,f:t}}function be(){return Util.queryAll(f.wrapper,SLIDES_SELECTOR+':not(.stack):not([data-visibility="uncounted"])')}function we(){return Util.queryAll(f.wrapper,HORIZONTAL_SLIDES_SELECTOR)}function Se(){return Util.queryAll(f.wrapper,".slides>section>section")}function Le(){return we().length>1}function Ee(){return Se().length>1}function Ae(){return be().length}function xe(e,t){let i=we()[e],n=i&&i.querySelectorAll("section");return n&&n.length&&"number"==typeof t?n?n[t]:void 0:i}function Te(){let e=ye();return{indexh:e.h,indexv:e.v,indexf:e.f,paused:ue(),overview:T.isActive()}}function Ne(){if(Oe(),s&&!1!==l.autoSlide){let e=s.querySelector(".current-fragment");e||(e=s.querySelector(".fragment"));let t=e?e.getAttribute("data-autoslide"):null,i=s.parentNode?s.parentNode.getAttribute("data-autoslide"):null,n=s.getAttribute("data-autoslide");t?m=parseInt(t,10):n?m=parseInt(n,10):i?m=parseInt(i,10):(m=l.autoSlide,0===s.querySelectorAll(".fragment").length&&Util.queryAll(s,"video, audio").forEach(e=>{e.hasAttribute("data-autoplay")&&m&&1e3*e.duration/e.playbackRate>m&&(m=1e3*e.duration/e.playbackRate+1e3)})),!m||w||ue()||T.isActive()||se()&&!x.availableRoutes().next&&!0!==l.loop||(y=setTimeout(()=>{"function"==typeof l.autoSlideMethod?l.autoSlideMethod():Ue(),Ne()},m),b=Date.now()),o&&o.setPlaying(-1!==y)}}function Oe(){clearTimeout(y),y=-1}function Ce(){m&&!w&&(w=!0,W({type:"autoslidepaused"}),clearTimeout(y),o&&o.setPlaying(!1))}function Pe(){m&&w&&(w=!1,W({type:"autoslideresumed"}),Ne())}function Re(){u.hasNavigatedHorizontally=!0,l.rtl?(T.isActive()||!1===x.next())&&he().left&&ce(n+1,"grid"===l.navigationMode?r:void 0):(T.isActive()||!1===x.prev())&&he().left&&ce(n-1,"grid"===l.navigationMode?r:void 0)}function ke(){u.hasNavigatedHorizontally=!0,l.rtl?(T.isActive()||!1===x.prev())&&he().right&&ce(n-1,"grid"===l.navigationMode?r:void 0):(T.isActive()||!1===x.next())&&he().right&&ce(n+1,"grid"===l.navigationMode?r:void 0)}function Ie(){(T.isActive()||!1===x.prev())&&he().up&&ce(n,r-1)}function Me(){u.hasNavigatedVertically=!0,(T.isActive()||!1===x.next())&&he().down&&ce(n,r+1)}function qe(){if(!1===x.prev())if(he().up)Ie();else{let e;if(e=l.rtl?Util.queryAll(f.wrapper,HORIZONTAL_SLIDES_SELECTOR+".future").pop():Util.queryAll(f.wrapper,HORIZONTAL_SLIDES_SELECTOR+".past").pop()){let t=e.querySelectorAll("section").length-1||void 0;ce(n-1,t)}}}function Ue(){if(u.hasNavigatedHorizontally=!0,u.hasNavigatedVertically=!0,!1===x.next()){let e=he();e.down&&e.right&&l.loop&&re()&&(e.down=!1),e.down?Me():l.rtl?Re():ke()}}function De(e){"running"===h&&/section/gi.test(e.target.nodeName)&&(h="idle",W({type:"slidetransitionend",data:{indexh:n,indexv:r,previousSlide:a,currentSlide:s}}))}function He(e){X()}function _e(e){!1===document.hidden&&document.activeElement!==document.body&&("function"==typeof document.activeElement.blur&&document.activeElement.blur(),document.body.focus())}function je(e){if(e.currentTarget&&e.currentTarget.hasAttribute("href")){let t=e.currentTarget.getAttribute("href");t&&(t=t,J(),f.overlay=document.createElement("div"),f.overlay.classList.add("overlay"),f.overlay.classList.add("overlay-preview"),f.wrapper.appendChild(f.overlay),f.overlay.innerHTML=`<header>\n\t\t\t\t<a class="close" href="#"><span class="icon"></span></a>\n\t\t\t\t<a class="external" href="${t}" target="_blank"><span class="icon"></span></a>\n\t\t\t</header>\n\t\t\t<div class="spinner"></div>\n\t\t\t<div class="viewport">\n\t\t\t\t<iframe src="${t}"></iframe>\n\t\t\t\t<small class="viewport-inner">\n\t\t\t\t\t<span class="x-frame-error">Unable to load iframe. This is likely due to the site's policy (x-frame-options).</span>\n\t\t\t\t</small>\n\t\t\t</div>`,f.overlay.querySelector("iframe").addEventListener("load",e=>{f.overlay.classList.add("loaded")},!1),f.overlay.querySelector(".close").addEventListener("click",e=>{J(),e.preventDefault()},!1),f.overlay.querySelector(".external").addEventListener("click",e=>{J()},!1),e.preventDefault())}var t}function ze(e){se()&&!1===l.loop?(ce(0,0),Pe()):w?Pe():Ce()}const Fe={VERSION:"4.0.2",initialize:function(n){return f.wrapper=e,f.slides=e.querySelector(".slides"),l={...defaultConfig,...l,...t,...n,...Util.getQueryHash()},!0===l.embedded?f.viewport=Util.closest(e,".reveal-viewport")||e:(f.viewport=document.body,document.documentElement.classList.add("reveal-full-page")),f.viewport.classList.add("reveal-viewport"),window.addEventListener("load",X,!1),k.load(l.plugins,l.dependencies).then(D),new Promise(e=>i.on("ready",e))},configure:j,sync:pe,syncSlide:function(e=s){A.sync(e),x.sync(e),S.load(e),A.update(),U.update()},syncFragments:x.sync.bind(x),slide:ce,left:Re,right:ke,up:Ie,down:Me,prev:qe,next:Ue,navigateLeft:Re,navigateRight:ke,navigateUp:Ie,navigateDown:Me,navigatePrev:qe,navigateNext:Ue,navigateFragment:x.goto.bind(x),prevFragment:x.prev.bind(x),nextFragment:x.next.bind(x),on:V,off:B,addEventListener:V,removeEventListener:B,layout:X,shuffle:ge,availableRoutes:he,availableFragments:x.availableRoutes.bind(x),toggleHelp:function(e){"boolean"==typeof e?e?G():J():f.overlay?J():G()},toggleOverview:T.toggle.bind(T),togglePause:de,toggleAutoSlide:function(e){"boolean"==typeof e?e?Pe():Ce():w?Pe():Ce()},isFirstSlide:ae,isLastSlide:se,isLastVerticalSlide:re,isVerticalSlide:ne,isPaused:ue,isAutoSliding:function(){return!(!m||w)},isSpeakerNotes:U.isSpeakerNotesWindow.bind(U),isOverview:T.isActive.bind(T),isFocused:M.isFocused.bind(M),isPrintingPDF:I.isPrintingPDF.bind(I),isReady:()=>d,loadSlide:S.load.bind(S),unloadSlide:S.unload.bind(S),addEventListeners:z,removeEventListeners:F,dispatchEvent:W,getState:Te,setState:function(e){if("object"==typeof e){ce(Util.deserialize(e.indexh),Util.deserialize(e.indexv),Util.deserialize(e.indexf));let t=Util.deserialize(e.paused),i=Util.deserialize(e.overview);"boolean"==typeof t&&t!==ue()&&de(t),"boolean"==typeof i&&i!==T.isActive()&&T.toggle(i)}},getProgress:function(){let e=Ae(),t=me();if(s){let e=s.querySelectorAll(".fragment");if(e.length>0){let i=.9;t+=s.querySelectorAll(".fragment.visible").length/e.length*i}}return Math.min(t/(e-1),1)},getIndices:ye,getSlidesAttributes:function(){return be().map(e=>{let t={};for(let i=0;i<e.attributes.length;i++){let n=e.attributes[i];t[n.name]=n.value}return t})},getSlidePastCount:me,getTotalSlides:Ae,getSlide:xe,getPreviousSlide:()=>a,getCurrentSlide:()=>s,getSlideBackground:function(e,t){let i="number"==typeof e?xe(e,t):e;if(i)return i.slideBackgroundElement},getSlideNotes:U.getSlideNotes.bind(U),getSlides:be,getHorizontalSlides:we,getVerticalSlides:Se,hasHorizontalSlides:Le,hasVerticalSlides:Ee,hasNavigatedHorizontally:()=>u.hasNavigatedHorizontally,hasNavigatedVertically:()=>u.hasNavigatedVertically,addKeyBinding:N.addKeyBinding.bind(N),removeKeyBinding:N.removeKeyBinding.bind(N),triggerKey:N.triggerKey.bind(N),registerKeyboardShortcut:N.registerKeyboardShortcut.bind(N),getComputedSlideSize:ee,getScale:()=>p,getConfig:()=>l,getQueryHash:Util.getQueryHash,getRevealElement:()=>e,getSlidesElement:()=>f.slides,getViewportElement:()=>f.viewport,getBackgroundsElement:()=>A.element,registerPlugin:k.registerPlugin.bind(k),hasPlugin:k.hasPlugin.bind(k),getPlugin:k.getPlugin.bind(k),getPlugins:k.getRegisteredPlugins.bind(k)};return Util.extend(i,{...Fe,announceStatus:H,getStatusText:_,print:I,focus:M,progress:P,controls:C,location:O,overview:T,fragments:x,slideContent:S,slideNumber:L,onUserInput:function(e){l.autoSlideStoppable&&Ce()},closeOverlay:J,updateSlidesVisibility:ve,layoutSlideContents:Y,transformSlides:K,cueAutoSlide:Ne,cancelAutoSlide:Oe}),Fe};