MathJax.Hub.Register.LoadHook("[MathJax]/jax/element/mml/jax.js",function(){var r=MathJax.ElementJax.mml,l=MathJax.Hub.config.menuSettings;r.mbase.Augment({toMathML:function(t){var a=this.inferred&&this.parent.inferRow;null==t&&(t="");var i=this.type,s=this.toMathMLattributes();if("mspace"===i)return t+"<"+i+s+" />";for(var h=[],n=this.isToken?"":t+(a?"":"  "),e=0,o=this.data.length;e<o;e++)this.data[e]?h.push(this.data[e].toMathML(n)):this.isToken||this.isChars||h.push(n+"<mrow />");return this.isToken||this.isChars?t+"<"+i+s+">"+h.join("")+"</"+i+">":a?h.join("\n"):0===h.length||1===h.length&&""===h[0]?t+"<"+i+s+" />":t+"<"+i+s+">\n"+h.join("\n")+"\n"+t+"</"+i+">"},toMathMLattributes:function(){var t="mstyle"===this.type?r.math.prototype.defaults:this.defaults,a=this.attrNames||r.copyAttributeNames,i=r.skipAttributes,s=r.copyAttributes,h=[];if("math"!==this.type||this.attr&&"xmlns"in this.attr||h.push('xmlns="http://www.w3.org/1998/Math/MathML"'),!this.attrNames)for(var n in t)i[n]||s[n]||!t.hasOwnProperty(n)||null!=this[n]&&this[n]!==t[n]&&this.Get(n,null,1)!==this[n]&&h.push(n+'="'+this.toMathMLattribute(this[n])+'"');for(var e=0,o=a.length;e<o;e++)1===s[a[e]]&&!t.hasOwnProperty(a[e])||(value=(this.attr||{})[a[e]],null==value&&(value=this[a[e]]),null!=value&&h.push(a[e]+'="'+this.toMathMLquote(value)+'"'));return this.toMathMLclass(h),h.length?" "+h.join(" "):""},toMathMLclass:function(t){var a,i=[];this.class&&i.push(this.class),this.isa(r.TeXAtom)&&l.texHints&&((a=["ORD","OP","BIN","REL","OPEN","CLOSE","PUNCT","INNER","VCENTER"][this.texClass])&&(i.push("MJX-TeXAtom-"+a),"OP"!==a||this.movablelimits||i.push("MJX-fixedlimits"))),this.mathvariant&&this.toMathMLvariants[this.mathvariant]&&i.push("MJX"+this.mathvariant),this.variantForm&&i.push("MJX-variant"),i.length&&t.unshift('class="'+this.toMathMLquote(i.join(" "))+'"')},toMathMLattribute:function(t){return"string"==typeof t&&t.replace(/ /g,"").match(/^(([-+])?(\d+(\.\d*)?|\.\d+))mu$/)?(RegExp.$2||"")+(1/18*RegExp.$3).toFixed(3).replace(/\.?0+$/,"")+"em":this.toMathMLvariants[t]?this.toMathMLvariants[t]:this.toMathMLquote(t)},toMathMLvariants:{"-tex-caligraphic":r.VARIANT.SCRIPT,"-tex-caligraphic-bold":r.VARIANT.BOLDSCRIPT,"-tex-oldstyle":r.VARIANT.NORMAL,"-tex-oldstyle-bold":r.VARIANT.BOLD,"-tex-mathit":r.VARIANT.ITALIC},toMathMLquote:function(t){for(var a=0,i=(t=String(t).split("")).length;a<i;a++){var s,h,n=t[a].charCodeAt(0);n<=55295||57344<=n?126<n||n<32&&10!==n&&13!==n&&9!==n?t[a]="&#x"+n.toString(16).toUpperCase()+";":(s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"}[t[a]])&&(t[a]=s):a+1<i?(h=t[a+1].charCodeAt(0)-56320+(n-55296<<10)+65536,t[a]="&#x"+h.toString(16).toUpperCase()+";",t[a+1]="",a++):t[a]=""}return t.join("")}}),r.math.Augment({toMathML:function(t,a){var i;null==t&&(t=""),a&&a.originalText&&l.semantics&&(i=MathJax.InputJax[a.inputJax].annotationEncoding);for(var s,h=this.data[0]&&1<this.data[0].data.length,n=this.type,e=this.toMathMLattributes(),o=[],r=t+(i?"  "+(h?"  ":""):"")+"  ",u=0,M=this.data.length;u<M;u++)this.data[u]?o.push(this.data[u].toMathML(r)):o.push(r+"<mrow />");if(0===o.length||1===o.length&&""===o[0]){if(!i)return"<"+n+e+" />";o.push(r+"<mrow />")}return i&&(h&&(o.unshift(t+"    <mrow>"),o.push(t+"    </mrow>")),o.unshift(t+"  <semantics>"),s=a.originalText.replace(/[&<>]/g,function(t){return{">":"&gt;","<":"&lt;","&":"&amp;"}[t]}),o.push(t+'    <annotation encoding="'+this.toMathMLquote(i)+'">'+s+"</annotation>"),o.push(t+"  </semantics>")),t+"<"+n+e+">\n"+o.join("\n")+"\n"+t+"</"+n+">"}}),r.msubsup.Augment({toMathML:function(t){var a=this.type;null==this.data[this.sup]&&(a="msub"),null==this.data[this.sub]&&(a="msup");var i=this.toMathMLattributes();delete this.data[0].inferred;for(var s=[],h=0,n=this.data.length;h<n;h++)this.data[h]&&s.push(this.data[h].toMathML(t+"  "));return t+"<"+a+i+">\n"+s.join("\n")+"\n"+t+"</"+a+">"}}),r.munderover.Augment({toMathML:function(t){var a=this.type,i=this.data[this.base];i&&i.isa(r.TeXAtom)&&i.movablelimits&&!i.Get("displaystyle")?(type="msubsup",null==this.data[this.under]&&(a="msup"),null==this.data[this.over]&&(a="msub")):(null==this.data[this.under]&&(a="mover"),null==this.data[this.over]&&(a="munder"));var s=this.toMathMLattributes();delete this.data[0].inferred;for(var h=[],n=0,e=this.data.length;n<e;n++)this.data[n]&&h.push(this.data[n].toMathML(t+"  "));return t+"<"+a+s+">\n"+h.join("\n")+"\n"+t+"</"+a+">"}}),r.TeXAtom.Augment({toMathML:function(t){var a=this.toMathMLattributes();return a||1!==this.data[0].data.length?t+"<mrow"+a+">\n"+this.data[0].toMathML(t+"  ")+"\n"+t+"</mrow>":t.substr(2)+this.data[0].toMathML(t)}}),r.chars.Augment({toMathML:function(t){return(t||"")+this.toMathMLquote(this.toString())}}),r.entity.Augment({toMathML:function(t){return(t||"")+"&"+this.toMathMLquote(this.data[0])+";\x3c!-- "+this.toString()+" --\x3e"}}),r.xml.Augment({toMathML:function(t){return(t||"")+this.toString()}}),MathJax.Hub.Register.StartupHook("TeX mathchoice Ready",function(){r.TeXmathchoice.Augment({toMathML:function(t){return this.Core().toMathML(t)}})}),MathJax.Hub.Startup.signal.Post("toMathML Ready")}),MathJax.Ajax.loadComplete("[MathJax]/extensions/toMathML.js");