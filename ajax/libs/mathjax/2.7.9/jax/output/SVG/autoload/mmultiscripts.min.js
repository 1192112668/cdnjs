MathJax.Hub.Register.StartupHook("SVG Jax Ready",function(){var t=MathJax.ElementJax.mml,X=MathJax.OutputJax.SVG;t.mmultiscripts.Augment({toSVG:function(t,a){this.SVGgetStyles();var s=this.SVG(),i=this.SVGgetScale(s);this.SVGhandleSpace(s);var e=this.data[this.base]?this.SVGdataStretched(this.base,t,a):X.BBOX.G().Clean(),h=X.TeX.x_height*i,r=X.TeX.scriptspace*i*.75,d=this.SVGgetScripts(r),p=d[0],u=d[1],l=d[2],c=d[3],m=(this.data[1]||this).SVGgetScale(),x=X.TeX.sup_drop*m,n=X.TeX.sub_drop*m,S=e.h-x,o=e.d+n,w=0;e.ic&&(w=e.ic),!this.data[this.base]||"mi"!==this.data[this.base].type&&"mo"!==this.data[this.base].type||!X.isChar(this.data[this.base].data.join(""))||1!==e.scale||e.stretched||this.data[this.base].Get("largeop")||(S=o=0);var G=this.getValues("subscriptshift","superscriptshift"),M=this.SVGgetMu(s);G.subscriptshift=""===G.subscriptshift?0:X.length2em(G.subscriptshift,M),G.superscriptshift=""===G.superscriptshift?0:X.length2em(G.superscriptshift,M);var f,V,b,g,y,A=0;l?A=l.w+w:c&&(A=c.w-w),s.Add(e,Math.max(0,A),0),u||c?p||l?(o=Math.max(o,X.TeX.sub2*i),f=X.TeX.rule_thickness*i,V=(p||l).h,b=(u||c).d,l&&(V=Math.max(V,l.h)),c&&(b=Math.max(b,c.d)),S-b-(V-o)<3*f&&(o=3*f-S+b+V,0<(x=.8*h-(S-b))&&(S+=x,o-=x)),S=Math.max(S,G.superscriptshift),o=Math.max(o,G.subscriptshift),u&&s.Add(u,A+e.w+r,S),c&&s.Add(c,A+w-c.w,S),p&&s.Add(p,A+e.w+r-w,-o),l&&s.Add(l,A-l.w,-o)):(g=this.getValues("displaystyle","texprimestyle"),y=X.TeX[g.displaystyle?"sup1":g.texprimestyle?"sup3":"sup2"],S=Math.max(S,y*i,G.superscriptshift),u&&(S=Math.max(S,u.d+.25*h)),c&&(S=Math.max(S,c.d+.25*h)),u&&s.Add(u,A+e.w+r,S),c&&s.Add(c,0,S)):(o=Math.max(o,X.TeX.sub1*i,G.subscriptshift),p&&(o=Math.max(o,p.h-.8*h)),l&&(o=Math.max(o,l.h-.8*h)),p&&s.Add(p,A+e.w+r-w,-o),l&&s.Add(l,0,-o)),s.Clean(),this.SVGhandleColor(s),this.SVGsaveData(s);var v=this.SVGdata;return v.dx=A,v.s=r,v.u=S,v.v=o,v.delta=w,s},SVGgetScripts:function(t){for(var a,s,i=[],e=1,h=this.data.length,r=0,d=0;d<4;d+=2){for(;e<h&&"mprescripts"!==(this.data[e]||{}).type;){for(var p=[null,null,null,null],u=d;u<d+2;u++)this.data[e]&&"none"!==this.data[e].type&&"mprescripts"!==this.data[e].type&&(i[u]||(i[u]=X.BBOX.G()),p[u]=this.data[e].toSVG()),"mprescripts"!==(this.data[e]||{}).type&&e++;var l=2===d;l&&(r+=Math.max((p[d]||{w:0}).w,(p[d+1]||{w:0}).w)),p[d]&&i[d].Add(p[d].With({x:r-(l?p[d].w:0)})),p[d+1]&&i[d+1].Add(p[d+1].With({x:r-(l?p[d+1].w:0)})),s=i[d]||{w:0},a=i[d+1]||{w:0},s.w=a.w=r=Math.max(s.w,a.w)}e++,r=0}for(u=0;u<4;u++)i[u]&&(i[u].w+=t,i[u].Clean());return i}}),MathJax.Hub.Startup.signal.Post("SVG mmultiscripts Ready"),MathJax.Ajax.loadComplete(X.autoloadDir+"/mmultiscripts.js")});