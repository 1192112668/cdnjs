MathJax.Hub.Register.StartupHook("SVG Jax Ready",function(){var o=MathJax.ElementJax.mml,d=MathJax.OutputJax.SVG,g=d.BBOX,m=MathJax.Localization;g.MGLYPH=g.Subclass({type:"image",removeable:!1,Init:function(t,a,i,h,e,s,l){null==l&&(l={});var r=1e3*t.width/d.em,n=1e3*t.height/d.em,o=r,g=n,m=0;""!==a&&(r=d.length2em(a,e,o)*s,n=o?r/o*g:0),""!==i&&(n=d.length2em(i,e,g)*s,""===a&&(r=g?n/g*o:0)),""!==h&&h.match(/\d/)&&(m=d.length2em(h,e)*s,l.y=-m),l.height=Math.floor(n),l.width=Math.floor(r),l.transform="translate(0,"+n+") matrix(1 0 0 -1 0 0)",l.preserveAspectRatio="none",this.SUPER(arguments).Init.call(this,l),this.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t.SRC),this.w=this.r=r,this.h=this.H=n+m,this.d=this.D=-m,this.l=0}}),o.mglyph.Augment({toSVG:function(t,a){this.SVGgetStyles();var i,h,e=this.SVG();this.SVGhandleSpace(e);var s,l,r,n=this.getValues("src","width","height","valign","alt");return""===n.src?(n=this.getValues("index","fontfamily")).index&&(a=a||this.SVGgetScale(),s={},n.fontfamily&&(s["font-family"]=n.fontfamily),e.Add(g.TEXT(a,String.fromCharCode(n.index),s))):(this.img||(this.img=o.mglyph.GLYPH[n.src]),this.img||(this.img=o.mglyph.GLYPH[n.src]={img:new Image,status:"pending"},(i=this.img.img).onload=MathJax.Callback(["SVGimgLoaded",this]),i.onerror=MathJax.Callback(["SVGimgError",this]),i.src=i.SRC=n.src,MathJax.Hub.RestartAfter(i.onload)),"OK"!==this.img.status?(h=o.Error(m._(["MathML","BadMglyph"],"Bad mglyph: %1",n.src),{mathsize:"75%"}),this.Append(h),e=h.toSVG(),this.data.pop()):(l=this.SVGgetMu(e),r=this.SVGgetScale(),e.Add(g.MGLYPH(this.img.img,n.width,n.height,n.valign,l,r,{"aria-label":n.alt})))),e.Clean(),this.SVGhandleColor(e),this.SVGsaveData(e),e},SVGimgLoaded:function(t,a){"string"==typeof t&&(a=t),this.img.status=a||"OK"},SVGimgError:function(){this.img.img.onload("error")}},{GLYPH:{}}),MathJax.Hub.Startup.signal.Post("SVG mglyph Ready"),MathJax.Ajax.loadComplete(d.autoloadDir+"/mglyph.js")});