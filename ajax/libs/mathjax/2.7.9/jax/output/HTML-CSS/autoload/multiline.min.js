MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function(){var b=MathJax.ElementJax.mml,f=MathJax.OutputJax["HTML-CSS"],L=b.mo().With({HTMLspanElement:function(){return{bbox:{w:0},style:{}}}}),c={newline:0,nobreak:1e6,goodbreak:[-200],badbreak:[200],auto:[0],maxwidth:1.33,toobig:800,nestfactor:400,spacefactor:-100,spaceoffset:2,spacelimit:1,fence:500,close:500},T={linebreakstyle:"after"};b.mbase.Augment({HTMLlinebreakPenalty:c,HTMLmultiline:function(e){for(var t=this;t.inferred||t.parent&&"mrow"===t.parent.type&&t.isEmbellished();)t=t.parent;var i="math"===t.type&&"block"===t.Get("display")||"mtd"===t.type;t.isMultiline=!0;var n=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast");n.linebreakstyle===b.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(n.linebreakstyle=this.Get("infixlinebreakstyle")),n.lineleading=f.length2em(n.lineleading,1,.5),this.HTMLremoveColor(e);var a=f.createStack(e);this.HTMLgetScale();for(var s={n:0,Y:0,scale:this.scale||1,isTop:i,values:{},VALUES:n},l=this.HTMLgetAlign(s,{}),h=this.HTMLgetShift(s,{},l),r=[],d={index:[],penalty:c.nobreak,w:0,W:h,shift:h,scanW:h,nest:0},o=!1;this.HTMLbetterBreak(d,s,!0)&&(d.scanW>=f.linebreakWidth||d.penalty===c.newline);)this.HTMLaddLine(a,r,d.index,s,d.values,o),r=d.index.slice(0),o=!0,l=this.HTMLgetAlign(s,d.values),h=this.HTMLgetShift(s,d.values,l),l===b.INDENTALIGN.CENTER&&(h=0),d.W=d.shift=d.scanW=h,d.penalty=c.nobreak;return s.isLast=!0,this.HTMLaddLine(a,r,[],s,T,o),"math"===t.type&&(a.style.width=e.bbox.width="100%"),this.HTMLhandleSpace(e),this.HTMLhandleColor(e),e.bbox.isMultiline=!0,e},HTMLbetterBreak:function(e,t,i){if(this.isToken)return!1;if(this.isEmbellished())return(e.embellished=this).CoreMO().HTMLbetterBreak(e,t);if(this.linebreakContainer)return!1;var n,a,s,l=e.index.slice(0),h=e.index.shift(),r=this.data.length,d=0<e.index.length,o=!1;for(null==h&&(h=-1),d||(h++,e.W+=e.w,e.w=0),s=e.scanW=e.W,e.nest++;h<r&&(e.scanW<c.maxwidth*f.linebreakWidth||0===e.w);){if(this.data[h]){if(this.data[h].HTMLbetterBreak(e,t)&&(o=!0,l=[h].concat(e.index),n=e.W,a=e.w,e.penalty===c.newline))return e.index=l,e.nest&&e.nest--,!0;s=d?e.scanW:this.HTMLaddWidth(h,e,s)}h++,d=!(e.index=[])}return i&&o&&(L.parent=this.parent,L.inherit=this.inherit,L.HTMLbetterBreak(e,t)&&(o=!1,l=e.index)),e.nest&&e.nest--,e.index=l,o&&(e.W=n,e.w=a),o},HTMLaddWidth:function(e,t,i){var n;return this.data[e]&&(i+=(n=this.data[e].HTMLspanElement()).bbox.w,n.style.paddingLeft&&(i+=f.unEm(n.style.paddingLeft)),n.style.paddingRight&&(i+=f.unEm(n.style.paddingRight)),t.W=t.scanW=i,t.w=0),i},HTMLaddLine:function(e,t,i,n,a,s){line=f.createBox(e),line.bbox=this.HTMLemptyBBox({}),n.first=s,n.last=!0,this.HTMLmoveLine(t,i,line,n,a),this.HTMLcleanBBox(line.bbox);var l,h,r=this.HTMLgetAlign(n,a),d=this.HTMLgetShift(n,a,r);0<n.n&&(l=f.FONTDATA.baselineskip*n.scale,h=(null==n.values.lineleading?n.VALUES:n.values).lineleading*n.scale,n.Y-=Math.max(l,n.d+line.bbox.h+h)),f.alignBox(line,r,n.Y,d),n.d=line.bbox.d,n.values=a,n.n++},HTMLgetAlign:function(e,t){var i=e.values,n=e.VALUES,a=0===e.n?t.indentalignfirst||i.indentalignfirst||n.indentalignfirst:e.isLast?i.indentalignlast||n.indentalignlast:i.indentalign||n.indentalign;return a===b.INDENTALIGN.INDENTALIGN&&(a=i.indentalign||n.indentalign),a===b.INDENTALIGN.AUTO&&(a=e.isTop?this.displayAlign:b.INDENTALIGN.LEFT),a},HTMLgetShift:function(e,t,i){var n,a=e.values,s=e.VALUES,l=0===e.n?t.indentshiftfirst||a.indentshiftfirst||s.indentshiftfirst:e.isLast?a.indentshiftlast||s.indentshiftlast:a.indentshift||s.indentshift;return l===b.INDENTSHIFT.INDENTSHIFT&&(l=a.indentshift||s.indentshift),"auto"!==l&&""!==l||(l="0"),l=f.length2em(l,1,f.cwidth),e.isTop&&"0"!==this.displayIndent&&(n=f.length2em(this.displayIndent,1,f.cwidth),l+=i===b.INDENTALIGN.RIGHT?-n:n),l},HTMLmoveLine:function(e,t,i,n,a){var s=e[0],l=t[0];if(null==s&&(s=-1),null==l&&(l=this.data.length-1),s===l&&1<e.length)this.data[s].HTMLmoveSlice(e.slice(1),t.slice(1),i,n,a,"paddingLeft");else{var h=n.last;for(n.last=!1;s<l;)this.data[s]&&(e.length<=1?this.data[s].HTMLmoveSpan(i,n,a):this.data[s].HTMLmoveSlice(e.slice(1),[],i,n,a,"paddingLeft")),s++,n.first=!1,e=[];n.last=h,this.data[s]&&(t.length<=1?this.data[s].HTMLmoveSpan(i,n,a):this.data[s].HTMLmoveSlice([],t.slice(1),i,n,a,"paddingRight"))}},HTMLmoveSlice:function(e,t,i,n,a,s){this.HTMLremoveColor();var l=this.HTMLcreateSliceSpan(i);if(this.HTMLmoveLine(e,t,l,n,a),l.style[s]="",this.HTMLcombineBBoxes(l,i.bbox),this.HTMLcleanBBox(l.bbox),0===t.length){var h=i=this.HTMLspanElement();this.href&&(i=i.parentNode),i.parentNode.removeChild(i),i.nextMathJaxSpan.id=h.id;for(var r=0;h=h.nextMathJaxSpan;){"a"===h.nodeName.toLowerCase()&&(h=h.firstChild);var d=this.HTMLhandleColor(h);d&&(d.id+="-MathJax-Continue-"+r,r++)}}return l},HTMLcreateSliceSpan:function(e){var t=this.HTMLspanElement(),i=0;this.href&&(t=t.parentNode);for(var n=t;n.nextMathJaxSpan;)n=n.nextMathJaxSpan,i++;var a=t.cloneNode(!1);return(n.nextMathJaxSpan=a).nextMathJaxSpan=null,a.id+="-MathJax-Continue-"+i,a.bbox=this.HTMLemptyBBox({}),e.appendChild(a)},HTMLmoveSpan:function(e,t,i){var n,a;(!t.first&&!t.last||t.first&&t.values.linebreakstyle===b.LINEBREAKSTYLE.BEFORE||t.last&&i.linebreakstyle===b.LINEBREAKSTYLE.AFTER)&&((n=document.getElementById("MathJax-Color-"+this.spanID+f.idPostfix))&&e.appendChild(n),a=this.HTMLspanElement(),this.href&&(a=a.parentNode),e.appendChild(a),t.last&&(a.style.paddingRight=""),(t.first||t.nextIsFirst)&&(a.style.paddingLeft="",n&&(this.HTMLremoveColor(a),this.HTMLhandleColor(a))),t.first&&0===a.bbox.w?t.nextIsFirst=!0:delete t.nextIsFirst,this.HTMLcombineBBoxes(this,e.bbox))}}),b.mfenced.Augment({HTMLbetterBreak:function(e,t){var i,n,a,s=e.index.slice(0),l=e.index.shift(),h=this.data.length,r=0<e.index.length,d=!1;if(null==l&&(l=-1),r||(l++,e.W+=e.w,e.w=0),a=e.scanW=e.W,e.nest++,!this.dataI){this.dataI=[],this.data.open&&this.dataI.push("open"),h&&this.dataI.push(0);for(var o=1;o<h;o++)this.data["sep"+o]&&this.dataI.push("sep"+o),this.dataI.push(o);this.data.close&&this.dataI.push("close")}for(h=this.dataI.length;l<h&&(e.scanW<c.maxwidth*f.linebreakWidth||0===e.w);){var L=this.dataI[l];if(this.data[L]){if(this.data[L].HTMLbetterBreak(e,t)&&(d=!0,s=[l].concat(e.index),i=e.W,n=e.w,e.penalty===c.newline))return e.index=s,e.nest&&e.nest--,!0;a=r?e.scanW:this.HTMLaddWidth(l,e,a)}l++,r=!(e.index=[])}return e.nest&&e.nest--,e.index=s,d&&(e.W=i,e.w=n),d},HTMLmoveLine:function(e,t,i,n,a){var s=e[0],l=t[0];if(null==s&&(s=-1),null==l&&(l=this.dataI.length-1),s===l&&1<e.length)this.data[this.dataI[s]].HTMLmoveSlice(e.slice(1),t.slice(1),i,n,a,"paddingLeft");else{var h=n.last;n.last=!1;for(var r=this.dataI[s];s<l;)this.data[r]&&(e.length<=1?this.data[r].HTMLmoveSpan(i,n,a):this.data[r].HTMLmoveSlice(e.slice(1),[],i,n,a,"paddingLeft")),s++,r=this.dataI[s],n.first=!1,e=[];n.last=h,this.data[r]&&(t.length<=1?this.data[r].HTMLmoveSpan(i,n,a):this.data[r].HTMLmoveSlice([],t.slice(1),i,n,a,"paddingRight"))}}}),b.msubsup.Augment({HTMLbetterBreak:function(e,t){if(!this.data[this.base])return!1;var i,n,a,s=e.index.slice(0),l=e.index.shift(),h=0<e.index.length,r=!1;return h||(e.W+=e.w,e.w=0),a=e.scanW=e.W,null==l&&(this.HTMLbaseW=this.data[this.base].HTMLspanElement().bbox.w,this.HTMLdw=this.HTMLspanElement().bbox.w-this.HTMLbaseW),this.data[this.base].HTMLbetterBreak(e,t)&&(r=!0,s=[this.base].concat(e.index),i=e.W,n=e.w,e.penalty===c.newline&&(r=h=!0)),h||this.HTMLaddWidth(this.base,e,a),e.scanW+=this.HTMLdw,e.W=e.scanW,e.index=[],r&&(e.W=i,e.w=n,e.index=s),r},HTMLmoveLine:function(e,t,i,n,a){if(this.data[this.base]&&(1<e.length?this.data[this.base].HTMLmoveSlice(e.slice(1),t.slice(1),i,n,a,"paddingLeft"):t.length<=1?this.data[this.base].HTMLmoveSpan(i,n,a):this.data[this.base].HTMLmoveSlice([],t.slice(1),i,n,a,"paddingRight")),0===t.length){var s=this.data[this.sup]||this.data[this.sub];if(s&&this.HTMLnotEmpty(s)){var l=s.HTMLspanElement().parentNode;s.href&&(l=l.parentNode);var h,r=l.parentNode;for(this.data[this.base]&&((h=this.data[this.base].HTMLspanElement().bbox.ic)&&(r.style.marginLeft=f.Em(-h)),r.removeChild(r.firstChild)),l=r.firstChild;l;l=l.nextSibling)l.style.left=f.Em(f.unEm(l.style.left)-this.HTMLbaseW);r.bbox.w-=this.HTMLbaseW,r.style.width=f.Em(r.bbox.w),this.HTMLcombineBBoxes(r,i.bbox),i.appendChild(r)}}}}),b.mmultiscripts.Augment({HTMLbetterBreak:function(e,t){if(!this.data[this.base])return!1;var i=e.index.slice(0);e.index.shift();var n,a,s,l=0<e.index.length,h=!1;l||(e.W+=e.w,e.w=0),e.scanW=e.W;var r=this.HTMLspanElement().bbox,d=this.data[this.base].HTMLspanElement().bbox,o=r.w-d.w;return e.scanW+=r.dx,s=e.scanW,this.data[this.base].HTMLbetterBreak(e,t)&&(h=!0,i=[this.base].concat(e.index),n=e.W,a=e.w,e.penalty===c.newline&&(h=l=!0)),l||this.HTMLaddWidth(this.base,e,s),e.scanW+=o,e.W=e.scanW,e.index=[],h&&(e.W=n,e.w=a,e.index=i),h},HTMLmoveLine:function(e,t,i,n,a){var s=this.HTMLspanElement(),l=s.bbox,h=s.firstChild,r={};f.msiePaddingWidthBug&&(h=h.nextSibling);for(var d,o=h.firstChild;o;)o.bbox&&o.bbox.name&&(r[o.bbox.name]=o),o=o.nextSibling;if(e.length<1&&(r.presub||r.presup)&&(d=f.createStack(i),r.presup&&(f.addBox(d,r.presup),f.placeBox(r.presup,l.dx-r.presup.bbox.w,l.u)),r.presub&&(f.addBox(d,r.presub),f.placeBox(r.presub,l.dx+l.delta-r.presub.bbox.w,-l.v)),this.HTMLcombineBBoxes(d,i.bbox),i.appendChild(d),d.style.width=f.Em(l.dx)),this.data[this.base]&&(1<e.length?this.data[this.base].HTMLmoveSlice(e.slice(1),t.slice(1),i,n,a,"paddingLeft"):t.length<=1?this.data[this.base].HTMLmoveSpan(i,n,a):this.data[this.base].HTMLmoveSlice([],t.slice(1),i,n,a,"paddingRight")),0===t.length){for(this.data[this.base]&&h.removeChild(h.firstChild),o=h.firstChild;o;o=o.nextSibling)o.style.left=f.Em(f.unEm(o.style.left)-l.px);h.bbox.w-=l.px,h.style.width=f.Em(h.bbox.w),this.HTMLcombineBBoxes(h,i.bbox),i.appendChild(h)}}}),b.mo.Augment({HTMLbetterBreak:function(e,t){if(e.values&&e.values.id===this.spanID)return!1;var i=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast","texClass","fence");i.linebreakstyle===b.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(i.linebreakstyle=this.Get("infixlinebreakstyle")),i.texClass===b.TEXCLASS.OPEN&&e.nest++,i.texClass===b.TEXCLASS.CLOSE&&e.nest&&e.nest--;var n=e.scanW,a=e.embellished||this;delete e.embellished;var s=a.HTMLspanElement(),l=s.bbox.w;if(s.style.paddingLeft&&(l+=f.unEm(s.style.paddingLeft)),i.linebreakstyle===b.LINEBREAKSTYLE.AFTER&&(n+=l,l=0),n-e.shift==0&&i.linebreak!==b.LINEBREAK.NEWLINE)return!1;var h,r,d=f.linebreakWidth-n;0!==t.n||i.indentshiftfirst===t.VALUES.indentshiftfirst&&i.indentalignfirst===t.VALUES.indentalignfirst||(h=this.HTMLgetAlign(t,i),r=this.HTMLgetShift(t,i,h),d+=e.shift-r);var o=Math.floor(d/f.linebreakWidth*1e3);o<0&&(o=c.toobig-3*o),i.fence&&(o+=c.fence),(i.linebreakstyle===b.LINEBREAKSTYLE.AFTER&&i.texClass===b.TEXCLASS.OPEN||i.texClass===b.TEXCLASS.CLOSE)&&(o+=c.close),o+=e.nest*c.nestfactor;var L=c[i.linebreak||b.LINEBREAK.AUTO]||0;return MathJax.Object.isArray(L)?o=Math.max(1,o+L[0]*e.nest):(L||0<=d)&&(o=L*e.nest),!(o>=e.penalty)&&(e.penalty=o,e.values=i,e.W=n,e.w=l,i.lineleading=f.length2em(i.lineleading,1,t.VALUES.lineleading),i.id=this.spanID,!0)}}),b.mspace.Augment({HTMLbetterBreak:function(e,t){if(e.values&&e.values.id===this.spanID)return!1;var i=this.getValues("linebreak"),n=i.linebreak;n&&!this.hasDimAttr()||(n=b.LINEBREAK.AUTO);var a=e.scanW,s=this.HTMLspanElement(),l=s.bbox.w;if(s.style.paddingLeft&&(l+=f.unEm(s.style.paddingLeft)),a-e.shift==0)return!1;var h=f.linebreakWidth-a,r=Math.floor(h/f.linebreakWidth*1e3);r<0&&(r=c.toobig-3*r),r+=e.nest*c.nestfactor;var d=c[n]||0;return n===b.LINEBREAK.AUTO&&c.spacelimit<=l&&!this.mathbackground&&!this.background&&(d=[(l+c.spaceoffset)*c.spacefactor]),MathJax.Object.isArray(d)?r=Math.max(1,r+d[0]*e.nest):(d||0<=h)&&(r=d*e.nest),!(r>=e.penalty)&&(e.penalty=r,e.values=i,e.W=a,e.w=l,i.lineleading=t.VALUES.lineleading,i.linebreakstyle="before",i.id=this.spanID,!0)}}),MathJax.Hub.Register.StartupHook("TeX mathchoice Ready",function(){b.TeXmathchoice.Augment({HTMLbetterBreak:function(e,t){return this.Core().HTMLbetterBreak(e,t)},HTMLmoveLine:function(e,t,i,n,a){return this.Core().HTMLmoveSlice(e,t,i,n,a)}})}),b.maction.Augment({HTMLbetterBreak:function(e,t){return this.Core().HTMLbetterBreak(e,t)},HTMLmoveLine:function(e,t,i,n,a){return this.Core().HTMLmoveSlice(e,t,i,n,a)},HTMLmoveSlice:function(e,t,i,n,a,s){var l=document.getElementById("MathJax-HitBox-"+this.spanID+f.idPostfix);l&&l.parentNode.removeChild(l);var h=this.SUPER(arguments).HTMLmoveSlice.apply(this,arguments);if(0===t.length){i=this.HTMLspanElement();for(var r=0;i;)l=this.HTMLhandleHitBox(i,"-Continue-"+r),i=i.nextMathJaxSpan,r++}return h}}),b.semantics.Augment({HTMLbetterBreak:function(e,t){return!!this.data[0]&&this.data[0].HTMLbetterBreak(e,t)},HTMLmoveLine:function(e,t,i,n,a){return this.data[0]?this.data[0].HTMLmoveSlice(e,t,i,n,a):null}}),MathJax.Hub.Startup.signal.Post("HTML-CSS multiline Ready"),MathJax.Ajax.loadComplete(f.autoloadDir+"/multiline.js")});