MathJax.Hub.Register.StartupHook("CommonHTML Jax Ready",function(){var t=MathJax.ElementJax.mml,X=MathJax.OutputJax.CommonHTML;t.mmultiscripts.Augment({toCommonHTML:function(t,e){var s,i,p=(e||{}).stretch;p||(t=this.CHTMLcreateNode(t),this.CHTMLhandleStyle(t),this.CHTMLgetVariant(),this.CHTMLhandleScale(t)),X.BBOX.empty(this.CHTML),s=p?X.getNode(t,"mjx-base"):(this.CHTMLaddChild(t,0,{type:"mjx-base",noBBox:!0,forceChild:!0}),t.firstChild),(i=this.CHTMLbboxFor(0)).ic&&(i.R-=i.ic,p||(s.style.marginRight=X.Em(-i.ic)),f=1.3*i.ic+.05);var a={},r={};this.CHTMLgetScripts(a,r,p,t);var l=a.sub,h=a.sup,n=a.presub,u=a.presup,c=r.sub,m=r.sup,d=r.presub,M=r.presup;p||this.CHTMLaddBoxes(t,s,a);var o,C=this.getValues("scriptlevel","scriptsizemultiplier"),T=this.Get("scriptlevel")<3?C.scriptsizemultiplier:1,L=X.TEX.x_height,H=X.TEX.scriptspace,b=X.TEX.sup_drop*T,y=X.TEX.sub_drop*T,g=i.h-b,x=i.d+y,f=0,E=this.data[this.base];!E||"mi"!==E.type&&"mo"!==E.type||!X.isChar(E.data.join(""))||1!==i.rscale||i.sH||E.Get("largeop")||(g=x=0),(C=this.getValues("displaystyle","subscriptshift","superscriptshift","texprimestyle")).subscriptshift=""===C.subscriptshift?0:this.CHTMLlength2em(C.subscriptshift),C.superscriptshift=""===C.superscriptshift?0:this.CHTMLlength2em(C.superscriptshift);var B=n?H+d.w:u?H+M.w-f:0;this.CHTML.combine(i,B,0);var w,S,O,v=this.CHTML.w;return h||u?l||n?(x=Math.max(x,X.TEX.sub2),w=X.TEX.rule_thickness,S=(c||d).h,O=(m||M).d,n&&(S=Math.max(S,d.h)),u&&(O=Math.max(O,M.d)),g-O-(S-x)<3*w&&(x=3*w-g+O+S,0<(b=.8*L-(g-O))&&(g+=b,x-=b)),g=Math.max(g,C.superscriptshift),x=Math.max(x,C.subscriptshift),h?l?this.CHTMLplaceSubSup(l,c,h,m,v,f,g,x,H):this.CHTMLplaceSupOnly(h,m,v,f,g,H):l&&this.CHTMLplaceSubOnly(l,c,v,x,H),u?n?this.CHTMLplacePresubPresup(n,d,u,M,f,g,x,H):this.CHTMLplacePresupOnly(u,M,f,g,H):n&&this.CHTMLplacePresubOnly(n,d,x,H)):(o=X.TEX[C.displaystyle?"sup1":C.texprimestyle?"sup3":"sup2"],g=Math.max(g,o,C.superscriptshift),h&&(g=Math.max(g,m.d+.25*L)),u&&(g=Math.max(g,M.d+.25*L)),h&&this.CHTMLplaceSupOnly(h,m,v,f,g,H),u&&this.CHTMLplacePresupOnly(u,M,f,g,H)):(x=Math.max(x,X.TEX.sub1,C.subscriptshift),l&&(x=Math.max(x,c.h-.8*L)),n&&(x=Math.max(x,d.h-.8*L)),l&&this.CHTMLplaceSubOnly(l,c,v,x,H),n&&this.CHTMLplacePresubOnly(n,d,x,H)),this.CHTML.clean(),this.CHTMLhandleSpace(t),this.CHTMLhandleBBox(t),this.CHTMLhandleColor(t),t},CHTMLgetScripts:function(t,e,s,i){if(s)return t.sub=X.getNode(i,"mjx-sub"),t.sup=X.getNode(i,"mjx-sup"),t.presub=X.getNode(i,"mjx-presub"),t.presup=X.getNode(i,"mjx-presup"),e.sub=this.CHTMLbbox.sub,e.sup=this.CHTMLbbox.sup,e.presub=this.CHTMLbbox.presub,void(e.presup=this.CHTMLbbox.presup);for(var p,a,r,l={i:1,w:0,BOX:t,BBOX:this.CHTMLbbox=e},h=this.data.length,n="sub",u="sup";l.i<h;){"mprescripts"===(this.data[l.i]||{}).type?(l.i++,l.w=0,n="presub",u="presup"):(p=this.CHTMLaddScript(n,l,i),a=this.CHTMLaddScript(u,l,i),r=Math.max(p?p.rscale*p.w:0,a?a.rscale*a.w:0),this.CHTMLpadScript(n,r,p,l),this.CHTMLpadScript(u,r,a,l),l.w+=r)}e.sub&&e.sub.clean(),e.sup&&e.sup.clean(),e.presub&&e.presub.clean(),e.presup&&e.presup.clean()},CHTMLaddScript:function(t,e,s){var i,p,a=this.data[e.i];return a&&"none"!==a.type&&"mprescripts"!==a.type&&((i=e.BOX[t])||(i=e.BOX[t]=X.addElement(s,"mjx-"+t),p=e.BBOX[t]=X.BBOX.empty(),e.w&&(i.style.paddingLeft=X.Em(e.w),p.w=p.r=e.w,p.x=e.w)),a.toCommonHTML(i),p=a.CHTML),a&&"mprescripts"!==a.type&&e.i++,p},CHTMLpadScript:function(t,e,s,i){s=s||{w:0,fake:1,rscale:1};var p,a,r=i.BBOX[t],l=0,h=0;r&&(s.rscale*s.w<e&&(p=i.BOX[t],h=e-s.rscale*s.w,a=X.Element("mjx-spacer",{style:{width:X.Em(h)}}),"pre"!==t.substr(0,3)||s.fake?p.appendChild(a):(p.insertBefore(a,p.lastChild),l=h,h=0)),s.fake?r.w+=l:r.combine(s,r.w+l,0),r.w+=h)},CHTMLaddBoxes:function(t,e,s){var i,p,a=s.sub,r=s.sup,l=s.presub,h=s.presup;l&&h?(i=X.Element("mjx-prestack"),t.insertBefore(i,e),i.appendChild(h),i.appendChild(l)):(l&&t.insertBefore(l,e),h&&t.insertBefore(h,e)),a&&r?((p=X.addElement(t,"mjx-stack")).appendChild(r),p.appendChild(a)):(a&&t.appendChild(a),r&&t.appendChild(r))},CHTMLplaceSubOnly:function(t,e,s,i,p){t.style.verticalAlign=X.Em(-i),t.style.marginRight=X.Em(p),e.w+=p,this.CHTML.combine(e,s,-i)},CHTMLplaceSupOnly:function(t,e,s,i,p,a){t.style.verticalAlign=X.Em(p),t.style.paddingLeft=X.Em(i),t.style.paddingRight=X.Em(a),e.w+=a,this.CHTML.combine(e,s+i,p)},CHTMLplaceSubSup:function(t,e,s,i,p,a,r,l,h){t.style.paddingRight=X.Em(h),e.w+=h,s.style.paddingBottom=X.Em(r+l-i.d-e.h),s.style.paddingLeft=X.Em(a+(i.x||0)),s.style.paddingRight=X.Em(h),i.w+=h,s.parentNode.style.verticalAlign=X.Em(-l),this.CHTML.combine(e,p,-l),this.CHTML.combine(i,p+a,r)},CHTMLplacePresubOnly:function(t,e,s,i){t.style.verticalAlign=X.Em(-s),t.style.marginLeft=X.Em(i),this.CHTML.combine(e,i,-s)},CHTMLplacePresupOnly:function(t,e,s,i,p){t.style.verticalAlign=X.Em(i),t.style.paddingLeft=X.Em(p),t.style.paddingRight=X.Em(-s),this.CHTML.combine(e,p,i)},CHTMLplacePresubPresup:function(t,e,s,i,p,a,r,l){t.style.paddingLeft=X.Em(l),s.style.paddingBottom=X.Em(a+r-i.d-e.h),s.style.paddingLeft=X.Em(p+l+(i.x||0)),s.style.paddingRight=X.Em(-p),s.parentNode.style.verticalAlign=X.Em(-r),this.CHTML.combine(e,l,-r),this.CHTML.combine(i,l+p,a)},CHTMLstretchH:t.mbase.CHTMLstretchH,CHTMLstretchV:t.mbase.CHTMLstretchV}),MathJax.Hub.Startup.signal.Post("CommonHTML mmultiscripts Ready"),MathJax.Ajax.loadComplete(X.autoloadDir+"/mmultiscripts.js")});