"use strict";var checkParams=function(t){if(!t)throw new Error("No config object has been provided.");t.container||error("container"),t.items||t.static||error("items or static")},error=function(t){throw new Error("Missing property '"+t+"' in MagicGrid config")},getMin=function(t){var i=t[0];for(var e of t)e.height<i.height&&(i=e);return i},MagicGrid=function(t){checkParams(t),t.container instanceof HTMLElement?(this.container=t.container,this.containerClass=t.container.className):(this.containerClass=t.container,this.container=document.querySelector(t.container)),this.items=this.container.children,this.static=t.static||!1,this.size=t.items,this.gutter=t.gutter||25,this.maxColumns=t.maxColumns||!1,this.useMin=t.useMin||!1,this.animate=t.animate||!1,this.started=!1,this.init()};MagicGrid.prototype.init=function(){if(this.ready()&&!this.started){this.container.style.position="relative";for(var t=0;t<this.items.length;t++)this.items[t].style.position="absolute",this.animate&&(this.items[t].style.transition="top,left 0.2s ease");this.started=!0}},MagicGrid.prototype.colWidth=function(){return this.items[0].getBoundingClientRect().width+this.gutter},MagicGrid.prototype.setup=function(){var t=this.container.getBoundingClientRect().width,i=this.colWidth(),e=Math.floor(t/i)||1,n=[];this.maxColumns&&e>this.maxColumns&&(e=this.maxColumns);for(var s=0;s<e;s++)n[s]={height:0,index:s};return{cols:n,wSpace:t-e*i+this.gutter}},MagicGrid.prototype.nextCol=function(t,i){return this.useMin?getMin(t):t[i%t.length]},MagicGrid.prototype.positionItems=function(){var t=this.setup(),i=t.cols,e=t.wSpace,n=0,s=this.colWidth();e=Math.floor(e/2);for(var r=0;r<this.items.length;r++){var o=this.nextCol(i,r),a=o.index*s+e,h=this.items[r],c=o.height?this.gutter:0;h.style.left=a+"px",h.style.top=o.height+c+"px",o.height+=h.getBoundingClientRect().height+c,o.height>n&&(n=o.height)}this.container.style.height=n+"px"},MagicGrid.prototype.ready=function(){return!!this.static||this.items.length>=this.size},MagicGrid.prototype.getReady=function(){var t=this,i=setInterval(function(){t.container=document.querySelector(t.containerClass),t.items=t.container.children,t.ready()&&(clearInterval(i),t.init(),t.listen())},100)},MagicGrid.prototype.listen=function(){var t,i=this;this.ready()?(window.addEventListener("resize",function(){t||(t=setTimeout(function(){i.positionItems(),t=null},200))}),this.positionItems()):this.getReady()},module.exports=MagicGrid;