!function(t,n){"function"==typeof define&&define.amd?define(["./core"],n):"object"==typeof exports?module.exports=n(require("./core")):t.Blockly.Python=n(t.Blockly)}(this,function(P){"use strict";return P.Python=new P.Generator("Python"),P.Python.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip"),P.Python.ORDER_ATOMIC=0,P.Python.ORDER_COLLECTION=1,P.Python.ORDER_STRING_CONVERSION=1,P.Python.ORDER_MEMBER=2.1,P.Python.ORDER_FUNCTION_CALL=2.2,P.Python.ORDER_EXPONENTIATION=3,P.Python.ORDER_UNARY_SIGN=4,P.Python.ORDER_BITWISE_NOT=4,P.Python.ORDER_MULTIPLICATIVE=5,P.Python.ORDER_ADDITIVE=6,P.Python.ORDER_BITWISE_SHIFT=7,P.Python.ORDER_BITWISE_AND=8,P.Python.ORDER_BITWISE_XOR=9,P.Python.ORDER_BITWISE_OR=10,P.Python.ORDER_RELATIONAL=11,P.Python.ORDER_LOGICAL_NOT=12,P.Python.ORDER_LOGICAL_AND=13,P.Python.ORDER_LOGICAL_OR=14,P.Python.ORDER_CONDITIONAL=15,P.Python.ORDER_LAMBDA=16,P.Python.ORDER_NONE=99,P.Python.ORDER_OVERRIDES=[[P.Python.ORDER_FUNCTION_CALL,P.Python.ORDER_MEMBER],[P.Python.ORDER_FUNCTION_CALL,P.Python.ORDER_FUNCTION_CALL],[P.Python.ORDER_MEMBER,P.Python.ORDER_MEMBER],[P.Python.ORDER_MEMBER,P.Python.ORDER_FUNCTION_CALL],[P.Python.ORDER_LOGICAL_NOT,P.Python.ORDER_LOGICAL_NOT],[P.Python.ORDER_LOGICAL_AND,P.Python.ORDER_LOGICAL_AND],[P.Python.ORDER_LOGICAL_OR,P.Python.ORDER_LOGICAL_OR]],P.Python.init=function(t){P.Python.PASS=this.INDENT+"pass\n",P.Python.definitions_=Object.create(null),P.Python.functionNames_=Object.create(null),P.Python.variableDB_?P.Python.variableDB_.reset():P.Python.variableDB_=new P.Names(P.Python.RESERVED_WORDS_),P.Python.variableDB_.setVariableMap(t.getVariableMap());for(var n=[],o=P.Variables.allDeveloperVariables(t),e=0;e<o.length;e++)n.push(P.Python.variableDB_.getName(o[e],P.Names.DEVELOPER_VARIABLE_TYPE)+" = None");for(t=P.Variables.allUsedVarModels(t),e=0;e<t.length;e++)n.push(P.Python.variableDB_.getName(t[e].getId(),P.VARIABLE_CATEGORY_NAME)+" = None");P.Python.definitions_.variables=n.join("\n")},P.Python.finish=function(t){var n,o=[],e=[];for(n in P.Python.definitions_){var r=P.Python.definitions_[n];r.match(/^(from\s+\S+\s+)?import\s+\S+/)?o.push(r):e.push(r)}return delete P.Python.definitions_,delete P.Python.functionNames_,P.Python.variableDB_.reset(),(o.join("\n")+"\n\n"+e.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+t},P.Python.scrubNakedValue=function(t){return t+"\n"},P.Python.quote_=function(t){var n="'";return-1!==(t=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n")).indexOf("'")&&(-1===t.indexOf('"')?n='"':t=t.replace(/'/g,"\\'")),n+t+n},P.Python.multiline_quote_=function(t){return"'''"+(t=t.replace(/'''/g,"\\'\\'\\'"))+"'''"},P.Python.scrub_=function(t,n,o){var e="";if(!t.outputConnection||!t.outputConnection.targetConnection){var r=t.getCommentText();r&&(r=P.utils.string.wrap(r,P.Python.COMMENT_WRAP-3),e+=P.Python.prefixLines(r+"\n","# "));for(var i=0;i<t.inputList.length;i++)t.inputList[i].type==P.INPUT_VALUE&&(r=t.inputList[i].connection.targetBlock())&&(r=P.Python.allNestedComments(r))&&(e+=P.Python.prefixLines(r,"# "))}return t=t.nextConnection&&t.nextConnection.targetBlock(),e+n+(o=o?"":P.Python.blockToCode(t))},P.Python.getAdjustedInt=function(t,n,o,e){o=o||0,t.workspace.options.oneBasedIndex&&o--;var r=t.workspace.options.oneBasedIndex?"1":"0";return t=P.Python.valueToCode(t,n,o?P.Python.ORDER_ADDITIVE:P.Python.ORDER_NONE)||r,P.isNumber(t)?(t=parseInt(t,10)+o,e&&(t=-t)):(t=0<o?"int("+t+" + "+o+")":o<0?"int("+t+" - "+-o+")":"int("+t+")",e&&(t="-"+t)),t},P.Python.colour={},P.Python.colour_picker=function(t){return[P.Python.quote_(t.getFieldValue("COLOUR")),P.Python.ORDER_ATOMIC]},P.Python.colour_random=function(t){return P.Python.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",P.Python.ORDER_FUNCTION_CALL]},P.Python.colour_rgb=function(t){return[P.Python.provideFunction_("colour_rgb",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b):","  r = round(min(100, max(0, r)) * 2.55)","  g = round(min(100, max(0, g)) * 2.55)","  b = round(min(100, max(0, b)) * 2.55)","  return '#%02x%02x%02x' % (r, g, b)"])+"("+(P.Python.valueToCode(t,"RED",P.Python.ORDER_NONE)||0)+", "+(P.Python.valueToCode(t,"GREEN",P.Python.ORDER_NONE)||0)+", "+(t=P.Python.valueToCode(t,"BLUE",P.Python.ORDER_NONE)||0)+")",P.Python.ORDER_FUNCTION_CALL]},P.Python.colour_blend=function(t){return[P.Python.provideFunction_("colour_blend",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(colour1, colour2, ratio):","  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)","  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)","  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)","  ratio = min(1, max(0, ratio))","  r = round(r1 * (1 - ratio) + r2 * ratio)","  g = round(g1 * (1 - ratio) + g2 * ratio)","  b = round(b1 * (1 - ratio) + b2 * ratio)","  return '#%02x%02x%02x' % (r, g, b)"])+"("+(P.Python.valueToCode(t,"COLOUR1",P.Python.ORDER_NONE)||"'#000000'")+", "+(P.Python.valueToCode(t,"COLOUR2",P.Python.ORDER_NONE)||"'#000000'")+", "+(t=P.Python.valueToCode(t,"RATIO",P.Python.ORDER_NONE)||0)+")",P.Python.ORDER_FUNCTION_CALL]},P.Python.lists={},P.Python.lists_create_empty=function(t){return["[]",P.Python.ORDER_ATOMIC]},P.Python.lists_create_with=function(t){for(var n=Array(t.itemCount_),o=0;o<t.itemCount_;o++)n[o]=P.Python.valueToCode(t,"ADD"+o,P.Python.ORDER_NONE)||"None";return["["+n.join(", ")+"]",P.Python.ORDER_ATOMIC]},P.Python.lists_repeat=function(t){return["["+(P.Python.valueToCode(t,"ITEM",P.Python.ORDER_NONE)||"None")+"] * "+(t=P.Python.valueToCode(t,"NUM",P.Python.ORDER_MULTIPLICATIVE)||"0"),P.Python.ORDER_MULTIPLICATIVE]},P.Python.lists_length=function(t){return["len("+(P.Python.valueToCode(t,"VALUE",P.Python.ORDER_NONE)||"[]")+")",P.Python.ORDER_FUNCTION_CALL]},P.Python.lists_isEmpty=function(t){return["not len("+(P.Python.valueToCode(t,"VALUE",P.Python.ORDER_NONE)||"[]")+")",P.Python.ORDER_LOGICAL_NOT]},P.Python.lists_indexOf=function(t){var n,o,e=P.Python.valueToCode(t,"FIND",P.Python.ORDER_NONE)||"[]",r=P.Python.valueToCode(t,"VALUE",P.Python.ORDER_NONE)||"''",i=t.workspace.options.oneBasedIndex?(n=" 0",o=" + 1",""):(n=" -1",o=""," - 1");return"FIRST"==t.getFieldValue("END")?[(t=P.Python.provideFunction_("first_index",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(my_list, elem):","  try: index = my_list.index(elem)"+o,"  except: index ="+n,"  return index"]))+"("+r+", "+e+")",P.Python.ORDER_FUNCTION_CALL]:[(t=P.Python.provideFunction_("last_index",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(my_list, elem):","  try: index = len(my_list) - my_list[::-1].index(elem)"+i,"  except: index ="+n,"  return index"]))+"("+r+", "+e+")",P.Python.ORDER_FUNCTION_CALL]},P.Python.lists_getIndex=function(t){var n=t.getFieldValue("MODE")||"GET",o=t.getFieldValue("WHERE")||"FROM_START",e=P.Python.valueToCode(t,"VALUE","RANDOM"==o?P.Python.ORDER_NONE:P.Python.ORDER_MEMBER)||"[]";switch(o){case"FIRST":if("GET"==n)return[e+"[0]",P.Python.ORDER_MEMBER];if("GET_REMOVE"==n)return[e+".pop(0)",P.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return e+".pop(0)\n";break;case"LAST":if("GET"==n)return[e+"[-1]",P.Python.ORDER_MEMBER];if("GET_REMOVE"==n)return[e+".pop()",P.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return e+".pop()\n";break;case"FROM_START":if(t=P.Python.getAdjustedInt(t,"AT"),"GET"==n)return[e+"["+t+"]",P.Python.ORDER_MEMBER];if("GET_REMOVE"==n)return[e+".pop("+t+")",P.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return e+".pop("+t+")\n";break;case"FROM_END":if(t=P.Python.getAdjustedInt(t,"AT",1,!0),"GET"==n)return[e+"["+t+"]",P.Python.ORDER_MEMBER];if("GET_REMOVE"==n)return[e+".pop("+t+")",P.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return e+".pop("+t+")\n";break;case"RANDOM":if(P.Python.definitions_.import_random="import random","GET"==n)return["random.choice("+e+")",P.Python.ORDER_FUNCTION_CALL];if(e=P.Python.provideFunction_("lists_remove_random_item",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(myList):","  x = int(random.random() * len(myList))","  return myList.pop(x)"])+"("+e+")","GET_REMOVE"==n)return[e,P.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return e+"\n"}throw Error("Unhandled combination (lists_getIndex).")},P.Python.lists_setIndex=function(t){var n=P.Python.valueToCode(t,"LIST",P.Python.ORDER_MEMBER)||"[]",o=t.getFieldValue("MODE")||"GET",e=t.getFieldValue("WHERE")||"FROM_START",r=P.Python.valueToCode(t,"TO",P.Python.ORDER_NONE)||"None";switch(e){case"FIRST":if("SET"==o)return n+"[0] = "+r+"\n";if("INSERT"==o)return n+".insert(0, "+r+")\n";break;case"LAST":if("SET"==o)return n+"[-1] = "+r+"\n";if("INSERT"==o)return n+".append("+r+")\n";break;case"FROM_START":if(t=P.Python.getAdjustedInt(t,"AT"),"SET"==o)return n+"["+t+"] = "+r+"\n";if("INSERT"==o)return n+".insert("+t+", "+r+")\n";break;case"FROM_END":if(t=P.Python.getAdjustedInt(t,"AT",1,!0),"SET"==o)return n+"["+t+"] = "+r+"\n";if("INSERT"==o)return n+".insert("+t+", "+r+")\n";break;case"RANDOM":if(P.Python.definitions_.import_random="import random",t=n.match(/^\w+$/)?"":(e=(t=P.Python.variableDB_.getDistinctName("tmp_list",P.VARIABLE_CATEGORY_NAME))+" = "+n+"\n",n=t,e),t+=(e=P.Python.variableDB_.getDistinctName("tmp_x",P.VARIABLE_CATEGORY_NAME))+" = int(random.random() * len("+n+"))\n","SET"==o)return t+(n+"[")+e+"] = "+r+"\n";if("INSERT"==o)return t+(n+".insert(")+e+", "+r+")\n"}throw Error("Unhandled combination (lists_setIndex).")},P.Python.lists_getSublist=function(t){var n=P.Python.valueToCode(t,"LIST",P.Python.ORDER_MEMBER)||"[]",o=t.getFieldValue("WHERE1"),e=t.getFieldValue("WHERE2");switch(o){case"FROM_START":"0"==(o=P.Python.getAdjustedInt(t,"AT1"))&&(o="");break;case"FROM_END":o=P.Python.getAdjustedInt(t,"AT1",1,!0);break;case"FIRST":o="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(e){case"FROM_START":t=P.Python.getAdjustedInt(t,"AT2",1);break;case"FROM_END":t=P.Python.getAdjustedInt(t,"AT2",0,!0),P.isNumber(String(t))?"0"==t&&(t=""):(P.Python.definitions_.import_sys="import sys",t+=" or sys.maxsize");break;case"LAST":t="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[n+"["+o+" : "+t+"]",P.Python.ORDER_MEMBER]},P.Python.lists_sort=function(t){var n=P.Python.valueToCode(t,"LIST",P.Python.ORDER_NONE)||"[]",o=t.getFieldValue("TYPE");return t="1"===t.getFieldValue("DIRECTION")?"False":"True",[P.Python.provideFunction_("lists_sort",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(my_list, type, reverse):","  def try_float(s):","    try:","      return float(s)","    except:","      return 0","  key_funcs = {",'    "NUMERIC": try_float,','    "TEXT": str,','    "IGNORE_CASE": lambda s: str(s).lower()',"  }","  key_func = key_funcs[type]","  list_cpy = list(my_list)","  return sorted(list_cpy, key=key_func, reverse=reverse)"])+"("+n+', "'+o+'", '+t+")",P.Python.ORDER_FUNCTION_CALL]},P.Python.lists_split=function(t){var n=t.getFieldValue("MODE");if("SPLIT"==n)t=(n=P.Python.valueToCode(t,"INPUT",P.Python.ORDER_MEMBER)||"''")+".split("+(t=P.Python.valueToCode(t,"DELIM",P.Python.ORDER_NONE))+")";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);n=P.Python.valueToCode(t,"INPUT",P.Python.ORDER_NONE)||"[]",t=(t=P.Python.valueToCode(t,"DELIM",P.Python.ORDER_MEMBER)||"''")+".join("+n+")"}return[t,P.Python.ORDER_FUNCTION_CALL]},P.Python.lists_reverse=function(t){return["list(reversed("+(P.Python.valueToCode(t,"LIST",P.Python.ORDER_NONE)||"[]")+"))",P.Python.ORDER_FUNCTION_CALL]},P.Python.logic={},P.Python.controls_if=function(t){var n=0,o="";P.Python.STATEMENT_PREFIX&&(o+=P.Python.injectId(P.Python.STATEMENT_PREFIX,t));do{var e=P.Python.valueToCode(t,"IF"+n,P.Python.ORDER_NONE)||"False",r=P.Python.statementToCode(t,"DO"+n)||P.Python.PASS;P.Python.STATEMENT_SUFFIX&&(r=P.Python.prefixLines(P.Python.injectId(P.Python.STATEMENT_SUFFIX,t),P.Python.INDENT)+r),o+=(0==n?"if ":"elif ")+e+":\n"+r,++n}while(t.getInput("IF"+n));return(t.getInput("ELSE")||P.Python.STATEMENT_SUFFIX)&&(r=P.Python.statementToCode(t,"ELSE")||P.Python.PASS,P.Python.STATEMENT_SUFFIX&&(r=P.Python.prefixLines(P.Python.injectId(P.Python.STATEMENT_SUFFIX,t),P.Python.INDENT)+r),o+="else:\n"+r),o},P.Python.controls_ifelse=P.Python.controls_if,P.Python.logic_compare=function(t){var n={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[t.getFieldValue("OP")],o=P.Python.ORDER_RELATIONAL;return[(P.Python.valueToCode(t,"A",o)||"0")+" "+n+" "+(t=P.Python.valueToCode(t,"B",o)||"0"),o]},P.Python.logic_operation=function(t){var n,o="AND"==t.getFieldValue("OP")?"and":"or",e="and"==o?P.Python.ORDER_LOGICAL_AND:P.Python.ORDER_LOGICAL_OR,r=P.Python.valueToCode(t,"A",e);return t=P.Python.valueToCode(t,"B",e),t=r||t?(n="and"==o?"True":"False",r=r||n,t||n):r="False",[r+" "+o+" "+t,e]},P.Python.logic_negate=function(t){return["not "+(P.Python.valueToCode(t,"BOOL",P.Python.ORDER_LOGICAL_NOT)||"True"),P.Python.ORDER_LOGICAL_NOT]},P.Python.logic_boolean=function(t){return["TRUE"==t.getFieldValue("BOOL")?"True":"False",P.Python.ORDER_ATOMIC]},P.Python.logic_null=function(t){return["None",P.Python.ORDER_ATOMIC]},P.Python.logic_ternary=function(t){var n=P.Python.valueToCode(t,"IF",P.Python.ORDER_CONDITIONAL)||"False";return[(P.Python.valueToCode(t,"THEN",P.Python.ORDER_CONDITIONAL)||"None")+" if "+n+" else "+(t=P.Python.valueToCode(t,"ELSE",P.Python.ORDER_CONDITIONAL)||"None"),P.Python.ORDER_CONDITIONAL]},P.Python.loops={},P.Python.controls_repeat_ext=function(t){var n=t.getField("TIMES")?String(parseInt(t.getFieldValue("TIMES"),10)):P.Python.valueToCode(t,"TIMES",P.Python.ORDER_NONE)||"0",n=P.isNumber(n)?parseInt(n,10):"int("+n+")",o=P.Python.statementToCode(t,"DO"),o=P.Python.addLoopTrap(o,t)||P.Python.PASS;return"for "+P.Python.variableDB_.getDistinctName("count",P.VARIABLE_CATEGORY_NAME)+" in range("+n+"):\n"+o},P.Python.controls_repeat=P.Python.controls_repeat_ext,P.Python.controls_whileUntil=function(t){var n="UNTIL"==t.getFieldValue("MODE"),o=P.Python.valueToCode(t,"BOOL",n?P.Python.ORDER_LOGICAL_NOT:P.Python.ORDER_NONE)||"False",e=P.Python.statementToCode(t,"DO");return n&&(o="not "+o),"while "+o+":\n"+(e=P.Python.addLoopTrap(e,t)||P.Python.PASS)},P.Python.controls_for=function(t){function e(){return P.Python.provideFunction_("upRange",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(start, stop, step):","  while start <= stop:","    yield start","    start += abs(step)"])}function r(){return P.Python.provideFunction_("downRange",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(start, stop, step):","  while start >= stop:","    yield start","    start -= abs(step)"])}var n,o=P.Python.variableDB_.getName(t.getFieldValue("VAR"),P.VARIABLE_CATEGORY_NAME),i=P.Python.valueToCode(t,"FROM",P.Python.ORDER_NONE)||"0",a=P.Python.valueToCode(t,"TO",P.Python.ORDER_NONE)||"0",E=P.Python.valueToCode(t,"BY",P.Python.ORDER_NONE)||"1",h=P.Python.statementToCode(t,"DO"),h=P.Python.addLoopTrap(h,t)||P.Python.PASS,_="";return t=function(t,n,o){return"("+t+" <= "+n+") and "+e()+"("+t+", "+n+", "+o+") or "+r()+"("+t+", "+n+", "+o+")"},P.isNumber(i)&&P.isNumber(a)&&P.isNumber(E)?(i=Number(i),a=Number(a),E=Math.abs(Number(E)),0==i%1&&0==a%1&&0==E%1?(i<=a?(a++,t=0==i&&1==E?a:i+", "+a,1!=E&&(t+=", "+E)):t=i+", "+--a+", -"+E,t="range("+t+")"):(t=(i<a?e:r)(),t+="("+i+", "+a+", "+E+")")):(i=(n=function(t,n){return t=P.isNumber(t)?Number(t):t.match(/^\w+$/)?"float("+t+")":(n=P.Python.variableDB_.getDistinctName(o+n,P.VARIABLE_CATEGORY_NAME),_+=n+" = float("+t+")\n",n)})(i,"_start"),a=n(a,"_end"),n(E,"_inc"),t="number"==typeof i&&"number"==typeof a?(i<a?e:r)():t(i,a,E)),_+="for "+o+" in "+t+":\n"+h},P.Python.controls_forEach=function(t){var n=P.Python.variableDB_.getName(t.getFieldValue("VAR"),P.VARIABLE_CATEGORY_NAME),o=P.Python.valueToCode(t,"LIST",P.Python.ORDER_RELATIONAL)||"[]",e=P.Python.statementToCode(t,"DO");return"for "+n+" in "+o+":\n"+(e=P.Python.addLoopTrap(e,t)||P.Python.PASS)},P.Python.controls_flow_statements=function(t){var n,o="";switch(P.Python.STATEMENT_PREFIX&&(o+=P.Python.injectId(P.Python.STATEMENT_PREFIX,t)),P.Python.STATEMENT_SUFFIX&&(o+=P.Python.injectId(P.Python.STATEMENT_SUFFIX,t)),!P.Python.STATEMENT_PREFIX||(n=P.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(t))&&!n.suppressPrefixSuffix&&(o+=P.Python.injectId(P.Python.STATEMENT_PREFIX,n)),t.getFieldValue("FLOW")){case"BREAK":return o+"break\n";case"CONTINUE":return o+"continue\n"}throw Error("Unknown flow statement.")},P.Python.math={},P.Python.addReservedWords("math,random,Number"),P.Python.math_number=function(t){var n=1/0==(t=Number(t.getFieldValue("NUM")))?(t='float("inf")',P.Python.ORDER_FUNCTION_CALL):-1/0==t?(t='-float("inf")',P.Python.ORDER_UNARY_SIGN):t<0?P.Python.ORDER_UNARY_SIGN:P.Python.ORDER_ATOMIC;return[t,n]},P.Python.math_arithmetic=function(t){var n=(o={ADD:[" + ",P.Python.ORDER_ADDITIVE],MINUS:[" - ",P.Python.ORDER_ADDITIVE],MULTIPLY:[" * ",P.Python.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",P.Python.ORDER_MULTIPLICATIVE],POWER:[" ** ",P.Python.ORDER_EXPONENTIATION]}[t.getFieldValue("OP")])[0],o=o[1];return[(P.Python.valueToCode(t,"A",o)||"0")+n+(t=P.Python.valueToCode(t,"B",o)||"0"),o]},P.Python.math_single=function(t){var n=t.getFieldValue("OP");if("NEG"==n){var o=P.Python.valueToCode(t,"NUM",P.Python.ORDER_UNARY_SIGN)||"0";return["-"+o,P.Python.ORDER_UNARY_SIGN]}switch(P.Python.definitions_.import_math="import math",t="SIN"==n||"COS"==n||"TAN"==n?P.Python.valueToCode(t,"NUM",P.Python.ORDER_MULTIPLICATIVE)||"0":P.Python.valueToCode(t,"NUM",P.Python.ORDER_NONE)||"0",n){case"ABS":o="math.fabs("+t+")";break;case"ROOT":o="math.sqrt("+t+")";break;case"LN":o="math.log("+t+")";break;case"LOG10":o="math.log10("+t+")";break;case"EXP":o="math.exp("+t+")";break;case"POW10":o="math.pow(10,"+t+")";break;case"ROUND":o="round("+t+")";break;case"ROUNDUP":o="math.ceil("+t+")";break;case"ROUNDDOWN":o="math.floor("+t+")";break;case"SIN":o="math.sin("+t+" / 180.0 * math.pi)";break;case"COS":o="math.cos("+t+" / 180.0 * math.pi)";break;case"TAN":o="math.tan("+t+" / 180.0 * math.pi)"}if(o)return[o,P.Python.ORDER_FUNCTION_CALL];switch(n){case"ASIN":o="math.asin("+t+") / math.pi * 180";break;case"ACOS":o="math.acos("+t+") / math.pi * 180";break;case"ATAN":o="math.atan("+t+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+n)}return[o,P.Python.ORDER_MULTIPLICATIVE]},P.Python.math_constant=function(t){var n={PI:["math.pi",P.Python.ORDER_MEMBER],E:["math.e",P.Python.ORDER_MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",P.Python.ORDER_MULTIPLICATIVE],SQRT2:["math.sqrt(2)",P.Python.ORDER_MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",P.Python.ORDER_MEMBER],INFINITY:["float('inf')",P.Python.ORDER_ATOMIC]};return"INFINITY"!=(t=t.getFieldValue("CONSTANT"))&&(P.Python.definitions_.import_math="import math"),n[t]},P.Python.math_number_property=function(t){var n=P.Python.valueToCode(t,"NUMBER_TO_CHECK",P.Python.ORDER_MULTIPLICATIVE)||"0",o=t.getFieldValue("PROPERTY");if("PRIME"==o)return P.Python.definitions_.import_math="import math",P.Python.definitions_.from_numbers_import_Number="from numbers import Number",[P.Python.provideFunction_("math_isPrime",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(n):","  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  # If n is not a number but a string, try parsing it.","  if not isinstance(n, Number):","    try:","      n = float(n)","    except:","      return False","  if n == 2 or n == 3:","    return True","  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.","  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:","    return False","  # Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for x in range(6, int(math.sqrt(n)) + 2, 6):","    if n % (x - 1) == 0 or n % (x + 1) == 0:","      return False","  return True"])+"("+n+")",P.Python.ORDER_FUNCTION_CALL];switch(o){case"EVEN":var e=n+" % 2 == 0";break;case"ODD":e=n+" % 2 == 1";break;case"WHOLE":e=n+" % 1 == 0";break;case"POSITIVE":e=n+" > 0";break;case"NEGATIVE":e=n+" < 0";break;case"DIVISIBLE_BY":if(!(t=P.Python.valueToCode(t,"DIVISOR",P.Python.ORDER_MULTIPLICATIVE))||"0"==t)return["False",P.Python.ORDER_ATOMIC];e=n+" % "+t+" == 0"}return[e,P.Python.ORDER_RELATIONAL]},P.Python.math_change=function(t){P.Python.definitions_.from_numbers_import_Number="from numbers import Number";var n=P.Python.valueToCode(t,"DELTA",P.Python.ORDER_ADDITIVE)||"0";return(t=P.Python.variableDB_.getName(t.getFieldValue("VAR"),P.VARIABLE_CATEGORY_NAME))+" = ("+t+" if isinstance("+t+", Number) else 0) + "+n+"\n"},P.Python.math_round=P.Python.math_single,P.Python.math_trig=P.Python.math_single,P.Python.math_on_list=function(t){var n=t.getFieldValue("OP");switch(t=P.Python.valueToCode(t,"LIST",P.Python.ORDER_NONE)||"[]",n){case"SUM":n="sum("+t+")";break;case"MIN":n="min("+t+")";break;case"MAX":n="max("+t+")";break;case"AVERAGE":P.Python.definitions_.from_numbers_import_Number="from numbers import Number",n=(n=P.Python.provideFunction_("math_mean",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(myList):","  localList = [e for e in myList if isinstance(e, Number)]","  if not localList: return","  return float(sum(localList)) / len(localList)"]))+"("+t+")";break;case"MEDIAN":P.Python.definitions_.from_numbers_import_Number="from numbers import Number",n=(n=P.Python.provideFunction_("math_median",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(myList):","  localList = sorted([e for e in myList if isinstance(e, Number)])","  if not localList: return","  if len(localList) % 2 == 0:","    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0","  else:","    return localList[(len(localList) - 1) // 2]"]))+"("+t+")";break;case"MODE":n=(n=P.Python.provideFunction_("math_modes",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(some_list):","  modes = []","  # Using a lists of [item, count] to keep count rather than dict",'  # to avoid "unhashable" errors when the counted item is itself a list or dict.',"  counts = []","  maxCount = 1","  for item in some_list:","    found = False","    for count in counts:","      if count[0] == item:","        count[1] += 1","        maxCount = max(maxCount, count[1])","        found = True","    if not found:","      counts.append([item, 1])","  for counted_item, item_count in counts:","    if item_count == maxCount:","      modes.append(counted_item)","  return modes"]))+"("+t+")";break;case"STD_DEV":P.Python.definitions_.import_math="import math",n=(n=P.Python.provideFunction_("math_standard_deviation",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(numbers):","  n = len(numbers)","  if n == 0: return","  mean = float(sum(numbers)) / n","  variance = sum((x - mean) ** 2 for x in numbers) / n","  return math.sqrt(variance)"]))+"("+t+")";break;case"RANDOM":P.Python.definitions_.import_random="import random",n="random.choice("+t+")";break;default:throw Error("Unknown operator: "+n)}return[n,P.Python.ORDER_FUNCTION_CALL]},P.Python.math_modulo=function(t){return[(P.Python.valueToCode(t,"DIVIDEND",P.Python.ORDER_MULTIPLICATIVE)||"0")+" % "+(t=P.Python.valueToCode(t,"DIVISOR",P.Python.ORDER_MULTIPLICATIVE)||"0"),P.Python.ORDER_MULTIPLICATIVE]},P.Python.math_constrain=function(t){return["min(max("+(P.Python.valueToCode(t,"VALUE",P.Python.ORDER_NONE)||"0")+", "+(P.Python.valueToCode(t,"LOW",P.Python.ORDER_NONE)||"0")+"), "+(t=P.Python.valueToCode(t,"HIGH",P.Python.ORDER_NONE)||"float('inf')")+")",P.Python.ORDER_FUNCTION_CALL]},P.Python.math_random_int=function(t){return P.Python.definitions_.import_random="import random",["random.randint("+(P.Python.valueToCode(t,"FROM",P.Python.ORDER_NONE)||"0")+", "+(t=P.Python.valueToCode(t,"TO",P.Python.ORDER_NONE)||"0")+")",P.Python.ORDER_FUNCTION_CALL]},P.Python.math_random_float=function(t){return P.Python.definitions_.import_random="import random",["random.random()",P.Python.ORDER_FUNCTION_CALL]},P.Python.math_atan2=function(t){P.Python.definitions_.import_math="import math";var n=P.Python.valueToCode(t,"X",P.Python.ORDER_NONE)||"0";return["math.atan2("+(P.Python.valueToCode(t,"Y",P.Python.ORDER_NONE)||"0")+", "+n+") / math.pi * 180",P.Python.ORDER_MULTIPLICATIVE]},P.Python.procedures={},P.Python.procedures_defreturn=function(t){for(var n,o=[],e=t.workspace,r=P.Variables.allUsedVarModels(e)||[],i=0;n=r[i];i++)n=n.name,-1==t.arguments_.indexOf(n)&&o.push(P.Python.variableDB_.getName(n,P.VARIABLE_CATEGORY_NAME));for(e=P.Variables.allDeveloperVariables(e),i=0;i<e.length;i++)o.push(P.Python.variableDB_.getName(e[i],P.Names.DEVELOPER_VARIABLE_TYPE));o=o.length?P.Python.INDENT+"global "+o.join(", ")+"\n":"",e=P.Python.variableDB_.getName(t.getFieldValue("NAME"),P.PROCEDURE_CATEGORY_NAME),r="",P.Python.STATEMENT_PREFIX&&(r+=P.Python.injectId(P.Python.STATEMENT_PREFIX,t)),P.Python.STATEMENT_SUFFIX&&(r+=P.Python.injectId(P.Python.STATEMENT_SUFFIX,t)),r=r&&P.Python.prefixLines(r,P.Python.INDENT),n="",P.Python.INFINITE_LOOP_TRAP&&(n=P.Python.prefixLines(P.Python.injectId(P.Python.INFINITE_LOOP_TRAP,t),P.Python.INDENT));var a=P.Python.statementToCode(t,"STACK"),E=P.Python.valueToCode(t,"RETURN",P.Python.ORDER_NONE)||"",h=a&&E?r:"";E?E=P.Python.INDENT+"return "+E+"\n":a=a||P.Python.PASS;for(var _=[],i=0;i<t.arguments_.length;i++)_[i]=P.Python.variableDB_.getName(t.arguments_[i],P.VARIABLE_CATEGORY_NAME);return o="def "+e+"("+_.join(", ")+"):\n"+o+r+n+a+h+E,o=P.Python.scrub_(t,o),P.Python.definitions_["%"+e]=o,null},P.Python.procedures_defnoreturn=P.Python.procedures_defreturn,P.Python.procedures_callreturn=function(t){for(var n=P.Python.variableDB_.getName(t.getFieldValue("NAME"),P.PROCEDURE_CATEGORY_NAME),o=[],e=0;e<t.arguments_.length;e++)o[e]=P.Python.valueToCode(t,"ARG"+e,P.Python.ORDER_NONE)||"None";return[n+"("+o.join(", ")+")",P.Python.ORDER_FUNCTION_CALL]},P.Python.procedures_callnoreturn=function(t){return P.Python.procedures_callreturn(t)[0]+"\n"},P.Python.procedures_ifreturn=function(t){var n="if "+(P.Python.valueToCode(t,"CONDITION",P.Python.ORDER_NONE)||"False")+":\n";return P.Python.STATEMENT_SUFFIX&&(n+=P.Python.prefixLines(P.Python.injectId(P.Python.STATEMENT_SUFFIX,t),P.Python.INDENT)),t.hasReturnValue_?(t=P.Python.valueToCode(t,"VALUE",P.Python.ORDER_NONE)||"None",n+=P.Python.INDENT+"return "+t+"\n"):n+=P.Python.INDENT+"return\n",n},P.Python.texts={},P.Python.text=function(t){return[P.Python.quote_(t.getFieldValue("TEXT")),P.Python.ORDER_ATOMIC]},P.Python.text_multiline=function(t){return[P.Python.multiline_quote_(t.getFieldValue("TEXT")),P.Python.ORDER_ATOMIC]},P.Python.text.forceString_=function(t){return P.Python.text.forceString_.strRegExp.test(t)?t:"str("+t+")"},P.Python.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,P.Python.text_join=function(t){switch(t.itemCount_){case 0:return["''",P.Python.ORDER_ATOMIC];case 1:return t=P.Python.valueToCode(t,"ADD0",P.Python.ORDER_NONE)||"''",[t=P.Python.text.forceString_(t),P.Python.ORDER_FUNCTION_CALL];case 2:var n=P.Python.valueToCode(t,"ADD0",P.Python.ORDER_NONE)||"''";return t=P.Python.valueToCode(t,"ADD1",P.Python.ORDER_NONE)||"''",[t=P.Python.text.forceString_(n)+" + "+P.Python.text.forceString_(t),P.Python.ORDER_ADDITIVE];default:n=[];for(var o=0;o<t.itemCount_;o++)n[o]=P.Python.valueToCode(t,"ADD"+o,P.Python.ORDER_NONE)||"''";return[t="''.join([str("+(t=P.Python.variableDB_.getDistinctName("x",P.VARIABLE_CATEGORY_NAME))+") for "+t+" in ["+n.join(", ")+"]])",P.Python.ORDER_FUNCTION_CALL]}},P.Python.text_append=function(t){var n=P.Python.variableDB_.getName(t.getFieldValue("VAR"),P.VARIABLE_CATEGORY_NAME);return t=P.Python.valueToCode(t,"TEXT",P.Python.ORDER_NONE)||"''",n+" = str("+n+") + "+P.Python.text.forceString_(t)+"\n"},P.Python.text_length=function(t){return["len("+(P.Python.valueToCode(t,"VALUE",P.Python.ORDER_NONE)||"''")+")",P.Python.ORDER_FUNCTION_CALL]},P.Python.text_isEmpty=function(t){return["not len("+(P.Python.valueToCode(t,"VALUE",P.Python.ORDER_NONE)||"''")+")",P.Python.ORDER_LOGICAL_NOT]},P.Python.text_indexOf=function(t){var n="FIRST"==t.getFieldValue("END")?"find":"rfind",o=P.Python.valueToCode(t,"FIND",P.Python.ORDER_NONE)||"''",n=(P.Python.valueToCode(t,"VALUE",P.Python.ORDER_MEMBER)||"''")+"."+n+"("+o+")";return t.workspace.options.oneBasedIndex?[n+" + 1",P.Python.ORDER_ADDITIVE]:[n,P.Python.ORDER_FUNCTION_CALL]},P.Python.text_charAt=function(t){var n=t.getFieldValue("WHERE")||"FROM_START",o=P.Python.valueToCode(t,"VALUE",P.Python.ORDER_MEMBER)||"''";switch(n){case"FIRST":return[o+"[0]",P.Python.ORDER_MEMBER];case"LAST":return[o+"[-1]",P.Python.ORDER_MEMBER];case"FROM_START":return[o+"["+(t=P.Python.getAdjustedInt(t,"AT"))+"]",P.Python.ORDER_MEMBER];case"FROM_END":return[o+"["+(t=P.Python.getAdjustedInt(t,"AT",1,!0))+"]",P.Python.ORDER_MEMBER];case"RANDOM":return P.Python.definitions_.import_random="import random",[P.Python.provideFunction_("text_random_letter",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(text):","  x = int(random.random() * len(text))","  return text[x];"])+"("+o+")",P.Python.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},P.Python.text_getSubstring=function(t){var n=t.getFieldValue("WHERE1"),o=t.getFieldValue("WHERE2"),e=P.Python.valueToCode(t,"STRING",P.Python.ORDER_MEMBER)||"''";switch(n){case"FROM_START":"0"==(n=P.Python.getAdjustedInt(t,"AT1"))&&(n="");break;case"FROM_END":n=P.Python.getAdjustedInt(t,"AT1",1,!0);break;case"FIRST":n="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(o){case"FROM_START":t=P.Python.getAdjustedInt(t,"AT2",1);break;case"FROM_END":t=P.Python.getAdjustedInt(t,"AT2",0,!0),P.isNumber(String(t))?"0"==t&&(t=""):(P.Python.definitions_.import_sys="import sys",t+=" or sys.maxsize");break;case"LAST":t="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[e+"["+n+" : "+t+"]",P.Python.ORDER_MEMBER]},P.Python.text_changeCase=function(t){var n={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[t.getFieldValue("CASE")];return[(P.Python.valueToCode(t,"TEXT",P.Python.ORDER_MEMBER)||"''")+n,P.Python.ORDER_FUNCTION_CALL]},P.Python.text_trim=function(t){var n={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[t.getFieldValue("MODE")];return[(P.Python.valueToCode(t,"TEXT",P.Python.ORDER_MEMBER)||"''")+n,P.Python.ORDER_FUNCTION_CALL]},P.Python.text_print=function(t){return"print("+(P.Python.valueToCode(t,"TEXT",P.Python.ORDER_NONE)||"''")+")\n"},P.Python.text_prompt_ext=function(t){var n=(n=P.Python.provideFunction_("text_prompt",["def "+P.Python.FUNCTION_NAME_PLACEHOLDER_+"(msg):","  try:","    return raw_input(msg)","  except NameError:","    return input(msg)"]))+"("+(t.getField("TEXT")?P.Python.quote_(t.getFieldValue("TEXT")):P.Python.valueToCode(t,"TEXT",P.Python.ORDER_NONE)||"''")+")";return"NUMBER"==t.getFieldValue("TYPE")&&(n="float("+n+")"),[n,P.Python.ORDER_FUNCTION_CALL]},P.Python.text_prompt=P.Python.text_prompt_ext,P.Python.text_count=function(t){return[(P.Python.valueToCode(t,"TEXT",P.Python.ORDER_MEMBER)||"''")+".count("+(t=P.Python.valueToCode(t,"SUB",P.Python.ORDER_NONE)||"''")+")",P.Python.ORDER_MEMBER]},P.Python.text_replace=function(t){return[(P.Python.valueToCode(t,"TEXT",P.Python.ORDER_MEMBER)||"''")+".replace("+(P.Python.valueToCode(t,"FROM",P.Python.ORDER_NONE)||"''")+", "+(t=P.Python.valueToCode(t,"TO",P.Python.ORDER_NONE)||"''")+")",P.Python.ORDER_MEMBER]},P.Python.text_reverse=function(t){return[(P.Python.valueToCode(t,"TEXT",P.Python.ORDER_MEMBER)||"''")+"[::-1]",P.Python.ORDER_MEMBER]},P.Python.variables={},P.Python.variables_get=function(t){return[P.Python.variableDB_.getName(t.getFieldValue("VAR"),P.VARIABLE_CATEGORY_NAME),P.Python.ORDER_ATOMIC]},P.Python.variables_set=function(t){var n=P.Python.valueToCode(t,"VALUE",P.Python.ORDER_NONE)||"0";return P.Python.variableDB_.getName(t.getFieldValue("VAR"),P.VARIABLE_CATEGORY_NAME)+" = "+n+"\n"},P.Python.variablesDynamic={},P.Python.variables_get_dynamic=P.Python.variables_get,P.Python.variables_set_dynamic=P.Python.variables_set,P.Python});