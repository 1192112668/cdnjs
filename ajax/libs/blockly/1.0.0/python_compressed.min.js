"use strict";Blockly.Python=new Blockly.Generator("Python"),Blockly.Python.addReservedWords("and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,not,or,pass,print,raise,return,try,while,with,yield,True,False,None,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,abs,divmod,input,open,staticmethod,all,enumerate,int,ord,str,any,eval,isinstance,pow,sum,basestring,execfile,issubclass,print,super,bin,file,iter,property,tuple,bool,filter,len,range,type,bytearray,float,list,raw_input,unichr,callable,format,locals,reduce,unicode,chr,frozenset,long,reload,vars,classmethod,getattr,map,repr,xrange,cmp,globals,max,reversed,zip,compile,hasattr,memoryview,round,__import__,complex,hash,min,set,apply,delattr,help,next,setattr,buffer,dict,hex,object,slice,coerce,dir,id,oct,sorted,intern"),Blockly.Python.ORDER_ATOMIC=0,Blockly.Python.ORDER_COLLECTION=1,Blockly.Python.ORDER_STRING_CONVERSION=1,Blockly.Python.ORDER_MEMBER=2.1,Blockly.Python.ORDER_FUNCTION_CALL=2.2,Blockly.Python.ORDER_EXPONENTIATION=3,Blockly.Python.ORDER_UNARY_SIGN=4,Blockly.Python.ORDER_BITWISE_NOT=4,Blockly.Python.ORDER_MULTIPLICATIVE=5,Blockly.Python.ORDER_ADDITIVE=6,Blockly.Python.ORDER_BITWISE_SHIFT=7,Blockly.Python.ORDER_BITWISE_AND=8,Blockly.Python.ORDER_BITWISE_XOR=9,Blockly.Python.ORDER_BITWISE_OR=10,Blockly.Python.ORDER_RELATIONAL=11,Blockly.Python.ORDER_LOGICAL_NOT=12,Blockly.Python.ORDER_LOGICAL_AND=13,Blockly.Python.ORDER_LOGICAL_OR=14,Blockly.Python.ORDER_CONDITIONAL=15,Blockly.Python.ORDER_LAMBDA=16,Blockly.Python.ORDER_NONE=99,Blockly.Python.ONE_BASED_INDEXING=!0,Blockly.Python.ORDER_OVERRIDES=[[Blockly.Python.ORDER_FUNCTION_CALL,Blockly.Python.ORDER_MEMBER],[Blockly.Python.ORDER_FUNCTION_CALL,Blockly.Python.ORDER_FUNCTION_CALL],[Blockly.Python.ORDER_MEMBER,Blockly.Python.ORDER_MEMBER],[Blockly.Python.ORDER_MEMBER,Blockly.Python.ORDER_FUNCTION_CALL],[Blockly.Python.ORDER_LOGICAL_NOT,Blockly.Python.ORDER_LOGICAL_NOT],[Blockly.Python.ORDER_LOGICAL_AND,Blockly.Python.ORDER_LOGICAL_AND],[Blockly.Python.ORDER_LOGICAL_OR,Blockly.Python.ORDER_LOGICAL_OR]],Blockly.Python.init=function(o){Blockly.Python.PASS=this.INDENT+"pass\n",Blockly.Python.definitions_=Object.create(null),Blockly.Python.functionNames_=Object.create(null),Blockly.Python.variableDB_?Blockly.Python.variableDB_.reset():Blockly.Python.variableDB_=new Blockly.Names(Blockly.Python.RESERVED_WORDS_);var l=[];o=o.variableList;for(var t=0;t<o.length;t++)l[t]=Blockly.Python.variableDB_.getName(o[t],Blockly.Variables.NAME_TYPE)+" = None";Blockly.Python.definitions_.variables=l.join("\n")},Blockly.Python.finish=function(o){var l,t=[],n=[];for(l in Blockly.Python.definitions_){var e=Blockly.Python.definitions_[l];e.match(/^(from\s+\S+\s+)?import\s+\S+/)?t.push(e):n.push(e)}return delete Blockly.Python.definitions_,delete Blockly.Python.functionNames_,Blockly.Python.variableDB_.reset(),(t.join("\n")+"\n\n"+n.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+o},Blockly.Python.scrubNakedValue=function(o){return o+"\n"},Blockly.Python.quote_=function(o){return"'"+(o=o.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/\%/g,"\\%").replace(/'/g,"\\'"))+"'"},Blockly.Python.scrub_=function(o,l){var t="";if(!o.outputConnection||!o.outputConnection.targetConnection){var n=o.getCommentText();(n=Blockly.utils.wrap(n,Blockly.Python.COMMENT_WRAP-3))&&(t=o.getProcedureDef?t+'"""'+n+'\n"""\n':t+Blockly.Python.prefixLines(n+"\n","# "));for(var e=0;e<o.inputList.length;e++)o.inputList[e].type==Blockly.INPUT_VALUE&&(n=o.inputList[e].connection.targetBlock())&&(n=Blockly.Python.allNestedComments(n))&&(t+=Blockly.Python.prefixLines(n,"# "))}return e=o.nextConnection&&o.nextConnection.targetBlock(),t+l+(e=Blockly.Python.blockToCode(e))},Blockly.Python.getAdjustedInt=function(o,l,t,n){t=t||0,Blockly.Python.ONE_BASED_INDEXING&&t--;var e=Blockly.Python.ONE_BASED_INDEXING?"1":"0";return o=Blockly.Python.valueToCode(o,l,t?Blockly.Python.ORDER_ADDITIVE:Blockly.Python.ORDER_NONE)||e,Blockly.isNumber(o)?(o=parseInt(o,10)+t,n&&(o=-o)):(o=0<t?"int("+o+" + "+t+")":t<0?"int("+o+" - "+-t+")":"int("+o+")",n&&(o="-"+o)),o},Blockly.Python.colour={},Blockly.Python.colour_picker=function(o){return["'"+o.getFieldValue("COLOUR")+"'",Blockly.Python.ORDER_ATOMIC]},Blockly.Python.colour_random=function(o){return Blockly.Python.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.colour_rgb=function(o){return[Blockly.Python.provideFunction_("colour_rgb",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b):","  r = round(min(100, max(0, r)) * 2.55)","  g = round(min(100, max(0, g)) * 2.55)","  b = round(min(100, max(0, b)) * 2.55)","  return '#%02x%02x%02x' % (r, g, b)"])+"("+(Blockly.Python.valueToCode(o,"RED",Blockly.Python.ORDER_NONE)||0)+", "+(Blockly.Python.valueToCode(o,"GREEN",Blockly.Python.ORDER_NONE)||0)+", "+(o=Blockly.Python.valueToCode(o,"BLUE",Blockly.Python.ORDER_NONE)||0)+")",Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.colour_blend=function(o){return[Blockly.Python.provideFunction_("colour_blend",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(colour1, colour2, ratio):","  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)","  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)","  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)","  ratio = min(1, max(0, ratio))","  r = round(r1 * (1 - ratio) + r2 * ratio)","  g = round(g1 * (1 - ratio) + g2 * ratio)","  b = round(b1 * (1 - ratio) + b2 * ratio)","  return '#%02x%02x%02x' % (r, g, b)"])+"("+(Blockly.Python.valueToCode(o,"COLOUR1",Blockly.Python.ORDER_NONE)||"'#000000'")+", "+(Blockly.Python.valueToCode(o,"COLOUR2",Blockly.Python.ORDER_NONE)||"'#000000'")+", "+(o=Blockly.Python.valueToCode(o,"RATIO",Blockly.Python.ORDER_NONE)||0)+")",Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.lists={},Blockly.Python.lists_create_empty=function(o){return["[]",Blockly.Python.ORDER_ATOMIC]},Blockly.Python.lists_create_with=function(o){for(var l=Array(o.itemCount_),t=0;t<o.itemCount_;t++)l[t]=Blockly.Python.valueToCode(o,"ADD"+t,Blockly.Python.ORDER_NONE)||"None";return["["+l.join(", ")+"]",Blockly.Python.ORDER_ATOMIC]},Blockly.Python.lists_repeat=function(o){return["["+(Blockly.Python.valueToCode(o,"ITEM",Blockly.Python.ORDER_NONE)||"None")+"] * "+(o=Blockly.Python.valueToCode(o,"NUM",Blockly.Python.ORDER_MULTIPLICATIVE)||"0"),Blockly.Python.ORDER_MULTIPLICATIVE]},Blockly.Python.lists_length=function(o){return["len("+(Blockly.Python.valueToCode(o,"VALUE",Blockly.Python.ORDER_NONE)||"[]")+")",Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.lists_isEmpty=function(o){return["not len("+(Blockly.Python.valueToCode(o,"VALUE",Blockly.Python.ORDER_NONE)||"[]")+")",Blockly.Python.ORDER_LOGICAL_NOT]},Blockly.Python.lists_indexOf=function(o){var l,t,n=Blockly.Python.valueToCode(o,"FIND",Blockly.Python.ORDER_NONE)||"[]",e=Blockly.Python.valueToCode(o,"VALUE",Blockly.Python.ORDER_NONE)||"''",y=Blockly.Python.ONE_BASED_INDEXING?(l=" 0",t=" + 1",""):(l=" -1",t=""," - 1");return"FIRST"==o.getFieldValue("END")?[(o=Blockly.Python.provideFunction_("first_index",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(my_list, elem):","  try: index = my_list.index(elem)"+t,"  except: index ="+l,"  return index"]))+"("+e+", "+n+")",Blockly.Python.ORDER_FUNCTION_CALL]:[(o=Blockly.Python.provideFunction_("last_index",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(my_list, elem):","  try: index = len(my_list) - my_list[::-1].index(elem)"+y,"  except: index ="+l,"  return index"]))+"("+e+", "+n+")",Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.lists_getIndex=function(o){var l=o.getFieldValue("MODE")||"GET",t=o.getFieldValue("WHERE")||"FROM_START",n=Blockly.Python.valueToCode(o,"VALUE","RANDOM"==t?Blockly.Python.ORDER_NONE:Blockly.Python.ORDER_MEMBER)||"[]";switch(t){case"FIRST":if("GET"==l)return[n+"[0]",Blockly.Python.ORDER_MEMBER];if("GET_REMOVE"==l)return[n+".pop(0)",Blockly.Python.ORDER_FUNCTION_CALL];if("REMOVE"==l)return n+".pop(0)\n";break;case"LAST":if("GET"==l)return[n+"[-1]",Blockly.Python.ORDER_MEMBER];if("GET_REMOVE"==l)return[n+".pop()",Blockly.Python.ORDER_FUNCTION_CALL];if("REMOVE"==l)return n+".pop()\n";break;case"FROM_START":if(o=Blockly.Python.getAdjustedInt(o,"AT"),"GET"==l)return[n+"["+o+"]",Blockly.Python.ORDER_MEMBER];if("GET_REMOVE"==l)return[n+".pop("+o+")",Blockly.Python.ORDER_FUNCTION_CALL];if("REMOVE"==l)return n+".pop("+o+")\n";break;case"FROM_END":if(o=Blockly.Python.getAdjustedInt(o,"AT",1,!0),"GET"==l)return[n+"["+o+"]",Blockly.Python.ORDER_MEMBER];if("GET_REMOVE"==l)return[n+".pop("+o+")",Blockly.Python.ORDER_FUNCTION_CALL];if("REMOVE"==l)return n+".pop("+o+")\n";break;case"RANDOM":if(Blockly.Python.definitions_.import_random="import random","GET"==l)return["random.choice("+n+")",Blockly.Python.ORDER_FUNCTION_CALL];if(n=Blockly.Python.provideFunction_("lists_remove_random_item",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(myList):","  x = int(random.random() * len(myList))","  return myList.pop(x)"])+"("+n+")","GET_REMOVE"==l)return[n,Blockly.Python.ORDER_FUNCTION_CALL];if("REMOVE"==l)return n+"\n"}throw"Unhandled combination (lists_getIndex)."},Blockly.Python.lists_setIndex=function(o){var l=Blockly.Python.valueToCode(o,"LIST",Blockly.Python.ORDER_MEMBER)||"[]",t=o.getFieldValue("MODE")||"GET",n=o.getFieldValue("WHERE")||"FROM_START",e=Blockly.Python.valueToCode(o,"TO",Blockly.Python.ORDER_NONE)||"None";switch(n){case"FIRST":if("SET"==t)return l+"[0] = "+e+"\n";if("INSERT"==t)return l+".insert(0, "+e+")\n";break;case"LAST":if("SET"==t)return l+"[-1] = "+e+"\n";if("INSERT"==t)return l+".append("+e+")\n";break;case"FROM_START":if(o=Blockly.Python.getAdjustedInt(o,"AT"),"SET"==t)return l+"["+o+"] = "+e+"\n";if("INSERT"==t)return l+".insert("+o+", "+e+")\n";break;case"FROM_END":if(o=Blockly.Python.getAdjustedInt(o,"AT",1,!0),"SET"==t)return l+"["+o+"] = "+e+"\n";if("INSERT"==t)return l+".insert("+o+", "+e+")\n";break;case"RANDOM":if(Blockly.Python.definitions_.import_random="import random",o=l.match(/^\w+$/)?"":(n=(o=Blockly.Python.variableDB_.getDistinctName("tmp_list",Blockly.Variables.NAME_TYPE))+" = "+l+"\n",l=o,n),o+=(n=Blockly.Python.variableDB_.getDistinctName("tmp_x",Blockly.Variables.NAME_TYPE))+" = int(random.random() * len("+l+"))\n","SET"==t)return o+(l+"[")+n+"] = "+e+"\n";if("INSERT"==t)return o+(l+".insert(")+n+", "+e+")\n"}throw"Unhandled combination (lists_setIndex)."},Blockly.Python.lists_getSublist=function(o){var l=Blockly.Python.valueToCode(o,"LIST",Blockly.Python.ORDER_MEMBER)||"[]",t=o.getFieldValue("WHERE1"),n=o.getFieldValue("WHERE2");switch(t){case"FROM_START":"0"==(t=Blockly.Python.getAdjustedInt(o,"AT1"))&&(t="");break;case"FROM_END":t=Blockly.Python.getAdjustedInt(o,"AT1",1,!0);break;case"FIRST":t="";break;default:throw"Unhandled option (lists_getSublist)"}switch(n){case"FROM_START":o=Blockly.Python.getAdjustedInt(o,"AT2",1);break;case"FROM_END":o=Blockly.Python.getAdjustedInt(o,"AT2",0,!0),Blockly.isNumber(String(o))?"0"==o&&(o=""):(Blockly.Python.definitions_.import_sys="import sys",o+=" or sys.maxsize");break;case"LAST":o="";break;default:throw"Unhandled option (lists_getSublist)"}return[l+"["+t+" : "+o+"]",Blockly.Python.ORDER_MEMBER]},Blockly.Python.lists_sort=function(o){var l=Blockly.Python.valueToCode(o,"LIST",Blockly.Python.ORDER_NONE)||"[]",t=o.getFieldValue("TYPE");return o="1"===o.getFieldValue("DIRECTION")?"False":"True",[Blockly.Python.provideFunction_("lists_sort",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(my_list, type, reverse):","  def try_float(s):","    try:","      return float(s)","    except:","      return 0","  key_funcs = {",'    "NUMERIC": try_float,','    "TEXT": str,','    "IGNORE_CASE": lambda s: str(s).lower()',"  }","  key_func = key_funcs[type]","  list_cpy = list(my_list)","  return sorted(list_cpy, key=key_func, reverse=reverse)"])+"("+l+', "'+t+'", '+o+")",Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.lists_split=function(o){var l=o.getFieldValue("MODE");if("SPLIT"==l)o=(l=Blockly.Python.valueToCode(o,"INPUT",Blockly.Python.ORDER_MEMBER)||"''")+".split("+(o=Blockly.Python.valueToCode(o,"DELIM",Blockly.Python.ORDER_NONE))+")";else{if("JOIN"!=l)throw"Unknown mode: "+l;l=Blockly.Python.valueToCode(o,"INPUT",Blockly.Python.ORDER_NONE)||"[]",o=(o=Blockly.Python.valueToCode(o,"DELIM",Blockly.Python.ORDER_MEMBER)||"''")+".join("+l+")"}return[o,Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.logic={},Blockly.Python.controls_if=function(o){for(var l=0,t=Blockly.Python.valueToCode(o,"IF"+l,Blockly.Python.ORDER_NONE)||"False",n=Blockly.Python.statementToCode(o,"DO"+l)||Blockly.Python.PASS,e="if "+t+":\n"+n,l=1;l<=o.elseifCount_;l++)e+="elif "+(t=Blockly.Python.valueToCode(o,"IF"+l,Blockly.Python.ORDER_NONE)||"False")+":\n"+(n=Blockly.Python.statementToCode(o,"DO"+l)||Blockly.Python.PASS);return o.elseCount_&&(e+="else:\n"+(n=Blockly.Python.statementToCode(o,"ELSE")||Blockly.Python.PASS)),e},Blockly.Python.logic_compare=function(o){var l={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[o.getFieldValue("OP")],t=Blockly.Python.ORDER_RELATIONAL;return[(Blockly.Python.valueToCode(o,"A",t)||"0")+" "+l+" "+(o=Blockly.Python.valueToCode(o,"B",t)||"0"),t]},Blockly.Python.logic_operation=function(o){var l,t="AND"==o.getFieldValue("OP")?"and":"or",n="and"==t?Blockly.Python.ORDER_LOGICAL_AND:Blockly.Python.ORDER_LOGICAL_OR,e=Blockly.Python.valueToCode(o,"A",n);return o=Blockly.Python.valueToCode(o,"B",n),o=e||o?(l="and"==t?"True":"False",e=e||l,o||l):e="False",[e+" "+t+" "+o,n]},Blockly.Python.logic_negate=function(o){return["not "+(Blockly.Python.valueToCode(o,"BOOL",Blockly.Python.ORDER_LOGICAL_NOT)||"True"),Blockly.Python.ORDER_LOGICAL_NOT]},Blockly.Python.logic_boolean=function(o){return["TRUE"==o.getFieldValue("BOOL")?"True":"False",Blockly.Python.ORDER_ATOMIC]},Blockly.Python.logic_null=function(o){return["None",Blockly.Python.ORDER_ATOMIC]},Blockly.Python.logic_ternary=function(o){var l=Blockly.Python.valueToCode(o,"IF",Blockly.Python.ORDER_CONDITIONAL)||"False";return[(Blockly.Python.valueToCode(o,"THEN",Blockly.Python.ORDER_CONDITIONAL)||"None")+" if "+l+" else "+(o=Blockly.Python.valueToCode(o,"ELSE",Blockly.Python.ORDER_CONDITIONAL)||"None"),Blockly.Python.ORDER_CONDITIONAL]},Blockly.Python.loops={},Blockly.Python.controls_repeat_ext=function(o){var l=o.getField("TIMES")?String(parseInt(o.getFieldValue("TIMES"),10)):Blockly.Python.valueToCode(o,"TIMES",Blockly.Python.ORDER_NONE)||"0",l=Blockly.isNumber(l)?parseInt(l,10):"int("+l+")",t=Blockly.Python.statementToCode(o,"DO"),t=Blockly.Python.addLoopTrap(t,o.id)||Blockly.Python.PASS;return"for "+Blockly.Python.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE)+" in range("+l+"):\n"+t},Blockly.Python.controls_repeat=Blockly.Python.controls_repeat_ext,Blockly.Python.controls_whileUntil=function(o){var l="UNTIL"==o.getFieldValue("MODE"),t=Blockly.Python.valueToCode(o,"BOOL",l?Blockly.Python.ORDER_LOGICAL_NOT:Blockly.Python.ORDER_NONE)||"False",n=Blockly.Python.statementToCode(o,"DO");return l&&(t="not "+t),"while "+t+":\n"+(n=Blockly.Python.addLoopTrap(n,o.id)||Blockly.Python.PASS)},Blockly.Python.controls_for=function(o){function n(){return Blockly.Python.provideFunction_("upRange",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(start, stop, step):","  while start <= stop:","    yield start","    start += abs(step)"])}function e(){return Blockly.Python.provideFunction_("downRange",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(start, stop, step):","  while start >= stop:","    yield start","    start -= abs(step)"])}var l,y=Blockly.Python.variableDB_.getName(o.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),t=Blockly.Python.valueToCode(o,"FROM",Blockly.Python.ORDER_NONE)||"0",r=Blockly.Python.valueToCode(o,"TO",Blockly.Python.ORDER_NONE)||"0",c=Blockly.Python.valueToCode(o,"BY",Blockly.Python.ORDER_NONE)||"1",a=Blockly.Python.statementToCode(o,"DO"),a=Blockly.Python.addLoopTrap(a,o.id)||Blockly.Python.PASS,i="";return o=function(o,l,t){return"("+o+" <= "+l+") and "+n()+"("+o+", "+l+", "+t+") or "+e()+"("+o+", "+l+", "+t+")"},Blockly.isNumber(t)&&Blockly.isNumber(r)&&Blockly.isNumber(c)?(t=parseFloat(t),r=parseFloat(r),c=Math.abs(parseFloat(c)),0==t%1&&0==r%1&&0==c%1?(t<=r?(r++,o=0==t&&1==c?r:t+", "+r,1!=c&&(o+=", "+c)):o=t+", "+--r+", -"+c,o="range("+o+")"):(o=(t<r?n:e)(),o+="("+t+", "+r+", "+c+")")):(t=(l=function(o,l){var t;return o=Blockly.isNumber(o)?parseFloat(o):o.match(/^\w+$/)?"float("+o+")":(t=Blockly.Python.variableDB_.getDistinctName(y+l,Blockly.Variables.NAME_TYPE),i+=t+" = float("+o+")\n",t)})(t,"_start"),r=l(r,"_end"),l(c,"_inc"),o="number"==typeof t&&"number"==typeof r?(t<r?n:e)():o(t,r,c)),i+="for "+y+" in "+o+":\n"+a},Blockly.Python.controls_forEach=function(o){var l=Blockly.Python.variableDB_.getName(o.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),t=Blockly.Python.valueToCode(o,"LIST",Blockly.Python.ORDER_RELATIONAL)||"[]",n=Blockly.Python.statementToCode(o,"DO");return"for "+l+" in "+t+":\n"+(n=Blockly.Python.addLoopTrap(n,o.id)||Blockly.Python.PASS)},Blockly.Python.controls_flow_statements=function(o){switch(o.getFieldValue("FLOW")){case"BREAK":return"break\n";case"CONTINUE":return"continue\n"}throw"Unknown flow statement."},Blockly.Python.math={},Blockly.Python.addReservedWords("math,random,Number"),Blockly.Python.math_number=function(o){var l=1/0==(o=parseFloat(o.getFieldValue("NUM")))?(o='float("inf")',Blockly.Python.ORDER_FUNCTION_CALL):-1/0==o?(o='-float("inf")',Blockly.Python.ORDER_UNARY_SIGN):o<0?Blockly.Python.ORDER_UNARY_SIGN:Blockly.Python.ORDER_ATOMIC;return[o,l]},Blockly.Python.math_arithmetic=function(o){var l=(t={ADD:[" + ",Blockly.Python.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Python.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Python.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Python.ORDER_MULTIPLICATIVE],POWER:[" ** ",Blockly.Python.ORDER_EXPONENTIATION]}[o.getFieldValue("OP")])[0],t=t[1];return[(Blockly.Python.valueToCode(o,"A",t)||"0")+l+(o=Blockly.Python.valueToCode(o,"B",t)||"0"),t]},Blockly.Python.math_single=function(o){var l,t=o.getFieldValue("OP");if("NEG"==t)return["-"+(l=Blockly.Python.valueToCode(o,"NUM",Blockly.Python.ORDER_UNARY_SIGN)||"0"),Blockly.Python.ORDER_UNARY_SIGN];switch(Blockly.Python.definitions_.import_math="import math",o="SIN"==t||"COS"==t||"TAN"==t?Blockly.Python.valueToCode(o,"NUM",Blockly.Python.ORDER_MULTIPLICATIVE)||"0":Blockly.Python.valueToCode(o,"NUM",Blockly.Python.ORDER_NONE)||"0",t){case"ABS":l="math.fabs("+o+")";break;case"ROOT":l="math.sqrt("+o+")";break;case"LN":l="math.log("+o+")";break;case"LOG10":l="math.log10("+o+")";break;case"EXP":l="math.exp("+o+")";break;case"POW10":l="math.pow(10,"+o+")";break;case"ROUND":l="round("+o+")";break;case"ROUNDUP":l="math.ceil("+o+")";break;case"ROUNDDOWN":l="math.floor("+o+")";break;case"SIN":l="math.sin("+o+" / 180.0 * math.pi)";break;case"COS":l="math.cos("+o+" / 180.0 * math.pi)";break;case"TAN":l="math.tan("+o+" / 180.0 * math.pi)"}if(l)return[l,Blockly.Python.ORDER_FUNCTION_CALL];switch(t){case"ASIN":l="math.asin("+o+") / math.pi * 180";break;case"ACOS":l="math.acos("+o+") / math.pi * 180";break;case"ATAN":l="math.atan("+o+") / math.pi * 180";break;default:throw"Unknown math operator: "+t}return[l,Blockly.Python.ORDER_MULTIPLICATIVE]},Blockly.Python.math_constant=function(o){var l={PI:["math.pi",Blockly.Python.ORDER_MEMBER],E:["math.e",Blockly.Python.ORDER_MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",Blockly.Python.ORDER_MULTIPLICATIVE],SQRT2:["math.sqrt(2)",Blockly.Python.ORDER_MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",Blockly.Python.ORDER_MEMBER],INFINITY:["float('inf')",Blockly.Python.ORDER_ATOMIC]};return"INFINITY"!=(o=o.getFieldValue("CONSTANT"))&&(Blockly.Python.definitions_.import_math="import math"),l[o]},Blockly.Python.math_number_property=function(o){var l,t=Blockly.Python.valueToCode(o,"NUMBER_TO_CHECK",Blockly.Python.ORDER_MULTIPLICATIVE)||"0",n=o.getFieldValue("PROPERTY");if("PRIME"==n)return Blockly.Python.definitions_.import_math="import math",Blockly.Python.definitions_.from_numbers_import_Number="from numbers import Number",[Blockly.Python.provideFunction_("math_isPrime",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(n):","  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  # If n is not a number but a string, try parsing it.","  if not isinstance(n, Number):","    try:","      n = float(n)","    except:","      return False","  if n == 2 or n == 3:","    return True","  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.","  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:","    return False","  # Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for x in range(6, int(math.sqrt(n)) + 2, 6):","    if n % (x - 1) == 0 or n % (x + 1) == 0:","      return False","  return True"])+"("+t+")",Blockly.Python.ORDER_FUNCTION_CALL];switch(n){case"EVEN":l=t+" % 2 == 0";break;case"ODD":l=t+" % 2 == 1";break;case"WHOLE":l=t+" % 1 == 0";break;case"POSITIVE":l=t+" > 0";break;case"NEGATIVE":l=t+" < 0";break;case"DIVISIBLE_BY":if(!(o=Blockly.Python.valueToCode(o,"DIVISOR",Blockly.Python.ORDER_MULTIPLICATIVE))||"0"==o)return["False",Blockly.Python.ORDER_ATOMIC];l=t+" % "+o+" == 0"}return[l,Blockly.Python.ORDER_RELATIONAL]},Blockly.Python.math_change=function(o){Blockly.Python.definitions_.from_numbers_import_Number="from numbers import Number";var l=Blockly.Python.valueToCode(o,"DELTA",Blockly.Python.ORDER_ADDITIVE)||"0";return(o=Blockly.Python.variableDB_.getName(o.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE))+" = ("+o+" if isinstance("+o+", Number) else 0) + "+l+"\n"},Blockly.Python.math_round=Blockly.Python.math_single,Blockly.Python.math_trig=Blockly.Python.math_single,Blockly.Python.math_on_list=function(o){var l=o.getFieldValue("OP");switch(o=Blockly.Python.valueToCode(o,"LIST",Blockly.Python.ORDER_NONE)||"[]",l){case"SUM":l="sum("+o+")";break;case"MIN":l="min("+o+")";break;case"MAX":l="max("+o+")";break;case"AVERAGE":Blockly.Python.definitions_.from_numbers_import_Number="from numbers import Number",l=(l=Blockly.Python.provideFunction_("math_mean",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(myList):","  localList = [e for e in myList if isinstance(e, Number)]","  if not localList: return","  return float(sum(localList)) / len(localList)"]))+"("+o+")";break;case"MEDIAN":Blockly.Python.definitions_.from_numbers_import_Number="from numbers import Number",l=(l=Blockly.Python.provideFunction_("math_median",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(myList):","  localList = sorted([e for e in myList if isinstance(e, Number)])","  if not localList: return","  if len(localList) % 2 == 0:","    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0","  else:","    return localList[(len(localList) - 1) // 2]"]))+"("+o+")";break;case"MODE":l=(l=Blockly.Python.provideFunction_("math_modes",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(some_list):","  modes = []","  # Using a lists of [item, count] to keep count rather than dict",'  # to avoid "unhashable" errors when the counted item is itself a list or dict.',"  counts = []","  maxCount = 1","  for item in some_list:","    found = False","    for count in counts:","      if count[0] == item:","        count[1] += 1","        maxCount = max(maxCount, count[1])","        found = True","    if not found:","      counts.append([item, 1])","  for counted_item, item_count in counts:","    if item_count == maxCount:","      modes.append(counted_item)","  return modes"]))+"("+o+")";break;case"STD_DEV":Blockly.Python.definitions_.import_math="import math",l=(l=Blockly.Python.provideFunction_("math_standard_deviation",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(numbers):","  n = len(numbers)","  if n == 0: return","  mean = float(sum(numbers)) / n","  variance = sum((x - mean) ** 2 for x in numbers) / n","  return math.sqrt(variance)"]))+"("+o+")";break;case"RANDOM":Blockly.Python.definitions_.import_random="import random",l="random.choice("+o+")";break;default:throw"Unknown operator: "+l}return[l,Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.math_modulo=function(o){return[(Blockly.Python.valueToCode(o,"DIVIDEND",Blockly.Python.ORDER_MULTIPLICATIVE)||"0")+" % "+(o=Blockly.Python.valueToCode(o,"DIVISOR",Blockly.Python.ORDER_MULTIPLICATIVE)||"0"),Blockly.Python.ORDER_MULTIPLICATIVE]},Blockly.Python.math_constrain=function(o){return["min(max("+(Blockly.Python.valueToCode(o,"VALUE",Blockly.Python.ORDER_NONE)||"0")+", "+(Blockly.Python.valueToCode(o,"LOW",Blockly.Python.ORDER_NONE)||"0")+"), "+(o=Blockly.Python.valueToCode(o,"HIGH",Blockly.Python.ORDER_NONE)||"float('inf')")+")",Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.math_random_int=function(o){return Blockly.Python.definitions_.import_random="import random",["random.randint("+(Blockly.Python.valueToCode(o,"FROM",Blockly.Python.ORDER_NONE)||"0")+", "+(o=Blockly.Python.valueToCode(o,"TO",Blockly.Python.ORDER_NONE)||"0")+")",Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.math_random_float=function(o){return Blockly.Python.definitions_.import_random="import random",["random.random()",Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.procedures={},Blockly.Python.procedures_defreturn=function(o){for(var l=(n=o.workspace.variableList).length-1;0<=l;l--){var t=n[l];-1==o.arguments_.indexOf(t)?n[l]=Blockly.Python.variableDB_.getName(t,Blockly.Variables.NAME_TYPE):n.splice(l,1)}var n=n.length?"  global "+n.join(", ")+"\n":"",t=Blockly.Python.variableDB_.getName(o.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),e=Blockly.Python.statementToCode(o,"STACK");Blockly.Python.STATEMENT_PREFIX&&(e=Blockly.Python.prefixLines(Blockly.Python.STATEMENT_PREFIX.replace(/%1/g,"'"+o.id+"'"),Blockly.Python.INDENT)+e),Blockly.Python.INFINITE_LOOP_TRAP&&(e=Blockly.Python.INFINITE_LOOP_TRAP.replace(/%1/g,'"'+o.id+'"')+e);var y=Blockly.Python.valueToCode(o,"RETURN",Blockly.Python.ORDER_NONE)||"";y?y="  return "+y+"\n":e=e||Blockly.Python.PASS;for(var r=[],l=0;l<o.arguments_.length;l++)r[l]=Blockly.Python.variableDB_.getName(o.arguments_[l],Blockly.Variables.NAME_TYPE);return n="def "+t+"("+r.join(", ")+"):\n"+n+e+y,n=Blockly.Python.scrub_(o,n),Blockly.Python.definitions_["%"+t]=n,null},Blockly.Python.procedures_defnoreturn=Blockly.Python.procedures_defreturn,Blockly.Python.procedures_callreturn=function(o){for(var l=Blockly.Python.variableDB_.getName(o.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),t=[],n=0;n<o.arguments_.length;n++)t[n]=Blockly.Python.valueToCode(o,"ARG"+n,Blockly.Python.ORDER_NONE)||"None";return[l+"("+t.join(", ")+")",Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.procedures_callnoreturn=function(o){for(var l=Blockly.Python.variableDB_.getName(o.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),t=[],n=0;n<o.arguments_.length;n++)t[n]=Blockly.Python.valueToCode(o,"ARG"+n,Blockly.Python.ORDER_NONE)||"None";return l+"("+t.join(", ")+")\n"},Blockly.Python.procedures_ifreturn=function(o){var l="if "+(Blockly.Python.valueToCode(o,"CONDITION",Blockly.Python.ORDER_NONE)||"False")+":\n";return o.hasReturnValue_?l+="  return "+(o=Blockly.Python.valueToCode(o,"VALUE",Blockly.Python.ORDER_NONE)||"None")+"\n":l+="  return\n",l},Blockly.Python.texts={},Blockly.Python.text=function(o){return[Blockly.Python.quote_(o.getFieldValue("TEXT")),Blockly.Python.ORDER_ATOMIC]},Blockly.Python.text_join=function(o){switch(o.itemCount_){case 0:return["''",Blockly.Python.ORDER_ATOMIC];case 1:return["str("+(Blockly.Python.valueToCode(o,"ADD0",Blockly.Python.ORDER_NONE)||"''")+")",Blockly.Python.ORDER_FUNCTION_CALL];case 2:return["str("+(l=Blockly.Python.valueToCode(o,"ADD0",Blockly.Python.ORDER_NONE)||"''")+") + str("+(o=Blockly.Python.valueToCode(o,"ADD1",Blockly.Python.ORDER_NONE)||"''")+")",Blockly.Python.ORDER_ADDITIVE];default:for(var l=[],t=0;t<o.itemCount_;t++)l[t]=Blockly.Python.valueToCode(o,"ADD"+t,Blockly.Python.ORDER_NONE)||"''";return[o="''.join([str("+(o=Blockly.Python.variableDB_.getDistinctName("x",Blockly.Variables.NAME_TYPE))+") for "+o+" in ["+l.join(", ")+"]])",Blockly.Python.ORDER_FUNCTION_CALL]}},Blockly.Python.text_append=function(o){var l=Blockly.Python.variableDB_.getName(o.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);return l+" = str("+l+") + str("+(o=Blockly.Python.valueToCode(o,"TEXT",Blockly.Python.ORDER_NONE)||"''")+")\n"},Blockly.Python.text_length=function(o){return["len("+(Blockly.Python.valueToCode(o,"VALUE",Blockly.Python.ORDER_NONE)||"''")+")",Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.text_isEmpty=function(o){return["not len("+(Blockly.Python.valueToCode(o,"VALUE",Blockly.Python.ORDER_NONE)||"''")+")",Blockly.Python.ORDER_LOGICAL_NOT]},Blockly.Python.text_indexOf=function(o){var l="FIRST"==o.getFieldValue("END")?"find":"rfind",t=Blockly.Python.valueToCode(o,"FIND",Blockly.Python.ORDER_NONE)||"''";return o=(Blockly.Python.valueToCode(o,"VALUE",Blockly.Python.ORDER_MEMBER)||"''")+"."+l+"("+t+")",Blockly.Python.ONE_BASED_INDEXING?[o+" + 1",Blockly.Python.ORDER_ADDITIVE]:[o,Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.text_charAt=function(o){var l=o.getFieldValue("WHERE")||"FROM_START",t=Blockly.Python.valueToCode(o,"VALUE",Blockly.Python.ORDER_MEMBER)||"''";switch(l){case"FIRST":return[t+"[0]",Blockly.Python.ORDER_MEMBER];case"LAST":return[t+"[-1]",Blockly.Python.ORDER_MEMBER];case"FROM_START":return[t+"["+(o=Blockly.Python.getAdjustedInt(o,"AT"))+"]",Blockly.Python.ORDER_MEMBER];case"FROM_END":return[t+"["+(o=Blockly.Python.getAdjustedInt(o,"AT",1,!0))+"]",Blockly.Python.ORDER_MEMBER];case"RANDOM":return Blockly.Python.definitions_.import_random="import random",[Blockly.Python.provideFunction_("text_random_letter",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(text):","  x = int(random.random() * len(text))","  return text[x];"])+"("+t+")",Blockly.Python.ORDER_FUNCTION_CALL]}throw"Unhandled option (text_charAt)."},Blockly.Python.text_getSubstring=function(o){var l=o.getFieldValue("WHERE1"),t=o.getFieldValue("WHERE2"),n=Blockly.Python.valueToCode(o,"STRING",Blockly.Python.ORDER_MEMBER)||"''";switch(l){case"FROM_START":"0"==(l=Blockly.Python.getAdjustedInt(o,"AT1"))&&(l="");break;case"FROM_END":l=Blockly.Python.getAdjustedInt(o,"AT1",1,!0);break;case"FIRST":l="";break;default:throw"Unhandled option (text_getSubstring)"}switch(t){case"FROM_START":o=Blockly.Python.getAdjustedInt(o,"AT2",1);break;case"FROM_END":o=Blockly.Python.getAdjustedInt(o,"AT2",0,!0),Blockly.isNumber(String(o))?"0"==o&&(o=""):(Blockly.Python.definitions_.import_sys="import sys",o+=" or sys.maxsize");break;case"LAST":o="";break;default:throw"Unhandled option (text_getSubstring)"}return[n+"["+l+" : "+o+"]",Blockly.Python.ORDER_MEMBER]},Blockly.Python.text_changeCase=function(o){var l={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[o.getFieldValue("CASE")];return[(Blockly.Python.valueToCode(o,"TEXT",Blockly.Python.ORDER_MEMBER)||"''")+l,Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.text_trim=function(o){var l={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[o.getFieldValue("MODE")];return[(Blockly.Python.valueToCode(o,"TEXT",Blockly.Python.ORDER_MEMBER)||"''")+l,Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.text_print=function(o){return"print("+(Blockly.Python.valueToCode(o,"TEXT",Blockly.Python.ORDER_NONE)||"''")+")\n"},Blockly.Python.text_prompt_ext=function(o){var l=(l=Blockly.Python.provideFunction_("text_prompt",["def "+Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+"(msg):","  try:","    return raw_input(msg)","  except NameError:","    return input(msg)"]))+"("+(o.getField("TEXT")?Blockly.Python.quote_(o.getFieldValue("TEXT")):Blockly.Python.valueToCode(o,"TEXT",Blockly.Python.ORDER_NONE)||"''")+")";return"NUMBER"==o.getFieldValue("TYPE")&&(l="float("+l+")"),[l,Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.text_prompt=Blockly.Python.text_prompt_ext,Blockly.Python.variables={},Blockly.Python.variables_get=function(o){return[Blockly.Python.variableDB_.getName(o.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.Python.ORDER_ATOMIC]},Blockly.Python.variables_set=function(o){var l=Blockly.Python.valueToCode(o,"VALUE",Blockly.Python.ORDER_NONE)||"0";return Blockly.Python.variableDB_.getName(o.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+l+"\n"};