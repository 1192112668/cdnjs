var _slicedToArray=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var e=[],s=!0,n=!1,a=void 0;try{for(var o,r=t[Symbol.iterator]();!(s=(o=r.next()).done)&&(e.push(o.value),!i||e.length!==i);s=!0);}catch(t){n=!0,a=t}finally{try{!s&&r.return&&r.return()}finally{if(n)throw a}}return e}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function s(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}}();function _possibleConstructorReturn(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function _inherits(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var Emitter=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"on",value:function(t,i){this.listeners=this.listeners||{},this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(i)}},{key:"off",value:function(t,i){this.listeners=this.listeners||{},t in this.listeners!=0&&this.listeners[t].splice(this.listeners[t].indexOf(i),1)}},{key:"emit",value:function(t){if(this.listeners=this.listeners||{},t in this.listeners!=0)for(var i=0;i<this.listeners[t].length;i++)this.listeners[t][i].apply(this,[].slice.call(arguments,1))}}]),t}(),SlideShow=function(){function i(t){_classCallCheck(this,i),this.instance=t,this.running=!1,this.config=this.instance.config.slideshow}return _createClass(i,[{key:"start",value:function(){var t=this;this.running||(this.running=!0,this.instance.slideIndex=this.instance.index,this.instance.interval=setInterval(function(){t.instance.config.onBeforeStart.call(t.instance,t.instance.slideIndex),setTimeout(function(){t.instance.config.infinite&&t.instance._overScroll(!0),t.instance.index<t.instance.pages.length-1?t.instance.slideIndex++:t.instance.slideIndex=0,t.instance.scrollToIndex(t.instance.slideIndex)},t.config.delay||0)},this.config.interval))}},{key:"stop",value:function(){this.running&&(clearInterval(this.instance.interval),this.instance.slideInterval=!1,this.running=!1)}}]),i}(),Pageable=function(){function l(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,l);var e,s=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));if(void 0===t)return e=console.error("Pageable:","No container defined."),_possibleConstructorReturn(s,e);var n,a,o,r={pips:!0,animation:300,delay:0,throttle:50,orientation:"vertical",easing:function(t,i,e,s,n){return-e*(t/=s)*(t-2)+i},onInit:function(){},onUpdate:function(){},onBeforeStart:function(){},onStart:function(){},onScroll:function(){},onFinish:function(){},swipeThreshold:50,freeScroll:!1,slideshow:!1,infinite:!1,events:{wheel:!0,mouse:!0,touch:!0}};return s.container="string"==typeof t?document.querySelector(t):t,s.container?(s.config=Object.assign({},r,i),s.events=Object.assign({},r.events,i.events),s.config.anchors&&Array.isArray(s.config.anchors)&&(o=document.createDocumentFragment(),s.config.anchors.forEach(function(t){var i=document.createElement("div");i.dataset.anchor=t,o.appendChild(i)}),s.container.appendChild(o)),s.pages=s.container.querySelectorAll("[data-anchor]"),s.pages.length?(s.horizontal="horizontal"===s.config.orientation,s.anchors=[],s.pages.forEach(function(t,i){var e=t.dataset.anchor.replace(/\s+/,"-").toLowerCase();t.id!==e&&(t.id=e),s.anchors.push("#"+e),t.classList.add("pg-page"),t.classList.toggle("pg-active",0==i)}),s.axis=s.horizontal?"x":"y",s.mouseAxis={x:"pageX",y:"pageY"},s.scrollAxis={x:"scrollLeft",y:"scrollTop"},s.size={x:"width",y:"height"},s.bar=s._getScrollBarWidth(),s.index=0,s.slideIndex=0,s.oldIndex=0,s.down=!1,s.initialised=!1,s.touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,s.init(),s):(a=console.error("Pageable:","No child nodes with the [data-anchor] attribute could be found."),_possibleConstructorReturn(s,a))):(n=console.error("Pageable:","The container could not be found."),_possibleConstructorReturn(s,n))}return _inherits(l,Emitter),_createClass(l,[{key:"init",value:function(){if(!this.initialised&&!this.container.pageable){var t=this.config;this.wrapper=document.createElement("div"),this.container.parentNode.insertBefore(this.wrapper,this.container),this.wrapper.appendChild(this.container),this.wrapper.classList.add("pg-wrapper","pg-"+t.orientation),this.wrapper.classList.add("pg-wrapper"),this.container.classList.add("pg-container"),document.body.style.margin=0,document.body.style.overflow="hidden",this.container.style.display="inline-block";for(var i=["Prev","Next"],e=0;e<i.length;e++){var s="nav"+i[e]+"El";t[s]&&("string"==typeof t[s]?this[s]=document.querySelector(t[s]):t[s]instanceof Element&&(this[s]=t[s]),this[s]&&this[s].classList.add("pg-nav"))}if(t.pips){var n=document.createElement("nav"),a=document.createElement("ul");n.classList.add("pg-pips");var o=!0,r=!1,l=void 0;try{for(var h,c=this.pages.entries()[Symbol.iterator]();!(o=(h=c.next()).done);o=!0){var d=_slicedToArray(h.value,2),u=d[0],f=d[1],g=document.createElement("li"),p=document.createElement("a"),v=document.createElement("span");p.href="#"+f.id,0==u&&p.classList.add("active"),p.appendChild(v),g.appendChild(p),a.appendChild(g)}}catch(t){r=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(r)throw l}}n.appendChild(a),this.wrapper.appendChild(n),this.pips=Array.from(a.children)}this.pageCount=this.pages.length,this.lastIndex=this.pageCount-1,t.infinite&&this._toggleInfinite(),this.bind(),this.update(),this._load();var w=this._getData();this.config.onInit.call(this,w),this.emit("init",w),this.initialised=!0,this.container.pageable=this,t.slideshow&&"function"==typeof SlideShow&&(this.slider=new SlideShow(this),this.slider.start())}}},{key:"bind",value:function(){var t,i,e,s,n=this,a=arguments;this.callbacks={wheel:this._wheel.bind(this),update:(t=this.update.bind(this),i=this.config.throttle,s=void 0,function(){if(e=e||n,!s)return t.apply(e,a),s=!0,setTimeout(function(){s=!1},i)}),load:this._load.bind(this),start:this._start.bind(this),drag:this._drag.bind(this),stop:this._stop.bind(this),click:this._click.bind(this),prev:this.prev.bind(this),next:this.next.bind(this)},this.wrapper.addEventListener("wheel",this.callbacks.wheel,!1),window.addEventListener("resize",this.callbacks.update,!1),this.wrapper.addEventListener(this.touch?"touchstart":"mousedown",this.callbacks.start,!1),window.addEventListener(this.touch?"touchmove":"mousemove",this.callbacks.drag,!1),window.addEventListener(this.touch?"touchend":"mouseup",this.callbacks.stop,!1),this.navPrevEl&&(this.navPrevEl.addEventListener("click",this.callbacks.prev,!1),this.navNextEl&&this.navNextEl.addEventListener("click",this.callbacks.next,!1)),document.addEventListener("click",this.callbacks.click,!1)}},{key:"unbind",value:function(){this.wrapper.removeEventListener("wheel",this.callbacks.wheel),window.removeEventListener("resize",this.callbacks.update),this.wrapper.removeEventListener(this.touch?"touchstart":"mousedown",this.callbacks.start),window.addEventListener(this.touch?"touchmove":"mousemove",this.callbacks.drag),window.removeEventListener(this.touch?"touchend":"mouseup",this.callbacks.stop),this.navPrevEl&&this.navPrevEl.removeEventListener("click",this.callbacks.prev,!1),this.navNextEl&&this.navNextEl.removeEventListener("click",this.callbacks.next,!1),document.removeEventListener("click",this.callbacks.click)}},{key:"scrollToPage",value:function(t){this.scrollToIndex(t-1)}},{key:"scrollToAnchor",value:function(t){this.scrollToIndex(this.anchors.indexOf(t))}},{key:"scrollToIndex",value:function(t){var i;!this.scrolling&&0<=t&&t<=this.pages.length-1&&(i=this.index,this.index=t,this.oldIndex=i,this._scrollBy(this._getScrollAmount(i)))}},{key:"next",value:function(){var t;!this.config.infinite||(t=this.index)===this.lastIndex&&(t++,this._scrollBy(-this.data.window[this.size[this.axis]],t)),this.scrollToIndex(this.index+1)}},{key:"prev",value:function(){var t;!this.config.infinite||0===(t=this.index)&&(t--,this._scrollBy(this.data.window[this.size[this.axis]],t)),this.scrollToIndex(this.index-1)}},{key:"update",value:function(){var e=this;clearTimeout(this.timer),this.data={window:{width:window.innerWidth,height:window.innerHeight},container:{height:this.wrapper.scrollHeight,width:this.wrapper.scrollWidth}};var s=this.size[this.axis],n=this.horizontal?this.size.y:this.size.x;this.wrapper.style["overflow-"+this.axis]="scroll",this.wrapper.style[s]=this.data.window[s]+"px",this.wrapper.style[n]=this.data.window[n]+this.bar+"px";var t=this.config.infinite?this.pages.length+2:this.pages.length,i=this.config.infinite?this.data.window[s]:0;if(this.container.style[s]=t*this.data.window[s]+"px",this.wrapper.style["padding-"+(this.horizontal?"bottom":"right")]=this.bar+"px",this.wrapper[this.scrollAxis[this.axis]]=this.index*this.data.window[s]+i,this.scrollSize=t*this.data.window[s]-this.data.window[s],this.scrollPosition=this.data.window[s]*this.index+i,this.pages.forEach(function(t,i){e.horizontal&&(t.style.float="left"),t.style[s]=e.data.window[s]+"px",t.style[n]=e.data.window[n]+"px"}),this.config.infinite){var a=!0,o=!1,r=void 0;try{for(var l,h=this.clones[Symbol.iterator]();!(a=(l=h.next()).done);a=!0){var c=l.value;this.horizontal&&(c.style.float="left"),c.style[s]=this.data.window[s]+"px",c.style[n]=this.data.window[n]+"px"}}catch(e){o=!0,r=e}finally{try{!a&&h.return&&h.return()}finally{if(o)throw r}}}this.config.onUpdate.call(this,this._getData()),this.emit("update",this._getData())}},{key:"orientate",value:function(t){switch(t){case"vertical":this.horizontal=!1,this.axis="y",this.container.style.width="";break;case"horizontal":this.horizontal=!0,this.axis="x",this.container.style.height="";break;default:return!1}this.wrapper.classList.toggle("pg-vertical",!this.horizontal),this.wrapper.classList.toggle("pg-horizontal",this.horizontal),this.config.orientation=t,this.update()}},{key:"slideshow",value:function(){return this.slider}},{key:"destroy",value:function(){if(this.initialised){this.emit("destroy"),this.unbind(),document.body.style.margin="",document.body.style.overflow="",this.container.style.display="",this.container.style.height="",this.container.style.width="",this.container.classList.remove("pg-container"),this.wrapper.parentNode.replaceChild(this.container,this.wrapper);var t=!0,i=!1,e=void 0;try{for(var s,n=this.pages[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var a=s.value;a.style.height="",a.style.width="",a.style.float="",a.classList.remove("pg-page"),a.classList.remove("pg-active")}}catch(t){i=!0,e=t}finally{try{!t&&n.return&&n.return()}finally{if(i)throw e}}for(var o=["Prev","Next"],r=0;r<o.length;r++){var l="nav"+o[r]+"El";this[l]&&(this[l].classList.remove("active"),this[l].classList.remove("pg-nav"))}this.config.infinite&&this._toggleInfinite(!0),this.config.slideshow&&(this.slider.stop(),this.slider=!1),this.initialised=!1,delete this.container.pageable}}},{key:"_click",value:function(t){var i;!t.target.closest||(i=t.target.closest("a"))&&this.anchors.includes(i.hash)&&(t.preventDefault(),this.scrollToAnchor(i.hash))}},{key:"_preventDefault",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"_start",value:function(t){var i=this._getEvent(t);return!this.scrolling&&!this.dragging&&("touchstart"!==t.type||this.events.touch?!!("mousedown"!==t.type||this.events.mouse&&0===t.button)&&!!i.target.closest("[data-anchor]")&&(this._preventDefault(t),this.dragging=this.config.freeScroll,this.config.slideshow&&this.slider.stop(),this.down={x:i.clientX,y:i.clientY},this.startIndex=this.index,void this.config.onBeforeStart.call(this,this.index)):(i.target.closest("a")||this._preventDefault(t),!1))}},{key:"_drag",value:function(t){var i,e,s;this.config.freeScroll&&this.dragging&&!this.scrolling&&(i=this._getEvent(t),e=this._limitDrag(i),s=this._getData(),this.container.style.transform=this.horizontal?"translate3d("+e+"px, 0, 0)":"translate3d(0, "+e+"px, 0)",s.scrolled-=e,this.config.onScroll.call(this,s,"drag"),this.emit("scroll",s))}},{key:"_stop",value:function(t){function i(){return s.index<s.pages.length-1&&s.index++}function e(){return 0<s.index&&s.index--}var s=this,n=this._getEvent(t);this.oldIndex=this.index;var a,o,r=Math.abs(n[this.mouseAxis[this.axis]]-this.down[this.axis])>=this.config.swipeThreshold,l=this.down&&r;if(this.config.slideshow&&this.slider.start(),this.dragging&&!this.scrolling){var h=this._limitDrag(n);return this.dragging=h,l&&(this.config.infinite&&this._overScroll(h<0,h),(0<h?e:i)()),this._scrollBy(this._getScrollAmount(this.oldIndex)-h),void(this.down=!1)}this.down&&!this.scrolling&&(a=n[this.mouseAxis[this.axis]]<this.down[this.axis],o=n[this.mouseAxis[this.axis]]>this.down[this.axis],l&&(this.config.infinite&&this._overScroll(a),a?i():o&&e()),this.startIndex===this.index?this.config.onFinish.call(this,this._getData()):this._scrollBy(this._getScrollAmount(this.oldIndex)),this.down=!1)}},{key:"_wheel",value:function(t){var i,e,s;t.preventDefault(),this.events.wheel&&!this.scrolling&&(i=this.index,e=this.index,s=0<t.deltaY,this.config.infinite&&this._overScroll(s),s?this.index<this.pages.length-1&&i++:0<this.index&&i--,i!==e&&(this.oldIndex=e,this.scrollToIndex(i)))}},{key:"_load",value:function(t){var i,e,s,n=this,a=location.hash;!a||-1<(i=this.anchors.indexOf(a))&&(e=this.config.infinite?1:0,this.scrollPosition=this.data.window[this.size[this.axis]]*(i+e),s=this._getData(),this.index=i,this.slideIndex=i,this.pages.forEach(function(t,i){t.classList.toggle("pg-active",i===n.index)}),this._setNavs(),this._setPips(),this.config.onScroll.call(this,s),this.config.onFinish.call(this,s),this.emit("scroll",s)),this.update()}},{key:"_getEvent",value:function(t){return this.touch?"touchend"===t.type?t.changedTouches[0]:t.touches[0]:t}},{key:"_getData",value:function(){return{index:this.index,scrolled:this.config.infinite?this.scrollPosition-this.data.window[this.size[this.axis]]:this.scrollPosition,max:this.config.infinite?this.scrollSize-2*this.data.window[this.size[this.axis]]:this.scrollSize}}},{key:"_overScroll",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=this.index;e===this.lastIndex&&t?(e++,this._scrollBy(-this.data.window[this.size[this.axis]]-i,e)):0!==e||t||(e--,this._scrollBy(this.data.window[this.size[this.axis]]-i,e))}},{key:"_scrollBy",value:function(l,h){var c=this;if(this.scrolling)return!1;this.scrolling=!0,this.config.onBeforeStart.call(this,this.oldIndex),this.emit("scroll.before",this._getData()),this.config.slideshow&&this.slider.stop(),this.timer=setTimeout(function(){var o=Date.now(),r=c._getScrollOffset();c.config.onStart.call(c,c.pages[c.index].id),c.emit("scroll.start",c._getData()),c.frame=requestAnimationFrame(function t(){var i=Date.now()-o;if(i>c.config.animation){cancelAnimationFrame(c.frame),c.container.style.transform="",c.frame=!1,c.scrolling=!1,c.dragging=!1,c.config.slideshow&&c.slider.start(),c.config.infinite&&(h===c.pageCount?c.index=0:-1===h&&(c.index=c.lastIndex));var e=c._getData();return window.location.hash=c.pages[c.index].id,c.pages.forEach(function(t,i){t.classList.toggle("pg-active",i===c.index)}),c.slideIndex=c.index,c._setPips(),c._setNavs(),c.config.onFinish.call(c,e),c.emit("scroll.end",e),!1}var s=c.dragging?c.dragging:0,n=c.config.easing(i,s,l,c.config.animation);c.container.style.transform=c.horizontal?"translate3d("+n+"px, 0, 0)":"translate3d(0, "+n+"px, 0)",c.scrollPosition=r[c.axis]-n;var a=c._getData();c.config.infinite&&(h===c.pageCount?a.scrolled=0:-1===h&&(a.scrolled=a.max)),c.config.onScroll.call(c,a),c.emit("scroll",a),c.frame=requestAnimationFrame(t)})},this.dragging?0:this.config.delay)}},{key:"_getScrollOffset",value:function(){return{x:this.wrapper.scrollLeft,y:this.wrapper.scrollTop}}},{key:"_getScrollAmount",value:function(t,i){void 0===i&&(i=this.index);var e=this.data.window[this.size[this.axis]];return e*t-e*i}},{key:"_getScrollBarWidth",value:function(){var t,i=document.body,e=document.createElement("div");return e.style.cssText="width: 100; height: 100; overflow: scroll; position: absolute; top: -9999;",i.appendChild(e),t=e.offsetWidth-e.clientWidth,i.removeChild(e),t}},{key:"_toggleInfinite",value:function(t){if(t&&this.config.infinite){var i=!0,e=!1,s=void 0;try{for(var n,a=this.clones[Symbol.iterator]();!(i=(n=a.next()).done);i=!0){var o=n.value;this.container.removeChild(o)}}catch(t){e=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(e)throw s}}this.config.infinite=!1}else{var r,l;this.config.infinite||(this.config.infinite=!0,r=this.pages[0].cloneNode(!0),l=this.pages[this.lastIndex].cloneNode(!0),r.id=r.id+"-clone",l.id=l.id+"-clone",r.classList.add("pg-clone"),l.classList.add("pg-clone"),r.classList.remove("pg-active"),l.classList.remove("pg-active"),this.clones=[r,l],this.container.insertBefore(l,this.pages[0]),this.container.appendChild(r))}this.update()}},{key:"_limitDrag",value:function(t){var i=t[this.mouseAxis[this.axis]]-this.down[this.axis];return this.config.infinite||(0===this.index&&0<i||this.index===this.pages.length-1&&i<0)&&(i/=10),i}},{key:"_setNavs",value:function(){this.navPrevEl&&this.navPrevEl.classList.toggle("active",this.config.infinite||0<this.index),this.navNextEl&&this.navNextEl.classList.toggle("active",this.config.infinite||this.index<this.pages.length-1)}},{key:"_setPips",value:function(e){this.config.pips&&(void 0===e&&(e=this.index),this.pips.forEach(function(t,i){t.firstElementChild.classList.toggle("active",i==e)}))}}]),l}();