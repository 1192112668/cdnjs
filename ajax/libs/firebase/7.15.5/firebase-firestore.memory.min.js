!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}(this,function(Vl){"use strict";try{(function(){Vl=Vl&&Object.prototype.hasOwnProperty.call(Vl,"default")?Vl.default:Vl;var t,p,e,i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function n(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function f(t,s,u,a){return new(u=u||Promise)(function(n,e){function i(t){try{o(a.next(t))}catch(t){e(t)}}function r(t){try{o(a.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(i,r)}o((a=a.apply(t,s||[])).next())})}function d(n,i){var r,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,o=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=i.call(n,u)}catch(t){e=[6,t],o=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,r++)i[r]=o[s];return i}function s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,r++)i[r]=o[s];return i}function r(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var r=(new Date).toISOString(),o=a[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,s(["["+r+"]  "+t.name+":"],n))}}(e=p=p||{})[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT";var o={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},u=p.INFO,a=((t={})[p.DEBUG]="log",t[p.VERBOSE]="log",t[p.INFO]="info",t[p.WARN]="warn",t[p.ERROR]="error",t),h=(Object.defineProperty(c.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in p))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!0,configurable:!0}),c.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?o[t]:t},Object.defineProperty(c.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),c.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,p.DEBUG],t)),this._logHandler.apply(this,s([this,p.DEBUG],t))},c.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,p.VERBOSE],t)),this._logHandler.apply(this,s([this,p.VERBOSE],t))},c.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,p.INFO],t)),this._logHandler.apply(this,s([this,p.INFO],t))},c.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,p.WARN],t)),this._logHandler.apply(this,s([this,p.WARN],t))},c.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,p.ERROR],t)),this._logHandler.apply(this,s([this,p.ERROR],t))},c);function c(t){this.name=t,this._logLevel=u,this._logHandler=r,this._userLogHandler=null}function v(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var l,g=(n(m,l=Error),m);function m(t,e){var n=l.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,m.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,w.prototype.create),n}var w=(b.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i,r=e[0]||{},o=this.service+"/"+t,s=this.errors[t],u=s?(i=r,s.replace(E,function(t,e){var n=i[e];return null!=n?String(n):"<"+e+"?>"})):"Error",a=this.serviceName+": "+u+" ("+o+").",h=new g(o,a),c=0,l=Object.keys(r);c<l.length;c++){var f=l[c];"_"!==f.slice(-1)&&(f in h&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),h[f]=r[f])}return h},b);function b(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var E=/\{\$([^}]+)}/g;function _(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var I,T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},A=A||{},N=T||self;function P(){}function S(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function O(t){var e=S(t);return"array"==e||"object"==e&&"number"==typeof t.length}function R(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var L="closure_uid_"+(1e9*Math.random()>>>0),D=0;function k(t,e,n){return t.call.apply(t.bind,arguments)}function U(e,n,t){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,i),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function V(t,e,n){return(V=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?k:U).apply(null,arguments)}function C(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var x=Date.now||function(){return+new Date};function M(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function q(){this.j=this.j,this.i=this.i}q.prototype.j=!1,q.prototype.da=function(){!this.j&&(this.j=!0,this.C(),0)&&(Object.prototype.hasOwnProperty.call(this,L)&&this[L]||(this[L]=++D))},q.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},j=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r="string"==typeof t?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)};function G(t){return Array.prototype.concat.apply([],arguments)}function B(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function z(t){return/^[\s\xa0]*$/.test(t)}var H,W=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function X(t,e){return-1!=t.indexOf(e)}function Q(t,e){return t<e?-1:e<t?1:0}t:{var K=N.navigator;if(K){var Y=K.userAgent;if(Y){H=Y;break t}}H=""}function $(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function J(t){var e={};for(var n in t)e[n]=t[n];return e}var Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tt(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<Z.length;o++)n=Z[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function et(t){return et[" "](t),t}et[" "]=P;var nt,it,rt=X(H,"Opera"),ot=X(H,"Trident")||X(H,"MSIE"),st=X(H,"Edge"),ut=st||ot,at=X(H,"Gecko")&&!(X(H.toLowerCase(),"webkit")&&!X(H,"Edge"))&&!(X(H,"Trident")||X(H,"MSIE"))&&!X(H,"Edge"),ht=X(H.toLowerCase(),"webkit")&&!X(H,"Edge");function ct(){var t=N.document;return t?t.documentMode:void 0}t:{var lt="",ft=(it=H,at?/rv:([^\);]+)(\)|;)/.exec(it):st?/Edge\/([\d\.]+)/.exec(it):ot?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(it):ht?/WebKit\/(\S+)/.exec(it):rt?/(?:Version)[ \/]?(\S+)/.exec(it):void 0);if(ft&&(lt=ft?ft[1]:""),ot){var pt=ct();if(null!=pt&&pt>parseFloat(lt)){nt=String(pt);break t}}nt=lt}var dt={};function yt(u){return t=u,e=function(){for(var t=0,e=W(String(nt)).split("."),n=W(String(u)).split("."),i=Math.max(e.length,n.length),r=0;0==t&&r<i;r++){var o=e[r]||"",s=n[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Q(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Q(0==o[2].length,0==s[2].length)||Q(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=dt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var vt=N.document&&ot&&(ct()||parseInt(nt,10))||void 0,gt=!ot||9<=Number(vt),mt=ot&&!yt("9"),wt=function(){if(!N.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{N.addEventListener("test",P,e),N.removeEventListener("test",P,e)}catch(t){}return t}();function bt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Et(t,e){if(bt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(at){t:{try{et(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:_t[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}bt.prototype.b=function(){this.defaultPrevented=!0},M(Et,bt);var _t={2:"touch",3:"pen",4:"mouse"};Et.prototype.b=function(){Et.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,mt)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var It="closure_listenable_"+(1e6*Math.random()|0),Tt=0;function At(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.aa=r,this.key=++Tt,this.V=this.X=!1}function Nt(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function Pt(t){this.src=t,this.a={},this.b=0}function St(t,e){var n,i,r,o=e.type;o in t.a&&(i=t.a[o],(n=0<=(r=F(i,e)))&&Array.prototype.splice.call(i,r,1),n&&(Nt(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Ot(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==i)return r}return-1}Pt.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ot(t,e,i,r);return-1<s?(e=t[s],n||(e.X=!1)):((e=new At(e,this.src,o,!!i,r)).X=n,t.push(e)),e};var Rt="closure_lm_"+(1e6*Math.random()|0),Lt={};function Dt(t,e,n,i,r){if(i&&i.once)return function t(e,n,i,r,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],i,r,o);return null}return i=Ft(i),e&&e[It]?e.sa(n,i,R(r)?!!r.capture:!!r,o):kt(e,n,i,!0,r,o)}(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Dt(t,e[o],n,i,r);return null}return n=Ft(n),t&&t[It]?t.ra(e,n,R(i)?!!i.capture:!!i,r):kt(t,e,n,!1,i,r)}function kt(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var s=R(r)?!!r.capture:!!r;if(s&&!gt)return null;var u,a,h=Mt(t);if(h||(t[Rt]=h=new Pt(t)),(n=h.add(e,n,i,s,o)).proxy)return n;if(u=xt,i=a=gt?function(t){return u.call(a.src,a.listener,t)}:function(t){if(!(t=u.call(a.src,a.listener,t)))return t},(n.proxy=i).src=t,i.listener=n,t.addEventListener)wt||(r=s),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Vt(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Ut(t){var e,n,i;"number"!=typeof t&&t&&!t.V&&((e=t.src)&&e[It]?St(e.c,t):(n=t.type,i=t.proxy,e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Vt(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Mt(e))?(St(n,t),0==n.b&&(n.src=null,e[Rt]=null)):Nt(t)))}function Vt(t){return t in Lt?Lt[t]:Lt[t]="on"+t}function Ct(t,e){var n=t.listener,i=t.aa||t.src;return t.X&&Ut(t),n.call(i,e)}function xt(t,e){if(t.V)return!0;if(gt)return Ct(t,new Et(e,this));if(!e)t:{e=["window","event"];for(var n=N,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}return Ct(t,e=new Et(e,this))}function Mt(t){return(t=t[Rt])instanceof Pt?t:null}var qt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ft(e){return"function"==S(e)?e:(e[qt]||(e[qt]=function(t){return e.handleEvent(t)}),e[qt])}function jt(){q.call(this),this.c=new Pt(this),(this.J=this).A=null}function Gt(t,e,n,i){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s,u,a=e[o];a&&!a.V&&a.capture==n&&(s=a.listener,u=a.aa||a.src,a.X&&St(t.c,a),r=!1!==s.call(u,i)&&r)}return r&&!i.defaultPrevented}M(jt,q),jt.prototype[It]=!0,(I=jt.prototype).addEventListener=function(t,e,n,i){Dt(this,t,e,n,i)},I.removeEventListener=function(t,e,n,i){!function t(e,n,i,r,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],i,r,o);else r=R(r)?!!r.capture:!!r,i=Ft(i),e&&e[It]?(e=e.c,(n=String(n).toString())in e.a&&-1<(i=Ot(s=e.a[n],i,r,o))&&(Nt(s[i]),Array.prototype.splice.call(s,i,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Mt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Ot(n,i,r,o)),(i=-1<e?n[e]:null)&&Ut(i))}(this,t,e,n,i)},I.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var i=t.type||t;if("string"==typeof t?t=new bt(t,n):t instanceof bt?t.target=t.target||n:(s=t,tt(t=new bt(i,n),s)),s=!0,e)for(var r=e.length-1;0<=r;r--)var o=t.a=e[r],s=Gt(o,i,!0,t)&&s;if(s=Gt(o=t.a=n,i,!0,t)&&s,s=Gt(o,i,!1,t)&&s,e)for(r=0;r<e.length;r++)s=Gt(o=t.a=e[r],i,!1,t)&&s;return s},I.C=function(){if(jt.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)Nt(n[i]);delete e.a[t],e.b--}}this.A=null},I.ra=function(t,e,n,i){return this.c.add(String(t),e,!1,n,i)},I.sa=function(t,e,n,i){return this.c.add(String(t),e,!0,n,i)};var Bt=N.JSON.stringify;function zt(){this.b=this.a=null}var Ht,Wt=(Xt.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Xt(function(){return new Qt},function(t){t.reset()},100));function Xt(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function Qt(){this.next=this.b=this.a=null}function Kt(t){N.setTimeout(function(){throw t},0)}function Yt(t,e){var n;Ht||(n=N.Promise.resolve(void 0),Ht=function(){n.then(Zt)}),$t||(Ht(),$t=!0),Jt.add(t,e)}zt.prototype.add=function(t,e){var n=Wt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Qt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var $t=!(Qt.prototype.reset=function(){this.next=this.b=this.a=null}),Jt=new zt;function Zt(){for(var t,e,n;n=e=void 0,n=null,(e=Jt).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){Kt(t)}var i=Wt;i.g(t),i.b<i.f&&(i.b++,t.next=i.a,i.a=t)}$t=!1}function te(t,e){jt.call(this),this.b=t||1,this.a=e||N,this.f=V(this.Ua,this),this.g=x()}function ee(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function ne(t,e,n){if("function"==S(t))n&&(t=V(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=V(t.handleEvent,t)}return 2147483647<Number(e)?-1:N.setTimeout(t,e||0)}function ie(t,e,n){q.call(this),this.f=null!=n?V(t,n):t,this.c=e,this.b=V(this.Pa,this),this.a=[]}function re(t){t.T=ne(t.b,t.c),t.f.apply(null,t.a)}function oe(t){q.call(this),this.b=t,this.a={}}M(te,jt),(I=te.prototype).Z=!1,I.L=null,I.Ua=function(){var t;this.Z&&(0<(t=x()-this.g)&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(ee(this),this.start())))},I.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=x())},I.C=function(){te.M.C.call(this),ee(this),delete this.a},M(ie,q),(I=ie.prototype).ba=!1,I.T=null,I.Ia=function(t){this.a=arguments,this.T?this.ba=!0:re(this)},I.C=function(){ie.M.C.call(this),this.T&&(N.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},I.Pa=function(){this.T=null,this.ba&&(this.ba=!1,re(this))},M(oe,q);var se=[];function ue(t,e,n,i){Array.isArray(n)||(n&&(se[0]=n.toString()),n=se);for(var r=0;r<n.length;r++){var o=Dt(e,n[r],i||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ae(t){$(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ut(t)},t),t.a={}}function he(){}oe.prototype.C=function(){oe.M.C.call(this),ae(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=null;function le(){return ce=ce||new jt}function fe(t){bt.call(this,"serverreachability",t)}function pe(){var t=le();t.dispatchEvent(new fe(t))}function de(t){bt.call(this,"statevent",t)}function ye(){var t=le();t.dispatchEvent(new de(t))}function ve(t){bt.call(this,"timingevent",t)}function ge(t,e){if("function"!=S(t))throw Error("Fn must not be null and must be a function");return N.setTimeout(function(){t()},e)}M(fe,bt),M(de,bt),M(ve,bt);var me={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},we={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function be(){}function Ee(t){var e;return(e=t.a)||(e=t.a={}),e}function _e(){}be.prototype.a=null;var Ie,Te={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function Ae(){bt.call(this,"d")}function Ne(){bt.call(this,"c")}function Pe(){}function Se(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new oe(this),this.N=Oe,t=ut?125:void 0,this.O=new te(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}M(Ae,bt),M(Ne,bt),M(Pe,be),Ie=new Pe;var Oe=45e3,Re={},Le={};function De(t,e,n){t.B=1,t.f=Ze(Xe(e)),t.j=n,t.F=!0,ke(t,null)}function ke(t,e){t.s=x(),Ve(t),t.A=Xe(t.f);var n=t.A,i=t.U;Array.isArray(i)||(i=[String(i)]),pn(n.b,"t",i),t.w=0,t.a=ri(t.g,t.g.w?e:null),0<t.J&&(t.D=new ie(V(t.ya,t,t.a),t.J)),ue(t.G,t.a,"readystatechange",t.Sa),e=t.m?J(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),pe()}function Ue(t,e,n){for(var i,r,o,s,u=!0;!t.l&&t.w<n.length;){var a=(r=n,s=o=void 0,o=(i=t).w,-1==(s=r.indexOf("\n",o))?Le:(o=Number(r.substring(o,s)),isNaN(o)?Re:(s+=1)+o>r.length?Le:(r=r.substr(s,o),i.w=s+o,r)));if(a==Le){4==e&&(t.c=4,ye(),u=!1);break}if(a==Re){t.c=4,ye(),u=!1;break}Fe(t,a)}4==e&&0==n.length&&(t.c=1,ye(),u=!1),t.b=t.b&&u,u||(qe(t),Me(t))}function Ve(t){t.P=x()+t.N,Ce(t,t.N)}function Ce(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=ge(V(t.Qa,t),e)}function xe(t){t.h&&(N.clearTimeout(t.h),t.h=null)}function Me(t){0==t.g.u||t.l||Zn(t.g,t)}function qe(t){xe(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,ee(t.O),ae(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function Fe(t,e){try{var n,i,r,o,s,u,a,h,c,l,f=t.g;if(0!=f.u&&(f.a==t||bn(f.b,t)))if(f.A=t.H,!t.o&&bn(f.b,t)&&3==f.u){try{var p=f.ja.a.parse(e)}catch(t){p=null}if(Array.isArray(p)&&3==p.length){var d=p;if(0==d[0]){t:if(!f.i){if(f.a){if(!(f.a.s+3e3<t.s))break t;Jn(f),f.a.cancel(),f.a=null}$n(f),ye()}}else f.ia=d[1],0<f.ia-f.G&&d[2]<37500&&f.U&&0==f.m&&!f.l&&(f.l=ge(V(f.Na,f),6e3));if(wn(f.b)<=1&&f.O){try{f.O()}catch(t){}f.O=void 0}}else ei(f,11)}else if(!t.o&&f.a!=t||Jn(f),!z(e))for(e=p=f.ja.a.parse(e),p=0;p<e.length;p++){d=e[p],f.G=d[0],d=d[1],2==f.u?"c"==d[0]?(f.B=d[1],f.R=d[2],null!=(n=d[3])&&(f.oa=n),null!=(i=d[5])&&"number"==typeof i&&0<i&&(f.D=1.5*i),r=f,(o=t.a)&&(!(s=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(u=r.b).a&&(X(s,"spdy")||X(s,"quic")||X(s,"h2"))&&(u.f=u.g,u.a=new Set,u.b&&(En(u,u.b),u.b=null)),!r.s||(a=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(r.ha=a,Je(r.v,r.s,a))),f.u=3,f.c&&f.c.na(),h=t,(r=f).ea=ii(r,r.w?r.R:null,r.P),h.o?(_n(r.b,h),c=h,(l=r.D)&&c.setTimeout(l),c.h&&(xe(c),Ve(c)),r.a=h):Yn(r),0<f.f.length&&Wn(f)):"stop"!=d[0]&&"close"!=d[0]||ei(f,7):3==f.u&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?ei(f,7):Bn(f):"noop"!=d[0]&&f.c&&f.c.ma(d),f.m=0)}pe()}catch(t){}}function je(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(O(t)||"string"==typeof t)j(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(O(t)||"string"==typeof t){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;r=(i=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(O(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t)).length;for(var o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}}function Ge(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Ge)for(n=t.K(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Be(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];ze(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){for(var r={},n=e=0;e<t.a.length;)ze(r,i=t.a[e])||(r[t.a[n++]=i]=1),e++;t.a.length=n}}function ze(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(I=Se.prototype).setTimeout=function(t){this.N=t},I.Sa=function(t){t=t.target;var e=this.D;e&&3==qn(t)?e.Ia():this.ya(t)},I.ya=function(t){try{if(t==this.a)t:{var e=qn(this.a),n=this.a.qa();this.a.S();if(!(e<3||3==e&&!ut&&!this.a.Y())){this.l||4!=e||7==n||pe(),xe(this);var i=this.a.S();this.H=i;var r=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var o,s=this.a;if((o=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(o)){var u=o;break e}}u=null}if(!u){this.b=!1,this.c=3,ye(),qe(this),Me(this);break t}this.o=!0,Fe(this,u)}this.F?(Ue(this,e,r),ut&&this.b&&3==e&&(ue(this.G,this.O,"tick",this.Ra),this.O.start())):Fe(this,r),4==e&&qe(this),this.b&&!this.l&&(4==e?Zn(this.g,this):(this.b=!1,Ve(this)))}else 400==i&&0<r.indexOf("Unknown SID")?this.c=3:this.c=0,ye(),qe(this),Me(this)}}}catch(t){}},I.Ra=function(){var t,e;this.a&&(t=qn(this.a),e=this.a.Y(),this.w<e.length&&(xe(this),Ue(this,t,e),this.b&&4!=t&&Ve(this)))},I.cancel=function(){this.l=!0,qe(this)},I.Qa=function(){this.h=null;var t=x();0<=t-this.P?(2!=this.B&&(pe(),ye()),qe(this),this.c=2,Me(this)):Ce(this,this.P-t)},(I=Ge.prototype).I=function(){Be(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},I.K=function(){return Be(this),this.a.concat()},I.get=function(t,e){return ze(this.b,t)?this.b[t]:e},I.set=function(t,e){ze(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},I.forEach=function(t,e){for(var n=this.K(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var He=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function We(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof We?(this.a=void 0!==e?e:t.a,Qe(this,t.f),this.j=t.j,Ke(this,t.c),Ye(this,t.h),this.g=t.g,e=t.b,(n=new hn).c=e.c,e.a&&(n.a=new Ge(e.a),n.b=e.b),$e(this,n),this.i=t.i):t&&(n=String(t).match(He))?(this.a=!!e,Qe(this,n[1]||"",!0),this.j=tn(n[2]||""),Ke(this,n[3]||"",!0),Ye(this,n[4]),this.g=tn(n[5]||"",!0),$e(this,n[6]||"",!0),this.i=tn(n[7]||"")):(this.a=!!e,this.b=new hn(null,this.a))}function Xe(t){return new We(t)}function Qe(t,e,n){t.f=n?tn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ke(t,e,n){t.c=n?tn(e,!0):e}function Ye(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function $e(t,e,n){var i,r;e instanceof hn?(t.b=e,i=t.b,(r=t.a)&&!i.f&&(cn(i),i.c=null,i.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ln(this,e),pn(this,n,t))},i)),i.f=r):(n||(e=en(e,un)),t.b=new hn(e,t.a))}function Je(t,e,n){t.b.set(e,n)}function Ze(t){return Je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^x()).toString(36)),t}function tn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function en(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,nn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function nn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}We.prototype.toString=function(){var t=[],e=this.f;e&&t.push(en(e,rn,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(en(e,rn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(en(n,"/"==n.charAt(0)?sn:on,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",en(n,an)),t.join("")};var rn=/[#\/\?@]/g,on=/[#\?:]/g,sn=/[#\?]/g,un=/[#\?@]/g,an=/#/g;function hn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function cn(u){u.a||(u.a=new Ge,u.b=0,u.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,i=t[e].indexOf("="),r=null;0<=i?(n=t[e].substring(0,i),r=t[e].substring(i+1)):n=t[e],o=n,s=r?decodeURIComponent(r.replace(/\+/g," ")):"",u.add(decodeURIComponent(o.replace(/\+/g," ")),s)}}var o,s}(u.c))}function ln(t,e){cn(t),e=dn(t,e),ze(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ze((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Be(t)))}function fn(t,e){return cn(t),e=dn(t,e),ze(t.a.b,e)}function pn(t,e,n){ln(t,e),0<n.length&&(t.c=null,t.a.set(dn(t,e),B(n)),t.b+=n.length)}function dn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function yn(t,e){this.b=t,this.a=e}function vn(t){this.g=t||gn,t=N.PerformanceNavigationTiming?0<(t=N.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(N.ca&&N.ca.ua&&N.ca.ua()&&N.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(I=hn.prototype).add=function(t,e){cn(this),this.c=null,t=dn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},I.forEach=function(n,i){cn(this),this.a.forEach(function(t,e){j(t,function(t){n.call(i,t,e,this)},this)},this)},I.K=function(){cn(this);for(var t=this.a.I(),e=this.a.K(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},I.I=function(t){cn(this);var e=[];if("string"==typeof t)fn(this,t)&&(e=G(e,this.a.get(dn(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},I.set=function(t,e){return cn(this),this.c=null,fn(this,t=dn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},I.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},I.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++)for(var i=e[n],r=encodeURIComponent(String(i)),i=this.I(i),o=0;o<i.length;o++){var s=r;""!==i[o]&&(s+="="+encodeURIComponent(String(i[o]))),t.push(s)}return this.c=t.join("&")};var gn=10;function mn(t){return t.b||t.a&&t.a.size>=t.f}function wn(t){return t.b?1:t.a?t.a.size:0}function bn(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function En(t,e){t.a?t.a.add(e):t.b=e}function _n(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function In(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null==t.a||0===t.a.size)return B(t.c);var i=t.c;try{for(var r=_(t.a.values()),o=r.next();!o.done;o=r.next())var s=o.value,i=i.concat(s.i)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}function Tn(){}function An(){this.a=new Tn}function Nn(t,i,e){var r=e||"";try{je(t,function(t,e){var n=t;R(t)&&(n=Bt(t)),i.push(r+e+"="+encodeURIComponent(n))})}catch(t){throw i.push(r+"type="+encodeURIComponent("_badmap")),t}}function Pn(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}vn.prototype.cancel=function(){var t,e;if(this.c=In(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=_(this.a.values()),i=n.next();!i.done;i=n.next())i.value.cancel()}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Tn.prototype.stringify=function(t){return N.JSON.stringify(t,void 0)},Tn.prototype.parse=function(t){return N.JSON.parse(t,void 0)};var Sn=N.JSON.parse;function On(t){jt.call(this),this.headers=new Ge,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=Rn,this.B=this.F=!1}M(On,jt);var Rn="",Ln=/^https?$/i,Dn=["POST","PUT"];function kn(t){return"content-type"==t.toLowerCase()}function Un(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Vn(t),xn(t)}function Vn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Cn(t){if(t.b&&void 0!==A&&(!t.s[1]||4!=qn(t)||2!=t.S()))if(t.l&&4==qn(t))ne(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==qn(t)){t.b=!1;try{var e,n,i,r,o=t.S();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(r=String(t.D).match(He)[1]||null)&&N.self&&N.self.location&&(r=(i=N.self.location.protocol).substr(0,i.length-1)),n=!Ln.test(r?r.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var u=2<qn(t)?t.a.statusText:""}catch(t){u=""}t.f=u+" ["+t.S()+"]",Vn(t)}}finally{xn(t)}}}function xn(t,e){if(t.a){Mn(t);var n=t.a,i=t.s[0]?P:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(t){}}}function Mn(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(N.clearTimeout(t.m),t.m=null)}function qn(t){return t.a?t.a.readyState:0}function Fn(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}var r;i||(r="",$(n,function(t,e){r+=e,r+=":",r+=t,r+="\r\n"}),n=r,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Je(t,e,n))}function jn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Gn(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=jn("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=jn("baseRetryDelayMs",5e3,t),this.Ga=jn("retryDelaySeedMs",1e4,t),this.Da=jn("forwardChannelMaxRetries",2,t),this.ga=jn("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new vn(t&&t.concurrentRequestLimit),this.ja=new An,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function Bn(t){var e,n;zn(t),3==t.u&&(e=t.H++,Je(n=Xe(t.v),"SID",t.B),Je(n,"RID",e),Je(n,"TYPE","terminate"),Qn(t,n),(e=new Se(t,e,void 0)).B=2,e.f=Ze(Xe(n)),n=!1,N.navigator&&N.navigator.sendBeacon&&(n=N.navigator.sendBeacon(e.f.toString(),"")),!n&&N.Image&&((new Image).src=e.f,n=!0),n||(e.a=ri(e.g,null),e.a.$(e.f)),e.s=x(),Ve(e)),ni(t)}function zn(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(N.clearTimeout(t.i),t.i=null),Jn(t),t.b.cancel(),t.g&&("number"==typeof t.g&&N.clearTimeout(t.g),t.g=null)}function Hn(t,e){t.f.push(new yn(t.Fa++,e)),3==t.u&&Wn(t)}function Wn(t){mn(t.b)||t.g||(t.g=!0,Yt(t.xa,t),t.o=0)}function Xn(t,e){var n=e?e.W:t.H++,i=Xe(t.v);Je(i,"SID",t.B),Je(i,"RID",n),Je(i,"AID",t.G),Qn(t,i),t.h&&t.j&&Fn(i,t.h,t.j),n=new Se(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=Kn(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),En(t.b,n),De(n,i,e)}function Qn(t,n){t.c&&je({},function(t,e){Je(n,e,t)})}function Kn(t,e,n){n=Math.min(t.f.length,n);var i=t.c?V(t.c.Ha,t.c,t):null;t:for(var r=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=r[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var h=r[a].b,c=r[a].a;if((h-=o)<0)o=Math.max(0,r[a].b-100),u=!1;else try{Nn(c,s,"req"+h+"_")}catch(t){i&&i(c)}}if(u){i=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,i}function Yn(t){t.a||t.i||(t.J=1,Yt(t.wa,t),t.m=0)}function $n(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=ge(V(t.wa,t),ti(t,t.m)),t.m++,1)}function Jn(t){null!=t.l&&(N.clearTimeout(t.l),t.l=null)}function Zn(t,e){var n,i=null;if(t.a==e){Jn(t),t.a=null;var r=2}else{if(!bn(t.b,e))return;i=e.i,_n(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b){1==r?(i=e.j?e.j.length:0,e=x()-e.s,n=t.o,(r=le()).dispatchEvent(new ve(r)),Wn(t)):Yn(t)}else if(3==(n=e.c)||0==n&&0<t.A||!(1==r&&function(t,e){if(!(wn(t.b)>=t.b.f-(t.g?1:0))){if(t.g)return t.f=e.i.concat(t.f),1;if(!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da)))return t.g=ge(V(t.xa,t,e),ti(t,t.o)),t.o++,1}}(t,e)||2==r&&$n(t)))switch(i&&0<i.length&&(e=t.b,e.c=e.c.concat(i)),n){case 1:ei(t,5);break;case 4:ei(t,10);break;case 3:ei(t,6);break;default:ei(t,2)}}function ti(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function ei(t,e){var n,i,r,o,s,u;2==e?(n=null,t.c&&(n=null),i=V(t.Ta,t),n||(n=new We("//www.google.com/images/cleardot.gif"),N.location&&"http"==N.location.protocol||Qe(n,"https"),Ze(n)),r=n.toString(),o=i,u=new he,N.Image?((s=new Image).onload=C(Pn,u,s,"TestLoadImage: loaded",!0,o),s.onerror=C(Pn,u,s,"TestLoadImage: error",!1,o),s.onabort=C(Pn,u,s,"TestLoadImage: abort",!1,o),s.ontimeout=C(Pn,u,s,"TestLoadImage: timeout",!1,o),N.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r):o(!1)):ye(),t.u=0,t.c&&t.c.la(e),ni(t),zn(t)}function ni(t){t.u=0,t.A=-1,t.c&&(0==In(t.b).length&&0==t.f.length||(t.b.c.length=0,B(t.f),t.f.length=0),t.c.ka())}function ii(t,e,n){var i,r,o,s,u,a,h,c=(i=n)instanceof We?Xe(i):new We(i,void 0);return""!=c.c?(e&&Ke(c,e+"."+c.c),Ye(c,c.h)):(o=(r=N.location).protocol,s=e?e+"."+r.hostname:r.hostname,u=+r.port,a=n,h=new We(null,void 0),o&&Qe(h,o),s&&Ke(h,s),u&&Ye(h,u),a&&(h.g=a),c=h),t.N&&$(t.N,function(t,e){Je(c,e,t)}),e=t.s,n=t.ha,e&&n&&Je(c,e,n),Je(c,"VER",t.oa),Qn(t,c),c}function ri(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new On(t.Ea)).F=t.w,e}function oi(){}function si(){if(ot&&!(10<=Number(vt)))throw Error("Environmental error: no available transport.")}function ui(t,e){jt.call(this),this.a=new Gn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!z(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!z(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ci(this)}function ai(t){Ae.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function hi(){Ne.call(this),this.status=1}function ci(t){this.a=t}(I=On.prototype).$=function(t,e,n,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?Ee(this.G):Ee(Ie),this.a.onreadystatechange=V(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Un(this,t)}t=n||"";var r,o=new Ge(this.headers);i&&je(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=kn,n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.K()),n=N.FormData&&t instanceof N.FormData,0<=F(Dn,e)&&!i&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Mn(this),0<this.o&&((this.B=(r=this.a,ot&&yt(9)&&"number"==typeof r.timeout&&void 0!==r.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=V(this.ta,this)):this.m=ne(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Un(this,t)}},I.ta=function(){void 0!==A&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},I.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xn(this))},I.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),xn(this,!0)),On.M.C.call(this)},I.va=function(){this.j||(this.w||this.l||this.g?Cn(this):this.Oa())},I.Oa=function(){Cn(this)},I.S=function(){try{return 2<qn(this)?this.a.status:-1}catch(t){return-1}},I.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},I.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Sn(e)}},I.qa=function(){return this.h},I.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(I=Gn.prototype).oa=8,I.u=1,I.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random()),t=this.H++;var e,n=new Se(this,t,void 0),i=this.j;if(this.F&&(i?tt(i=J(i),this.F):i=this.F),null===this.h&&(n.m=i),this.fa)t:{for(var r=e=0;r<this.f.length;r++){var o=this.f[r];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=r;break t}if(4096===e||r===this.f.length-1){e=r+1;break t}}e=1e3}else e=1e3;e=Kn(this,n,e),Je(r=Xe(this.v),"RID",t),Je(r,"CVER",22),this.s&&Je(r,"X-HTTP-Session-Id",this.s),Qn(this,r),this.h&&i&&Fn(r,this.h,i),En(this.b,n),this.fa?(Je(r,"$req",e),Je(r,"SID","null"),n.R=!0,De(n,r,null)):De(n,r,e),this.u=2}}else 3==this.u&&(t?Xn(this,t):0==this.f.length||mn(this.b)||Xn(this))},I.wa=function(){this.i=null,this.a=new Se(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=Xe(this.ea);Je(t,"RID","rpc"),Je(t,"SID",this.B),Je(t,"CI",this.U?"0":"1"),Je(t,"AID",this.G),Qn(this,t),Je(t,"TYPE","xmlhttp"),this.h&&this.j&&Fn(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=Ze(Xe(t)),e.j=null,e.F=!0,ke(e,n)},I.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,$n(this),ye())},I.Ta=function(t){ye()},(I=oi.prototype).na=function(){},I.ma=function(){},I.la=function(){},I.ka=function(){},I.Ha=function(){},si.prototype.a=function(t,e){return new ui(t,e)},M(ui,jt),(I=ui.prototype).addEventListener=function(t,e,n,i){ui.M.addEventListener.call(this,t,e,n,i)},I.removeEventListener=function(t,e,n,i){ui.M.removeEventListener.call(this,t,e,n,i)},I.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;ye(),t.P=e,t.N=n||{},t.U=t.W,t.v=ii(t,null,t.P),Wn(t)},I.close=function(){Bn(this.a)},I.La=function(t){var e;"string"==typeof t?((e={}).__data__=t,Hn(this.a,e)):this.g?((e={}).__data__=Bt(t),Hn(this.a,e)):Hn(this.a,t)},I.C=function(){this.a.c=null,delete this.f,Bn(this.a),delete this.a,ui.M.C.call(this)},M(ai,Ae),M(hi,Ne),M(ci,oi),ci.prototype.na=function(){this.a.dispatchEvent("a")},ci.prototype.ma=function(t){this.a.dispatchEvent(new ai(t))},ci.prototype.la=function(t){this.a.dispatchEvent(new hi)},ci.prototype.ka=function(){this.a.dispatchEvent("b")},si.prototype.createWebChannel=si.prototype.a,ui.prototype.send=ui.prototype.La,ui.prototype.open=ui.prototype.Ka,ui.prototype.close=ui.prototype.close,me.NO_ERROR=0,me.TIMEOUT=8,me.HTTP_ERROR=6,we.COMPLETE="complete",(_e.EventType=Te).OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",jt.prototype.listen=jt.prototype.ra,On.prototype.listenOnce=On.prototype.sa,On.prototype.getLastError=On.prototype.Ma,On.prototype.getLastErrorCode=On.prototype.qa,On.prototype.getStatus=On.prototype.S,On.prototype.getResponseJson=On.prototype.Ja,On.prototype.getResponseText=On.prototype.Y,On.prototype.send=On.prototype.$;var li={createWebChannelTransport:function(){return new si},ErrorCode:me,EventType:we,WebChannel:_e,XhrIo:On},fi=li.createWebChannelTransport,pi=li.ErrorCode,di=li.EventType,yi=li.WebChannel,vi=li.XhrIo,gi=(mi.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},mi.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},mi.prototype.setServiceProps=function(t){return this.serviceProps=t,this},mi);function mi(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var wi=Vl.SDK_VERSION,bi=new h("@firebase/firestore");function Ei(){return bi.logLevel}function _i(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];bi.logLevel<=p.DEBUG&&(e=n.map(Ti),bi.debug.apply(bi,y(["Firestore ("+wi+"): "+t],e)))}function Ii(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];bi.logLevel<=p.ERROR&&(e=n.map(Ti),bi.error.apply(bi,y(["Firestore ("+wi+"): "+t],e)))}function Ti(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Ai(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+wi+") INTERNAL ASSERTION FAILED: "+t;throw Ii(e),new Error(e)}function Ni(t){t||Ai()}function Pi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Si=(Oi.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var i=Pi(40),r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length));return n},Oi);function Oi(){}function Ri(t,e){return t<e?-1:e<t?1:0}function Li(t,n,i){return t.length===n.length&&t.every(function(t,e){return i(t,n[e])})}function Di(t,e,n,i,r){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=i,this.forceLongPolling=r}var ki=(Object.defineProperty(Ui.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),Ui.prototype.isEqual=function(t){return t instanceof Ui&&t.projectId===this.projectId&&t.database===this.database},Ui.prototype.o=function(t){return Ri(this.projectId,t.projectId)||Ri(this.database,t.database)},Ui);function Ui(t,e){this.projectId=t,this.database=e||"(default)"}function Vi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ci(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Mi,qi,Fi=(Ji.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var i=0,r=n;i<r.length;i++){var o=r[i],s=o[0],u=o[1];if(this.u(s,t))return u}},Ji.prototype.has=function(t){return void 0!==this.get(t)},Ji.prototype.set=function(t,e){var n=this.h(t),i=this.l[n];if(void 0!==i){for(var r=0;r<i.length;r++)if(this.u(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e])}else this.l[n]=[[t,e]]},Ji.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(this.u(n[i][0],t))return 1===n.length?delete this.l[e]:n.splice(i,1),!0;return!1},Ji.prototype.forEach=function(u){Ci(this.l,function(t,e){for(var n=0,i=e;n<i.length;n++){var r=i[n],o=r[0],s=r[1];u(o,s)}})},Ji.prototype._=function(){return xi(this.l)},Ji),ji={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Gi=(n($i,qi=Error),$i),Bi=(Yi.now=function(){return Yi.fromMillis(Date.now())},Yi.fromDate=function(t){return Yi.fromMillis(t.getTime())},Yi.fromMillis=function(t){var e=Math.floor(t/1e3);return new Yi(e,1e6*(t-1e3*e))},Yi.prototype.toDate=function(){return new Date(this.toMillis())},Yi.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Yi.prototype.T=function(t){return this.seconds===t.seconds?Ri(this.nanoseconds,t.nanoseconds):Ri(this.seconds,t.seconds)},Yi.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Yi.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Yi.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Yi),zi=(Ki.m=function(t){return new Ki(t)},Ki.min=function(){return new Ki(new Bi(0,0))},Ki.prototype.o=function(t){return this.timestamp.T(t.timestamp)},Ki.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Ki.prototype.I=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Ki.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Ki.prototype.R=function(){return this.timestamp},Ki),Hi=(Object.defineProperty(Qi.prototype,"length",{get:function(){return this.A},enumerable:!0,configurable:!0}),Qi.prototype.isEqual=function(t){return 0===Qi.P(this,t)},Qi.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Qi?t.forEach(function(t){e.push(t)}):e.push(t),this.V(e)},Qi.prototype.limit=function(){return this.offset+this.length},Qi.prototype.p=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},Qi.prototype.g=function(){return this.V(this.segments,this.offset,this.length-1)},Qi.prototype.v=function(){return this.segments[this.offset]},Qi.prototype.S=function(){return this.get(this.length-1)},Qi.prototype.get=function(t){return this.segments[this.offset+t]},Qi.prototype._=function(){return 0===this.length},Qi.prototype.C=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Qi.prototype.D=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Qi.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Qi.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},Qi.P=function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=t.get(i),o=e.get(i);if(r<o)return-1;if(o<r)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Qi),Wi=(n(Xi,Mi=Hi),Xi.prototype.V=function(t,e,n){return new Xi(t,e,n)},Xi.prototype.$=function(){return this.F().join("/")},Xi.prototype.toString=function(){return this.$()},Xi.N=function(t){if(0<=t.indexOf("//"))throw new Gi(ji.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new Xi(t.split("/").filter(function(t){return 0<t.length}))},Xi);function Xi(){return null!==Mi&&Mi.apply(this,arguments)||this}function Qi(t,e,n){void 0===e?e=0:e>t.length&&Ai(),void 0===n?n=t.length-e:n>t.length-e&&Ai(),this.segments=t,this.offset=e,this.A=n}function Ki(t){this.timestamp=t}function Yi(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Gi(ji.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Gi(ji.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Gi(ji.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Gi(ji.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function $i(t,e){var n=this;return(n=qi.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Ji(t,e){this.h=t,this.u=e,this.l={}}Wi.k=new Wi([]);var Zi,tr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,er=(n(nr,Zi=Hi),nr.prototype.V=function(t,e,n){return new nr(t,e,n)},nr.L=function(t){return tr.test(t)},nr.prototype.$=function(){return this.F().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),nr.L(t)||(t="`"+t+"`"),t}).join(".")},nr.prototype.toString=function(){return this.$()},nr.prototype.q=function(){return 1===this.length&&"__name__"===this.get(0)},nr.O=function(){return new nr(["__name__"])},nr.M=function(t){for(var e=[],n="",i=0,r=function(){if(0===n.length)throw new Gi(ji.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Gi(ji.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Gi(ji.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,i+=2}else"`"===s?o=!o:"."!==s||o?n+=s:r(),i++}if(r(),o)throw new Gi(ji.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new nr(e)},nr);function nr(){return null!==Zi&&Zi.apply(this,arguments)||this}er.k=new er([]);var ir=(rr.B=function(t){return new rr(Wi.N(t).p(5))},rr.prototype.U=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},rr.prototype.isEqual=function(t){return null!==t&&0===Wi.P(this.path,t.path)},rr.prototype.toString=function(){return this.path.toString()},rr.P=function(t,e){return Wi.P(t.path,e.path)},rr.W=function(t){return t.length%2==0},rr.j=function(t){return new rr(new Wi(t.slice()))},rr);function rr(t){this.path=t}function or(t){return null==t}function sr(t){return-0===t&&1/t==-1/0}ir.EMPTY=new ir(new Wi([]));var ur=(ar.fromBase64String=function(t){return new ar(atob(t))},ar.fromUint8Array=function(t){return new ar(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},ar.prototype.toBase64=function(){return t=this.G,btoa(t);var t},ar.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.G)},ar.prototype.K=function(){return 2*this.G.length},ar.prototype.o=function(t){return Ri(this.G,t.G)},ar.prototype.isEqual=function(t){return this.G===t.G},ar);function ar(t){this.G=t}function hr(t){this.count=t}ur.H=new ur("");var cr,lr,fr=(pr.prototype.J=function(t){return new pr(this.target,this.targetId,this.Y,t,this.X,this.lastLimboFreeSnapshotVersion,this.resumeToken)},pr.prototype.Z=function(t,e){return new pr(this.target,this.targetId,this.Y,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},pr.prototype.tt=function(t){return new pr(this.target,this.targetId,this.Y,this.sequenceNumber,this.X,t,this.resumeToken)},pr);function pr(t,e,n,i,r,o,s){void 0===r&&(r=zi.min()),void 0===o&&(o=zi.min()),void 0===s&&(s=ur.H),this.target=t,this.targetId=e,this.Y=n,this.sequenceNumber=i,this.X=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function dr(t){switch(t){case ji.OK:return Ai();case ji.CANCELLED:case ji.UNKNOWN:case ji.DEADLINE_EXCEEDED:case ji.RESOURCE_EXHAUSTED:case ji.INTERNAL:case ji.UNAVAILABLE:case ji.UNAUTHENTICATED:return;case ji.INVALID_ARGUMENT:case ji.NOT_FOUND:case ji.ALREADY_EXISTS:case ji.PERMISSION_DENIED:case ji.FAILED_PRECONDITION:case ji.ABORTED:case ji.OUT_OF_RANGE:case ji.UNIMPLEMENTED:case ji.DATA_LOSS:return 1;default:return Ai()}}function yr(t){if(void 0===t)return Ii("GRPC error has no .code"),ji.UNKNOWN;switch(t){case cr.OK:return ji.OK;case cr.CANCELLED:return ji.CANCELLED;case cr.UNKNOWN:return ji.UNKNOWN;case cr.DEADLINE_EXCEEDED:return ji.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return ji.RESOURCE_EXHAUSTED;case cr.INTERNAL:return ji.INTERNAL;case cr.UNAVAILABLE:return ji.UNAVAILABLE;case cr.UNAUTHENTICATED:return ji.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return ji.INVALID_ARGUMENT;case cr.NOT_FOUND:return ji.NOT_FOUND;case cr.ALREADY_EXISTS:return ji.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return ji.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return ji.FAILED_PRECONDITION;case cr.ABORTED:return ji.ABORTED;case cr.OUT_OF_RANGE:return ji.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return ji.UNIMPLEMENTED;case cr.DATA_LOSS:return ji.DATA_LOSS;default:return Ai()}}(lr=cr=cr||{})[lr.OK=0]="OK",lr[lr.CANCELLED=1]="CANCELLED",lr[lr.UNKNOWN=2]="UNKNOWN",lr[lr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lr[lr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lr[lr.NOT_FOUND=5]="NOT_FOUND",lr[lr.ALREADY_EXISTS=6]="ALREADY_EXISTS",lr[lr.PERMISSION_DENIED=7]="PERMISSION_DENIED",lr[lr.UNAUTHENTICATED=16]="UNAUTHENTICATED",lr[lr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lr[lr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lr[lr.ABORTED=10]="ABORTED",lr[lr.OUT_OF_RANGE=11]="OUT_OF_RANGE",lr[lr.UNIMPLEMENTED=12]="UNIMPLEMENTED",lr[lr.INTERNAL=13]="INTERNAL",lr[lr.UNAVAILABLE=14]="UNAVAILABLE",lr[lr.DATA_LOSS=15]="DATA_LOSS";var vr=(Er.prototype.et=function(t,e){return new Er(this.P,this.root.et(t,e,this.P).st(null,null,mr.nt,null,null))},Er.prototype.remove=function(t){return new Er(this.P,this.root.remove(t,this.P).st(null,null,mr.nt,null,null))},Er.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Er.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var i=this.P(t,n.key);if(0===i)return e+n.left.size;n=i<0?n.left:(e+=n.left.size+1,n.right)}return-1},Er.prototype._=function(){return this.root._()},Object.defineProperty(Er.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),Er.prototype.it=function(){return this.root.it()},Er.prototype.rt=function(){return this.root.rt()},Er.prototype.ot=function(t){return this.root.ot(t)},Er.prototype.forEach=function(n){this.ot(function(t,e){return n(t,e),!1})},Er.prototype.toString=function(){var n=[];return this.ot(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Er.prototype.ht=function(t){return this.root.ht(t)},Er.prototype.at=function(){return new gr(this.root,null,this.P,!1)},Er.prototype.ut=function(t){return new gr(this.root,t,this.P,!1)},Er.prototype.ct=function(){return new gr(this.root,null,this.P,!0)},Er.prototype.lt=function(t){return new gr(this.root,t,this.P,!0)},Er),gr=(br.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},br.prototype.wt=function(){return 0<this.ft.length},br.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},br),mr=(wr.prototype.st=function(t,e,n,i,r){return new wr(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)},wr.prototype._=function(){return!1},wr.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},wr.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},wr.prototype.min=function(){return this.left._()?this:this.left.min()},wr.prototype.it=function(){return this.min().key},wr.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},wr.prototype.et=function(t,e,n){var i=this,r=n(t,i.key);return(i=r<0?i.st(null,null,null,i.left.et(t,e,n),null):0===r?i.st(null,e,null,null,null):i.st(null,null,null,null,i.right.et(t,e,n))).Et()},wr.prototype.It=function(){if(this.left._())return wr.EMPTY;var t=this;return t.left.Rt()||t.left.left.Rt()||(t=t.At()),(t=t.st(null,null,null,t.left.It(),null)).Et()},wr.prototype.remove=function(t,e){var n,i=this;if(e(t,i.key)<0)i.left._()||i.left.Rt()||i.left.left.Rt()||(i=i.At()),i=i.st(null,null,null,i.left.remove(t,e),null);else{if(i.left.Rt()&&(i=i.Pt()),i.right._()||i.right.Rt()||i.right.left.Rt()||(i=i.Vt()),0===e(t,i.key)){if(i.right._())return wr.EMPTY;n=i.right.min(),i=i.st(n.key,n.value,null,null,i.right.It())}i=i.st(null,null,null,null,i.right.remove(t,e))}return i.Et()},wr.prototype.Rt=function(){return this.color},wr.prototype.Et=function(){var t=this;return t.right.Rt()&&!t.left.Rt()&&(t=t.pt()),t.left.Rt()&&t.left.left.Rt()&&(t=t.Pt()),t.left.Rt()&&t.right.Rt()&&(t=t.yt()),t},wr.prototype.At=function(){var t=this.yt();return t.right.left.Rt()&&(t=(t=(t=t.st(null,null,null,null,t.right.Pt())).pt()).yt()),t},wr.prototype.Vt=function(){var t=this.yt();return t.left.left.Rt()&&(t=(t=t.Pt()).yt()),t},wr.prototype.pt=function(){var t=this.st(null,null,wr.RED,null,this.right.left);return this.right.st(null,null,this.color,t,null)},wr.prototype.Pt=function(){var t=this.st(null,null,wr.RED,this.left.right,null);return this.left.st(null,null,this.color,null,t)},wr.prototype.yt=function(){var t=this.left.st(null,null,!this.left.color,null,null),e=this.right.st(null,null,!this.right.color,null,null);return this.st(null,null,!this.color,t,e)},wr.prototype.gt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},wr.prototype.bt=function(){if(this.Rt()&&this.left.Rt())throw Ai();if(this.right.Rt())throw Ai();var t=this.left.bt();if(t!==this.right.bt())throw Ai();return t+(this.Rt()?0:1)},wr);function wr(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:wr.RED,this.left=null!=i?i:wr.EMPTY,this.right=null!=r?r:wr.EMPTY,this.size=this.left.size+1+this.right.size}function br(t,e,n,i){this._t=i,this.ft=[];for(var r=1;!t._();)if(r=e?n(t.key,e):1,i&&(r*=-1),r<0)t=this._t?t.left:t.right;else{if(0===r){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}function Er(t,e){this.P=t,this.root=e||mr.EMPTY}function _r(){this.size=0}mr.EMPTY=null,mr.RED=!0,mr.nt=!1,mr.EMPTY=(Object.defineProperty(_r.prototype,"key",{get:function(){throw Ai()},enumerable:!0,configurable:!0}),Object.defineProperty(_r.prototype,"value",{get:function(){throw Ai()},enumerable:!0,configurable:!0}),Object.defineProperty(_r.prototype,"color",{get:function(){throw Ai()},enumerable:!0,configurable:!0}),Object.defineProperty(_r.prototype,"left",{get:function(){throw Ai()},enumerable:!0,configurable:!0}),Object.defineProperty(_r.prototype,"right",{get:function(){throw Ai()},enumerable:!0,configurable:!0}),_r.prototype.st=function(t,e,n,i,r){return this},_r.prototype.et=function(t,e,n){return new mr(t,e)},_r.prototype.remove=function(t,e){return this},_r.prototype._=function(){return!0},_r.prototype.ot=function(t){return!1},_r.prototype.ht=function(t){return!1},_r.prototype.it=function(){return null},_r.prototype.rt=function(){return null},_r.prototype.Rt=function(){return!1},_r.prototype.gt=function(){return!0},_r.prototype.bt=function(){return 0},new _r);var Ir=(Pr.prototype.has=function(t){return null!==this.data.get(t)},Pr.prototype.first=function(){return this.data.it()},Pr.prototype.last=function(){return this.data.rt()},Object.defineProperty(Pr.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),Pr.prototype.indexOf=function(t){return this.data.indexOf(t)},Pr.prototype.forEach=function(n){this.data.ot(function(t,e){return n(t),!1})},Pr.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var i=n.dt();if(0<=this.P(i.key,t[1]))return;e(i.key)}},Pr.prototype.St=function(t,e){for(var n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},Pr.prototype.Ct=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},Pr.prototype.at=function(){return new Tr(this.data.at())},Pr.prototype.ut=function(t){return new Tr(this.data.ut(t))},Pr.prototype.add=function(t){return this.st(this.data.remove(t).et(t,!0))},Pr.prototype.delete=function(t){return this.has(t)?this.st(this.data.remove(t)):this},Pr.prototype._=function(){return this.data._()},Pr.prototype.Dt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Pr.prototype.isEqual=function(t){if(!(t instanceof Pr))return!1;if(this.size!==t.size)return!1;for(var e=this.data.at(),n=t.data.at();e.wt();){var i=e.dt().key,r=n.dt().key;if(0!==this.P(i,r))return!1}return!0},Pr.prototype.F=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Pr.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Pr.prototype.st=function(t){var e=new Pr(this.P);return e.data=t,e},Pr),Tr=(Nr.prototype.dt=function(){return this.Ft.dt().key},Nr.prototype.wt=function(){return this.Ft.wt()},Nr),Ar=new vr(ir.P);function Nr(t){this.Ft=t}function Pr(t){this.P=t,this.data=new vr(this.P)}var Sr=new vr(ir.P);var Or=new vr(ir.P),Rr=new Ir(ir.P);function Lr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Rr,i=0,r=t;i<r.length;i++)var o=r[i],n=n.add(o);return n}var Dr=new Ir(Ri);function kr(t,e,n,i){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=i}function Ur(t,e){this.targetId=t,this.ee=e}function Vr(t,e,n,i){void 0===n&&(n=ur.H),void 0===i&&(i=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}var Cr=(Kr.kt=function(t){return new Kr(t.P)},Kr.prototype.has=function(t){return null!=this.$t.get(t)},Kr.prototype.get=function(t){return this.$t.get(t)},Kr.prototype.first=function(){return this.Nt.it()},Kr.prototype.last=function(){return this.Nt.rt()},Kr.prototype._=function(){return this.Nt._()},Kr.prototype.indexOf=function(t){var e=this.$t.get(t);return e?this.Nt.indexOf(e):-1},Object.defineProperty(Kr.prototype,"size",{get:function(){return this.Nt.size},enumerable:!0,configurable:!0}),Kr.prototype.forEach=function(n){this.Nt.ot(function(t,e){return n(t),!1})},Kr.prototype.add=function(t){var e=this.delete(t.key);return e.st(e.$t.et(t.key,t),e.Nt.et(t,null))},Kr.prototype.delete=function(t){var e=this.get(t);return e?this.st(this.$t.remove(t),this.Nt.remove(e)):this},Kr.prototype.isEqual=function(t){if(!(t instanceof Kr))return!1;if(this.size!==t.size)return!1;for(var e=this.Nt.at(),n=t.Nt.at();e.wt();){var i=e.dt().key,r=n.dt().key;if(!i.isEqual(r))return!1}return!0},Kr.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Kr.prototype.st=function(t,e){var n=new Kr;return n.P=this.P,n.$t=t,n.Nt=e,n},Kr),xr=(Qr.prototype.track=function(t){var e=t.doc.key,n=this.Lt.get(e);!n||0!==t.type&&3===n.type?this.Lt=this.Lt.et(e,t):3===t.type&&1!==n.type?this.Lt=this.Lt.et(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Lt=this.Lt.et(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Lt=this.Lt.et(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Lt=this.Lt.remove(e):1===t.type&&2===n.type?this.Lt=this.Lt.et(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Lt=this.Lt.et(e,{type:2,doc:t.doc}):Ai()},Qr.prototype.qt=function(){var n=[];return this.Lt.ot(function(t,e){n.push(e)}),n},Qr),Mr=(Xr.Ut=function(t,e,n,i){var r=[];return e.forEach(function(t){r.push({type:0,doc:t})}),new Xr(t,e,Cr.kt(e),r,n,i,!0,!1)},Object.defineProperty(Xr.prototype,"hasPendingWrites",{get:function(){return!this.xt._()},enumerable:!0,configurable:!0}),Xr.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Mt===t.Mt&&this.xt.isEqual(t.xt)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.Ot.isEqual(t.Ot)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0},Xr),qr=(Wr.Kt=function(t,e){var n=new Map;return n.set(t,Fr.zt(t,e)),new Wr(zi.min(),n,Dr,Ar,Lr())},Wr),Fr=(Hr.zt=function(t,e){return new Hr(ur.H,e,Lr(),Lr(),Lr())},Hr),jr=(Object.defineProperty(zr.prototype,"Ht",{get:function(){return this.re},enumerable:!0,configurable:!0}),Object.defineProperty(zr.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!0,configurable:!0}),Object.defineProperty(zr.prototype,"he",{get:function(){return 0!==this.se},enumerable:!0,configurable:!0}),Object.defineProperty(zr.prototype,"ae",{get:function(){return this.oe},enumerable:!0,configurable:!0}),zr.prototype.ue=function(t){0<t.K()&&(this.oe=!0,this.ie=t)},zr.prototype.ce=function(){var n=Lr(),i=Lr(),r=Lr();return this.ne.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:i=i.add(t);break;case 1:r=r.add(t);break;default:Ai()}}),new Fr(this.ie,this.re,n,i,r)},zr.prototype.le=function(){this.oe=!1,this.ne=$r()},zr.prototype._e=function(t,e){this.oe=!0,this.ne=this.ne.et(t,e)},zr.prototype.fe=function(t){this.oe=!0,this.ne=this.ne.remove(t)},zr.prototype.de=function(){this.se+=1},zr.prototype.we=function(){--this.se},zr.prototype.Te=function(){this.oe=!0,this.re=!0},zr),Gr=(Br.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var i=n[e];t.te instanceof Rs?this.Ve(i,t.te):t.te instanceof Ls&&this.pe(i,t.key,t.te)}for(var r=0,o=t.removedTargetIds;r<o.length;r++){var s=o[r];this.pe(s,t.key,t.te)}},Br.prototype.ye=function(n){var i=this;this.ge(n,function(t){var e=i.be(t);switch(n.state){case 0:i.ve(t)&&e.ue(n.resumeToken);break;case 1:e.we(),e.he||e.le(),e.ue(n.resumeToken);break;case 2:e.we(),e.he||i.removeTarget(t);break;case 3:i.ve(t)&&(e.Te(),e.ue(n.resumeToken));break;case 4:i.ve(t)&&(i.Se(t),e.ue(n.resumeToken));break;default:Ai()}})},Br.prototype.ge=function(t,n){var i=this;0<t.targetIds.length?t.targetIds.forEach(n):this.me.forEach(function(t,e){i.ve(e)&&n(e)})},Br.prototype.Ce=function(t){var e,n,i=t.targetId,r=t.ee.count,o=this.De(i);o&&(au(e=o.target)?0===r?(n=new ir(e.path),this.pe(i,n,new Ls(n,zi.min()))):Ni(1===r):this.Fe(i)!==r&&(this.Se(i),this.Ae=this.Ae.add(i)))},Br.prototype.$e=function(r){var o=this,s=new Map;this.me.forEach(function(t,e){var n,i=o.De(e);i&&(t.Ht&&au(i.target)&&(n=new ir(i.target.path),null!==o.Ie.get(n)||o.Ne(e,n)||o.pe(e,n,new Ls(n,r))),t.ae&&(s.set(e,t.ce()),t.le()))});var i=Lr();this.Re.forEach(function(t,e){var n=!0;e.St(function(t){var e=o.De(t);return!e||2===e.Y||(n=!1)}),n&&(i=i.add(t))});var t=new qr(r,s,this.Ae,this.Ie,i);return this.Ie=Ar,this.Re=Yr(),this.Ae=new Ir(Ri),t},Br.prototype.Ve=function(t,e){var n;this.ve(t)&&(n=this.Ne(t,e.key)?2:0,this.be(t)._e(e.key,n),this.Ie=this.Ie.et(e.key,e),this.Re=this.Re.et(e.key,this.ke(e.key).add(t)))},Br.prototype.pe=function(t,e,n){var i;this.ve(t)&&(i=this.be(t),this.Ne(t,e)?i._e(e,1):i.fe(e),this.Re=this.Re.et(e,this.ke(e).delete(t)),n&&(this.Ie=this.Ie.et(e,n)))},Br.prototype.removeTarget=function(t){this.me.delete(t)},Br.prototype.Fe=function(t){var e=this.be(t).ce();return this.Ee.Le(t).size+e.Yt.size-e.Jt.size},Br.prototype.de=function(t){this.be(t).de()},Br.prototype.be=function(t){var e=this.me.get(t);return e||(e=new jr,this.me.set(t,e)),e},Br.prototype.ke=function(t){var e=this.Re.get(t);return e||(e=new Ir(Ri),this.Re=this.Re.et(t,e)),e},Br.prototype.ve=function(t){var e=null!==this.De(t);return e||_i("WatchChangeAggregator","Detected inactive target",t),e},Br.prototype.De=function(t){var e=this.me.get(t);return e&&e.he?null:this.Ee.qe(t)},Br.prototype.Se=function(e){var n=this;this.me.set(e,new jr),this.Ee.Le(e).forEach(function(t){n.pe(e,t,null)})},Br.prototype.Ne=function(t,e){return this.Ee.Le(t).has(e)},Br);function Br(t){this.Ee=t,this.me=new Map,this.Ie=Ar,this.Re=Yr(),this.Ae=new Ir(Ri)}function zr(){this.se=0,this.ne=$r(),this.ie=ur.H,this.re=!1,this.oe=!0}function Hr(t,e,n,i,r){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Xt=i,this.Jt=r}function Wr(t,e,n,i,r){this.X=t,this.Qt=e,this.Wt=n,this.jt=i,this.Gt=r}function Xr(t,e,n,i,r,o,s,u){this.query=t,this.docs=e,this.Ot=n,this.docChanges=i,this.xt=r,this.fromCache=o,this.Mt=s,this.Bt=u}function Qr(){this.Lt=new vr(ir.P)}function Kr(n){this.P=n?function(t,e){return n(t,e)||ir.P(t.key,e.key)}:function(t,e){return ir.P(t.key,e.key)},this.$t=Sr,this.Nt=new vr(this.P)}function Yr(){return new vr(ir.P)}function $r(){return new vr(ir.P)}function Jr(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zr(t){var e=uo(t.mapValue.fields.__local_write_time__.timestampValue);return new Bi(e.seconds,e.nanos)}var to=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jr(t)?4:10:Ai()}function no(i,r){var t,e,n,o=eo(i);if(o!==eo(r))return!1;switch(o){case 0:return!0;case 1:return i.booleanValue===r.booleanValue;case 4:return Zr(i).isEqual(Zr(r));case 3:return function(t){if("string"==typeof i.timestampValue&&"string"==typeof t.timestampValue&&i.timestampValue.length===t.timestampValue.length)return i.timestampValue===t.timestampValue;var e=uo(i.timestampValue),n=uo(t.timestampValue);return e.seconds===n.seconds&&e.nanos===n.nanos}(r);case 5:return i.stringValue===r.stringValue;case 6:return n=r,ho(i.bytesValue).isEqual(ho(n.bytesValue));case 7:return i.referenceValue===r.referenceValue;case 8:return e=r,ao((t=i).geoPointValue.latitude)===ao(e.geoPointValue.latitude)&&ao(t.geoPointValue.longitude)===ao(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ao(t.integerValue)===ao(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ao(t.doubleValue),i=ao(e.doubleValue);return n===i?sr(n)===sr(i):isNaN(n)&&isNaN(i)}return!1}(i,r);case 9:return Li(i.arrayValue.values||[],r.arrayValue.values||[],no);case 10:return function(){var t=i.mapValue.fields||{},e=r.mapValue.fields||{};if(Vi(t)!==Vi(e))return!1;for(var n in t)if(t.hasOwnProperty(n)&&(void 0===e[n]||!no(t[n],e[n])))return!1;return!0}();default:return Ai()}}function io(t,e){return void 0!==(t.values||[]).find(function(t){return no(t,e)})}function ro(t,e){var n,i,r,o,s,u,a,h,c,l,f=eo(t),p=eo(e);if(f!==p)return Ri(f,p);switch(f){case 0:return 0;case 1:return Ri(t.booleanValue,e.booleanValue);case 2:return h=e,(c=ao(t.integerValue||t.doubleValue))<(l=ao(h.integerValue||h.doubleValue))?-1:l<c?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1;case 3:return oo(t.timestampValue,e.timestampValue);case 4:return oo(Zr(t),Zr(e));case 5:return Ri(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,u=ho(o),a=ho(s),u.o(a);case 7:return function(t,e){for(var n=t.split("/"),i=e.split("/"),r=0;r<n.length&&r<i.length;r++){var o=Ri(n[r],i[r]);if(0!==o)return o}return Ri(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,i=e.geoPointValue,0!==(r=Ri(ao(n.latitude),ao(i.latitude)))?r:Ri(ao(n.longitude),ao(i.longitude));case 9:return function(t,e){for(var n=t.values||[],i=e.values||[],r=0;r<n.length&&r<i.length;++r){var o=ro(n[r],i[r]);if(o)return o}return Ri(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},i=Object.keys(n),r=e.fields||{},o=Object.keys(r);i.sort(),o.sort();for(var s=0;s<i.length&&s<o.length;++s){var u=Ri(i[s],o[s]);if(0!==u)return u;var a=ro(n[i[s]],r[o[s]]);if(0!==a)return a}return Ri(i.length,o.length)}(t.mapValue,e.mapValue);default:throw Ai()}}function oo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ri(t,e);var n=uo(t),i=uo(e),r=Ri(n.seconds,i.seconds);return 0!==r?r:Ri(n.nanos,i.nanos)}function so(t){return function s(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?"time("+(t=uo(r.timestampValue)).seconds+","+t.nanos+")":"stringValue"in r?r.stringValue:"bytesValue"in r?ho(r.bytesValue).toBase64():"referenceValue"in r?(n=r.referenceValue,ir.B(n).toString()):"geoPointValue"in r?"geo("+(e=r.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in r?function(){for(var t="[",e=!0,n=0,i=r.arrayValue.values||[];n<i.length;n++)e?e=!1:t+=",",t+=s(i[n]);return t+"]"}():"mapValue"in r?function(t){for(var e="{",n=!0,i=0,r=Object.keys(t.fields||{}).sort();i<r.length;i++){var o=r[i];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(r.mapValue):Ai();var t,e,n}(t)}function uo(t){if(Ni(!!t),"string"!=typeof t)return{seconds:ao(t.seconds),nanos:ao(t.nanos)};var e,n=0,i=to.exec(t);Ni(!!i),i[1]&&(e=((e=i[1])+"000000000").substr(0,9),n=Number(e));var r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:n}}function ao(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ho(t){return"string"==typeof t?ur.fromBase64String(t):ur.fromUint8Array(t)}function co(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.$()}}function lo(t){return t&&"integerValue"in t}function fo(t){return!!t&&"arrayValue"in t}function po(t){return t&&"nullValue"in t}function yo(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vo(t){return t&&"mapValue"in t}var go={asc:"ASCENDING",desc:"DESCENDING"},mo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wo=function(t,e){this.s=t,this.Oe=e};function bo(t){return{integerValue:""+t}}function Eo(t,e){if(t.Oe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sr(e)?"-0":e}}function _o(t,e){return t.Oe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Io(t,e){return t.Oe?e.toBase64():e.toUint8Array()}function To(t,e){return t.Oe?(Ni(void 0===e||"string"==typeof e),ur.fromBase64String(e||"")):(Ni(void 0===e||e instanceof Uint8Array),ur.fromUint8Array(e||new Uint8Array))}function Ao(t){return Ni(!!t),zi.m((e=uo(t),new Bi(e.seconds,e.nanos)));var e}function No(t,e){return new Wi(["projects",t.projectId,"databases",t.database]).child("documents").child(e).$()}function Po(t,e){return No(t.s,e.path)}function So(t,e){var n,i,r=(Ni(Vo(i=Wi.N(e))),i);return Ni(r.get(1)===t.s.projectId),Ni(!r.get(3)&&!t.s.database||r.get(3)===t.s.database),new ir((Ni(4<(n=r).length&&"documents"===n.get(4)),n.p(5)))}function Oo(t,e){return No(t.s,e)}function Ro(t){return new Wi(["projects",t.s.projectId,"databases",t.s.database]).$()}function Lo(t,e,n){return{name:Po(t,e),fields:n.proto.mapValue.fields}}function Do(t,e){var n,i,r,o;if(e instanceof es)n={update:Lo(t,e.key,e.value)};else if(e instanceof rs)n={delete:Po(t,e.key)};else if(e instanceof ns)n={update:Lo(t,e.key,e.data),updateMask:(i=e.xe,r=[],i.fields.forEach(function(t){return r.push(t.$())}),{fieldPaths:r})};else if(e instanceof is)n={transform:{document:Po(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof Co)return{fieldPath:t.field.$(),setToServerValue:"REQUEST_TIME"};if(e instanceof Mo)return{fieldPath:t.field.$(),appendMissingElements:{values:e.elements}};if(e instanceof qo)return{fieldPath:t.field.$(),removeAllFromArray:{values:e.elements}};if(e instanceof Fo)return{fieldPath:t.field.$(),increment:e.Me};throw Ai()})}};else{if(!(e instanceof os))return Ai();n={verify:Po(t,e.key)}}return e.Ue.Be||(n.currentDocument=void 0!==(o=e.Ue).updateTime?{updateTime:_o(t,o.updateTime.R())}:void 0!==o.exists?{exists:o.exists}:Ai()),n}function ko(t){return{before:t.before,values:t.position}}function Uo(t){return{fieldPath:t.$()}}function Vo(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}var Co=(xo.prototype.Qe=function(t,e){return n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}},t&&(n.fields.__previous_value__=t),{mapValue:n};var n},xo.prototype.We=function(t,e){return e},xo.prototype.je=function(t){return null},xo.prototype.isEqual=function(t){return t instanceof xo},xo);function xo(){}Co.instance=new Co;var Mo=(Bo.prototype.Qe=function(t,e){return this.apply(t)},Bo.prototype.We=function(t,e){return this.apply(t)},Bo.prototype.apply=function(t){for(var n=zo(t),e=function(e){n.some(function(t){return no(t,e)})||n.push(e)},i=0,r=this.elements;i<r.length;i++)e(r[i]);return{arrayValue:{values:n}}},Bo.prototype.je=function(t){return null},Bo.prototype.isEqual=function(t){return t instanceof Bo&&Li(this.elements,t.elements,no)},Bo),qo=(Go.prototype.Qe=function(t,e){return this.apply(t)},Go.prototype.We=function(t,e){return this.apply(t)},Go.prototype.apply=function(t){for(var n=zo(t),e=function(e){n=n.filter(function(t){return!no(t,e)})},i=0,r=this.elements;i<r.length;i++)e(r[i]);return{arrayValue:{values:n}}},Go.prototype.je=function(t){return null},Go.prototype.isEqual=function(t){return t instanceof Go&&Li(this.elements,t.elements,no)},Go),Fo=(jo.prototype.Qe=function(t,e){var n=this.je(t),i=this.asNumber(n)+this.asNumber(this.Me);return lo(n)&&lo(this.Me)?bo(i):Eo(this.serializer,i)},jo.prototype.We=function(t,e){return e},jo.prototype.je=function(t){return lo(e=t)||e&&"doubleValue"in e?t:{integerValue:0};var e},jo.prototype.isEqual=function(t){return t instanceof jo&&no(this.Me,t.Me)},jo.prototype.asNumber=function(t){return ao(t.integerValue||t.doubleValue)},jo);function jo(t,e){this.serializer=t,this.Me=e}function Go(t){this.elements=t}function Bo(t){this.elements=t}function zo(t){return fo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Ho(t,e){this.version=t,this.transformResults=e}var Wo,Xo,Qo,Ko,Yo,$o=(ms.prototype.Ge=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].C(t))return!0;return!1},ms.prototype.isEqual=function(t){return Li(this.fields,t.fields,function(t,e){return t.isEqual(e)})},ms),Jo=(gs.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},gs),Zo=(vs.Ke=function(){return new vs},vs.exists=function(t){return new vs(void 0,t)},vs.updateTime=function(t){return new vs(t)},Object.defineProperty(vs.prototype,"Be",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),vs.prototype.ze=function(t){return void 0!==this.updateTime?t instanceof Rs&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof Rs},vs.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},vs),ts=(ys.prototype.He=function(t){},ys.Ye=function(t){return t instanceof Rs?t.version:zi.min()},ys),es=(n(ds,Yo=ts),ds.prototype.We=function(t,e){this.He(t);var n=e.version;return new Rs(this.key,n,this.value,{hasCommittedMutations:!0})},ds.prototype.Qe=function(t,e,n){if(this.He(t),!this.Ue.ze(t))return t;var i=ts.Ye(t);return new Rs(this.key,i,this.value,{Xe:!0})},ds.prototype.Je=function(t){return null},ds.prototype.isEqual=function(t){return t instanceof ds&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Ue.isEqual(t.Ue)},ds),ns=(n(ps,Ko=ts),ps.prototype.We=function(t,e){if(this.He(t),!this.Ue.ze(t))return new Ds(this.key,e.version);var n=this.Ze(t);return new Rs(this.key,e.version,n,{hasCommittedMutations:!0})},ps.prototype.Qe=function(t,e,n){if(this.He(t),!this.Ue.ze(t))return t;var i=ts.Ye(t),r=this.Ze(t);return new Rs(this.key,i,r,{Xe:!0})},ps.prototype.Je=function(t){return null},ps.prototype.isEqual=function(t){return t instanceof ps&&this.key.isEqual(t.key)&&this.xe.isEqual(t.xe)&&this.Ue.isEqual(t.Ue)},ps.prototype.Ze=function(t){var e=t instanceof Rs?t.data():ss.empty();return this.ts(e)},ps.prototype.ts=function(t){var n=this,i=new us(t);return this.xe.fields.forEach(function(t){var e;t._()||(null!==(e=n.data.field(t))?i.set(t,e):i.delete(t))}),i.es()},ps),is=(n(fs,Qo=ts),fs.prototype.We=function(t,e){if(this.He(t),Ni(null!=e.transformResults),!this.Ue.ze(t))return new Ds(this.key,e.version);var n=this.ss(t),i=this.ns(t,e.transformResults),r=e.version,o=this.rs(n.data(),i);return new Rs(this.key,r,o,{hasCommittedMutations:!0})},fs.prototype.Qe=function(t,e,n){if(this.He(t),!this.Ue.ze(t))return t;var i=this.ss(t),r=this.os(n,t,e),o=this.rs(i.data(),r);return new Rs(this.key,i.version,o,{Xe:!0})},fs.prototype.Je=function(t){for(var e=null,n=0,i=this.fieldTransforms;n<i.length;n++){var r=i[n],o=t instanceof Rs?t.field(r.field):void 0,s=r.transform.je(o||null);null!=s&&(e=null==e?(new us).set(r.field,s):e.set(r.field,s))}return e?e.es():null},fs.prototype.isEqual=function(t){return t instanceof fs&&this.key.isEqual(t.key)&&Li(this.fieldTransforms,t.fieldTransforms,function(t,e){return t.isEqual(e)})&&this.Ue.isEqual(t.Ue)},fs.prototype.ss=function(t){return t},fs.prototype.ns=function(t,e){var n=[];Ni(this.fieldTransforms.length===e.length);for(var i=0;i<e.length;i++){var r=this.fieldTransforms[i],o=r.transform,s=null;t instanceof Rs&&(s=t.field(r.field)),n.push(o.We(s,e[i]))}return n},fs.prototype.os=function(t,e,n){for(var i=[],r=0,o=this.fieldTransforms;r<o.length;r++){var s=o[r],u=s.transform,a=null;e instanceof Rs&&(a=e.field(s.field)),null===a&&n instanceof Rs&&(a=n.field(s.field)),i.push(u.Qe(a,t))}return i},fs.prototype.rs=function(t,e){for(var n=new us(t),i=0;i<this.fieldTransforms.length;i++){var r=this.fieldTransforms[i].field;n.set(r,e[i])}return n.es()},fs),rs=(n(ls,Xo=ts),ls.prototype.We=function(t,e){return this.He(t),new Ls(this.key,e.version,{hasCommittedMutations:!0})},ls.prototype.Qe=function(t,e,n){return this.He(t),this.Ue.ze(t)?new Ls(this.key,zi.min()):t},ls.prototype.Je=function(t){return null},ls.prototype.isEqual=function(t){return t instanceof ls&&this.key.isEqual(t.key)&&this.Ue.isEqual(t.Ue)},ls),os=(n(cs,Wo=ts),cs.prototype.We=function(t,e){Ai()},cs.prototype.Qe=function(t,e,n){Ai()},cs.prototype.Je=function(t){Ai()},cs.prototype.isEqual=function(t){return t instanceof cs&&this.key.isEqual(t.key)&&this.Ue.isEqual(t.Ue)},cs),ss=(hs.empty=function(){return new hs({mapValue:{}})},hs.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!vo(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},hs.prototype.isEqual=function(t){return no(this.proto,t.proto)},hs),us=(as.prototype.set=function(t,e){return this.us(t,e),this},as.prototype.delete=function(t){return this.us(t,null),this},as.prototype.us=function(t,e){for(var n=this.as,i=0;i<t.length-1;++i){var r=t.get(i),o=n.get(r);o instanceof Map||(o=o&&10===eo(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(r,o)),n=o}n.set(t.S(),e)},as.prototype.es=function(){var t=this.cs(er.k,this.as);return null!=t?new ss(t):this.hs},as.prototype.cs=function(i,t){var r=this,o=!1,e=this.hs.field(i),s=vo(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=r.cs(i.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},as);function as(t){void 0===t&&(t=ss.empty()),this.hs=t,this.as=new Map}function hs(t){this.proto=t}function cs(t,e){var n=this;return(n=Wo.call(this)||this).key=t,n.Ue=e,n.type=4,n}function ls(t,e){var n=this;return(n=Xo.call(this)||this).key=t,n.Ue=e,n.type=3,n}function fs(t,e){var n=this;return(n=Qo.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Ue=Zo.exists(!0),n}function ps(t,e,n,i){var r=this;return(r=Ko.call(this)||this).key=t,r.data=e,r.xe=n,r.Ue=i,r.type=1,r}function ds(t,e,n){var i=this;return(i=Yo.call(this)||this).key=t,i.value=e,i.Ue=n,i.type=0,i}function ys(){}function vs(t,e){this.updateTime=t,this.exists=e}function gs(t,e){this.field=t,this.transform=e}function ms(t){(this.fields=t).sort(er.P)}function ws(t){var u=[];return Ci(t.fields||{},function(t,e){var n=new er([t]);if(vo(e)){var i=ws(e.mapValue).fields;if(0===i.length)u.push(n);else for(var r=0,o=i;r<o.length;r++){var s=o[r];u.push(n.child(s))}}else u.push(n)}),new $o(u)}function bs(t,e){this.key=t,this.version=e}var Es,_s,Is,Ts,As,Ns,Ps,Ss,Os,Rs=(n(Ys,Os=bs),Ys.prototype.field=function(t){return this.ls.field(t)},Ys.prototype.data=function(){return this.ls},Ys.prototype._s=function(){return this.ls.proto},Ys.prototype.isEqual=function(t){return t instanceof Ys&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Xe===t.Xe&&this.hasCommittedMutations===t.hasCommittedMutations&&this.ls.isEqual(t.ls)},Ys.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.ls.toString()+", {hasLocalMutations: "+this.Xe+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Ys.prototype,"hasPendingWrites",{get:function(){return this.Xe||this.hasCommittedMutations},enumerable:!0,configurable:!0}),Ys),Ls=(n(Ks,Ss=bs),Ks.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Ks.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Ks.prototype.isEqual=function(t){return t instanceof Ks&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Ks),Ds=(n(Qs,Ps=bs),Qs.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Qs.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Qs.prototype.isEqual=function(t){return t instanceof Qs&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Qs),ks=(Xs.ms=function(t){return new Xs(t)},Object.defineProperty(Xs.prototype,"orderBy",{get:function(){if(null===this.ws){this.ws=[];var t=this.Is(),e=this.Rs();if(null!==t&&null===e)t.q()||this.ws.push(new eu(t)),this.ws.push(new eu(er.O(),"asc"));else{for(var n,i=!1,r=0,o=this.fs;r<o.length;r++){var s=o[r];this.ws.push(s),s.field.q()&&(i=!0)}i||(n=0<this.fs.length?this.fs[this.fs.length-1].dir:"asc",this.ws.push(new eu(er.O(),n)))}}return this.ws},enumerable:!0,configurable:!0}),Xs.prototype.As=function(t){var e=this.filters.concat([t]);return new Xs(this.path,this.collectionGroup,this.fs.slice(),e,this.limit,this.ds,this.startAt,this.endAt)},Xs.prototype.Ps=function(t){var e=this.fs.concat([t]);return new Xs(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.ds,this.startAt,this.endAt)},Xs.prototype.Vs=function(t){return new Xs(this.path,this.collectionGroup,this.fs.slice(),this.filters.slice(),t,"F",this.startAt,this.endAt)},Xs.prototype.ps=function(t){return new Xs(this.path,this.collectionGroup,this.fs.slice(),this.filters.slice(),t,"L",this.startAt,this.endAt)},Xs.prototype.ys=function(t){return new Xs(this.path,this.collectionGroup,this.fs.slice(),this.filters.slice(),this.limit,this.ds,t,this.endAt)},Xs.prototype.gs=function(t){return new Xs(this.path,this.collectionGroup,this.fs.slice(),this.filters.slice(),this.limit,this.ds,this.startAt,t)},Xs.prototype.bs=function(t){return new Xs(t,null,this.fs.slice(),this.filters.slice(),this.limit,this.ds,this.startAt,this.endAt)},Xs.prototype.vs=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.fs.length||1===this.fs.length&&this.fs[0].field.q())},Xs.prototype.canonicalId=function(){return su(this.Ss())+"|lt:"+this.ds},Xs.prototype.toString=function(){return"Query(target="+(e=(t=this.Ss()).path.$(),null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),0<t.filters.length&&(e+=", filters: ["+t.filters.join(", ")+"]"),or(t.limit)||(e+=", limit: "+t.limit),0<t.orderBy.length&&(e+=", orderBy: ["+t.orderBy.join(", ")+"]"),t.startAt&&(e+=", startAt: "+$s(t.startAt)),t.endAt&&(e+=", endAt: "+$s(t.endAt)),"Target("+e+")")+"; limitType="+this.ds+")";var t,e},Xs.prototype.isEqual=function(t){return uu(this.Ss(),t.Ss())&&this.ds===t.ds},Xs.prototype.Cs=function(t,e){for(var n=!1,i=0,r=this.orderBy;i<r.length;i++){var o=r[i],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.q()}return 0},Xs.prototype.matches=function(t){return this.Ds(t)&&this.Fs(t)&&this.$s(t)&&this.Ns(t)},Xs.prototype.ks=function(){return!or(this.limit)&&"F"===this.ds},Xs.prototype.Ls=function(){return!or(this.limit)&&"L"===this.ds},Xs.prototype.Rs=function(){return 0<this.fs.length?this.fs[0].field:null},Xs.prototype.Is=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Us&&n.qs())return n.field}return null},Xs.prototype.Os=function(t){for(var e=0,n=this.filters;e<n.length;e++){var i=n[e];if(i instanceof Us&&0<=t.indexOf(i.op))return i.op}return null},Xs.prototype.xs=function(){return au(this.Ss())},Xs.prototype.Ms=function(){return null!==this.collectionGroup},Xs.prototype.Ss=function(){if(!this.Ts)if("F"===this.ds)this.Ts=ou(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var i=n[e],r="desc"===i.dir?"asc":"desc";t.push(new eu(i.field,r))}var o=this.endAt?new Fs(this.endAt.position,!this.endAt.before):null,s=this.startAt?new Fs(this.startAt.position,!this.startAt.before):null;this.Ts=ou(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.Ts},Xs.prototype.Ds=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.U(this.collectionGroup)&&this.path.C(e):ir.W(this.path)?this.path.isEqual(e):this.path.D(e)},Xs.prototype.Fs=function(t){for(var e=0,n=this.fs;e<n.length;e++){var i=n[e];if(!i.field.q()&&null===t.field(i.field))return!1}return!0},Xs.prototype.$s=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},Xs.prototype.Ns=function(t){return!(this.startAt&&!Js(this.startAt,this.orderBy,t)||this.endAt&&Js(this.endAt,this.orderBy,t))},Xs.prototype.Es=function(t){},Xs),Us=(n(Ws,Ns=function(){}),Ws.create=function(t,e,n){if(t.q())return"in"===e?new Cs(t,n):new Vs(t,e,n);if(po(n)){if("=="!==e)throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new Ws(t,e,n)}if(yo(n)){if("=="!==e)throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new Ws(t,e,n)}return"array-contains"===e?new xs(t,n):"in"===e?new Ms(t,n):"array-contains-any"===e?new qs(t,n):new Ws(t,e,n)},Ws.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&eo(this.value)===eo(e)&&this.Bs(ro(e,this.value))},Ws.prototype.Bs=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return 0<t;case">=":return 0<=t;default:return Ai()}},Ws.prototype.qs=function(){return 0<=["<","<=",">",">="].indexOf(this.op)},Ws.prototype.canonicalId=function(){return this.field.$()+this.op.toString()+so(this.value)},Ws.prototype.isEqual=function(t){return t instanceof Ws&&this.op===t.op&&this.field.isEqual(t.field)&&no(this.value,t.value)},Ws.prototype.toString=function(){return this.field.$()+" "+this.op+" "+so(this.value)},Ws),Vs=(n(Hs,As=Us),Hs.prototype.matches=function(t){var e=ir.P(t.key,this.key);return this.Bs(e)},Hs),Cs=(n(zs,Ts=Us),zs.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},zs),xs=(n(Bs,Is=Us),Bs.prototype.matches=function(t){var e=t.field(this.field);return fo(e)&&io(e.arrayValue,this.value)},Bs),Ms=(n(Gs,_s=Us),Gs.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&io(this.value.arrayValue,e)},Gs),qs=(n(js,Es=Us),js.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!fo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return io(e.value.arrayValue,t)})},js),Fs=function(t,e){this.position=t,this.before=e};function js(t,e){return Es.call(this,t,"array-contains-any",e)||this}function Gs(t,e){return _s.call(this,t,"in",e)||this}function Bs(t,e){return Is.call(this,t,"array-contains",e)||this}function zs(t,e){var n=this;return(n=Ts.call(this,t,"in",e)||this).keys=(e.arrayValue.values||[]).map(function(t){return ir.B(t.referenceValue)}),n}function Hs(t,e,n){var i=this;return(i=As.call(this,t,e,n)||this).key=ir.B(n.referenceValue),i}function Ws(t,e,n){var i=this;return(i=Ns.call(this)||this).field=t,i.op=e,i.value=n,i}function Xs(t,e,n,i,r,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.fs=n,this.filters=i,this.limit=r,this.ds=o,this.startAt=s,this.endAt=u,this.ws=null,this.Ts=null,this.startAt&&this.Es(this.startAt),this.endAt&&this.Es(this.endAt)}function Qs(){return null!==Ps&&Ps.apply(this,arguments)||this}function Ks(t,e,n){var i=this;return(i=Ss.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),i}function Ys(t,e,n,i){var r=this;return(r=Os.call(this,t,e)||this).ls=n,r.Xe=!!i.Xe,r.hasCommittedMutations=!!i.hasCommittedMutations,r}function $s(t){return(t.before?"b":"a")+":"+t.position.map(so).join(",")}function Js(t,e,n){for(var i=0,r=0;r<t.position.length;r++){var o=e[r],s=t.position[r],i=o.field.q()?ir.P(ir.B(s.referenceValue),n.key):ro(s,n.field(o.field));if("desc"===o.dir&&(i*=-1),0!==i)break}return t.before?i<=0:i<0}function Zs(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!no(t.position[n],e.position[n]))return!1;return!0}var tu,eu=(ru.prototype.compare=function(t,e){var n,i,r,o,s=this.Us?ir.P(t.key,e.key):(n=this.field,i=e,r=t.field(n),o=i.field(n),null!==r&&null!==o?ro(r,o):Ai());switch(this.dir){case"asc":return s;case"desc":return-1*s;default:return Ai()}},ru.prototype.canonicalId=function(){return this.field.$()+this.dir.toString()},ru.prototype.toString=function(){return this.field.$()+" ("+this.dir+")"},ru.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},ru),nu=(n(iu,tu=function(t,e,n,i,r,o,s){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=s}),iu);function iu(t,e,n,i,r,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null);var u=this;return(u=tu.call(this,t,e,n,i,r,o,s)||this).Qs=null,u}function ru(t,e){this.field=t,void 0===e&&(e="asc"),this.dir=e,this.Us=t.q()}function ou(t,e,n,i,r,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),new nu(t,e,n,i,r,o,s)}function su(t){var e,n=t;return null===n.Qs&&(e=n.path.$(),null!==n.collectionGroup&&(e+="|cg:"+n.collectionGroup),e+="|f:",e+=n.filters.map(function(t){return t.canonicalId()}).join(","),e+="|ob:",e+=n.orderBy.map(function(t){return t.canonicalId()}).join(","),or(n.limit)||(e+="|l:",e+=n.limit),n.startAt&&(e+="|lb:",e+=$s(n.startAt)),n.endAt&&(e+="|ub:",e+=$s(n.endAt)),n.Qs=e),n.Qs}function uu(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!t.orderBy[n].isEqual(e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var i=0;i<t.filters.length;i++)if(!t.filters[i].isEqual(e.filters[i]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Zs(t.startAt,e.startAt)&&Zs(t.endAt,e.endAt)}function au(t){return ir.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}var hu=(bu.prototype.We=function(t,e,n){for(var i=n.js,r=0;r<this.mutations.length;r++){var o,s=this.mutations[r];s.key.isEqual(t)&&(o=i[r],e=s.We(e,o))}return e},bu.prototype.Qe=function(t,e){for(var n=0,i=this.baseMutations;n<i.length;n++){var r=i[n];r.key.isEqual(t)&&(e=r.Qe(e,e,this.Ws))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=a.Qe(e,o,this.Ws))}return e},bu.prototype.Gs=function(n){var i=this,r=n;return this.mutations.forEach(function(t){var e=i.Qe(t.key,n.get(t.key));e&&(r=r.et(t.key,e))}),r},bu.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Lr())},bu.prototype.isEqual=function(t){return this.batchId===t.batchId&&Li(this.mutations,t.mutations,function(t,e){return t.isEqual(e)})&&Li(this.baseMutations,t.baseMutations,function(t,e){return t.isEqual(e)})},bu),cu=(wu.from=function(t,e,n){Ni(t.mutations.length===n.length);for(var i=Or,r=t.mutations,o=0;o<r.length;o++)i=i.et(r[o].key,n[o].version);return new wu(t,e,n,i)},wu),lu=(mu.prototype.catch=function(t){return this.next(void 0,t)},mu.prototype.next=function(i,r){var o=this;return this.Js&&Ai(),this.Js=!0,this.Xs?this.error?this.Zs(r,this.error):this.tn(i,this.result):new mu(function(e,n){o.Hs=function(t){o.tn(i,t).next(e,n)},o.Ys=function(t){o.Zs(r,t).next(e,n)}})},mu.prototype.en=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},mu.prototype.sn=function(t){try{var e=t();return e instanceof mu?e:mu.resolve(e)}catch(t){return mu.reject(t)}},mu.prototype.tn=function(t,e){return t?this.sn(function(){return t(e)}):mu.resolve(e)},mu.prototype.Zs=function(t,e){return t?this.sn(function(){return t(e)}):mu.reject(e)},mu.resolve=function(n){return new mu(function(t,e){t(n)})},mu.reject=function(n){return new mu(function(t,e){e(n)})},mu.nn=function(t){return new mu(function(e,n){var i=0,r=0,o=!1;t.forEach(function(t){++i,t.next(function(){++r,o&&r===i&&e()},function(t){return n(t)})}),o=!0,r===i&&e()})},mu.rn=function(t){for(var n=mu.resolve(!1),e=function(e){n=n.next(function(t){return t?mu.resolve(t):e()})},i=0,r=t;i<r.length;i++)e(r[i]);return n},mu.forEach=function(t,n){var i=this,r=[];return t.forEach(function(t,e){r.push(n.call(i,t,e))}),this.nn(r)},mu),fu=(gu.prototype.un=function(e,n){var i=this;return this.hn.cn(e,n).next(function(t){return i.ln(e,n,t)})},gu.prototype.ln=function(t,i,r){return this.on._n(t,i).next(function(t){for(var e=0,n=r;e<n.length;e++)t=n[e].Qe(i,t);return t})},gu.prototype.fn=function(t,e,r){var o=Ar;return e.forEach(function(t,e){for(var n=0,i=r;n<i.length;n++)e=i[n].Qe(t,e);o=o.et(t,e)}),o},gu.prototype.dn=function(e,t){var n=this;return this.on.getEntries(e,t).next(function(t){return n.wn(e,t)})},gu.prototype.wn=function(i,r){var o=this;return this.hn.Tn(i,r).next(function(t){var e=o.fn(i,r,t),n=Ar;return e.forEach(function(t,e){e=e||new Ls(t,zi.min()),n=n.et(t,e)}),n})},gu.prototype.En=function(t,e,n){return e.xs()?this.mn(t,e.path):e.Ms()?this.In(t,e,n):this.Rn(t,e,n)},gu.prototype.mn=function(t,e){return this.un(t,new ir(e)).next(function(t){var e=Sr;return t instanceof Rs&&(e=e.et(t.key,t)),e})},gu.prototype.In=function(n,i,r){var o=this,s=i.collectionGroup,u=Sr;return this.an.An(n,s).next(function(t){return lu.forEach(t,function(t){var e=i.bs(t.child(s));return o.Rn(n,e,r).next(function(t){t.forEach(function(t,e){u=u.et(t,e)})})}).next(function(){return u})})},gu.prototype.Rn=function(e,n,t){var c,l,i=this;return this.on.En(e,n,t).next(function(t){return c=t,i.hn.Pn(e,n)}).next(function(t){return l=t,i.Vn(e,l,c).next(function(t){c=t;for(var e=0,n=l;e<n.length;e++)for(var i=n[e],r=0,o=i.mutations;r<o.length;r++){var s=o[r],u=s.key,a=c.get(u),h=s.Qe(a,a,i.Ws);c=h instanceof Rs?c.et(u,h):c.remove(u)}})}).next(function(){return c.forEach(function(t,e){n.matches(e)||(c=c.remove(t))}),c})},gu.prototype.Vn=function(t,e,n){for(var i=Lr(),r=0,o=e;r<o.length;r++)for(var s=0,u=o[r].mutations;s<u.length;s++){var a=u[s];a instanceof ns&&null===n.get(a.key)&&(i=i.add(a.key))}var h=n;return this.on.getEntries(t,i).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Rs&&(h=h.et(t,e))}),h})},gu),pu=(vu.gn=function(t,e){for(var n=Lr(),i=Lr(),r=0,o=e.docChanges;r<o.length;r++){var s=o[r];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new vu(t,e.fromCache,n,i)},vu),du=(yu.prototype.vn=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},yu.prototype.next=function(){var t=++this.previousValue;return this.Sn&&this.Sn(t),t},yu);function yu(t,e){var n=this;this.previousValue=t,e&&(e.bn=function(t){return n.vn(t)},this.Sn=function(t){return e.Cn(t)})}function vu(t,e,n,i){this.targetId=t,this.fromCache=e,this.pn=n,this.yn=i}function gu(t,e,n){this.on=t,this.hn=e,this.an=n}function mu(t){var e=this;this.Hs=null,this.Ys=null,this.result=void 0,this.error=void 0,this.Xs=!1,this.Js=!1,t(function(t){e.Xs=!0,e.result=t,e.Hs&&e.Hs(t)},function(t){e.Xs=!0,e.error=t,e.Ys&&e.Ys(t)})}function wu(t,e,n,i){this.batch=t,this.Ks=e,this.js=n,this.zs=i}function bu(t,e,n,i){this.batchId=t,this.Ws=e,this.baseMutations=n,this.mutations=i}function Eu(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}du.Dn=-1;var _u=(Ou.prototype.reset=function(){this.qn=0},Ou.prototype.Mn=function(){this.qn=this.Ln},Ou.prototype.Bn=function(t){var e=this;this.cancel();var n=Math.floor(this.qn+this.Un()),i=Math.max(0,Date.now()-this.xn),r=Math.max(0,n-i);0<r&&_i("ExponentialBackoff","Backing off for "+r+" ms (base delay: "+this.qn+" ms, delay with jitter: "+n+" ms, last attempt: "+i+" ms ago)"),this.On=this.Fn.Qn(this.$n,r,function(){return e.xn=Date.now(),t()}),this.qn*=this.kn,this.qn<this.Nn&&(this.qn=this.Nn),this.qn>this.Ln&&(this.qn=this.Ln)},Ou.prototype.Wn=function(){null!==this.On&&(this.On.jn(),this.On=null)},Ou.prototype.cancel=function(){null!==this.On&&(this.On.cancel(),this.On=null)},Ou.prototype.Un=function(){return(Math.random()-.5)*this.qn},Ou),Iu=(Su.prototype.Kn=function(t,e){return this.Gn.add(e),lu.resolve()},Su.prototype.An=function(t,e){return lu.resolve(this.Gn.getEntries(e))},Su),Tu=(Pu.prototype.add=function(t){var e=t.S(),n=t.g(),i=this.index[e]||new Ir(Wi.P),r=!i.has(n);return this.index[e]=i.add(n),r},Pu.prototype.has=function(t){var e=t.S(),n=t.g(),i=this.index[e];return i&&i.has(n)},Pu.prototype.getEntries=function(t){return(this.index[t]||new Ir(Wi.P)).F()},Pu),Au=(Nu.prototype.next=function(){return this.zn+=2,this.zn},Nu.Hn=function(){return new Nu(0)},Nu.Yn=function(){return new Nu(-1)},Nu);function Nu(t){this.zn=t}function Pu(){this.index={}}function Su(){this.Gn=new Tu}function Ou(t,e,n,i,r){void 0===n&&(n=1e3),void 0===i&&(i=1.5),void 0===r&&(r=6e4),this.Fn=t,this.$n=e,this.Nn=n,this.kn=i,this.Ln=r,this.qn=0,this.On=null,this.xn=Date.now(),this.reset()}function Ru(t){return"IndexedDbTransactionError"===t.name}function Lu(){return"undefined"!=typeof window?window:null}var Du=(Vu.ei=function(t,e,n,i,r){var o=new Vu(t,e,Date.now()+n,i,r);return o.start(n),o},Vu.prototype.start=function(t){var e=this;this.si=setTimeout(function(){return e.ni()},t)},Vu.prototype.jn=function(){return this.ni()},Vu.prototype.cancel=function(t){null!==this.si&&(this.clearTimeout(),this.ti.reject(new Gi(ji.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Vu.prototype.ni=function(){var e=this;this.Xn.ii(function(){return null!==e.si?(e.clearTimeout(),e.op().then(function(t){return e.ti.resolve(t)})):Promise.resolve()})},Vu.prototype.clearTimeout=function(){null!==this.si&&(this.Zn(this),clearTimeout(this.si),this.si=null)},Vu),ku=(Object.defineProperty(Uu.prototype,"di",{get:function(){return this.hi},enumerable:!0,configurable:!0}),Uu.prototype.ii=function(t){this.enqueue(t)},Uu.prototype.wi=function(t){this.Ti(),this.Ei(t)},Uu.prototype.mi=function(t){return this.Ti(),this.Ei(t)},Uu.prototype.Ii=function(n){return f(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return this.Ti(),this.hi?[3,2]:(this.hi=!0,(e=Lu())&&e.removeEventListener("visibilitychange",this.fi),[4,this.mi(n)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},Uu.prototype.enqueue=function(t){return this.Ti(),this.hi?new Promise(function(t){}):this.Ei(t)},Uu.prototype.Ri=function(r){var t=this;this.Ti(),this.hi||(this.oi=this.oi.then(function(){var n=new Eu,i=function(){return f(t,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r()];case 1:return t.sent(),n.resolve(),this._i.reset(),[3,3];case 2:if(!Ru(e=t.sent()))throw n.resolve(),e;return _i("AsyncQueue","Operation failed with retryable error: "+e),this._i.Bn(i),[3,3];case 3:return[2]}})})};return t.ii(i),n.promise}))},Uu.prototype.Ei=function(t){var i=this,e=this.ri.then(function(){return i.ci=!0,t().catch(function(t){throw i.ui=t,i.ci=!1,Ii("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return i.ci=!1,t})});return this.ri=e},Uu.prototype.Qn=function(t,e,n){var i=this;this.Ti(),-1<this.li.indexOf(t)&&(e=0);var r=Du.ei(this,t,e,n,function(t){return i.Ai(t)});return this.ai.push(r),r},Uu.prototype.Ti=function(){this.ui&&Ai()},Uu.prototype.Pi=function(){},Uu.prototype.Vi=function(){return f(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return[4,e=this.ri];case 1:t.sent(),t.label=2;case 2:if(e!==this.ri)return[3,0];t.label=3;case 3:return[2]}})})},Uu.prototype.pi=function(t){for(var e=0,n=this.ai;e<n.length;e++)if(n[e].$n===t)return!0;return!1},Uu.prototype.yi=function(i){var r=this;return this.Vi().then(function(){r.ai.sort(function(t,e){return t.Jn-e.Jn});for(var t=0,e=r.ai;t<e.length;t++){var n=e[t];if(n.jn(),"all"!==i&&n.$n===i)break}return r.Vi()})},Uu.prototype.gi=function(t){this.li.push(t)},Uu.prototype.Ai=function(t){var e=this.ai.indexOf(t);this.ai.splice(e,1)},Uu);function Uu(){var t=this;this.ri=Promise.resolve(),this.oi=Promise.resolve(),this.hi=!1,this.ai=[],this.ui=null,this.ci=!1,this.li=[],this._i=new _u(this,"async_queue_retry"),this.fi=function(){return t._i.Wn()};var e=Lu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.fi)}function Vu(t,e,n,i,r){this.Xn=t,this.$n=e,this.Jn=n,this.op=i,this.Zn=r,this.ti=new Eu,this.then=this.ti.promise.then.bind(this.ti.promise),this.ti.promise.catch(function(t){})}function Cu(t,e){if(Ii("AsyncQueue",e+": "+t),Ru(t))return new Gi(ji.UNAVAILABLE,e+": "+t);throw t}var xu=(Mu.Ci=function(t){return new Mu(t,Mu.Di,Mu.Fi)},Mu);function Mu(t,e,n){this.bi=t,this.vi=e,this.Si=n}xu.$i=-1,xu.Ni=1048576,xu.ki=41943040,xu.Di=10,xu.Fi=1e3,xu.Li=new xu(xu.ki,xu.Di,xu.Fi),xu.DISABLED=new xu(xu.$i,0,0);var qu=(Fu.prototype.start=function(){return Promise.resolve()},Fu.prototype.Hi=function(r){return f(this,void 0,void 0,function(){var e,m,n,i=this;return d(this,function(t){switch(t.label){case 0:return e=this.hn,m=this.Gi,[4,this.persistence.runTransaction("Handle user change","readonly",function(v){var g;return i.hn.Yi(v).next(function(t){return g=t,e=i.persistence.Bi(r),m=new fu(i.Ui,e,i.persistence.Ki()),e.Yi(v)}).next(function(t){for(var e=[],n=[],i=Lr(),r=0,o=g;r<o.length;r++){var s=o[r];e.push(s.batchId);for(var u=0,a=s.mutations;u<a.length;u++)var h=a[u],i=i.add(h.key)}for(var c=0,l=t;c<l.length;c++){var f=l[c];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var y=d[p];i=i.add(y.key)}}return m.dn(v,i).next(function(t){return{Xi:t,Ji:e,Zi:n}})})})];case 1:return n=t.sent(),[2,(this.hn=e,this.Gi=m,this.qi.zi(this.Gi),n)]}})})},Fu.prototype.tr=function(u){var a,h=this,c=Bi.now(),t=u.reduce(function(t,e){return t.add(e.key)},Lr());return this.persistence.runTransaction("Locally write mutations","readwrite",function(s){return h.Gi.dn(s,t).next(function(t){a=t;for(var e=[],n=0,i=u;n<i.length;n++){var r=i[n],o=r.Je(a.get(r.key));null!=o&&e.push(new ns(r.key,o,ws(o.proto.mapValue),Zo.exists(!0)))}return h.hn.er(s,c,e,u)})}).then(function(t){var e=t.Gs(a);return{batchId:t.batchId,sr:e}})},Fu.prototype.nr=function(i){var r=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=i.batch.keys(),n=r.Ui.ir({rr:!0});return r.or(t,i,n).next(function(){return n.apply(t)}).next(function(){return r.hn.hr(t)}).next(function(){return r.Gi.dn(t,e)})})},Fu.prototype.ar=function(t){var i=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.hn.ur(e,t).next(function(t){return Ni(null!==t),n=t.keys(),i.hn.cr(e,t)}).next(function(){return i.hn.hr(e)}).next(function(){return i.Gi.dn(e,n)})})},Fu.prototype.lr=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.hn.lr(t)})},Fu.prototype._r=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Wi._r(t)})},Fu.prototype.dr=function(a){var h=this,c=a.X,l=this.Oi;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var r=h.Ui.ir({rr:!0});l=h.Oi;var s=[];a.Qt.forEach(function(t,e){var n,i,r=l.get(e);r&&(s.push(h.Wi.wr(o,t.Jt,e).next(function(){return h.Wi.Tr(o,t.Yt,e)})),0<(n=t.resumeToken).K()&&(i=r.Z(n,c).J(o.Er),l=l.et(e,i),Fu.mr(r,i,t)&&s.push(h.Wi.Ir(o,i))))});var t,u=Ar,n=Lr();return a.jt.forEach(function(t,e){n=n.add(t)}),s.push(r.getEntries(o,n).next(function(i){a.jt.forEach(function(t,e){var n=i.get(t);e instanceof Ls&&e.version.isEqual(zi.min())?(r.Rr(t,c),u=u.et(t,e)):null==n||0<e.version.o(n.version)||0===e.version.o(n.version)&&n.hasPendingWrites?(r.Ar(e,c),u=u.et(t,e)):_i("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),a.Gt.has(t)&&s.push(h.persistence.Vr.Pr(o,t))})})),c.isEqual(zi.min())||(t=h.Wi._r(o).next(function(t){return h.Wi.pr(o,o.Er,c)}),s.push(t)),lu.nn(s).next(function(){return r.apply(o)}).next(function(){return h.Gi.wn(o,u)})}).then(function(t){return h.Oi=l,t})},Fu.mr=function(t,e,n){return Ni(0<e.resumeToken.K()),0===t.resumeToken.K()||e.X.I()-t.X.I()>=this.yr||0<n.Yt.size+n.Xt.size+n.Jt.size},Fu.prototype.gr=function(c){return f(this,void 0,void 0,function(){var e,n,i,r,o,s,u,a,h=this;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return lu.forEach(c,function(e){return lu.forEach(e.pn,function(t){return h.persistence.Vr.br(n,e.targetId,t)}).next(function(){return lu.forEach(e.yn,function(t){return h.persistence.Vr.vr(n,e.targetId,t)})})})})];case 1:return t.sent(),[3,3];case 2:if(!Ru(e=t.sent()))throw e;return _i("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,i=c;n<i.length;n++)r=i[n],o=r.targetId,r.fromCache||(s=this.Oi.get(o),u=s.X,a=s.tt(u),this.Oi=this.Oi.et(o,a));return[2]}})})},Fu.prototype.Sr=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.hn.Cr(t,e)})},Fu.prototype.Dr=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.Gi.un(t,e)})},Fu.prototype.Fr=function(i){var r=this;return this.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return r.Wi.$r(e,i).next(function(t){return t?(n=t,lu.resolve(n)):r.Wi.Nr(e).next(function(t){return n=new fr(i,t,0,e.Er),r.Wi.kr(e,n).next(function(){return n})})})}).then(function(t){var e=r.Oi.get(t.targetId);return(null===e||0<t.X.o(e.X))&&(r.Oi=r.Oi.et(t.targetId,t),r.xi.set(i,t.targetId)),t})},Fu.prototype.$r=function(t,e){var n=this.xi.get(e);return void 0!==n?lu.resolve(this.Oi.get(n)):this.Wi.$r(t,e)},Fu.prototype.Lr=function(t,e){var n=this,i=this.Oi.get(t),r=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",r,function(t){return e?lu.resolve():n.persistence.Vr.removeTarget(t,i)}).then(function(){n.Oi=n.Oi.remove(t),n.xi.delete(i.target)})},Fu.prototype.qr=function(t,n){var i=this,r=zi.min(),o=Lr();return this.persistence.runTransaction("Execute query","readonly",function(e){return i.$r(e,t.Ss()).next(function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,i.Wi.Or(e,t.targetId).next(function(t){o=t})}).next(function(){return i.qi.En(e,t,n?r:zi.min(),n?o:Lr())}).next(function(t){return{documents:t,xr:o}})})},Fu.prototype.or=function(t,r,o){var e=this,s=r.batch,n=s.keys(),u=lu.resolve();return n.forEach(function(i){u=u.next(function(){return o._n(t,i)}).next(function(t){var e=t,n=r.zs.get(i);Ni(null!==n),(!e||e.version.o(n)<0)&&(e=s.We(i,e,r))&&o.Ar(e,r.Ks)})}),u.next(function(){return e.hn.cr(t,s)})},Fu.prototype.Mr=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Br(t,n.Oi)})},Fu);function Fu(t,e,n){this.persistence=t,this.qi=e,this.Oi=new vr(Ri),this.xi=new Fi(su,uu),this.Mi=zi.min(),this.hn=t.Bi(n),this.Ui=t.Qi(),this.Wi=t.ji(),this.Gi=new fu(this.Ui,this.hn,this.persistence.Ki()),this.qi.zi(this.Gi)}function ju(e){return f(this,void 0,void 0,function(){return d(this,function(t){if(e.code!==ji.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;return _i("LocalStore","Unexpectedly lost primary lease"),[2]})})}qu.yr=3e8;var Gu=(Hu.prototype._=function(){return this.Ur._()},Hu.prototype.br=function(t,e){var n=new Bu(t,e);this.Ur=this.Ur.add(n),this.Wr=this.Wr.add(n)},Hu.prototype.Gr=function(t,e){var n=this;t.forEach(function(t){return n.br(t,e)})},Hu.prototype.vr=function(t,e){this.Kr(new Bu(t,e))},Hu.prototype.zr=function(t,e){var n=this;t.forEach(function(t){return n.vr(t,e)})},Hu.prototype.Hr=function(t){var e=this,n=ir.EMPTY,i=new Bu(n,t),r=new Bu(n,t+1),o=[];return this.Wr.vt([i,r],function(t){e.Kr(t),o.push(t.key)}),o},Hu.prototype.Yr=function(){var e=this;this.Ur.forEach(function(t){return e.Kr(t)})},Hu.prototype.Kr=function(t){this.Ur=this.Ur.delete(t),this.Wr=this.Wr.delete(t)},Hu.prototype.Xr=function(t){var e=ir.EMPTY,n=new Bu(e,t),i=new Bu(e,t+1),r=Lr();return this.Wr.vt([n,i],function(t){r=r.add(t.key)}),r},Hu.prototype.Jr=function(t){var e=new Bu(t,0),n=this.Ur.Ct(e);return null!==n&&t.isEqual(n.key)},Hu),Bu=(zu.Qr=function(t,e){return ir.P(t.key,e.key)||Ri(t.Zr,e.Zr)},zu.jr=function(t,e){return Ri(t.Zr,e.Zr)||ir.P(t.key,e.key)},zu);function zu(t,e){this.key=t,this.Zr=e}function Hu(){this.Ur=new Ir(Bu.Qr),this.Wr=new Ir(Bu.jr)}function Wu(t,e){if(0!==e.length)throw new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+ca(e.length,"argument")+".")}function Xu(t,e,n){if(e.length!==n)throw new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() requires "+ca(n,"argument")+", but was called with "+ca(e.length,"argument")+".")}function Qu(t,e,n){if(e.length<n)throw new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() requires at least "+ca(n,"argument")+", but was called with "+ca(e.length,"argument")+".")}function Ku(t,e,n,i){if(e.length<n||e.length>i)throw new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+i+" arguments, but was called with "+ca(e.length,"argument")+".")}function Yu(t,e,n,i){na(t,e,ha(n)+" argument",i)}function $u(t,e,n,i){void 0!==i&&Yu(t,e,n,i)}function Ju(t,e,n,i){na(t,e,n+" option",i)}function Zu(t,e,n,i){void 0!==i&&Ju(t,e,n,i)}function ta(t,e,n,i,a){void 0!==i&&function(t,e,n){for(var i=[],r=0,o=a;r<o.length;r++){var s=o[r];if(s===n)return;i.push(ra(s))}var u=ra(n);throw new Gi(ji.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+i.join(", "))}(t,n,i)}function ea(t,e,n,i){if(!e.some(function(t){return t===i}))throw new Gi(ji.INVALID_ARGUMENT,"Invalid value "+ra(i)+" provided to function "+t+"() for its "+ha(n)+" argument. Acceptable values: "+e.join(", "));return i}function na(t,e,n,i){if(!("object"===e?ia(i):"non-empty string"===e?"string"==typeof i&&""!==i:typeof i===e)){var r=ra(i);throw new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+r)}}function ia(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function ra(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Ai();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function oa(t,e,n){if(void 0===n)throw new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+ha(e)+" argument, but it was undefined.")}function sa(n,t,i){Ci(t,function(t,e){if(i.indexOf(t)<0)throw new Gi(ji.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+i.join(", "))})}function ua(t,e,n,i){var r=ra(i);return new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() requires its "+ha(n)+" argument to be a "+e+", but it was: "+r)}function aa(t,e,n){if(n<=0)throw new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() requires its "+ha(e)+" argument to be a positive number, but it was: "+n+".")}function ha(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function ca(t,e){return t+" "+e+(1===t?"":"s")}function la(){if("undefined"==typeof Uint8Array)throw new Gi(ji.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function fa(){if("undefined"==typeof atob)throw new Gi(ji.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function pa(t){!function(){if(!(t instanceof Array)||t.length<1)throw new Gi(ji.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var e=0;e<t.length;++e)if(Yu("FieldPath","string",e,t[e]),0===t[e].length)throw new Gi(ji.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.eo=new er(t)}var da,ya=(ma.fromBase64String=function(t){Xu("Blob.fromBase64String",arguments,1),Yu("Blob.fromBase64String","string",1,t),fa();try{return new ma(ur.fromBase64String(t))}catch(t){throw new Gi(ji.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},ma.fromUint8Array=function(t){if(Xu("Blob.fromUint8Array",arguments,1),la(),!(t instanceof Uint8Array))throw ua("Blob.fromUint8Array","Uint8Array",1,t);return new ma(ur.fromUint8Array(t))},ma.prototype.toBase64=function(){return Xu("Blob.toBase64",arguments,0),fa(),this.to.toBase64()},ma.prototype.toUint8Array=function(){return Xu("Blob.toUint8Array",arguments,0),la(),this.to.toUint8Array()},ma.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},ma.prototype.isEqual=function(t){return this.to.isEqual(t.to)},ma),va=(n(ga,da=pa),ga.documentId=function(){return ga.so},ga.prototype.isEqual=function(t){if(!(t instanceof ga))throw ua("isEqual","FieldPath",1,t);return this.eo.isEqual(t.eo)},ga);function ga(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return da.call(this,t)||this}function ma(t){fa(),this.to=t}va.so=new va(er.O().$());var wa,ba,Ea,_a,Ia,Ta,Aa,Na=new RegExp("[~\\*/\\[\\]]"),Pa=function(){this.no=this},Sa=(n(Ba,Aa=Pa),Ba.prototype.ro=function(t){if(2!==t.oo)throw 1===t.oo?t.ho(this.io+"() can only appear at the top level of your update data"):t.ho(this.io+"() cannot be used with set() unless you pass {merge:true}");return t.xe.push(t.path),null},Ba.prototype.isEqual=function(t){return t instanceof Ba},Ba),Oa=(n(Ga,Ta=Pa),Ga.prototype.ro=function(t){return new Jo(t.path,Co.instance)},Ga.prototype.isEqual=function(t){return t instanceof Ga},Ga),Ra=(n(ja,Ia=Pa),ja.prototype.ro=function(t){var e=new Ja({oo:3,methodName:this.io,uo:!0},t.s,t.serializer,t.ignoreUndefinedProperties),n=this.ao.map(function(t){return nh(t,e)}),i=new Mo(n);return new Jo(t.path,i)},ja.prototype.isEqual=function(t){return this===t},ja),La=(n(Fa,_a=Pa),Fa.prototype.ro=function(t){var e=new Ja({oo:3,methodName:this.io,uo:!0},t.s,t.serializer,t.ignoreUndefinedProperties),n=this.ao.map(function(t){return nh(t,e)}),i=new qo(n);return new Jo(t.path,i)},Fa.prototype.isEqual=function(t){return this===t},Fa),Da=(n(qa,Ea=Pa),qa.prototype.ro=function(t){var e=new Ja({oo:3,methodName:this.io},t.s,t.serializer,t.ignoreUndefinedProperties),n=nh(this.co,e),i=new Fo(t.serializer,n);return new Jo(t.path,i)},qa.prototype.isEqual=function(t){return this===t},qa),ka=(n(Ma,ba=Pa),Ma.delete=function(){return Wu("FieldValue.delete",arguments),new Ua(new Sa("FieldValue.delete"))},Ma.serverTimestamp=function(){return Wu("FieldValue.serverTimestamp",arguments),new Ua(new Oa("FieldValue.serverTimestamp"))},Ma.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Qu("FieldValue.arrayUnion",arguments,1),new Ua(new Ra("FieldValue.arrayUnion",t))},Ma.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Qu("FieldValue.arrayRemove",arguments,1),new Ua(new La("FieldValue.arrayRemove",t))},Ma.increment=function(t){return Yu("FieldValue.increment","number",1,t),Xu("FieldValue.increment",arguments,1),new Ua(new Da("FieldValue.increment",t))},Ma),Ua=(n(xa,wa=ka),xa.prototype.ro=function(t){return this.no.ro(t)},xa.prototype.isEqual=function(t){return t instanceof xa&&this.no.isEqual(t.no)},xa),Va=(Object.defineProperty(Ca.prototype,"latitude",{get:function(){return this.lo},enumerable:!0,configurable:!0}),Object.defineProperty(Ca.prototype,"longitude",{get:function(){return this._o},enumerable:!0,configurable:!0}),Ca.prototype.isEqual=function(t){return this.lo===t.lo&&this._o===t._o},Ca.prototype.T=function(t){return Ri(this.lo,t.lo)||Ri(this._o,t._o)},Ca);function Ca(t,e){if(Xu("GeoPoint",arguments,2),Yu("GeoPoint","number",1,t),Yu("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new Gi(ji.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Gi(ji.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.lo=t,this._o=e}function xa(t){var e=this;return(e=wa.call(this)||this).no=t,e.io=t.io,e}function Ma(){return null!==ba&&ba.apply(this,arguments)||this}function qa(t,e){var n=this;return(n=Ea.call(this)||this).io=t,n.co=e,n}function Fa(t,e){var n=this;return(n=_a.call(this)||this).io=t,n.ao=e,n}function ja(t,e){var n=this;return(n=Ia.call(this)||this).io=t,n.ao=e,n}function Ga(t){var e=this;return(e=Ta.call(this)||this).io=t,e}function Ba(t){var e=this;return(e=Aa.call(this)||this).io=t,e}function za(t){return new wo(t,!0)}var Ha=/^__.*__$/,Wa=function(t,e,n){this.fo=t,this.do=e,this.wo=n},Xa=(Ya.prototype.To=function(t,e){var n=[];return null!==this.xe?n.push(new ns(t,this.data,this.xe,e)):n.push(new es(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new is(t,this.fieldTransforms)),n},Ya),Qa=(Ka.prototype.To=function(t,e){var n=[new ns(t,this.data,this.xe,e)];return 0<this.fieldTransforms.length&&n.push(new is(t,this.fieldTransforms)),n},Ka);function Ka(t,e,n){this.data=t,this.xe=e,this.fieldTransforms=n}function Ya(t,e,n){this.data=t,this.xe=e,this.fieldTransforms=n}function $a(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Ai()}}var Ja=(Object.defineProperty(eh.prototype,"path",{get:function(){return this.settings.path},enumerable:!0,configurable:!0}),Object.defineProperty(eh.prototype,"oo",{get:function(){return this.settings.oo},enumerable:!0,configurable:!0}),eh.prototype.mo=function(t){return new eh(Object.assign(Object.assign({},this.settings),t),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.xe)},eh.prototype.Io=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.mo({path:n,uo:!1});return i.Ro(t),i},eh.prototype.Ao=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.mo({path:n,uo:!1});return i.Eo(),i},eh.prototype.Po=function(t){return this.mo({path:void 0,uo:!0})},eh.prototype.ho=function(t){var e=!this.path||this.path._()?"":" (found in field "+this.path.toString()+")";return new Gi(ji.INVALID_ARGUMENT,"Function "+this.settings.methodName+"() called with invalid data. "+t+e)},eh.prototype.contains=function(e){return void 0!==this.xe.find(function(t){return e.C(t)})||void 0!==this.fieldTransforms.find(function(t){return e.C(t.field)})},eh.prototype.Eo=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Ro(this.path.get(t))},eh.prototype.Ro=function(t){if(0===t.length)throw this.ho("Document fields must not be empty");if($a(this.oo)&&Ha.test(t))throw this.ho('Document fields cannot begin and end with "__"')},eh),Za=(th.prototype.Vo=function(t,e,n){void 0===n&&(n={});var i=this.po(n.merge||n.mergeFields?2:0,t);oh("Data must be an object, but it was:",i,e);var r,o,s=ih(e,i);if(n.merge)r=new $o(i.xe),o=i.fieldTransforms;else if(n.mergeFields){for(var u=[],a=0,h=n.mergeFields;a<h.length;a++){var c=h[a],l=void 0;if(c instanceof pa)l=c.eo;else{if("string"!=typeof c)throw Ai();l=uh(t,c)}if(!i.contains(l))throw new Gi(ji.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");ah(u,l)||u.push(l)}r=new $o(u),o=i.fieldTransforms.filter(function(t){return r.Ge(t.field)})}else r=null,o=i.fieldTransforms;return new Xa(new ss(s),r,o)},th.prototype.yo=function(o,t){var s=this.po(1,o);oh("Data must be an object, but it was:",s,t);var u=[],a=new us;Ci(t,function(t,e){var n,i=uh(o,t),r=s.Ao(i);e instanceof Pa&&e.no instanceof Sa?u.push(i):null!=(n=nh(e,r))&&(u.push(i),a.set(i,n))});var e=new $o(u);return new Qa(a.es(),e,s.fieldTransforms)},th.prototype.bo=function(t,e,n,i){var r=this.po(1,t),o=[sh(t,e)],s=[n];if(i.length%2!=0)throw new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var u=0;u<i.length;u+=2)o.push(sh(t,i[u])),s.push(i[u+1]);for(var a,h,c,l,f=[],p=new us,d=o.length-1;0<=d;--d){ah(f,o[d])||(a=o[d],h=s[d],c=r.Ao(a),h instanceof Pa&&h.no instanceof Sa?f.push(a):null!=(l=nh(h,c))&&(f.push(a),p.set(a,l)))}var y=new $o(f);return new Qa(p.es(),y,r.fieldTransforms)},th.prototype.po=function(t,e){return new Ja({oo:t,methodName:e,path:er.k,uo:!1},this.s,this.serializer,this.ignoreUndefinedProperties)},th.prototype.vo=function(t,e,n){return void 0===n&&(n=!1),nh(e,this.po(n?4:3,t))},th);function th(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||za(t)}function eh(t,e,n,i,r,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Eo(),this.fieldTransforms=r||[],this.xe=o||[]}function nh(s,t){if(rh(s))return oh("Unsupported field value:",t,s),ih(s,t);if(s instanceof Pa)return function(t,e){if(!$a(e.oo))throw e.ho(t.io+"() can only be used with update() and set()");if(!e.path)throw e.ho(t.io+"() is not currently supported inside arrays");var n=t.ro(e);n&&e.fieldTransforms.push(n)}(s,t),null;if(t.path&&t.xe.push(t.path),s instanceof Array){if(t.settings.uo&&4!==t.oo)throw t.ho("Nested arrays are not supported");return function(t){for(var e=[],n=0,i=0,r=s;i<r.length;i++){var o=nh(r[i],t.Po(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return n=e.serializer,"number"==typeof(r=i=t)&&Number.isInteger(r)&&!sr(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER?bo(i):Eo(n,i);var n,i,r;if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var o=Bi.fromDate(t);return{timestampValue:_o(e.serializer,o)}}if(t instanceof Bi){var s=new Bi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:_o(e.serializer,s)}}if(t instanceof Va)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ya)return{bytesValue:Io(e.serializer,t)};if(t instanceof Wa){var u=e.s,a=t.fo;if(!a.isEqual(u))throw e.ho("Document reference is for database "+a.projectId+"/"+a.database+" but should be for database "+u.projectId+"/"+u.database);return{referenceValue:No(t.fo||e.s,t.do.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.ho("Unsupported field value: "+ra(t))}(s,t)}function ih(t,i){var r={};return xi(t)?i.path&&0<i.path.length&&i.xe.push(i.path):Ci(t,function(t,e){var n=nh(e,i.Io(t));null!=n&&(r[t]=n)}),{mapValue:{fields:r}}}function rh(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Bi||t instanceof Va||t instanceof ya||t instanceof Wa||t instanceof Pa)}function oh(t,e,n){if(!rh(n)||!ia(n)){var i=ra(n);throw"an object"===i?e.ho(t+" a custom object"):e.ho(t+" "+i)}}function sh(t,e){if(e instanceof pa)return e.eo;if("string"==typeof e)return uh(t,e);throw new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function uh(t,e){try{return function(e){if(0<=e.search(Na))throw new Gi(ji.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(va.bind.apply(va,y([void 0],e.split("."))))}catch(t){throw new Gi(ji.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).eo}catch(e){var n=e instanceof Error?e.message:e.toString();throw new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function ah(t,e){return t.some(function(t){return t.isEqual(e)})}var hh=(ch.prototype.So=function(){return null!=this.uid},ch.prototype.Co=function(){return this.So()?"uid:"+this.uid:"anonymous-user"},ch.prototype.isEqual=function(t){return t.uid===this.uid},ch);function ch(t){this.uid=t}function lh(t,e){this.user=e,this.type="OAuth",this.$o={},this.$o.Authorization="Bearer "+t}function fh(t){this.key=t}function ph(t){this.key=t}function dh(t,e,n){this.query=t,this.targetId=e,this.view=n}function yh(t){this.key=t,this.Ru=!1}function vh(){this.Ju=void 0,this.Zu=[]}hh.UNAUTHENTICATED=new hh(null),hh.Do=new hh("google-credentials-uid"),hh.Fo=new hh("first-party-uid");var gh,mh,wh,bh,Eh=(ac.prototype.getToken=function(){return Promise.resolve(null)},ac.prototype.ko=function(){},ac.prototype.Lo=function(t){(this.No=t)(hh.UNAUTHENTICATED)},ac.prototype.qo=function(){this.No=null},ac),_h=(uc.prototype.getToken=function(){var e=this,n=this.Mo,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.Mo!==n?(_i("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Ni("string"==typeof t.accessToken),new lh(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},uc.prototype.ko=function(){this.forceRefresh=!0},uc.prototype.Lo=function(t){this.No=t,this.xo&&t(this.currentUser)},uc.prototype.qo=function(){this.auth&&this.auth.removeAuthTokenListener(this.Oo),this.Oo=null,this.No=null},uc.prototype.Bo=function(){var t=this.auth&&this.auth.getUid();return Ni(null===t||"string"==typeof t),new hh(t)},uc),Ih=(Object.defineProperty(sc.prototype,"$o",{get:function(){var t={"X-Goog-AuthUser":this.Qo},e=this.Uo.auth.Wo([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),sc),Th=(oc.prototype.getToken=function(){return Promise.resolve(new Ih(this.Uo,this.Qo))},oc.prototype.Lo=function(t){t(hh.Fo)},oc.prototype.qo=function(){},oc.prototype.ko=function(){},oc),Ah=(rc.prototype.Yo=function(){return 1===this.state||2===this.state||4===this.state},rc.prototype.Xo=function(){return 2===this.state},rc.prototype.start=function(){3!==this.state?this.auth():this.Jo()},rc.prototype.stop=function(){return f(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.Yo()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},rc.prototype.Zo=function(){this.state=0,this._i.reset()},rc.prototype.th=function(){var t=this;this.Xo()&&null===this.Ho&&(this.Ho=this.Fn.Qn(this.jo,6e4,function(){return t.eh()}))},rc.prototype.sh=function(t){this.nh(),this.stream.send(t)},rc.prototype.eh=function(){return f(this,void 0,void 0,function(){return d(this,function(t){return this.Xo()?[2,this.close(0)]:[2]})})},rc.prototype.nh=function(){this.Ho&&(this.Ho.cancel(),this.Ho=null)},rc.prototype.close=function(e,n){return f(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.nh(),this._i.cancel(),this.zo++,3!==e?this._i.reset():n&&n.code===ji.RESOURCE_EXHAUSTED?(Ii(n.toString()),Ii("Using maximum backoff delay to prevent overloading the backend."),this._i.Mn()):n&&n.code===ji.UNAUTHENTICATED&&this.Ko.ko(),null!==this.stream&&(this.ih(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.rh(n)];case 1:return t.sent(),[2]}})})},rc.prototype.ih=function(){},rc.prototype.auth=function(){var n=this;this.state=1;var t=this.oh(this.zo),e=this.zo;this.Ko.getToken().then(function(t){n.zo===e&&n.hh(t)},function(e){t(function(){var t=new Gi(ji.UNKNOWN,"Fetching auth token failed: "+e.message);return n.ah(t)})})},rc.prototype.hh=function(t){var e=this,n=this.oh(this.zo);this.stream=this.uh(t),this.stream.lh(function(){n(function(){return e.state=2,e.listener.lh()})}),this.stream.rh(function(t){n(function(){return e.ah(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},rc.prototype.Jo=function(){var t=this;this.state=4,this._i.Bn(function(){return f(t,void 0,void 0,function(){return d(this,function(t){return this.state=0,this.start(),[2]})})})},rc.prototype.ah=function(t){return _i("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},rc.prototype.oh=function(e){var n=this;return function(t){n.Fn.ii(function(){return n.zo===e?t():(_i("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},rc),Nh=(n(ic,wh=Ah),ic.prototype.uh=function(t){return this.Go._h("Listen",t)},ic.prototype.onMessage=function(t){this._i.reset();var e=function(t,e){var n,i,r;if("targetChange"in e){e.targetChange;var o="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Ai(),s=e.targetChange.targetIds||[],u=To(t,e.targetChange.resumeToken),a=e.targetChange.cause,h=new Vr(o,s,u,a&&(i=void 0===(n=a).code?ji.UNKNOWN:yr(n.code),new Gi(i,n.message||""))||null)}else if("documentChange"in e){e.documentChange;var c=e.documentChange;c.document,c.document.name,c.document.updateTime;var l=So(t,c.document.name),f=Ao(c.document.updateTime),p=new ss({mapValue:{fields:c.document.fields}}),d=new Rs(l,f,p,{});h=new kr(c.targetIds||[],c.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var v=So(t,y.document),g=y.readTime?Ao(y.readTime):zi.min(),m=new Ls(v,g);h=new kr([],y.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){e.documentRemove;var w=e.documentRemove;w.document;var b=So(t,w.document);h=new kr([],w.removedTargetIds||[],b,null)}else{if(!("filter"in e))return Ai();e.filter;var E=e.filter;E.targetId;var _=new hr(E.count||0);h=new Ur(E.targetId,_)}return h}(this.serializer,t),n=function(t){if(!("targetChange"in t))return zi.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?zi.min():Ao(e.readTime)}(t);return this.listener.fh(e,n)},ic.prototype.dh=function(t){var e,n,i,r,o={};o.database=Ro(this.serializer),o.addTarget=(e=this.serializer,(i=au(r=(n=t).target)?{documents:{documents:[Oo(e,r.path)]}}:{query:function(t,e){var n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=Oo(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Oo(t,i.g()),n.structuredQuery.from=[{collectionId:i.S()}]);var r=function(t){if(0!==t.length){var e=t.map(function(t){return t instanceof Us?function(t){if("=="===t.op){if(yo(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NAN"}};if(po(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:Uo(t.field),op:(e=t.op,mo[e]),value:t.value}};var e}(t):Ai()});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);r&&(n.structuredQuery.where=r);var o=function(t){if(0!==t.length)return t.map(function(t){return{field:Uo((e=t).field),direction:(n=e.dir,go[n])};var e,n})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,u=(s=e.limit,t.Oe||or(s)?s:{value:s});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=ko(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ko(e.endAt)),n}(e,r)}).targetId=n.targetId,0<n.resumeToken.K()&&(i.resumeToken=Io(e,n.resumeToken)),i);var s,u,a=(this.serializer,s=t,null==(u=function(){switch(s.Y){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ai()}}())?null:{"goog-listen-tags":u});a&&(o.labels=a),this.sh(o)},ic.prototype.wh=function(t){var e={};e.database=Ro(this.serializer),e.removeTarget=t,this.sh(e)},ic),Ph=(n(nc,mh=Ah),Object.defineProperty(nc.prototype,"Eh",{get:function(){return this.Th},enumerable:!0,configurable:!0}),nc.prototype.start=function(){this.Th=!1,this.lastStreamToken=ur.H,mh.prototype.start.call(this)},nc.prototype.ih=function(){this.Th&&this.mh([])},nc.prototype.uh=function(t){return this.Go._h("Write",t)},nc.prototype.onMessage=function(t){if(Ni(!!t.streamToken),this.lastStreamToken=To(this.serializer,t.streamToken),this.Th){this._i.reset();var e=(i=t.writeResults,r=t.commitTime,i&&0<i.length?(Ni(void 0!==r),i.map(function(t){return function(t,e){var n=t.updateTime?Ao(t.updateTime):Ao(e);n.isEqual(zi.min())&&(n=Ao(e));var i=null;return t.transformResults&&0<t.transformResults.length&&(i=t.transformResults),new Ho(n,i)}(t,r)})):[]),n=Ao(t.commitTime);return this.listener.Ih(n,e)}var i,r;return Ni(!t.writeResults||0===t.writeResults.length),this.Th=!0,this.listener.Rh()},nc.prototype.Ah=function(){var t={};t.database=Ro(this.serializer),this.sh(t)},nc.prototype.mh=function(t){var e=this,n={streamToken:Io(this.serializer,this.lastStreamToken),writes:t.map(function(t){return Do(e.serializer,t)})};this.sh(n)},nc),Sh=(n(ec,gh=function(){this.Ph=void 0}),ec.prototype.ph=function(){if(this.Vh)throw new Gi(ji.FAILED_PRECONDITION,"The client has already been terminated.")},ec.prototype.yh=function(e,n){var i=this;return this.ph(),this.credentials.getToken().then(function(t){return i.Go.yh(e,n,t)}).catch(function(t){throw t.code===ji.UNAUTHENTICATED&&i.credentials.ko(),t})},ec.prototype.gh=function(e,n){var i=this;return this.ph(),this.credentials.getToken().then(function(t){return i.Go.gh(e,n,t)}).catch(function(t){throw t.code===ji.UNAUTHENTICATED&&i.credentials.ko(),t})},ec),Oh=(tc.prototype.Fh=function(i){return f(this,void 0,void 0,function(){var e,n=this;return d(this,function(t){switch(t.label){case 0:if(this.$h(),0<this.mutations.length)throw new Gi(ji.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,u){return f(this,void 0,void 0,function(){var r,e,n,o,i;return d(this,function(t){switch(t.label){case 0:return e={database:Ro((r=s).serializer),documents:u.map(function(t){return Po(r.serializer,t)})},[4,r.gh("BatchGetDocuments",e)];case 1:return n=t.sent(),o=new Map,n.forEach(function(t){var e,n,i=(e=r.serializer,"found"in(n=t)?function(t,e){Ni(!!e.found),e.found.name,e.found.updateTime;var n=So(t,e.found.name),i=Ao(e.found.updateTime),r=new ss({mapValue:{fields:e.found.fields}});return new Rs(n,i,r,{})}(e,n):"missing"in n?function(t,e){Ni(!!e.missing),Ni(!!e.readTime);var n=So(t,e.missing),i=Ao(e.readTime);return new Ls(n,i)}(e,n):Ai());o.set(i.key.toString(),i)}),i=[],[2,(u.forEach(function(t){var e=o.get(t.toString());Ni(!!e),i.push(e)}),i)]}})})}(this.bh,i)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof Ls||t instanceof Rs?n.Nh(t):Ai()}),e)]}})})},tc.prototype.set=function(t,e){this.write(e.To(t,this.Ue(t))),this.Dh.add(t)},tc.prototype.update=function(t,e){try{this.write(e.To(t,this.kh(t)))}catch(t){this.Ch=t}this.Dh.add(t)},tc.prototype.delete=function(t){this.write([new rs(t,this.Ue(t))]),this.Dh.add(t)},tc.prototype.commit=function(){return f(this,void 0,void 0,function(){var e,i=this;return d(this,function(t){switch(t.label){case 0:if(this.$h(),this.Ch)throw this.Ch;return e=this.vh,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){var n=new ir(Wi.N(e));i.mutations.push(new os(n,i.Ue(n)))}),[4,function(i,r){return f(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return n={database:Ro((e=i).serializer),writes:r.map(function(t){return Do(e.serializer,t)})},[4,e.yh("Commit",n)];case 1:return t.sent(),[2]}})})}(this.bh,this.mutations)];case 1:return t.sent(),this.Sh=!0,[2]}})})},tc.prototype.Nh=function(t){var e;if(t instanceof Rs)e=t.version;else{if(!(t instanceof Ls))throw Ai();e=zi.min()}var n=this.vh.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Gi(ji.ABORTED,"Document version changed between two reads.")}else this.vh.set(t.key.toString(),e)},tc.prototype.Ue=function(t){var e=this.vh.get(t.toString());return!this.Dh.has(t)&&e?Zo.updateTime(e):Zo.Ke()},tc.prototype.kh=function(t){var e=this.vh.get(t.toString());if(this.Dh.has(t)||!e)return Zo.exists(!0);if(e.isEqual(zi.min()))throw new Gi(ji.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zo.updateTime(e)},tc.prototype.write=function(t){this.$h(),this.mutations=this.mutations.concat(t)},tc.prototype.$h=function(){},tc),Rh=(Zh.prototype.Mh=function(){var t=this;0===this.qh&&(this.Bh("Unknown"),this.Oh=this.Xn.Qn("online_state_timeout",1e4,function(){return t.Oh=null,t.Uh("Backend didn't respond within 10 seconds."),t.Bh("Offline"),Promise.resolve()}))},Zh.prototype.Qh=function(t){"Online"===this.state?this.Bh("Unknown"):(this.qh++,1<=this.qh&&(this.Wh(),this.Uh("Connection failed 1 times. Most recent error: "+t.toString()),this.Bh("Offline")))},Zh.prototype.set=function(t){this.Wh(),this.qh=0,"Online"===t&&(this.xh=!1),this.Bh(t)},Zh.prototype.Bh=function(t){t!==this.state&&(this.state=t,this.Lh(t))},Zh.prototype.Uh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.xh?(Ii(e),this.xh=!1):_i("OnlineStateTracker",e)},Zh.prototype.Wh=function(){null!==this.Oh&&(this.Oh.cancel(),this.Oh=null)},Zh),Lh=(Jh.prototype.start=function(){return this.enableNetwork()},Jh.prototype.enableNetwork=function(){return this.Hh.delete(0),this.ua()},Jh.prototype.ua=function(){return f(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.Jh()?(this.ca()?this.la():this.ta.set("Unknown"),[4,this._a()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Jh.prototype.disableNetwork=function(){return f(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.Hh.add(0),[4,this.fa()];case 1:return t.sent(),this.ta.set("Offline"),[2]}})})},Jh.prototype.fa=function(){return f(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return[4,this.ra.stop()];case 1:return t.sent(),[4,this.ea.stop()];case 2:return t.sent(),0<this.Gh.length&&(_i("RemoteStore","Stopping write stream with "+this.Gh.length+" pending writes"),this.Gh=[]),this.da(),[2]}})})},Jh.prototype.wa=function(){return f(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return _i("RemoteStore","RemoteStore shutting down."),this.Hh.add(5),[4,this.fa()];case 1:return t.sent(),this.Yh.wa(),this.ta.set("Unknown"),[2]}})})},Jh.prototype.listen=function(t){this.Kh.has(t.targetId)||(this.Kh.set(t.targetId,t),this.ca()?this.la():this.ea.Xo()&&this.Ta(t))},Jh.prototype.Ea=function(t){this.Kh.delete(t),this.ea.Xo()&&this.ma(t),0===this.Kh.size&&(this.ea.Xo()?this.ea.th():this.Jh()&&this.ta.set("Unknown"))},Jh.prototype.qe=function(t){return this.Kh.get(t)||null},Jh.prototype.Le=function(t){return this.Ia.Le(t)},Jh.prototype.Ta=function(t){this.zh.de(t.targetId),this.ea.dh(t)},Jh.prototype.ma=function(t){this.zh.de(t),this.ea.wh(t)},Jh.prototype.la=function(){this.zh=new Gr(this),this.ea.start(),this.ta.Mh()},Jh.prototype.ca=function(){return this.Jh()&&!this.ea.Yo()&&0<this.Kh.size},Jh.prototype.Jh=function(){return 0===this.Hh.size},Jh.prototype.da=function(){this.zh=null},Jh.prototype.sa=function(){return f(this,void 0,void 0,function(){var n=this;return d(this,function(t){return this.Kh.forEach(function(t,e){n.Ta(t)}),[2]})})},Jh.prototype.na=function(e){return f(this,void 0,void 0,function(){return d(this,function(t){return this.da(),this.ca()?(this.ta.Qh(e),this.la()):this.ta.set("Unknown"),[2]})})},Jh.prototype.ia=function(r,o){return f(this,void 0,void 0,function(){var e,n,i;return d(this,function(t){switch(t.label){case 0:if(this.ta.set("Online"),!(r instanceof Vr&&2===r.state&&r.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,this.Ra(r)];case 2:return t.sent(),[3,5];case 3:return e=t.sent(),_i("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),e),[4,this.Aa(e)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(r instanceof kr?this.zh.Pe(r):r instanceof Ur?this.zh.Ce(r):this.zh.ye(r),o.isEqual(zi.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,this.jh._r()];case 8:return n=t.sent(),0<=o.o(n)?[4,this.Pa(o)]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return _i("RemoteStore","Failed to raise snapshot:",i=t.sent()),[4,this.Aa(i)];case 12:return t.sent(),[3,13];case 13:return[2]}})})},Jh.prototype.Aa=function(n,i){return f(this,void 0,void 0,function(){var e=this;return d(this,function(t){switch(t.label){case 0:if(!Ru(n))throw n;return this.Hh.add(1),[4,this.fa()];case 1:return t.sent(),this.ta.set("Offline"),i=i||function(){return e.jh._r()},this.Xn.Ri(function(){return f(e,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return _i("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),this.Hh.delete(1),[4,this.ua()];case 2:return t.sent(),[2]}})})}),[2]}})})},Jh.prototype.Va=function(e){var n=this;return e().catch(function(t){return n.Aa(t,e)})},Jh.prototype.Pa=function(i){var r=this,t=this.zh.$e(i);return t.Qt.forEach(function(t,e){var n;0<t.resumeToken.K()&&((n=r.Kh.get(e))&&r.Kh.set(e,n.Z(t.resumeToken,i)))}),t.Wt.forEach(function(t){var e,n=r.Kh.get(t);n&&(r.Kh.set(t,n.Z(ur.H,n.X)),r.ma(t),e=new fr(n.target,t,1,n.sequenceNumber),r.Ta(e))}),this.Ia.dr(t)},Jh.prototype.Ra=function(o){return f(this,void 0,void 0,function(){var e,n,i,r;return d(this,function(t){switch(t.label){case 0:e=o.cause,n=0,i=o.targetIds,t.label=1;case 1:return n<i.length?(r=i[n],this.Kh.has(r)?[4,this.Ia.pa(r,e)]:[3,3]):[3,5];case 2:t.sent(),this.Kh.delete(r),this.zh.removeTarget(r),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})},Jh.prototype._a=function(){return f(this,void 0,void 0,function(){var e,n,i;return d(this,function(t){switch(t.label){case 0:e=0<this.Gh.length?this.Gh[this.Gh.length-1].batchId:-1,t.label=1;case 1:if(!this.ya())return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,this.jh.Sr(e)];case 3:return null===(n=t.sent())?(0===this.Gh.length&&this.ra.th(),[3,7]):(e=n.batchId,this.ga(n),[3,6]);case 4:return i=t.sent(),[4,this.Aa(i)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return this.ba()&&this.va(),[2]}})})},Jh.prototype.ya=function(){return this.Jh()&&this.Gh.length<10},Jh.prototype.Sa=function(){return this.Gh.length},Jh.prototype.ga=function(t){this.Gh.push(t),this.ra.Xo()&&this.ra.Eh&&this.ra.mh(t.mutations)},Jh.prototype.ba=function(){return this.Jh()&&!this.ra.Yo()&&0<this.Gh.length},Jh.prototype.va=function(){this.ra.start()},Jh.prototype.oa=function(){return f(this,void 0,void 0,function(){return d(this,function(t){return this.ra.Ah(),[2]})})},Jh.prototype.aa=function(){return f(this,void 0,void 0,function(){var e,n,i;return d(this,function(t){for(e=0,n=this.Gh;e<n.length;e++)i=n[e],this.ra.mh(i.mutations);return[2]})})},Jh.prototype.Ih=function(r,o){return f(this,void 0,void 0,function(){var e,n,i=this;return d(this,function(t){switch(t.label){case 0:return e=this.Gh.shift(),n=cu.from(e,r,o),[4,this.Va(function(){return i.Ia.Ca(n)})];case 1:return t.sent(),[4,this._a()];case 2:return t.sent(),[2]}})})},Jh.prototype.ha=function(e){return f(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return e&&this.ra.Eh?[4,this.Da(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.ba()&&this.va(),[2]}})})},Jh.prototype.Da=function(r){return f(this,void 0,void 0,function(){var e,n,i=this;return d(this,function(t){switch(t.label){case 0:return dr(n=r.code)&&n!==ji.ABORTED?(e=this.Gh.shift(),this.ra.Zo(),[4,this.Va(function(){return i.Ia.Fa(e.batchId,r)})]):[3,3];case 1:return t.sent(),[4,this._a()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},Jh.prototype.$a=function(){return new Oh(this.bh)},Jh.prototype.Zh=function(){return f(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.Hh.add(4),[4,this.fa()];case 1:return t.sent(),this.ta.set("Unknown"),this.Hh.delete(4),[4,this.ua()];case 2:return t.sent(),[2]}})})},Jh.prototype.Na=function(e){return f(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.Xn.Pi(),_i("RemoteStore","RemoteStore received new credentials"),this.Hh.add(3),[4,this.fa()];case 1:return t.sent(),this.ta.set("Unknown"),[4,this.Ia.Na(e)];case 2:return t.sent(),this.Hh.delete(3),[4,this.ua()];case 3:return t.sent(),[2]}})})},Jh.prototype.ka=function(e){return f(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return e?(this.Hh.delete(2),[4,this.ua()]):[3,2];case 1:return t.sent(),[3,5];case 2:return e?[3,4]:(this.Hh.add(2),[4,this.fa()]);case 3:t.sent(),this.ta.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})},Jh),Dh=($h.prototype.La=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},$h.prototype.qa=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},$h.prototype.Oa=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},$h),kh=(Yh.prototype.Ba=function(t){},Yh.prototype.Ua=function(t,e,n){},Yh.prototype.Qa=function(t){return this.xa.La(t),this.Ma[t]||"not-current"},Yh.prototype.Wa=function(t,e,n){this.Ma[t]=e},Yh.prototype.ja=function(t){this.xa.qa(t)},Yh.prototype.Ga=function(t){return this.xa.activeTargetIds.has(t)},Yh.prototype.Ka=function(t){delete this.Ma[t]},Yh.prototype.za=function(){return this.xa.activeTargetIds},Yh.prototype.Ha=function(t){return this.xa.activeTargetIds.has(t)},Yh.prototype.start=function(){return this.xa=new Dh,Promise.resolve()},Yh.prototype.Hi=function(t,e,n){},Yh.prototype.Ya=function(t){},Yh.prototype.wa=function(){},Yh.prototype.Cn=function(t){},Yh),Uh=(Object.defineProperty(Kh.prototype,"eu",{get:function(){return this.Xa},enumerable:!0,configurable:!0}),Kh.prototype.su=function(t,e){var u=this,a=e?e.nu:new xr,h=e?e.tu:this.tu,c=e?e.xt:this.xt,l=h,f=!1,p=this.query.ks()&&h.size===this.query.limit?h.last():null,d=this.query.Ls()&&h.size===this.query.limit?h.first():null;if(t.ot(function(t,e){var n=h.get(t),i=(i=e instanceof Rs?e:null)&&(u.query.matches(i)?i:null),r=!!n&&u.xt.has(n.key),o=!!i&&(i.Xe||u.xt.has(i.key)&&i.hasCommittedMutations),s=!1;n&&i?n.data().isEqual(i.data())?r!==o&&(a.track({type:3,doc:i}),s=!0):u.iu(n,i)||(a.track({type:2,doc:i}),s=!0,(p&&0<u.query.Cs(i,p)||d&&u.query.Cs(i,d)<0)&&(f=!0)):!n&&i?(a.track({type:0,doc:i}),s=!0):n&&!i&&(a.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(c=i?(l=l.add(i),o?c.add(t):c.delete(t)):(l=l.delete(t),c.delete(t)))}),this.query.ks()||this.query.Ls())for(;l.size>this.query.limit;){var n=this.query.ks()?l.last():l.first(),l=l.delete(n.key),c=c.delete(n.key);a.track({type:1,doc:n})}return{tu:l,nu:a,ru:f,xt:c}},Kh.prototype.iu=function(t,e){return t.Xe&&e.hasCommittedMutations&&!e.Xe},Kh.prototype.ou=function(t,e,n){var o=this,i=this.tu;this.tu=t.tu,this.xt=t.xt;var r=t.nu.qt();r.sort(function(t,e){return i=t.type,r=e.type,n(i)-n(r)||o.query.Cs(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ai()}}var i,r}),this.hu(n);var s=e?this.au():[],u=0===this.Za.size&&this.Ht?1:0,a=u!==this.Ja;return this.Ja=u,0!==r.length||a?{snapshot:new Mr(this.query,t.tu,i,r,t.xt,0==u,a,!1),uu:s}:{uu:s}},Kh.prototype.cu=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.ou({tu:this.tu,nu:new xr,xt:this.xt,ru:!1},!1)):{uu:[]}},Kh.prototype.lu=function(t){return!this.Xa.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).Xe},Kh.prototype.hu=function(t){var e=this;t&&(t.Yt.forEach(function(t){return e.Xa=e.Xa.add(t)}),t.Xt.forEach(function(t){}),t.Jt.forEach(function(t){return e.Xa=e.Xa.delete(t)}),this.Ht=t.Ht)},Kh.prototype.au=function(){var e=this;if(!this.Ht)return[];var n=this.Za;this.Za=Lr(),this.tu.forEach(function(t){e.lu(t.key)&&(e.Za=e.Za.add(t.key))});var i=[];return n.forEach(function(t){e.Za.has(t)||i.push(new ph(t))}),this.Za.forEach(function(t){n.has(t)||i.push(new fh(t))}),i},Kh.prototype._u=function(t){this.Xa=t.xr,this.Za=Lr();var e=this.su(t.documents);return this.ou(e,!0)},Kh.prototype.fu=function(){return Mr.Ut(this.query,this.tu,this.xt,0===this.Ja)},Kh),Vh=(Qh.prototype.wu=function(){this.Tu()},Qh.prototype.Tu=function(){var t=this;this._i.Bn(function(){return f(t,void 0,void 0,function(){var e,n,i=this;return d(this,function(t){return e=new Oh(this.bh),(n=this.Eu(e))&&n.then(function(t){i.Xn.ii(function(){return e.commit().then(function(){i.ti.resolve(t)}).catch(function(t){i.mu(t)})})}).catch(function(t){i.mu(t)}),[2]})})})},Qh.prototype.Eu=function(t){try{var e=this.updateFunction(t);return!or(e)&&e.catch&&e.then?e:(this.ti.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ti.reject(t),null}},Qh.prototype.mu=function(t){var e=this;0<this.du&&this.Iu(t)?(--this.du,this.Xn.ii(function(){return e.Tu(),Promise.resolve()})):this.ti.reject(t)},Qh.prototype.Iu=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!dr(e)},Qh),Ch=(Object.defineProperty(Xh.prototype,"Nu",{get:function(){return!0},enumerable:!0,configurable:!0}),Xh.prototype.subscribe=function(t){this.pu=t},Xh.prototype.listen=function(s){return f(this,void 0,void 0,function(){var e,n,i,r,o;return d(this,function(t){switch(t.label){case 0:return this.ku("listen()"),(i=this.yu.get(s))?(e=i.targetId,this.Pu.Qa(e),n=i.view.fu(),[3,4]):[3,1];case 1:return[4,this.jh.Fr(s.Ss())];case 2:return r=t.sent(),o=this.Pu.Qa(r.targetId),e=r.targetId,[4,this.Lu(s,e,"current"===o)];case 3:n=t.sent(),this.Nu&&this.Au.listen(r),t.label=4;case 4:return[2,n]}})})},Xh.prototype.Lu=function(u,a,h){return f(this,void 0,void 0,function(){var e,n,i,r,o,s;return d(this,function(t){switch(t.label){case 0:return[4,this.jh.qr(u,!0)];case 1:return e=t.sent(),n=new Uh(u,e.xr),i=n.su(e.documents),r=Fr.zt(a,h&&"Offline"!==this.onlineState),o=n.ou(i,this.Nu,r),this.qu(a,o.uu),s=new dh(u,a,n),[2,(this.yu.set(u,s),this.gu.has(a)?this.gu.get(a).push(u):this.gu.set(a,[u]),o.snapshot)]}})})},Xh.prototype.Ea=function(r){return f(this,void 0,void 0,function(){var e,n,i=this;return d(this,function(t){switch(t.label){case 0:return this.ku("unlisten()"),e=this.yu.get(r),1<(n=this.gu.get(e.targetId)).length?[2,(this.gu.set(e.targetId,n.filter(function(t){return!t.isEqual(r)})),void this.yu.delete(r))]:this.Nu?(this.Pu.ja(e.targetId),this.Pu.Ha(e.targetId)?[3,2]:[4,this.jh.Lr(e.targetId,!1).then(function(){i.Pu.Ka(e.targetId),i.Au.Ea(e.targetId),i.Ou(e.targetId)}).catch(ju)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.Ou(e.targetId),[4,this.jh.Lr(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},Xh.prototype.write=function(r,o){return f(this,void 0,void 0,function(){var e,n,i;return d(this,function(t){switch(t.label){case 0:this.ku("write()"),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,this.jh.tr(r)];case 2:return e=t.sent(),this.Pu.Ba(e.batchId),this.xu(e.batchId,o),[4,this.Mu(e.sr)];case 3:return t.sent(),[4,this.Au._a()];case 4:return t.sent(),[3,6];case 5:return n=t.sent(),i=Cu(n,"Failed to persist write"),o.reject(i),[3,6];case 6:return[2]}})})},Xh.prototype.runTransaction=function(t,e,n){new Vh(t,this.bh,e,n).wu()},Xh.prototype.dr=function(n){return f(this,void 0,void 0,function(){var e,i=this;return d(this,function(t){switch(t.label){case 0:this.ku("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.jh.dr(n)];case 2:return e=t.sent(),n.Qt.forEach(function(t,e){var n=i.Su.get(e);n&&(Ni(t.Yt.size+t.Xt.size+t.Jt.size<=1),0<t.Yt.size?n.Ru=!0:0<t.Xt.size?Ni(n.Ru):0<t.Jt.size&&(Ni(n.Ru),n.Ru=!1))}),[4,this.Mu(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,ju(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},Xh.prototype.cu=function(i,t){this.ku("applyOnlineStateChange()");var r=[];this.yu.forEach(function(t,e){var n=e.view.cu(i);n.snapshot&&r.push(n.snapshot)}),this.pu.Bu(i),this.pu.fh(r),this.onlineState=i},Xh.prototype.pa=function(u,a){return f(this,void 0,void 0,function(){var e,n,i,r,o,s=this;return d(this,function(t){switch(t.label){case 0:return this.ku("rejectListens()"),this.Pu.Wa(u,"rejected",a),e=this.Su.get(u),(n=e&&e.key)?(i=(i=new vr(ir.P)).et(n,new Ls(n,zi.min())),r=Lr().add(n),o=new qr(zi.min(),new Map,new Ir(Ri),i,r),[4,this.dr(o)]):[3,2];case 1:return t.sent(),this.vu=this.vu.remove(n),this.Su.delete(u),this.Uu(),[3,4];case 2:return[4,this.jh.Lr(u,!1).then(function(){return s.Ou(u,a)}).catch(ju)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},Xh.prototype.Ca=function(i){return f(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:this.ku("applySuccessfulWrite()"),e=i.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.jh.nr(i)];case 2:return n=t.sent(),this.Qu(e,null),this.Wu(e),this.Pu.Ua(e,"acknowledged"),[4,this.Mu(n)];case 3:return t.sent(),[3,6];case 4:return[4,ju(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},Xh.prototype.Fa=function(n,i){return f(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:this.ku("rejectFailedWrite()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.jh.ar(n)];case 2:return e=t.sent(),this.Qu(n,i),this.Wu(n),this.Pu.Ua(n,"rejected",i),[4,this.Mu(e)];case 3:return t.sent(),[3,6];case 4:return[4,ju(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},Xh.prototype.ju=function(o){return f(this,void 0,void 0,function(){var e,n,i,r;return d(this,function(t){switch(t.label){case 0:this.Au.Jh()||_i("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.jh.lr()];case 2:return-1===(e=t.sent())?[2,void o.resolve()]:((n=this.Fu.get(e)||[]).push(o),this.Fu.set(e,n),[3,4]);case 3:return i=t.sent(),r=Cu(i,"Initialization of waitForPendingWrites() operation failed"),o.reject(r),[3,4];case 4:return[2]}})})},Xh.prototype.Wu=function(t){(this.Fu.get(t)||[]).forEach(function(t){t.resolve()}),this.Fu.delete(t)},Xh.prototype.Gu=function(e){this.Fu.forEach(function(t){t.forEach(function(t){t.reject(new Gi(ji.CANCELLED,e))})}),this.Fu.clear()},Xh.prototype.xu=function(t,e){var n=(n=(n=this.Du[this.currentUser.Co()])||new vr(Ri)).et(t,e);this.Du[this.currentUser.Co()]=n},Xh.prototype.Qu=function(t,e){var n,i=this.Du[this.currentUser.Co()];i&&((n=i.get(t))&&(e?n.reject(e):n.resolve(),i=i.remove(t)),this.Du[this.currentUser.Co()]=i)},Xh.prototype.Ou=function(t,e){var n=this;void 0===e&&(e=null),this.Pu.ja(t);for(var i=0,r=this.gu.get(t);i<r.length;i++){var o=r[i];this.yu.delete(o),e&&this.pu.Ku(o,e)}this.gu.delete(t),this.Nu&&this.Cu.Hr(t).forEach(function(t){n.Cu.Jr(t)||n.zu(t)})},Xh.prototype.zu=function(t){var e=this.vu.get(t);null!==e&&(this.Au.Ea(e),this.vu=this.vu.remove(t),this.Su.delete(e),this.Uu())},Xh.prototype.qu=function(t,e){for(var n=0,i=e;n<i.length;n++){var r=i[n];r instanceof fh?(this.Cu.br(r.key,t),this.Hu(r)):r instanceof ph?(_i("SyncEngine","Document no longer in limbo: "+r.key),this.Cu.vr(r.key,t),this.Cu.Jr(r.key)||this.zu(r.key)):Ai()}},Xh.prototype.Hu=function(t){var e=t.key;this.vu.get(e)||(_i("SyncEngine","New document in limbo: "+e),this.bu.push(e),this.Uu())},Xh.prototype.Uu=function(){for(;0<this.bu.length&&this.vu.size<this.Vu;){var t=this.bu.shift(),e=this.$u.next();this.Su.set(e,new yh(t)),this.vu=this.vu.et(t,e),this.Au.listen(new fr(ks.ms(t.path).Ss(),e,2,du.Dn))}},Xh.prototype.Yu=function(){return this.vu},Xh.prototype.Xu=function(){return this.bu},Xh.prototype.Mu=function(i,a){return f(this,void 0,void 0,function(){var o,s,e,u=this;return d(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.yu.forEach(function(t,r){e.push(Promise.resolve().then(function(){var n=r.view.su(i);return n.ru?u.jh.qr(r.query,!1).then(function(t){var e=t.documents;return r.view.su(e,n)}):n}).then(function(t){var e,n=a&&a.Qt.get(r.targetId),i=r.view.ou(t,u.Nu,n);u.qu(r.targetId,i.uu),i.snapshot&&(u.Nu&&u.Pu.Wa(r.targetId,i.snapshot.fromCache?"not-current":"current"),o.push(i.snapshot),e=pu.gn(r.targetId,i.snapshot),s.push(e))}))}),[4,Promise.all(e)];case 1:return t.sent(),this.pu.fh(o),[4,this.jh.gr(s)];case 2:return t.sent(),[2]}})})},Xh.prototype.ku=function(t){},Xh.prototype.Na=function(n){return f(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return this.currentUser.isEqual(n)?[3,3]:(_i("SyncEngine","User change. New user:",n.Co()),[4,this.jh.Hi(n)]);case 1:return e=t.sent(),this.currentUser=n,this.Gu("'waitForPendingWrites' promise is rejected due to a user change."),this.Pu.Hi(n,e.Ji,e.Zi),[4,this.Mu(e.Xi)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},Xh.prototype.enableNetwork=function(){return this.Au.enableNetwork()},Xh.prototype.disableNetwork=function(){return this.Au.disableNetwork()},Xh.prototype.Le=function(t){var e=this.Su.get(t);if(e&&e.Ru)return Lr().add(e.key);var n=Lr(),i=this.gu.get(t);if(!i)return n;for(var r=0,o=i;r<o.length;r++)var s=o[r],u=this.yu.get(s),n=n.Dt(u.view.eu);return n},Xh),xh=(Wh.prototype.listen=function(u){return f(this,void 0,void 0,function(){var e,n,i,r,o,s;return d(this,function(t){switch(t.label){case 0:if(e=u.query,n=!1,(i=this.tc.get(e))||(n=!0,i=new vh),!n)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),r=i,[4,this.Ia.listen(e)];case 2:return r.Ju=t.sent(),[3,4];case 3:return o=t.sent(),s=Cu(o,"Initialization of query '"+u.query+"' failed"),[2,void u.onError(s)];case 4:return this.tc.set(e,i),i.Zu.push(u),u.cu(this.onlineState),i.Ju&&u.sc(i.Ju)&&this.nc(),[2]}})})},Wh.prototype.Ea=function(o){return f(this,void 0,void 0,function(){var e,n,i,r;return d(this,function(t){return e=o.query,n=!1,(i=this.tc.get(e))&&0<=(r=i.Zu.indexOf(o))&&(i.Zu.splice(r,1),n=0===i.Zu.length),n?[2,(this.tc.delete(e),this.Ia.Ea(e))]:[2]})})},Wh.prototype.fh=function(t){for(var e=!1,n=0,i=t;n<i.length;n++){var r=i[n],o=r.query,s=this.tc.get(o);if(s){for(var u=0,a=s.Zu;u<a.length;u++)a[u].sc(r)&&(e=!0);s.Ju=r}}e&&this.nc()},Wh.prototype.Ku=function(t,e){var n=this.tc.get(t);if(n)for(var i=0,r=n.Zu;i<r.length;i++)r[i].onError(e);this.tc.delete(t)},Wh.prototype.Bu=function(r){this.onlineState=r;var o=!1;this.tc.forEach(function(t,e){for(var n=0,i=e.Zu;n<i.length;n++)i[n].cu(r)&&(o=!0)}),o&&this.nc()},Wh.prototype.ic=function(t){this.ec.add(t),t.next()},Wh.prototype.rc=function(t){this.ec.delete(t)},Wh.prototype.nc=function(){this.ec.forEach(function(t){t.next()})},Wh),Mh=(Hh.prototype.sc=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,i=t.docChanges;n<i.length;n++){var r=i[n];3!==r.type&&e.push(r)}t=new Mr(t.query,t.docs,t.Ot,e,t.xt,t.fromCache,t.Mt,!0)}var o=!1;return this.hc?this.uc(t)&&(this.oc.next(t),o=!0):this.cc(t,this.onlineState)&&(this.lc(t),o=!0),this.ac=t,o},Hh.prototype.onError=function(t){this.oc.error(t)},Hh.prototype.cu=function(t){this.onlineState=t;var e=!1;return this.ac&&!this.hc&&this.cc(this.ac,t)&&(this.lc(this.ac),e=!0),e},Hh.prototype.cc=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options._c&&n||t.docs._()&&"Offline"!==e)},Hh.prototype.uc=function(t){if(0<t.docChanges.length)return!0;var e=this.ac&&this.ac.hasPendingWrites!==t.hasPendingWrites;return!(!t.Mt&&!e)&&!0===this.options.includeMetadataChanges},Hh.prototype.lc=function(t){t=Mr.Ut(t.query,t.docs,t.xt,t.fromCache),this.hc=!0,this.oc.next(t)},Hh),qh=(zh.prototype.zi=function(t){this.fc=t},zh.prototype.En=function(e,i,r,o){var s=this;return i.vs()||r.isEqual(zi.min())?this.dc(e,i):this.fc.dn(e,o).next(function(t){var n=s.wc(i,t);return(i.ks()||i.Ls())&&s.ru(i.ds,n,o,r)?s.dc(e,i):(Ei()<=p.DEBUG&&_i("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),i.toString()),s.fc.En(e,i,r).next(function(e){return n.forEach(function(t){e=e.et(t.key,t)}),e}))})},zh.prototype.wc=function(n,t){var i=new Ir(function(t,e){return n.Cs(t,e)});return t.forEach(function(t,e){e instanceof Rs&&n.matches(e)&&(i=i.add(e))}),i},zh.prototype.ru=function(t,e,n,i){if(n.size!==e.size)return!0;var r="F"===t?e.last():e.first();return!!r&&(r.hasPendingWrites||0<r.version.o(i))},zh.prototype.dc=function(t,e){return Ei()<=p.DEBUG&&_i("IndexFreeQueryEngine","Using full collection scan to execute query:",e.toString()),this.fc.En(t,e,zi.min())},zh),Fh=(Bh.prototype.mc=function(t){return lu.resolve(0===this.hn.length)},Bh.prototype.er=function(t,e,n,i){var r=this.Tc;this.Tc++,0<this.hn.length&&this.hn[this.hn.length-1];var o=new hu(r,e,n,i);this.hn.push(o);for(var s=0,u=i;s<u.length;s++){var a=u[s];this.Ec=this.Ec.add(new Bu(a.key,r)),this.an.Kn(t,a.key.path.g())}return lu.resolve(o)},Bh.prototype.ur=function(t,e){return lu.resolve(this.Ic(e))},Bh.prototype.Cr=function(t,e){var n=e+1,i=this.Rc(n),r=i<0?0:i;return lu.resolve(this.hn.length>r?this.hn[r]:null)},Bh.prototype.lr=function(){return lu.resolve(0===this.hn.length?-1:this.Tc-1)},Bh.prototype.Yi=function(t){return lu.resolve(this.hn.slice())},Bh.prototype.cn=function(t,e){var n=this,i=new Bu(e,0),r=new Bu(e,Number.POSITIVE_INFINITY),o=[];return this.Ec.vt([i,r],function(t){var e=n.Ic(t.Zr);o.push(e)}),lu.resolve(o)},Bh.prototype.Tn=function(t,e){var i=this,r=new Ir(Ri);return e.forEach(function(t){var e=new Bu(t,0),n=new Bu(t,Number.POSITIVE_INFINITY);i.Ec.vt([e,n],function(t){r=r.add(t.Zr)})}),lu.resolve(this.Ac(r))},Bh.prototype.Pn=function(t,e){var n=e.path,i=n.length+1,r=n;ir.W(r)||(r=r.child(""));var o=new Bu(new ir(r),0),s=new Ir(Ri);return this.Ec.St(function(t){var e=t.key.path;return!!n.C(e)&&(e.length===i&&(s=s.add(t.Zr)),!0)},o),lu.resolve(this.Ac(s))},Bh.prototype.Ac=function(t){var n=this,i=[];return t.forEach(function(t){var e=n.Ic(t);null!==e&&i.push(e)}),i},Bh.prototype.cr=function(n,i){var r=this;Ni(0===this.Pc(i.batchId,"removed")),this.hn.shift();var o=this.Ec;return lu.forEach(i.mutations,function(t){var e=new Bu(t.key,i.batchId);return o=o.delete(e),r.Vr.Vc(n,t.key)}).next(function(){r.Ec=o})},Bh.prototype.pc=function(t){},Bh.prototype.Jr=function(t,e){var n=new Bu(e,0),i=this.Ec.Ct(n);return lu.resolve(e.isEqual(i&&i.key))},Bh.prototype.hr=function(t){return this.hn.length,lu.resolve()},Bh.prototype.Pc=function(t,e){return this.Rc(t)},Bh.prototype.Rc=function(t){return 0===this.hn.length?0:t-this.hn[0].batchId},Bh.prototype.Ic=function(t){var e=this.Rc(t);return e<0||e>=this.hn.length?null:this.hn[e]},Bh),jh=(Gh.prototype.Ar=function(t,e,n){var i=e.key,r=this.docs.get(i),o=r?r.size:0,s=this.yc(e);return this.docs=this.docs.et(i,{gc:e,size:s,readTime:n}),this.size+=s-o,this.an.Kn(t,i.path.g())},Gh.prototype.Rr=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},Gh.prototype._n=function(t,e){var n=this.docs.get(e);return lu.resolve(n?n.gc:null)},Gh.prototype.getEntries=function(t,e){var n=this,i=Ar;return e.forEach(function(t){var e=n.docs.get(t);i=i.et(t,e?e.gc:null)}),lu.resolve(i)},Gh.prototype.En=function(t,e,n){for(var i=Sr,r=new ir(e.path.child("")),o=this.docs.ut(r);o.wt();){var s=o.dt(),u=s.key,a=s.value,h=a.gc,c=a.readTime;if(!e.path.C(u.path))break;c.o(n)<=0||h instanceof Rs&&e.matches(h)&&(i=i.et(h.key,h))}return lu.resolve(i)},Gh.prototype.bc=function(t,e){return lu.forEach(this.docs,function(t){return e(t)})},Gh.prototype.ir=function(t){return new Gh.vc(this)},Gh.prototype.Sc=function(t){return lu.resolve(this.size)},Gh);function Gh(t,e){this.an=t,this.yc=e,this.docs=new vr(ir.P),this.size=0}function Bh(t,e){this.an=t,this.Vr=e,this.hn=[],this.Tc=1,this.Ec=new Ir(Bu.Qr)}function zh(){}function Hh(t,e,n){this.query=t,this.oc=e,this.hc=!1,this.ac=null,this.onlineState="Unknown",this.options=n||{}}function Wh(t){this.Ia=t,this.tc=new Fi(function(t){return t.canonicalId()},function(t,e){return t.isEqual(e)}),this.onlineState="Unknown",this.ec=new Set,this.Ia.subscribe(this)}function Xh(t,e,n,i,r,o){this.jh=t,this.Au=e,this.bh=n,this.Pu=i,this.currentUser=r,this.Vu=o,this.pu=null,this.yu=new Fi(function(t){return t.canonicalId()},function(t,e){return t.isEqual(e)}),this.gu=new Map,this.bu=[],this.vu=new vr(ir.P),this.Su=new Map,this.Cu=new Gu,this.Du={},this.Fu=new Map,this.$u=Au.Yn(),this.onlineState="Unknown"}function Qh(t,e,n,i){this.Xn=t,this.bh=e,this.updateFunction=n,this.ti=i,this.du=5,this._i=new _u(this.Xn,"transaction_retry")}function Kh(t,e){this.query=t,this.Xa=e,this.Ja=null,this.Ht=!1,this.Za=Lr(),this.xt=Lr(),this.tu=new Cr(t.Cs.bind(t))}function Yh(){this.xa=new Dh,this.Ma={},this.Ia=null,this.Lh=null,this.bn=null}function $h(){this.activeTargetIds=Dr}function Jh(t,e,n,i,r){var o,s,u,a,h,c,l=this;this.jh=t,this.bh=e,this.Xn=n,this.Gh=[],this.Kh=new Map,this.zh=null,this.Hh=new Set,this.Yh=r,this.Yh.Xh(function(t){n.ii(function(){return f(l,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.Jh()?(_i("RemoteStore","Restarting streams for network reachability change."),[4,this.Zh()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.ta=new Rh(n,i),this.ea=(a=this.bh,h=n,c={lh:this.sa.bind(this),rh:this.na.bind(this),fh:this.ia.bind(this)},new Nh(h,a.Go,a.credentials,a.serializer,c)),this.ra=(o=this.bh,s=n,u={lh:this.oa.bind(this),rh:this.ha.bind(this),Rh:this.aa.bind(this),Ih:this.Ih.bind(this)},new Ph(s,o.Go,o.credentials,o.serializer,u))}function Zh(t,e){this.Xn=t,this.Lh=e,this.state="Unknown",this.qh=0,this.Oh=null,this.xh=!0}function tc(t){this.bh=t,this.vh=new Map,this.mutations=[],this.Sh=!1,this.Ch=null,this.Dh=new Set}function ec(t,e,n){var i=this;return(i=gh.call(this)||this).Go=t,i.credentials=e,i.serializer=n,i.Vh=!1,i}function nc(t,e,n,i,r){var o=this;return(o=mh.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,r)||this).serializer=i,o.Th=!1,o.lastStreamToken=ur.H,o}function ic(t,e,n,i,r){var o=this;return(o=wh.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,r)||this).serializer=i,o}function rc(t,e,n,i,r,o){this.Fn=t,this.jo=n,this.Go=i,this.Ko=r,this.listener=o,this.state=0,this.zo=0,this.Ho=null,this.stream=null,this._i=new _u(t,e)}function oc(t,e){this.Uo=t,this.Qo=e}function sc(t,e){this.Uo=t,this.Qo=e,this.type="FirstParty",this.user=hh.Fo}function uc(t){var e=this;this.Oo=null,this.currentUser=hh.UNAUTHENTICATED,this.xo=!1,this.Mo=0,this.No=null,this.forceRefresh=!1,this.Oo=function(){e.Mo++,e.currentUser=e.Bo(),e.xo=!0,e.No&&e.No(e.currentUser)},this.Mo=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Oo):(this.Oo(null),t.get().then(function(t){e.auth=t,e.Oo&&e.auth.addAuthTokenListener(e.Oo)},function(){}))}function ac(){this.No=null}function hc(t){var e=this;return(e=bh.call(this)||this).kc=t,e}function cc(){this.sr=new Fi(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.Cc=!1}jh.vc=(Object.defineProperty(cc.prototype,"readTime",{get:function(){return this.Dc},set:function(t){this.Dc=t},enumerable:!0,configurable:!0}),cc.prototype.Ar=function(t,e){this.Fc(),this.readTime=e,this.sr.set(t.key,t)},cc.prototype.Rr=function(t,e){this.Fc(),e&&(this.readTime=e),this.sr.set(t,null)},cc.prototype._n=function(t,e){this.Fc();var n=this.sr.get(e);return void 0!==n?lu.resolve(n):this.$c(t,e)},cc.prototype.getEntries=function(t,e){return this.Nc(t,e)},cc.prototype.apply=function(t){return this.Fc(),this.Cc=!0,this.ou(t)},cc.prototype.Fc=function(){},n(hc,bh=cc),hc.prototype.ou=function(n){var i=this,r=[];return this.sr.forEach(function(t,e){e?r.push(i.kc.Ar(n,e,i.readTime)):i.kc.Rr(t)}),lu.nn(r)},hc.prototype.$c=function(t,e){return this.kc._n(t,e)},hc.prototype.Nc=function(t,e){return this.kc.getEntries(t,e)},hc);var lc,fc=(xc.prototype.ge=function(t,n){return this.Lc.forEach(function(t,e){return n(e)}),lu.resolve()},xc.prototype._r=function(t){return lu.resolve(this.lastRemoteSnapshotVersion)},xc.prototype.Mc=function(t){return lu.resolve(this.qc)},xc.prototype.Nr=function(t){return this.highestTargetId=this.xc.next(),lu.resolve(this.highestTargetId)},xc.prototype.pr=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.qc&&(this.qc=e),lu.resolve()},xc.prototype.Bc=function(t){this.Lc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.xc=new Au(e),this.highestTargetId=e),t.sequenceNumber>this.qc&&(this.qc=t.sequenceNumber)},xc.prototype.kr=function(t,e){return this.Bc(e),this.targetCount+=1,lu.resolve()},xc.prototype.Ir=function(t,e){return this.Bc(e),lu.resolve()},xc.prototype.Uc=function(t,e){return this.Lc.delete(e.target),this.Oc.Hr(e.targetId),--this.targetCount,lu.resolve()},xc.prototype.Qc=function(n,i,r){var o=this,s=0,u=[];return this.Lc.forEach(function(t,e){e.sequenceNumber<=i&&null===r.get(e.targetId)&&(o.Lc.delete(t),u.push(o.Wc(n,e.targetId)),s++)}),lu.nn(u).next(function(){return s})},xc.prototype.jc=function(t){return lu.resolve(this.targetCount)},xc.prototype.$r=function(t,e){var n=this.Lc.get(e)||null;return lu.resolve(n)},xc.prototype.Tr=function(t,e,n){return this.Oc.Gr(e,n),lu.resolve()},xc.prototype.wr=function(e,t,n){this.Oc.zr(t,n);var i=this.persistence.Vr,r=[];return i&&t.forEach(function(t){r.push(i.Vc(e,t))}),lu.nn(r)},xc.prototype.Wc=function(t,e){return this.Oc.Hr(e),lu.resolve()},xc.prototype.Or=function(t,e){var n=this.Oc.Xr(e);return lu.resolve(n)},xc.prototype.Jr=function(t,e){return lu.resolve(this.Oc.Jr(e))},xc),pc=(Cc.prototype.start=function(){return Promise.resolve()},Cc.prototype.wa=function(){return this.zc=!1,Promise.resolve()},Object.defineProperty(Cc.prototype,"Yc",{get:function(){return this.zc},enumerable:!0,configurable:!0}),Cc.prototype.Xc=function(){},Cc.prototype.Ki=function(){return this.an},Cc.prototype.Bi=function(t){var e=this.Gc[t.Co()];return e||(e=new Fh(this.an,this.Vr),this.Gc[t.Co()]=e),e},Cc.prototype.ji=function(){return this.Wi},Cc.prototype.Qi=function(){return this.on},Cc.prototype.runTransaction=function(t,e,n){var i=this;_i("MemoryPersistence","Starting transaction:",t);var r=new dc(this.Kc.next());return this.Vr.Jc(),n(r).next(function(t){return i.Vr.Zc(r).next(function(){return t})}).en().then(function(t){return r.tl(),t})},Cc.prototype.el=function(e,n){return lu.rn(Object.values(this.Gc).map(function(t){return function(){return t.Jr(e,n)}}))},Cc),dc=(Vc.prototype.nl=function(t){this.sl.push(t)},Vc.prototype.tl=function(){this.sl.forEach(function(t){return t()})},n(Uc,lc=Vc),Uc),yc=(kc.ol=function(t){return new kc(t)},Object.defineProperty(kc.prototype,"hl",{get:function(){if(this.rl)return this.rl;throw Ai()},enumerable:!0,configurable:!0}),kc.prototype.br=function(t,e,n){return this.il.br(n,e),this.hl.delete(n),lu.resolve()},kc.prototype.vr=function(t,e,n){return this.il.vr(n,e),this.hl.add(n),lu.resolve()},kc.prototype.Vc=function(t,e){return this.hl.add(e),lu.resolve()},kc.prototype.removeTarget=function(t,e){var n=this;this.il.Hr(e.targetId).forEach(function(t){return n.hl.add(t)});var i=this.persistence.ji();return i.Or(t,e.targetId).next(function(t){t.forEach(function(t){return n.hl.add(t)})}).next(function(){return i.Uc(t,e)})},kc.prototype.Jc=function(){this.rl=new Set},kc.prototype.Zc=function(t){var n=this,i=this.persistence.Qi().ir();return lu.forEach(this.hl,function(e){return n.al(t,e).next(function(t){t||i.Rr(e)})}).next(function(){return n.rl=null,i.apply(t)})},kc.prototype.Pr=function(t,e){var n=this;return this.al(t,e).next(function(t){t?n.hl.delete(e):n.hl.add(e)})},kc.prototype.Hc=function(t){return 0},kc.prototype.al=function(t,e){var n=this;return lu.rn([function(){return lu.resolve(n.il.Jr(e))},function(){return n.persistence.ji().Jr(t,e)},function(){return n.persistence.el(t,e)}])},kc),vc=(Dc.prototype.lh=function(t){this.ll=t},Dc.prototype.rh=function(t){this._l=t},Dc.prototype.onMessage=function(t){this.fl=t},Dc.prototype.close=function(){this.cl()},Dc.prototype.send=function(t){this.ul(t)},Dc.prototype.dl=function(){this.ll()},Dc.prototype.wl=function(t){this._l(t)},Dc.prototype.Tl=function(t){this.fl(t)},Dc),gc={BatchGetDocuments:"batchGet",Commit:"commit"},mc="gl-js/ fire/"+wi,wc=(Lc.prototype.ml=function(t,e){if(e)for(var n in e.$o)e.$o.hasOwnProperty(n)&&(t[n]=e.$o[n]);t["X-Goog-Api-Client"]=mc},Lc.prototype.yh=function(a,i,r){var h=this,c=this.Il(a);return new Promise(function(o,s){var u=new vi;u.listenOnce(di.COMPLETE,function(){try{switch(u.getLastErrorCode()){case pi.NO_ERROR:var t=u.getResponseJson();_i("Connection","XHR received:",JSON.stringify(t)),o(t);break;case pi.TIMEOUT:_i("Connection",'RPC "'+a+'" timed out'),s(new Gi(ji.DEADLINE_EXCEEDED,"Request time out"));break;case pi.HTTP_ERROR:var e,n,i=u.getStatus();_i("Connection",'RPC "'+a+'" failed with status:',i,"response text:",u.getResponseText()),0<i?(e=u.getResponseJson().error)&&e.status&&e.message?(r=e.status.toLowerCase().replace("_","-"),n=0<=Object.values(ji).indexOf(r)?r:ji.UNKNOWN,s(new Gi(n,e.message))):s(new Gi(ji.UNKNOWN,"Server responded with status "+u.getStatus())):(_i("Connection",'RPC "'+a+'" failed'),s(new Gi(ji.UNAVAILABLE,"Connection failed.")));break;default:Ai()}}finally{_i("Connection",'RPC "'+a+'" completed.')}var r});var t=Object.assign({},i);delete t.database;var e=JSON.stringify(t);_i("Connection","XHR sending: ",c+" "+e);var n={"Content-Type":"text/plain"};h.ml(n,r),u.send(c,"POST",e,n,15)})},Lc.prototype.gh=function(t,e,n){return this.yh(t,e,n)},Lc.prototype._h=function(t,e){var n,i,r=[this.El,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=fi(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.ml(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())||"object"==typeof navigator&&"ReactNative"===navigator.product||0<=v().indexOf("Electron/")||0<=(i=v()).indexOf("MSIE ")||0<=i.indexOf("Trident/")||0<=v().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");function a(t,e){h.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}_i("Connection","Creating WebChannel: "+u+" "+s);var h=o.createWebChannel(u,s),c=!1,l=!1,f=new vc({ul:function(t){l?_i("Connection","Not sending because WebChannel is closed:",t):(c||(_i("Connection","Opening WebChannel transport."),h.open(),c=!0),_i("Connection","WebChannel sending:",t),h.send(t))},cl:function(){return h.close()}});return a(yi.EventType.OPEN,function(){l||_i("Connection","WebChannel transport opened.")}),a(yi.EventType.CLOSE,function(){l||(l=!0,_i("Connection","WebChannel transport closed"),f.wl())}),a(yi.EventType.ERROR,function(t){l||(l=!0,function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];bi.logLevel<=p.WARN&&(e=n.map(Ti),bi.warn.apply(bi,y(["Firestore ("+wi+"): Connection"],e)))}("Connection","WebChannel transport errored:",t),f.wl(new Gi(ji.UNAVAILABLE,"The operation could not be completed")))}),a(yi.EventType.MESSAGE,function(t){var e,n,i,r,o,s;l||(Ni(!!(n=t.data[0])),(i=n.error||(null===(e=n[0])||void 0===e?void 0:e.error))?(_i("Connection","WebChannel received error:",i),r=i.status,o=function(){var t=cr[r];if(void 0!==t)return yr(t)}(),s=i.message,void 0===o&&(o=ji.INTERNAL,s="Unknown error status: "+r+" with message "+i.message),l=!0,f.wl(new Gi(o,s)),h.close()):(_i("Connection","WebChannel received:",n),f.Tl(n)))}),setTimeout(function(){f.dl()},0),f},Lc.prototype.Il=function(t){var e=gc[t];return this.El+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},Lc),bc=(Rc.prototype.Xh=function(t){this.pl.push(t)},Rc.prototype.wa=function(){window.removeEventListener("online",this.Rl),window.removeEventListener("offline",this.Pl)},Rc.prototype.yl=function(){window.addEventListener("online",this.Rl),window.addEventListener("offline",this.Pl)},Rc.prototype.Al=function(){_i("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.pl;t<e.length;t++)(0,e[t])(0)},Rc.prototype.Vl=function(){_i("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.pl;t<e.length;t++)(0,e[t])(1)},Rc.gl=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Rc),Ec=(Oc.prototype.Xh=function(t){},Oc.prototype.wa=function(){},Oc),_c="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Ic=(Sc.prototype.initialize=function(n){return f(this,void 0,void 0,function(){var e=this;return d(this,function(t){switch(t.label){case 0:return this.Pu=this.bl(n),this.persistence=this.vl(n),[4,this.persistence.start()];case 1:return t.sent(),this.Sl=this.Cl(n),this.jh=this.Dl(n),this.Au=this.Fl(n),this.Ia=this.$l(n),this.Nl=this.kl(n),this.Pu.Lh=function(t){return e.Ia.cu(t,1)},this.Au.Ia=this.Ia,[4,this.jh.start()];case 2:return t.sent(),[4,this.Pu.start()];case 3:return t.sent(),[4,this.Au.start()];case 4:return t.sent(),[4,this.Au.ka(this.Ia.Nu)];case 5:return t.sent(),[2]}})})},Sc.prototype.kl=function(t){return new xh(this.Ia)},Sc.prototype.Cl=function(t){return null},Sc.prototype.Dl=function(t){return new qu(this.persistence,new qh,t.Ll)},Sc.prototype.vl=function(t){if(t.Ol.ql)throw new Gi(ji.FAILED_PRECONDITION,_c);return new pc(yc.ol)},Sc.prototype.Fl=function(t){var e=this;return new Lh(this.jh,t.bh,t.Xn,function(t){return e.Ia.cu(t,0)},new(bc.gl()?bc:Ec))},Sc.prototype.bl=function(t){return new kh},Sc.prototype.$l=function(t){return new Ch(this.jh,this.Au,t.bh,this.Pu,t.Ll,t.Vu)},Sc.prototype.clearPersistence=function(t){throw new Gi(ji.FAILED_PRECONDITION,_c)},Sc),Tc=(Pc.prototype.start=function(e,n){var i=this;this.ph();var r=new Eu,o=new Eu,s=!1;return this.credentials.Lo(function(t){if(!s)return s=!0,_i("FirestoreClient","Initializing. user=",t.uid),i.Ml(e,n,t,o).then(r.resolve,r.reject);i.Xn.Ri(function(){return i.Au.Na(t)})}),this.Xn.ii(function(){return r.promise}),o.promise},Pc.prototype.enableNetwork=function(){var t=this;return this.ph(),this.Xn.enqueue(function(){return t.Ia.enableNetwork()})},Pc.prototype.Ml=function(a,h,c,l){return f(this,void 0,void 0,function(){var n,i,r,o,s,u=this;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,(s=this.xl,Promise.resolve(new wc(s)))];case 1:return n=t.sent(),i=za(this.xl.s),e=this.credentials,r=new Sh(n,e,i),[4,a.initialize({Xn:this.Xn,xl:this.xl,bh:r,clientId:this.clientId,Ll:c,Vu:100,Ol:h})];case 2:return t.sent(),this.persistence=a.persistence,this.Pu=a.Pu,this.jh=a.jh,this.Au=a.Au,this.Ia=a.Ia,this.Sl=a.Sl,this.Bl=a.Nl,this.persistence.Xc(function(){return f(u,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),l.resolve(),[3,4];case 3:if(o=t.sent(),l.reject(o),!this.Ul(o))throw o;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),this.Ml(new Ic,{ql:!1},c,l))];case 4:return[2]}var e})})},Pc.prototype.Ul=function(t){return"FirebaseError"===t.name?t.code===ji.FAILED_PRECONDITION||t.code===ji.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},Pc.prototype.ph=function(){if(this.Xn.di)throw new Gi(ji.FAILED_PRECONDITION,"The client has already been terminated.")},Pc.prototype.disableNetwork=function(){var t=this;return this.ph(),this.Xn.enqueue(function(){return t.Ia.disableNetwork()})},Pc.prototype.terminate=function(){var t=this;return this.Xn.Ii(function(){return f(t,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.Sl&&this.Sl.stop(),[4,this.Au.wa()];case 1:return t.sent(),[4,this.Pu.wa()];case 2:return t.sent(),[4,this.persistence.wa()];case 3:return t.sent(),this.credentials.qo(),[2]}})})})},Pc.prototype.waitForPendingWrites=function(){var t=this;this.ph();var e=new Eu;return this.Xn.ii(function(){return t.Ia.ju(e)}),e.promise},Pc.prototype.listen=function(t,e,n){var i=this;this.ph();var r=new Mh(t,e,n);return this.Xn.ii(function(){return i.Bl.listen(r)}),r},Pc.prototype.Ea=function(t){var e=this;this.Ql||this.Xn.ii(function(){return e.Bl.Ea(t)})},Pc.prototype.Wl=function(o){return f(this,void 0,void 0,function(){var r,e=this;return d(this,function(t){switch(t.label){case 0:return this.ph(),r=new Eu,[4,this.Xn.enqueue(function(){return f(e,void 0,void 0,function(){var e,n,i;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.jh.Dr(o)];case 1:return(e=t.sent())instanceof Rs?r.resolve(e):e instanceof Ls?r.resolve(null):r.reject(new Gi(ji.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return n=t.sent(),i=Cu(n,"Failed to get document '"+o+" from cache"),r.reject(i),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),r.promise)]}})})},Pc.prototype.jl=function(a){return f(this,void 0,void 0,function(){var u,e=this;return d(this,function(t){switch(t.label){case 0:return this.ph(),u=new Eu,[4,this.Xn.enqueue(function(){return f(e,void 0,void 0,function(){var e,n,i,r,o,s;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.jh.qr(a,!0)];case 1:return e=t.sent(),n=new Uh(a,e.xr),i=n.su(e.documents),r=n.ou(i,!1),u.resolve(r.snapshot),[3,3];case 2:return o=t.sent(),s=Cu(o,"Failed to execute query '"+a+" against cache"),u.reject(s),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),u.promise)]}})})},Pc.prototype.write=function(t){var e=this;this.ph();var n=new Eu;return this.Xn.ii(function(){return e.Ia.write(t,n)}),n.promise},Pc.prototype.s=function(){return this.xl.s},Pc.prototype.ic=function(t){var e=this;this.ph(),this.Xn.ii(function(){return e.Bl.ic(t),Promise.resolve()})},Pc.prototype.rc=function(t){var e=this;this.Ql||this.Xn.ii(function(){return e.Bl.rc(t),Promise.resolve()})},Object.defineProperty(Pc.prototype,"Ql",{get:function(){return this.Xn.di},enumerable:!0,configurable:!0}),Pc.prototype.transaction=function(t){var e=this;this.ph();var n=new Eu;return this.Xn.ii(function(){return e.Ia.runTransaction(e.Xn,t,n),Promise.resolve()}),n.promise},Pc),Ac=(Nc.prototype.next=function(t){this.Gl(this.observer.next,t)},Nc.prototype.error=function(t){this.Gl(this.observer.error,t)},Nc.prototype.Kl=function(){this.muted=!0},Nc.prototype.Gl=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},Nc);function Nc(t){this.observer=t,this.muted=!1}function Pc(t,e,n){this.xl=t,this.credentials=e,this.Xn=n,this.clientId=Si.t()}function Sc(){}function Oc(){}function Rc(){var t=this;this.Rl=function(){return t.Al()},this.Pl=function(){return t.Vl()},this.pl=[],this.yl()}function Lc(t){this.s=t.s;var e=t.ssl?"https":"http";this.El=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}function Dc(t){this.ul=t.ul,this.cl=t.cl}function kc(t){this.persistence=t,this.il=new Gu,this.rl=null}function Uc(t){var e=this;return(e=lc.call(this)||this).Er=t,e}function Vc(){this.sl=[]}function Cc(t){var e=this;this.Gc={},this.Kc=new du(0),this.zc=!1,this.zc=!0,this.Vr=t(this),this.Wi=new fc(this),this.an=new Iu,this.on=new jh(this.an,function(t){return e.Vr.Hc(t)})}function xc(t){this.persistence=t,this.Lc=new Fi(su,uu),this.lastRemoteSnapshotVersion=zi.min(),this.highestTargetId=0,this.qc=0,this.Oc=new Gu,this.targetCount=0,this.xc=Au.Hn()}function Mc(r){return function(){if("object"==typeof r&&null!==r)for(var t=r,e=0,n=["next","error","complete"];e<n.length;e++){var i=n[e];if(i in t&&"function"==typeof t[i])return 1}}()}var qc,Fc,jc,Gc,Bc=(dl.prototype.Yl=function(t){switch(eo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ao(t.integerValue||t.doubleValue);case 3:return this.Xl(t.timestampValue);case 4:return this.Jl(t);case 5:return t.stringValue;case 6:return new ya(ho(t.bytesValue));case 7:return this.Zl(t.referenceValue);case 8:return this.t_(t.geoPointValue);case 9:return this.e_(t.arrayValue);case 10:return this.s_(t.mapValue);default:throw Ai()}},dl.prototype.s_=function(t){var n=this,i={};return Ci(t.fields||{},function(t,e){i[t]=n.Yl(e)}),i},dl.prototype.t_=function(t){return new Va(ao(t.latitude),ao(t.longitude))},dl.prototype.e_=function(t){var e=this;return(t.values||[]).map(function(t){return e.Yl(t)})},dl.prototype.Jl=function(t){switch(this.zl){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Jr(n)?t(n):n}(t);return null==e?null:this.Yl(e);case"estimate":return this.Xl(Zr(t));default:return null}},dl.prototype.Xl=function(t){var e=uo(t),n=new Bi(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},dl.prototype.Zl=function(t){var e=Wi.N(t);Ni(Vo(e));var n=new ki(e.get(1),e.get(3)),i=new ir(e.p(5));return n.isEqual(this.s)||Ii("Document "+i+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.Hl(i)},dl),zc=xu.$i,Hc=(pl.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},pl),Wc=(Object.defineProperty(fl.prototype,"__",{get:function(){return this.f_||(this.f_=new Za(this.fo,this.l_.ignoreUndefinedProperties)),this.f_},enumerable:!0,configurable:!0}),fl.prototype.settings=function(t){Xu("Firestore.settings",arguments,1),Yu("Firestore.settings","object",1,t);var e=new Hc(t);if(this.o_&&!this.l_.isEqual(e))throw new Gi(ji.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.l_=e).credentials&&(this.u_=function(t){if(!t)return new Eh;switch(t.type){case"gapi":var e=t.d_;return Ni(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Th(e,t.Qo||"0");case"provider":return t.d_;default:throw new Gi(ji.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},fl.prototype.enableNetwork=function(){return this.r_(),this.o_.enableNetwork()},fl.prototype.disableNetwork=function(){return this.r_(),this.o_.disableNetwork()},fl.prototype.enablePersistence=function(t){var e,n;if(this.o_)throw new Gi(ji.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var i=!1,r=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&Ii("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),i=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,r=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,i&&r))throw new Gi(ji.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.w_(this.c_,{ql:!0,cacheSizeBytes:this.l_.cacheSizeBytes,synchronizeTabs:i,T_:r})},fl.prototype.clearPersistence=function(){return f(this,void 0,void 0,function(){var i,e=this;return d(this,function(t){if(void 0!==this.o_&&!this.o_.Ql)throw new Gi(ji.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return i=new Eu,[2,(this.i_.wi(function(){return f(e,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this.E_(),[4,this.c_.clearPersistence(e)];case 1:return t.sent(),i.resolve(),[3,3];case 2:return n=t.sent(),i.reject(n),[3,3];case 3:return[2]}})})}),i.promise)]})})},fl.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(fl.prototype,"m_",{get:function(){return this.r_(),this.o_.Ql},enumerable:!0,configurable:!0}),fl.prototype.waitForPendingWrites=function(){return this.r_(),this.o_.waitForPendingWrites()},fl.prototype.onSnapshotsInSync=function(t){if(this.r_(),Mc(t))return this.I_(t);Yu("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.I_(e)},fl.prototype.I_=function(t){var e=this,n=new Ac({next:function(){t.next&&t.next()},error:function(t){throw Ai()}});return this.o_.ic(n),function(){n.Kl(),e.o_.rc(n)}},fl.prototype.r_=function(){return this.o_||this.w_(new Ic,{ql:!1}),this.o_},fl.prototype.E_=function(){return new Di(this.fo,this.a_,this.l_.host,this.l_.ssl,this.l_.forceLongPolling)},fl.prototype.w_=function(t,e){var n=this.E_();return this.o_=new Tc(n,this.u_,this.i_),this.o_.start(t,e)},fl.h_=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new Gi(ji.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new Gi(ji.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ki(n)},Object.defineProperty(fl.prototype,"app",{get:function(){if(!this.n_)throw new Gi(ji.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.n_},enumerable:!0,configurable:!0}),fl.prototype.collection=function(t){return Xu("Firestore.collection",arguments,1),Yu("Firestore.collection","non-empty string",1,t),this.r_(),new el(Wi.N(t),this,null)},fl.prototype.doc=function(t){return Xu("Firestore.doc",arguments,1),Yu("Firestore.doc","non-empty string",1,t),this.r_(),Kc.R_(Wi.N(t),this,null)},fl.prototype.collectionGroup=function(t){if(Xu("Firestore.collectionGroup",arguments,1),Yu("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new Gi(ji.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.r_(),new Zc(new ks(Wi.k,t),this,null)},fl.prototype.runTransaction=function(e){var n=this;return Xu("Firestore.runTransaction",arguments,1),Yu("Firestore.runTransaction","function",1,e),this.r_().transaction(function(t){return e(new Xc(n,t))})},fl.prototype.batch=function(){return this.r_(),new Qc(this)},Object.defineProperty(fl,"logLevel",{get:function(){switch(Ei()){case p.DEBUG:return"debug";case p.ERROR:return"error";case p.SILENT:return"silent";case p.WARN:return"warn";case p.INFO:return"info";case p.VERBOSE:return"verbose";default:return"error"}},enumerable:!0,configurable:!0}),fl.setLogLevel=function(t){Xu("Firestore.setLogLevel",arguments,1),ea("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),bi.setLogLevel(t)},fl.prototype.A_=function(){return this.l_.timestampsInSnapshots},fl),Xc=(ll.prototype.get=function(t){var n=this;Xu("Transaction.get",arguments,1);var i=ml("Transaction.get",t,this.P_);return this.V_.Fh([i.do]).then(function(t){if(!t||1!==t.length)return Ai();var e=t[0];if(e instanceof Ls)return new $c(n.P_,i.do,null,!1,!1,i.wo);if(e instanceof Rs)return new $c(n.P_,i.do,e,!1,!1,i.wo);throw Ai()})},ll.prototype.set=function(t,e,n){Ku("Transaction.set",arguments,2,3);var i=ml("Transaction.set",t,this.P_);n=yl("Transaction.set",n);var r=wl(i.wo,e,"Transaction.set"),o=r[0],s=r[1],u=this.P_.__.Vo(s,o,n);return this.V_.set(i.do,u),this},ll.prototype.update=function(t,e,n){for(var i,r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return r="string"==typeof e||e instanceof va?(Qu("Transaction.update",arguments,3),i=ml("Transaction.update",t,this.P_),this.P_.__.bo("Transaction.update",e,n,o)):(Xu("Transaction.update",arguments,2),i=ml("Transaction.update",t,this.P_),this.P_.__.yo("Transaction.update",e)),this.V_.update(i.do,r),this},ll.prototype.delete=function(t){Xu("Transaction.delete",arguments,1);var e=ml("Transaction.delete",t,this.P_);return this.V_.delete(e.do),this},ll),Qc=(cl.prototype.set=function(t,e,n){Ku("WriteBatch.set",arguments,2,3),this.g_();var i=ml("WriteBatch.set",t,this.P_);n=yl("WriteBatch.set",n);var r=wl(i.wo,e,"WriteBatch.set"),o=r[0],s=r[1],u=this.P_.__.Vo(s,o,n);return this.p_=this.p_.concat(u.To(i.do,Zo.Ke())),this},cl.prototype.update=function(t,e,n){for(var i,r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.g_(),r="string"==typeof e||e instanceof va?(Qu("WriteBatch.update",arguments,3),i=ml("WriteBatch.update",t,this.P_),this.P_.__.bo("WriteBatch.update",e,n,o)):(Xu("WriteBatch.update",arguments,2),i=ml("WriteBatch.update",t,this.P_),this.P_.__.yo("WriteBatch.update",e)),this.p_=this.p_.concat(r.To(i.do,Zo.exists(!0))),this},cl.prototype.delete=function(t){Xu("WriteBatch.delete",arguments,1),this.g_();var e=ml("WriteBatch.delete",t,this.P_);return this.p_=this.p_.concat(new rs(e.do,Zo.Ke())),this},cl.prototype.commit=function(){return this.g_(),this.y_=!0,0<this.p_.length?this.P_.r_().write(this.p_):Promise.resolve()},cl.prototype.g_=function(){if(this.y_)throw new Gi(ji.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},cl),Kc=(n(hl,Gc=Wa),hl.R_=function(t,e,n){if(t.length%2!=0)throw new Gi(ji.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.$()+" has "+t.length);return new hl(new ir(t),e,n)},Object.defineProperty(hl.prototype,"id",{get:function(){return this.do.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(hl.prototype,"parent",{get:function(){return new el(this.do.path.g(),this.firestore,this.wo)},enumerable:!0,configurable:!0}),Object.defineProperty(hl.prototype,"path",{get:function(){return this.do.path.$()},enumerable:!0,configurable:!0}),hl.prototype.collection=function(t){if(Xu("DocumentReference.collection",arguments,1),Yu("DocumentReference.collection","non-empty string",1,t),!t)throw new Gi(ji.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Wi.N(t);return new el(this.do.path.child(e),this.firestore,null)},hl.prototype.isEqual=function(t){if(!(t instanceof hl))throw ua("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.do.isEqual(t.do)&&this.wo===t.wo},hl.prototype.set=function(t,e){Ku("DocumentReference.set",arguments,1,2),e=yl("DocumentReference.set",e);var n=wl(this.wo,t,"DocumentReference.set"),i=n[0],r=n[1],o=this.firestore.__.Vo(r,i,e);return this.o_.write(o.To(this.do,Zo.Ke()))},hl.prototype.update=function(t,e){for(var n,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return n="string"==typeof t||t instanceof va?(Qu("DocumentReference.update",arguments,2),this.firestore.__.bo("DocumentReference.update",t,e,i)):(Xu("DocumentReference.update",arguments,1),this.firestore.__.yo("DocumentReference.update",t)),this.o_.write(n.To(this.do,Zo.exists(!0)))},hl.prototype.delete=function(){return Xu("DocumentReference.delete",arguments,0),this.o_.write([new rs(this.do,Zo.Ke())])},hl.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Ku("DocumentReference.onSnapshot",arguments,1,4);var n={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Mc(t[i])||(sa("DocumentReference.onSnapshot",n=t[i],["includeMetadataChanges"]),Zu("DocumentReference.onSnapshot","boolean","includeMetadataChanges",n.includeMetadataChanges),i++);var r={includeMetadataChanges:n.includeMetadataChanges},o=Mc(t[i])?t[i]:(Yu("DocumentReference.onSnapshot","function",i,t[i]),$u("DocumentReference.onSnapshot","function",i+1,t[i+1]),$u("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]});return this.b_(r,o)},hl.prototype.b_=function(t,n){var i=this,e=function(t){console.error("Uncaught Error in onSnapshot:",t)};n.error&&(e=n.error.bind(n));var r=new Ac({next:function(t){var e;n.next&&(e=t.docs.get(i.do),n.next(new $c(i.firestore,i.do,e,t.fromCache,t.hasPendingWrites,i.wo)))},error:e}),o=this.o_.listen(ks.ms(this.do.path),r,t);return function(){r.Kl(),i.o_.Ea(o)}},hl.prototype.get=function(n){var i=this;return Ku("DocumentReference.get",arguments,0,1),gl("DocumentReference.get",n),new Promise(function(e,t){n&&"cache"===n.source?i.firestore.r_().Wl(i.do).then(function(t){e(new $c(i.firestore,i.do,t,!0,t instanceof Rs&&t.Xe,i.wo))},t):i.v_(e,t,n)})},hl.prototype.v_=function(e,n,i){var r=this.b_({includeMetadataChanges:!0,_c:!0},{next:function(t){r(),!t.exists&&t.metadata.fromCache?n(new Gi(ji.UNAVAILABLE,"Failed to get document because the client is offline.")):t.exists&&t.metadata.fromCache&&i&&"server"===i.source?n(new Gi(ji.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(t)},error:n})},hl.prototype.withConverter=function(t){return new hl(this.do,this.firestore,t)},hl),Yc=(al.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},al),$c=(ul.prototype.data=function(t){var e=this;if(Ku("DocumentSnapshot.data",arguments,0,1),t=vl("DocumentSnapshot.data",t),this.S_){if(this.wo){var n=new Jc(this.P_,this.do,this.S_,this.C_,this.D_,null);return this.wo.fromFirestore(n,t)}return new Bc(this.P_.fo,this.P_.A_(),t.serverTimestamps||"none",function(t){return new Kc(t,e.P_,null)}).Yl(this.S_._s())}},ul.prototype.get=function(t,e){var n=this;if(Ku("DocumentSnapshot.get",arguments,1,2),e=vl("DocumentSnapshot.get",e),this.S_){var i=this.S_.data().field(sh("DocumentSnapshot.get",t));if(null!==i)return new Bc(this.P_.fo,this.P_.A_(),e.serverTimestamps||"none",function(t){return new Kc(t,n.P_,n.wo)}).Yl(i)}},Object.defineProperty(ul.prototype,"id",{get:function(){return this.do.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(ul.prototype,"ref",{get:function(){return new Kc(this.do,this.P_,this.wo)},enumerable:!0,configurable:!0}),Object.defineProperty(ul.prototype,"exists",{get:function(){return null!==this.S_},enumerable:!0,configurable:!0}),Object.defineProperty(ul.prototype,"metadata",{get:function(){return new Yc(this.D_,this.C_)},enumerable:!0,configurable:!0}),ul.prototype.isEqual=function(t){if(!(t instanceof ul))throw ua("isEqual","DocumentSnapshot",1,t);return this.P_===t.P_&&this.C_===t.C_&&this.do.isEqual(t.do)&&(null===this.S_?null===t.S_:this.S_.isEqual(t.S_))&&this.wo===t.wo},ul),Jc=(n(sl,jc=$c),sl.prototype.data=function(t){return jc.prototype.data.call(this,t)},sl),Zc=(ol.prototype.N_=function(t,e,n){var i;if(t.q()){if("array-contains"===e||"array-contains-any"===e)throw new Gi(ji.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.k_(n,e);for(var r=[],o=0,s=n;o<s.length;o++){var u=s[o];r.push(this.L_(u))}i={arrayValue:{values:r}}}else i=this.L_(n)}else"in"!==e&&"array-contains-any"!==e||this.k_(n,e),i=this.__.vo("Query.where",n,"in"===e);var a=Us.create(t,e,i);return this.q_(a),a},ol.prototype.O_=function(t,e){if(null!==this.F_.startAt)throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.F_.endAt)throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new eu(t,e);return this.x_(n),n},ol.prototype.M_=function(t,e,n){if(!e)throw new Gi(ji.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var i=[],r=0,o=this.F_.orderBy;r<o.length;r++){var s=o[r];if(s.field.q())i.push(co(this.fo,e.key));else{var u=e.field(s.field);if(Jr(u))throw new Gi(ji.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){var a=s.field.$();throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}i.push(u)}}return new Fs(i,n)},ol.prototype.B_=function(t,e,n){var i=this.F_.fs;if(e.length>i.length)throw new Gi(ji.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var r=[],o=0;o<e.length;o++){var s=e[o];if(i[o].field.q()){if("string"!=typeof s)throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.F_.Ms()&&-1!==s.indexOf("/"))throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var u=this.F_.path.child(Wi.N(s));if(!ir.W(u))throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+u+"' is not because it contains an odd number of segments.");var a=new ir(u);r.push(co(this.fo,a))}else{var h=this.__.vo(t,s);r.push(h)}}return new Fs(r,n)},ol.prototype.U_=function(t){if(t.Ls()&&0===t.fs.length)throw new Gi(ji.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},ol.prototype.L_=function(t){if("string"==typeof t){if(""===t)throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.F_.Ms()&&-1!==t.indexOf("/"))throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.F_.path.child(Wi.N(t));if(!ir.W(e))throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return co(this.fo,new ir(e))}if(t instanceof Wa)return co(this.fo,t.do);throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ra(t)+".")},ol.prototype.k_=function(t,e){if(!Array.isArray(t)||0===t.length)throw new Gi(ji.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Gi(ji.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new Gi(ji.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new Gi(ji.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},ol.prototype.q_=function(t){if(t instanceof Us){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],i=0<=e.indexOf(t.op),r=0<=n.indexOf(t.op);if(t.qs()){var o=this.F_.Is();if(null!==o&&!o.isEqual(t.field))throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.F_.Rs();null!==s&&this.Q_(t.field,s)}else if(r||i){var u=null;if(r&&(u=this.F_.Os(n)),null===u&&i&&(u=this.F_.Os(e)),null!=u)throw u===t.op?new Gi(ji.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Gi(ji.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+u.toString()+"' filters.")}}},ol.prototype.x_=function(t){var e;null!==this.F_.Rs()||null!==(e=this.F_.Is())&&this.Q_(e,t.field)},ol.prototype.Q_=function(t,e){if(!e.isEqual(t))throw new Gi(ji.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},n(rl,Fc=ol),rl.prototype.where=function(t,e,n){Xu("Query.where",arguments,3),oa("Query.where",3,n);var i=ea("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,e),r=sh("Query.where",t),o=this.N_(r,i,n);return new rl(this.F_.As(o),this.firestore,this.wo)},rl.prototype.orderBy=function(t,e){var n;if(Ku("Query.orderBy",arguments,1,2),$u("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new Gi(ji.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var i=sh("Query.orderBy",t),r=this.O_(i,n);return new rl(this.F_.Ps(r),this.firestore,this.wo)},rl.prototype.limit=function(t){return Xu("Query.limit",arguments,1),Yu("Query.limit","number",1,t),aa("Query.limit",1,t),new rl(this.F_.Vs(t),this.firestore,this.wo)},rl.prototype.limitToLast=function(t){return Xu("Query.limitToLast",arguments,1),Yu("Query.limitToLast","number",1,t),aa("Query.limitToLast",1,t),new rl(this.F_.ps(t),this.firestore,this.wo)},rl.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Qu("Query.startAt",arguments,1);var i=this.W_("Query.startAt",t,e,!0);return new rl(this.F_.ys(i),this.firestore,this.wo)},rl.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Qu("Query.startAfter",arguments,1);var i=this.W_("Query.startAfter",t,e,!1);return new rl(this.F_.ys(i),this.firestore,this.wo)},rl.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Qu("Query.endBefore",arguments,1);var i=this.W_("Query.endBefore",t,e,!0);return new rl(this.F_.gs(i),this.firestore,this.wo)},rl.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Qu("Query.endAt",arguments,1);var i=this.W_("Query.endAt",t,e,!1);return new rl(this.F_.gs(i),this.firestore,this.wo)},rl.prototype.isEqual=function(t){if(!(t instanceof rl))throw ua("isEqual","Query",1,t);return this.firestore===t.firestore&&this.F_.isEqual(t.F_)&&this.wo===t.wo},rl.prototype.withConverter=function(t){return new rl(this.F_,this.firestore,t)},rl.prototype.W_=function(t,e,n,i){if(oa(t,1,e),e instanceof $c)return Xu(t,y([e],n),1),this.M_(t,e.S_,i);var r=[e].concat(n);return this.B_(t,r,i)},rl.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Ku("Query.onSnapshot",arguments,1,4);var n,i={},r=0;return"object"!=typeof t[r]||Mc(t[r])||(sa("Query.onSnapshot",i=t[r],["includeMetadataChanges"]),Zu("Query.onSnapshot","boolean","includeMetadataChanges",i.includeMetadataChanges),r++),n=Mc(t[r])?t[r]:(Yu("Query.onSnapshot","function",r,t[r]),$u("Query.onSnapshot","function",r+1,t[r+1]),$u("Query.onSnapshot","function",r+2,t[r+2]),{next:t[r],error:t[r+1],complete:t[r+2]}),this.U_(this.F_),this.b_(i,n)},rl.prototype.b_=function(t,e){var n=this,i=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(i=e.error.bind(e));var r=new Ac({next:function(t){e.next&&e.next(new tl(n.firestore,n.F_,t,n.wo))},error:i}),o=this.firestore.r_(),s=o.listen(this.F_,r,t);return function(){r.Kl(),o.Ea(s)}},rl.prototype.get=function(n){var i=this;return Ku("Query.get",arguments,0,1),gl("Query.get",n),this.U_(this.F_),new Promise(function(e,t){n&&"cache"===n.source?i.firestore.r_().jl(i.F_).then(function(t){e(new tl(i.firestore,i.F_,t,i.wo))},t):i.v_(e,t,n)})},rl.prototype.v_=function(e,n,i){var r=this.b_({includeMetadataChanges:!0,_c:!0},{next:function(t){r(),t.metadata.fromCache&&i&&"server"===i.source?n(new Gi(ji.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(t)},error:n})},rl),tl=(Object.defineProperty(il.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(il.prototype,"empty",{get:function(){return this.G_.docs._()},enumerable:!0,configurable:!0}),Object.defineProperty(il.prototype,"size",{get:function(){return this.G_.docs.size},enumerable:!0,configurable:!0}),il.prototype.forEach=function(e,n){var i=this;Ku("QuerySnapshot.forEach",arguments,1,2),Yu("QuerySnapshot.forEach","function",1,e),this.G_.docs.forEach(function(t){e.call(n,i.H_(t))})},Object.defineProperty(il.prototype,"query",{get:function(){return new Zc(this.j_,this.P_,this.wo)},enumerable:!0,configurable:!0}),il.prototype.docChanges=function(t){t&&(sa("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Zu("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.G_.Bt)throw new Gi(ji.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.K_&&this.z_===e||(this.K_=function(r,e,o,s){if(o.Ot._()){var n=0;return o.docChanges.map(function(t){var e=new Jc(r,t.doc.key,t.doc,o.fromCache,o.xt.has(t.doc.key),s);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var u=o.Ot;return o.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new Jc(r,t.doc.key,t.doc,o.fromCache,o.xt.has(t.doc.key),s),n=-1,i=-1;return 0!==t.type&&(n=u.indexOf(t.doc.key),u=u.delete(t.doc.key)),1!==t.type&&(i=(u=u.add(t.doc)).indexOf(t.doc.key)),{type:function(){switch(t.type){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ai()}}(),doc:e,oldIndex:n,newIndex:i}})}(this.P_,e,this.G_,this.wo),this.z_=e),this.K_},il.prototype.isEqual=function(t){if(!(t instanceof il))throw ua("isEqual","QuerySnapshot",1,t);return this.P_===t.P_&&this.j_.isEqual(t.j_)&&this.G_.isEqual(t.G_)&&this.wo===t.wo},il.prototype.H_=function(t){return new Jc(this.P_,t.key,t,this.metadata.fromCache,this.G_.xt.has(t.key),this.wo)},il),el=(n(nl,qc=Zc),Object.defineProperty(nl.prototype,"id",{get:function(){return this.F_.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(nl.prototype,"parent",{get:function(){var t=this.F_.path.g();return t._()?null:new Kc(new ir(t),this.firestore,null)},enumerable:!0,configurable:!0}),Object.defineProperty(nl.prototype,"path",{get:function(){return this.F_.path.$()},enumerable:!0,configurable:!0}),nl.prototype.doc=function(t){Ku("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Si.t()),Yu("CollectionReference.doc","non-empty string",1,t);var e=Wi.N(t);return Kc.R_(this.F_.path.child(e),this.firestore,this.wo)},nl.prototype.add=function(t){Xu("CollectionReference.add",arguments,1),Yu("CollectionReference.add","object",1,this.wo?this.wo.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},nl.prototype.withConverter=function(t){return new nl(this.Y_,this.firestore,t)},nl);function nl(t,e,n){var i=this;if(((i=qc.call(this,ks.ms(t),e,n)||this).Y_=t).length%2!=1)throw new Gi(ji.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.$()+" has "+t.length);return i}function il(t,e,n,i){this.P_=t,this.j_=e,this.G_=n,this.wo=i,this.K_=null,this.z_=null,this.metadata=new Yc(n.hasPendingWrites,n.fromCache)}function rl(t,e,n){var i=this;return(i=Fc.call(this,e.fo,e.__,t)||this).F_=t,i.firestore=e,i.wo=n,i}function ol(t,e,n){this.fo=t,this.__=e,this.F_=n}function sl(){return null!==jc&&jc.apply(this,arguments)||this}function ul(t,e,n,i,r,o){this.P_=t,this.do=e,this.S_=n,this.C_=i,this.D_=r,this.wo=o}function al(t,e){this.hasPendingWrites=t,this.fromCache=e}function hl(t,e,n){var i=this;return(i=Gc.call(this,e.fo,t,n)||this).do=t,i.firestore=e,i.wo=n,i.o_=i.firestore.r_(),i}function cl(t){this.P_=t,this.p_=[],this.y_=!1}function ll(t,e){this.P_=t,this.V_=e}function fl(t,e,n){var i=this;if(void 0===n&&(n=new Ic),this.n_=null,this.i_=new ku,this.INTERNAL={delete:function(){return f(i,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.r_(),[4,this.o_.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var r=t;this.n_=r,this.fo=fl.h_(r),this.a_=r.name,this.u_=new _h(e)}else{var o=t;if(!o.projectId)throw new Gi(ji.INVALID_ARGUMENT,"Must provide projectId");this.fo=new ki(o.projectId,o.database),this.a_="[DEFAULT]",this.u_=new Eh}this.c_=n,this.l_=new Hc({})}function pl(t){var e,n,i,r;if(void 0===t.host){if(void 0!==t.ssl)throw new Gi(ji.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Ju("settings","non-empty string","host",t.host),this.host=t.host,Zu("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(sa("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Zu("settings","object","credentials",t.credentials),this.credentials=t.credentials,Zu("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),Zu("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?Ii("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Ii("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(i=t.ignoreUndefinedProperties)&&void 0!==i&&i,Zu("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=xu.ki;else{if(t.cacheSizeBytes!==zc&&t.cacheSizeBytes<xu.Ni)throw new Gi(ji.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+xu.Ni);this.cacheSizeBytes=t.cacheSizeBytes}Zu("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(r=t.experimentalForceLongPolling)&&void 0!==r&&r}function dl(t,e,n,i){this.s=t,this.timestampsInSnapshots=e,this.zl=n,this.Hl=i}function yl(t,e){if(void 0===e)return{merge:!1};if(sa(t,e,["merge","mergeFields"]),Zu(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n){if(!(n instanceof Array))throw new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+ra(n));for(var i,r=0;r<n.length;++r)if(!("string"==typeof(i=n[r])||i instanceof va))throw new Gi(ji.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+r+" was: "+ra(n[r]))}(t,"mergeFields",n),void 0!==e.mergeFields&&void 0!==e.merge)throw new Gi(ji.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function vl(t,e){return void 0===e?{}:(sa(t,e,["serverTimestamps"]),ta(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function gl(t,e){$u(t,"object",1,e),e&&(sa(t,e,["source"]),ta(t,0,"source",e.source,["default","server","cache"]))}function ml(t,e,n){if(e instanceof Wa){if(e.firestore!==n)throw new Gi(ji.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw ua(t,"DocumentReference",1,e)}function wl(t,e,n){var i;return t?(i=t.toFirestore(e),n="toFirestore() in "+n):i=e,[i,n]}var bl=["length","name"];function El(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new Gi(ji.INVALID_ARGUMENT,t)}for(var i=0,r=Object.getOwnPropertyNames(t);i<r.length;i++){var o=r[i];-1===bl.indexOf(o)&&(n[o]=t[o])}return n}var _l,Il=El(Wc,"Use firebase.firestore() instead."),Tl=El(Xc,"Use firebase.firestore().runTransaction() instead."),Al=El(Qc,"Use firebase.firestore().batch() instead."),Nl=El(Kc,"Use firebase.firestore().doc() instead."),Pl=El($c),Sl=El(Jc),Ol=El(Zc),Rl=El(tl),Ll=El(el,"Use firebase.firestore().collection() instead."),Dl=El(ka,"Use FieldValue.<field>() instead."),kl=El(ya,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Ul={Firestore:Il,GeoPoint:Va,Timestamp:Bi,Blob:kl,Transaction:Tl,WriteBatch:Al,DocumentReference:Nl,DocumentSnapshot:Pl,Query:Ol,QueryDocumentSnapshot:Sl,QuerySnapshot:Rl,CollectionReference:Ll,FieldPath:va,FieldValue:Dl,setLogLevel:Wc.setLogLevel,CACHE_SIZE_UNLIMITED:zc};(_l=Vl).INTERNAL.registerComponent(new gi("firestore",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),new Wc(e,n,new Ic);var e,n},"PUBLIC").setServiceProps(Object.assign({},Ul))),_l.registerVersion("@firebase/firestore","1.15.5")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore.memory.js - be sure to load firebase-app.js first.")}});