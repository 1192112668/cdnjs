"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),React=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_useTheme=_interopRequireDefault(require("../styles/useTheme")),_colorManipulator=require("../styles/colorManipulator"),_useIsFocusVisible2=_interopRequireDefault(require("../utils/useIsFocusVisible")),_useEnhancedEffect=_interopRequireDefault(require("../utils/useEnhancedEffect")),_ownerDocument=_interopRequireDefault(require("../utils/ownerDocument")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_useForkRef=_interopRequireDefault(require("../utils/useForkRef")),_capitalize=_interopRequireDefault(require("../utils/capitalize")),_useControlled3=_interopRequireDefault(require("../utils/useControlled")),_ValueLabel=_interopRequireDefault(require("./ValueLabel"));function asc(e,t){return e-t}function clamp(e,t,a){return Math.min(Math.max(t,e),a)}function findClosest(e,n){return e.reduce(function(e,t,a){var r=Math.abs(n-t);return null===e||r<e.distance||r===e.distance?{distance:r,index:a}:e},null).index}function trackFinger(e,t){if(void 0!==t.current&&e.changedTouches){for(var a=0;a<e.changedTouches.length;a+=1){var r=e.changedTouches[a];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function valueToPercent(e,t,a){return 100*(e-t)/(a-t)}function percentToValue(e,t,a){return(a-t)*e+t}function getDecimalPrecision(e){if(Math.abs(e)<1){var t=e.toExponential().split("e-"),a=t[0].split(".")[1];return(a?a.length:0)+parseInt(t[1],10)}var r=e.toString().split(".")[1];return r?r.length:0}function roundValueToStep(e,t,a){var r=Math.round((e-a)/t)*t+a;return Number(r.toFixed(getDecimalPrecision(t)))}function setValueIndex(e){var t=e.values,a=e.source,r=e.newValue,n=e.index;if(a[n]===r)return a;var o=t.slice();return o[n]=r,o}function focusThumb(e){var t=e.sliderRef,a=e.activeIndex,r=e.setActive,n=(0,_ownerDocument.default)(t.current);t.current.contains(n.activeElement)&&Number(n.activeElement.getAttribute("data-index"))===a||t.current.querySelector('[role="slider"][data-index="'.concat(a,'"]')).focus(),r&&r(a)}var cachedSupportsTouchActionNone,axisProps={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},Identity=function(e){return e};function doesSupportTouchActionNone(){var e;return void 0===cachedSupportsTouchActionNone&&((e=document.createElement("div")).style.touchAction="none",document.body.appendChild(e),cachedSupportsTouchActionNone="none"===window.getComputedStyle(e).touchAction,e.parentElement.removeChild(e)),cachedSupportsTouchActionNone}var styles=function(e){return{root:{height:2,width:"100%",boxSizing:"content-box",padding:"13px 0",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette.primary.main,WebkitTapHighlightColor:"transparent","&$disabled":{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},"&$vertical":{width:2,height:"100%",padding:"0 13px"},"@media (pointer: coarse)":{padding:"20px 0","&$vertical":{padding:"0 20px"}},"@media print":{colorAdjust:"exact"}},colorPrimary:{},colorSecondary:{color:e.palette.secondary.main},marked:{marginBottom:20,"&$vertical":{marginBottom:"auto",marginRight:20}},vertical:{},disabled:{},rail:{display:"block",position:"absolute",width:"100%",height:2,borderRadius:1,backgroundColor:"currentColor",opacity:.38,"$vertical &":{height:"100%",width:2}},track:{display:"block",position:"absolute",height:2,borderRadius:1,backgroundColor:"currentColor","$vertical &":{width:2}},trackFalse:{"& $track":{display:"none"}},trackInverted:{"& $track":{backgroundColor:"light"===e.palette.mode?(0,_colorManipulator.lighten)(e.palette.primary.main,.62):(0,_colorManipulator.darken)(e.palette.primary.main,.5)},"& $rail":{opacity:1}},thumb:{position:"absolute",width:12,height:12,marginLeft:-6,marginTop:-5,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow"],{duration:e.transitions.duration.shortest}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",left:-15,top:-15,right:-15,bottom:-15},"&:hover, &$focusVisible":{boxShadow:"0px 0px 0px 8px ".concat((0,_colorManipulator.fade)(e.palette.primary.main,.16)),"@media (hover: none)":{boxShadow:"none"}},"&$active":{boxShadow:"0px 0px 0px 14px ".concat((0,_colorManipulator.fade)(e.palette.primary.main,.16))},"&$disabled":{width:8,height:8,marginLeft:-4,marginTop:-3,"&:hover":{boxShadow:"none"}},"$vertical &":{marginLeft:-5,marginBottom:-6},"$vertical &$disabled":{marginLeft:-3,marginBottom:-4}},thumbColorPrimary:{},thumbColorSecondary:{"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat((0,_colorManipulator.fade)(e.palette.secondary.main,.16))},"&$active":{boxShadow:"0px 0px 0px 14px ".concat((0,_colorManipulator.fade)(e.palette.secondary.main,.16))}},active:{},focusVisible:{},valueLabel:{left:"calc(-50% - 4px)"},mark:{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},markActive:{backgroundColor:e.palette.background.paper,opacity:.8},markLabel:(0,_extends2.default)({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",top:26,transform:"translateX(-50%)",whiteSpace:"nowrap","$vertical &":{top:"auto",left:26,transform:"translateY(50%)"},"@media (pointer: coarse)":{top:40,"$vertical &":{left:31}}}),markLabelActive:{color:e.palette.text.primary}}};exports.styles=styles;var Forward=function(e){return e.children},Slider=React.forwardRef(function(e,t){var o=e["aria-label"],l=e["aria-labelledby"],u=e["aria-valuetext"],i=e.classes,a=e.className,r=e.color,c=void 0===r?"primary":r,n=e.component,s=void 0===n?"span":n,p=e.defaultValue,d=e.disabled,f=void 0!==d&&d,v=e.getAriaLabel,m=e.getAriaValueText,b=e.marks,h=void 0!==b&&b,y=e.max,_=void 0===y?100:y,x=e.min,g=void 0===x?0:x,T=e.name,k=e.onChange,R=e.onChangeCommitted,w=e.onMouseDown,C=e.orientation,E=void 0===C?"horizontal":C,A=e.scale,q=void 0===A?Identity:A,D=e.step,L=void 0===D?1:D,V=e.ThumbComponent,S=void 0===V?"span":V,F=e.track,I=void 0===F?"normal":F,N=e.value,M=e.ValueLabelComponent,P=void 0===M?_ValueLabel.default:M,O=e.valueLabelDisplay,$=void 0===O?"off":O,z=e.valueLabelFormat,j=void 0===z?Identity:z,B=(0,_objectWithoutProperties2.default)(e,["aria-label","aria-labelledby","aria-valuetext","classes","className","color","component","defaultValue","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","ThumbComponent","track","value","ValueLabelComponent","valueLabelDisplay","valueLabelFormat"]),W=(0,_useTheme.default)(),Y=React.useRef(),U=React.useState(-1),X=U[0],H=U[1],K=React.useState(-1),G=K[0],J=K[1],Q=(0,_useControlled3.default)({controlled:N,default:p,name:"Slider"}),Z=(0,_slicedToArray2.default)(Q,2),ee=Z[0],te=Z[1],ae=k&&function(e,t){e instanceof Event||e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:t,name:T}}),k(e,t)},re=Array.isArray(ee),ne=(ne=re?ee.slice().sort(asc):[ee]).map(function(e){return clamp(e,g,_)}),oe=!0===h&&null!==L?(0,_toConsumableArray2.default)(Array(Math.floor((_-g)/L)+1)).map(function(e,t){return{value:g+L*t}}):h||[],le=(0,_useIsFocusVisible2.default)(),ue=le.isFocusVisibleRef,ie=le.onBlur,ce=le.onFocus,se=le.ref,pe=React.useState(-1),de=pe[0],fe=pe[1],ve=React.useRef(),me=(0,_useForkRef.default)(se,ve),be=(0,_useForkRef.default)(t,me),he=(0,_useEventCallback.default)(function(e){var t=Number(e.currentTarget.getAttribute("data-index"));ce(e),!0===ue.current&&fe(t),J(t)}),ye=(0,_useEventCallback.default)(function(e){ie(e),!1===ue.current&&fe(-1),J(-1)}),_e=(0,_useEventCallback.default)(function(e){var t=Number(e.currentTarget.getAttribute("data-index"));J(t)}),xe=(0,_useEventCallback.default)(function(){J(-1)});(0,_useEnhancedEffect.default)(function(){f&&ve.current.contains(document.activeElement)&&document.activeElement.blur()},[f]),f&&-1!==X&&H(-1),f&&-1!==de&&fe(-1);var ge="rtl"===W.direction,Te=(0,_useEventCallback.default)(function(e){var t,a,r=Number(e.currentTarget.getAttribute("data-index")),n=ne[r],o=(_-g)/10,l=oe.map(function(e){return e.value}),u=l.indexOf(n),i=ge?"ArrowLeft":"ArrowRight",c=ge?"ArrowRight":"ArrowLeft";switch(e.key){case"Home":a=g;break;case"End":a=_;break;case"PageUp":L&&(a=n+o);break;case"PageDown":L&&(a=n-o);break;case i:case"ArrowUp":a=L?n+L:l[u+1]||l[l.length-1];break;case c:case"ArrowDown":a=L?n-L:l[u-1]||l[0];break;default:return}e.preventDefault(),L&&(a=roundValueToStep(a,L,g)),a=clamp(a,g,_),re&&(a=setValueIndex({values:ne,source:ee,newValue:t=a,index:r}).sort(asc),focusThumb({sliderRef:ve,activeIndex:a.indexOf(t)})),te(a),fe(r),ae&&ae(e,a),R&&R(e,a)}),ke=React.useRef(),Re=E;ge&&"vertical"!==E&&(Re+="-reverse");function we(e){var t,a,r=e.finger,n=e.move,o=void 0!==n&&n,l=e.values,u=e.source,i=ve.current.getBoundingClientRect(),c=i.width,s=i.height,p=i.bottom,d=i.left,f=0===Re.indexOf("vertical")?(p-r.y)/s:(r.x-d)/c;-1!==Re.indexOf("-reverse")&&(f=1-f),a=percentToValue(f,g,_),a=clamp(a=L?roundValueToStep(a,L,g):(t=oe.map(function(e){return e.value}))[findClosest(t,a)],g,_);var v,m=0;return re&&(m=(a=setValueIndex({values:l,source:u,newValue:v=a,index:m=o?ke.current:findClosest(l,a)}).sort(asc)).indexOf(v),ke.current=m),{newValue:a,activeIndex:m}}var Ce=(0,_useEventCallback.default)(function(e){var t,a,r,n=trackFinger(e,Y);n&&("mousemove"!==e.type||0!==e.buttons?(a=(t=we({finger:n,move:!0,values:ne,source:ee})).newValue,r=t.activeIndex,focusThumb({sliderRef:ve,activeIndex:r,setActive:H}),te(a),ae&&ae(e,a)):Ee(e))}),Ee=(0,_useEventCallback.default)(function(e){var t,a=trackFinger(e,Y);a&&(t=we({finger:a,values:ne,source:ee}).newValue,H(-1),"touchend"===e.type&&J(-1),R&&R(e,t),Y.current=void 0,qe())}),Ae=(0,_useEventCallback.default)(function(e){doesSupportTouchActionNone()||e.preventDefault();var t=e.changedTouches[0];null!=t&&(Y.current=t.identifier);var a=trackFinger(e,Y),r=we({finger:a,values:ne,source:ee}),n=r.newValue,o=r.activeIndex;focusThumb({sliderRef:ve,activeIndex:o,setActive:H}),te(n),ae&&ae(e,n);var l=(0,_ownerDocument.default)(ve.current);l.addEventListener("touchmove",Ce),l.addEventListener("touchend",Ee)}),qe=React.useCallback(function(){var e=(0,_ownerDocument.default)(ve.current);e.removeEventListener("mousemove",Ce),e.removeEventListener("mouseup",Ee),e.removeEventListener("touchmove",Ce),e.removeEventListener("touchend",Ee)},[Ee,Ce]);React.useEffect(function(){var e=ve.current;return e.addEventListener("touchstart",Ae,{passive:doesSupportTouchActionNone()}),function(){e.removeEventListener("touchstart",Ae,{passive:doesSupportTouchActionNone()}),qe()}},[qe,Ae]),React.useEffect(function(){f&&qe()},[f,qe]);var De=(0,_useEventCallback.default)(function(e){var t,a,r,n,o;w&&w(e),0===e.button&&(e.preventDefault(),t=trackFinger(e,Y),r=(a=we({finger:t,values:ne,source:ee})).newValue,n=a.activeIndex,focusThumb({sliderRef:ve,activeIndex:n,setActive:H}),te(r),ae&&ae(e,r),(o=(0,_ownerDocument.default)(ve.current)).addEventListener("mousemove",Ce),o.addEventListener("mouseup",Ee))}),Le=valueToPercent(re?ne[0]:g,g,_),Ve=valueToPercent(ne[ne.length-1],g,_)-Le,Se=(0,_extends2.default)({},axisProps[Re].offset(Le),axisProps[Re].leap(Ve));return React.createElement(s,(0,_extends2.default)({ref:be,className:(0,_clsx.default)(i.root,i["color".concat((0,_capitalize.default)(c))],a,f&&i.disabled,0<oe.length&&oe.some(function(e){return e.label})&&i.marked,!1===I&&i.trackFalse,"vertical"===E&&i.vertical,"inverted"===I&&i.trackInverted),onMouseDown:De},B),React.createElement("span",{className:i.rail}),React.createElement("span",{className:i.track,style:Se}),React.createElement("input",{value:ne.join(","),name:T,type:"hidden"}),oe.map(function(e,t){var a=valueToPercent(e.value,g,_),r=axisProps[Re].offset(a),n=!1===I?-1!==ne.indexOf(e.value):"normal"===I&&(re?e.value>=ne[0]&&e.value<=ne[ne.length-1]:e.value<=ne[0])||"inverted"===I&&(re?e.value<=ne[0]||e.value>=ne[ne.length-1]:e.value>=ne[0]);return React.createElement(React.Fragment,{key:e.value},React.createElement("span",{style:r,"data-index":t,className:(0,_clsx.default)(i.mark,n&&i.markActive)}),null!=e.label?React.createElement("span",{"aria-hidden":!0,"data-index":t,style:r,className:(0,_clsx.default)(i.markLabel,n&&i.markLabelActive)},e.label):null)}),ne.map(function(e,t){var a=valueToPercent(e,g,_),r=axisProps[Re].offset(a),n="off"===$?Forward:P;return React.createElement(n,{key:t,valueLabelFormat:j,valueLabelDisplay:$,className:i.valueLabel,value:"function"==typeof j?j(q(e),t):j,index:t,open:G===t||X===t||"on"===$,disabled:f},React.createElement(S,{className:(0,_clsx.default)(i.thumb,i["thumbColor".concat((0,_capitalize.default)(c))],X===t&&i.active,f&&i.disabled,de===t&&i.focusVisible),tabIndex:f?null:0,role:"slider",style:r,"data-index":t,"aria-label":v?v(t):o,"aria-labelledby":l,"aria-orientation":E,"aria-valuemax":q(_),"aria-valuemin":q(g),"aria-valuenow":q(e),"aria-valuetext":m?m(q(e),t):u,onKeyDown:Te,onFocus:he,onBlur:ye,onMouseOver:_e,onMouseLeave:xe}))}))});"production"!==process.env.NODE_ENV&&(Slider.propTypes={"aria-label":(0,_utils.chainPropTypes)(_propTypes.default.string,function(e){return Array.isArray(e.value||e.defaultValue)&&null!=e["aria-label"]?new Error("Material-UI: You need to use the `getAriaLabel` prop instead of `aria-label` when using a range slider."):null}),"aria-labelledby":_propTypes.default.string,"aria-valuetext":(0,_utils.chainPropTypes)(_propTypes.default.string,function(e){return Array.isArray(e.value||e.defaultValue)&&null!=e["aria-valuetext"]?new Error("Material-UI: You need to use the `getAriaValueText` prop instead of `aria-valuetext` when using a range slider."):null}),children:_propTypes.default.node,classes:_propTypes.default.object,className:_propTypes.default.string,color:_propTypes.default.oneOf(["primary","secondary"]),component:_propTypes.default.elementType,defaultValue:_propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.number),_propTypes.default.number]),disabled:_propTypes.default.bool,getAriaLabel:_propTypes.default.func,getAriaValueText:_propTypes.default.func,marks:_propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.shape({label:_propTypes.default.node,value:_propTypes.default.number.isRequired})),_propTypes.default.bool]),max:_propTypes.default.number,min:_propTypes.default.number,name:_propTypes.default.string,onChange:_propTypes.default.func,onChangeCommitted:_propTypes.default.func,onMouseDown:_propTypes.default.func,orientation:_propTypes.default.oneOf(["horizontal","vertical"]),scale:_propTypes.default.func,step:_propTypes.default.number,ThumbComponent:_propTypes.default.elementType,track:_propTypes.default.oneOf(["inverted","normal",!1]),value:_propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.number),_propTypes.default.number]),ValueLabelComponent:_propTypes.default.elementType,valueLabelDisplay:_propTypes.default.oneOf(["auto","off","on"]),valueLabelFormat:_propTypes.default.oneOfType([_propTypes.default.func,_propTypes.default.string])});var _default=(0,_withStyles.default)(styles,{name:"MuiSlider"})(Slider);exports.default=_default;