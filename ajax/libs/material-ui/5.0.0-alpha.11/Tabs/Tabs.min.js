"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),React=_interopRequireWildcard(require("react")),_reactIs=require("react-is"),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_debounce=_interopRequireDefault(require("../utils/debounce")),_ownerWindow=_interopRequireDefault(require("../utils/ownerWindow")),_scrollLeft=require("../utils/scrollLeft"),_animate=_interopRequireDefault(require("../internal/animate")),_ScrollbarSize=_interopRequireDefault(require("./ScrollbarSize")),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_TabIndicator=_interopRequireDefault(require("./TabIndicator")),_TabScrollButton=_interopRequireDefault(require("../TabScrollButton")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_useTheme=_interopRequireDefault(require("../styles/useTheme")),styles=function(e){return{root:{overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},vertical:{flexDirection:"column"},flexContainer:{display:"flex"},flexContainerVertical:{flexDirection:"column"},centered:{justifyContent:"center"},scroller:{position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},fixed:{overflowX:"hidden",width:"100%"},scrollableX:{overflowX:"auto",overflowY:"hidden"},scrollableY:{overflowY:"auto",overflowX:"hidden"},hideScrollbar:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},scrollButtons:{},scrollButtonsHideMobile:(0,_defineProperty2.default)({},e.breakpoints.down("sm"),{display:"none"}),indicator:{}}};exports.styles=styles;var Tabs=React.forwardRef(function(e,t){var r=e["aria-label"],l=e["aria-labelledby"],o=e.action,a=e.centered,n=void 0!==a&&a,i=e.children,c=e.classes,s=e.className,u=e.component,d=void 0===u?"div":u,f=e.allowScrollButtonsMobile,p=void 0!==f&&f,b=e.indicatorColor,v=void 0===b?"secondary":b,_=e.onChange,h=e.orientation,m=void 0===h?"horizontal":h,y=e.ScrollButtonComponent,T=void 0===y?_TabScrollButton.default:y,R=e.scrollButtons,w=void 0===R?"auto":R,S=e.selectionFollowsFocus,g=e.TabIndicatorProps,q=void 0===g?{}:g,x=e.TabScrollButtonProps,C=e.textColor,E=void 0===C?"inherit":C,B=e.value,N=e.variant,W=void 0===N?"standard":N,D=e.visibleScrollbar,M=void 0!==D&&D,L=(0,_objectWithoutProperties2.default)(e,["aria-label","aria-labelledby","action","centered","children","classes","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"]),k=(0,_useTheme.default)(),P="scrollable"===W,I="rtl"===k.direction,z="vertical"===m,j=z?"scrollTop":"scrollLeft",O=z?"top":"left",F=z?"bottom":"right",A=z?"clientHeight":"clientWidth",H=z?"height":"width";"production"!==process.env.NODE_ENV&&n&&P&&console.error('Material-UI: You can not use the `centered={true}` and `variant="scrollable"` properties at the same time on a `Tabs` component.');function V(){var e,t,r,l,o,a=se.current;return a&&(e=a.getBoundingClientRect(),t={clientWidth:a.clientWidth,scrollLeft:a.scrollLeft,scrollTop:a.scrollTop,scrollLeftNormalized:(0,_scrollLeft.getNormalizedScrollLeft)(a,k.direction),scrollWidth:a.scrollWidth,top:e.top,bottom:e.bottom,left:e.left,right:e.right}),!a||!1===B||0<(l=ue.current.children).length&&(o=l[ce.get(B)],"production"!==process.env.NODE_ENV&&(o||console.error(["Material-UI: The value provided to the Tabs component is invalid.","None of the Tabs' children match with `".concat(B,"`."),ce.keys?"You can provide one of the following values: ".concat(Array.from(ce.keys()).join(", "),"."):null].join("\n"))),r=o?o.getBoundingClientRect():null),{tabsMeta:t,tabMeta:r}}function X(e){(0,_animate.default)(j,se.current,e)}function Y(e){var t=se.current[j];z?t+=e:(t+=e*(I?-1:1),t*=I&&"reverse"===(0,_scrollLeft.detectScrollType)()?-1:1),X(t)}function U(){for(var e=se.current[A],t=0,r=Array.from(ue.current.children),l=0;l<r.length;l+=1){var o=r[l];if(t+o[A]>e)break;t+=o[A]}return t}function K(){Y(-1*U())}function G(){Y(U())}var J=React.useState(!1),Q=J[0],Z=J[1],$=React.useState({}),ee=$[0],te=$[1],re=React.useState({start:!1,end:!1}),le=re[0],oe=re[1],ae=React.useState({overflow:"hidden",scrollbarWidth:0}),ne=ae[0],ie=ae[1],ce=new Map,se=React.useRef(null),ue=React.useRef(null),de=(0,_useEventCallback.default)(function(){var e,t,r=V(),l=r.tabsMeta,o=r.tabMeta,a=0;o&&l&&(a=z?o.top-l.top+l.scrollTop:(t=I?l.scrollLeftNormalized+l.clientWidth-l.scrollWidth:l.scrollLeft,o.left-l.left+t));var n,i,c=(e={},(0,_defineProperty2.default)(e,O,a),(0,_defineProperty2.default)(e,H,o?o[H]:0),e);isNaN(ee[O])||isNaN(ee[H])?te(c):(n=Math.abs(ee[O]-c[O]),i=Math.abs(ee[H]-c[H]),(1<=n||1<=i)&&te(c))}),fe=React.useCallback(function(e){ie({overflow:null,scrollbarWidth:e})},[]),pe=(0,_useEventCallback.default)(function(){var e,t,r=V(),l=r.tabsMeta,o=r.tabMeta;o&&l&&(o[O]<l[O]?(e=l[j]+(o[O]-l[O]),X(e)):o[F]>l[F]&&(t=l[j]+(o[F]-l[F]),X(t)))}),be=(0,_useEventCallback.default)(function(){var e,t,r,l,o,a,n,i,c;P&&!1!==w&&(t=(e=se.current).scrollTop,r=e.scrollHeight,l=e.clientHeight,o=e.scrollWidth,a=e.clientWidth,c=z?(i=1<t,t<r-l-1):(n=(0,_scrollLeft.getNormalizedScrollLeft)(se.current,k.direction),i=I?n<o-a-1:1<n,I?1<n:n<o-a-1),i===le.start&&c===le.end||oe({start:i,end:c}))});React.useEffect(function(){var e=(0,_debounce.default)(function(){de(),be()}),t=(0,_ownerWindow.default)(se.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}},[de,be]);var ve=React.useMemo(function(){return(0,_debounce.default)(function(){be()})},[be]);React.useEffect(function(){return function(){ve.clear()}},[ve]),React.useEffect(function(){Z(!0)},[]),React.useEffect(function(){de(),be()}),React.useEffect(function(){pe()},[pe,ee]),React.useImperativeHandle(o,function(){return{updateIndicator:de,updateScrollButtons:be}},[de,be]);var _e=React.createElement(_TabIndicator.default,(0,_extends2.default)({className:c.indicator,orientation:m,color:v},q,{style:(0,_extends2.default)({},ee,q.style)})),he=0,me=React.Children.map(i,function(e){if(!React.isValidElement(e))return null;"production"!==process.env.NODE_ENV&&(0,_reactIs.isFragment)(e)&&console.error(["Material-UI: The Tabs component doesn't accept a Fragment as a child.","Consider providing an array instead."].join("\n"));var t=void 0===e.props.value?he:e.props.value;ce.set(t,he);var r=t===B;return he+=1,React.cloneElement(e,(0,_extends2.default)({fullWidth:"fullWidth"===W,indicator:r&&!Q&&_e,selected:r,selectionFollowsFocus:S,onChange:_,textColor:E,value:t},1!==he||!1!==B||e.props.tabIndex?{}:{tabIndex:0}))}),ye=function(){var e={};e.scrollbarSizeListener=P?React.createElement(_ScrollbarSize.default,{onChange:fe,className:(0,_clsx.default)(c.scrollableX,c.hideScrollbar)}):null;var t=le.start||le.end,r=P&&("auto"===w&&t||!0===w);return e.scrollButtonStart=r?React.createElement(T,(0,_extends2.default)({orientation:m,direction:I?"right":"left",onClick:K,disabled:!le.start,className:(0,_clsx.default)(c.scrollButtons,!p&&c.scrollButtonsHideMobile)},x)):null,e.scrollButtonEnd=r?React.createElement(T,(0,_extends2.default)({orientation:m,direction:I?"left":"right",onClick:G,disabled:!le.end,className:(0,_clsx.default)(c.scrollButtons,!p&&c.scrollButtonsHideMobile)},x)):null,e}();return React.createElement(d,(0,_extends2.default)({className:(0,_clsx.default)(c.root,s,z&&c.vertical),ref:t},L),ye.scrollButtonStart,ye.scrollbarSizeListener,React.createElement("div",{className:(0,_clsx.default)(c.scroller,P?[z?c.scrollableY:c.scrollableX,!M&&c.hideScrollbar]:c.fixed),style:(0,_defineProperty2.default)({overflow:ne.overflow},z?"margin".concat(I?"Left":"Right"):"marginBottom",M?void 0:-ne.scrollbarWidth),ref:se,onScroll:ve},React.createElement("div",{"aria-label":r,"aria-labelledby":l,"aria-orientation":"vertical"===m?"vertical":null,className:(0,_clsx.default)(c.flexContainer,z&&c.flexContainerVertical,n&&!P&&c.centered),onKeyDown:function(e){var t=e.target;if("tab"===t.getAttribute("role")){var r=null,l="vertical"!==m?"ArrowLeft":"ArrowUp",o="vertical"!==m?"ArrowRight":"ArrowDown";switch("vertical"!==m&&"rtl"===k.direction&&(l="ArrowRight",o="ArrowLeft"),e.key){case l:r=t.previousElementSibling||ue.current.lastChild;break;case o:r=t.nextElementSibling||ue.current.firstChild;break;case"Home":r=ue.current.firstChild;break;case"End":r=ue.current.lastChild}null!==r&&(r.focus(),e.preventDefault())}},ref:ue,role:"tablist"},me),Q&&_e),ye.scrollButtonEnd)});"production"!==process.env.NODE_ENV&&(Tabs.propTypes={action:_utils.refType,allowScrollButtonsMobile:_propTypes.default.bool,"aria-label":_propTypes.default.string,"aria-labelledby":_propTypes.default.string,centered:_propTypes.default.bool,children:_propTypes.default.node,classes:_propTypes.default.object,className:_propTypes.default.string,component:_propTypes.default.elementType,indicatorColor:_propTypes.default.oneOf(["primary","secondary"]),onChange:_propTypes.default.func,orientation:_propTypes.default.oneOf(["horizontal","vertical"]),ScrollButtonComponent:_propTypes.default.elementType,scrollButtons:_propTypes.default.oneOf(["auto",!1,!0]),selectionFollowsFocus:_propTypes.default.bool,TabIndicatorProps:_propTypes.default.object,TabScrollButtonProps:_propTypes.default.object,textColor:_propTypes.default.oneOf(["inherit","primary","secondary"]),value:_propTypes.default.any,variant:_propTypes.default.oneOf(["fullWidth","scrollable","standard"]),visibleScrollbar:_propTypes.default.bool});var _default=(0,_withStyles.default)(styles,{name:"MuiTabs"})(Tabs);exports.default=_default;