"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.testReset=testReset,exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),React=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_colorManipulator=require("../styles/colorManipulator"),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_capitalize=_interopRequireDefault(require("../utils/capitalize")),_Grow=_interopRequireDefault(require("../Grow")),_Popper=_interopRequireDefault(require("../Popper")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_useForkRef=_interopRequireDefault(require("../utils/useForkRef")),_useId=_interopRequireDefault(require("../utils/useId")),_useIsFocusVisible2=_interopRequireDefault(require("../utils/useIsFocusVisible")),_useControlled3=_interopRequireDefault(require("../utils/useControlled")),_useTheme=_interopRequireDefault(require("../styles/useTheme"));function round(e){return Math.round(1e5*e)/1e5}function arrowGenerator(){return{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}}}var styles=function(e){return{popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:arrowGenerator(),tooltip:{backgroundColor:(0,_colorManipulator.alpha)(e.palette.grey[700],.92),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:(0,_colorManipulator.alpha)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat(round(16/14),"em"),fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:(0,_defineProperty2.default)({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:(0,_defineProperty2.default)({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:(0,_defineProperty2.default)({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:(0,_defineProperty2.default)({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}};exports.styles=styles;var hystersisOpen=!1,hystersisTimer=null;function testReset(){hystersisOpen=!1,clearTimeout(hystersisTimer)}var Tooltip=React.forwardRef(function(e,t){var r,o=e.arrow,n=void 0!==o&&o,i=e.children,a=e.classes,u=e.describeChild,l=void 0!==u&&u,s=e.disableFocusListener,p=void 0!==s&&s,c=e.disableHoverListener,d=void 0!==c&&c,f=e.disableTouchListener,m=void 0!==f&&f,h=e.enterDelay,y=void 0===h?100:h,T=e.enterNextDelay,_=void 0===T?0:T,b=e.enterTouchDelay,v=void 0===b?700:b,g=e.followCursor,R=void 0!==g&&g,x=e.id,q=e.disableInteractive,w=void 0!==q&&q,D=e.leaveDelay,P=void 0===D?0:D,E=e.leaveTouchDelay,O=void 0===E?1500:E,C=e.onClose,M=e.onOpen,k=e.open,F=e.placement,L=void 0===F?"bottom":F,N=e.PopperComponent,I=void 0===N?_Popper.default:N,S=e.PopperProps,W=e.title,A=e.TransitionComponent,B=void 0===A?_Grow.default:A,j=e.TransitionProps,z=(0,_objectWithoutProperties2.default)(e,["arrow","children","classes","describeChild","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","disableInteractive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),V=(0,_useTheme.default)(),G=React.useState(),H=G[0],U=G[1],$=React.useState(null),Y=$[0],X=$[1],J=React.useRef(!1),K=React.useRef(),Q=React.useRef(),Z=React.useRef(),ee=React.useRef(),te=(0,_useControlled3.default)({controlled:k,default:!1,name:"Tooltip",state:"open"}),re=(0,_slicedToArray2.default)(te,2),oe=re[0],ne=re[1],ie=oe;"production"!==process.env.NODE_ENV&&(r=React.useRef(void 0!==k).current,React.useEffect(function(){H&&H.disabled&&!r&&""!==W&&"button"===H.tagName.toLowerCase()&&console.error(["Material-UI: You are providing a disabled `button` child to the Tooltip component.","A disabled element does not fire events.","Tooltip needs to listen to the child element's events to display the title.","","Add a simple wrapper element, such as a `span`."].join("\n"))},[W,H,r]));var ae=(0,_useId.default)(x);React.useEffect(function(){return function(){clearTimeout(K.current),clearTimeout(Q.current),clearTimeout(Z.current),clearTimeout(ee.current)}},[]);function ue(e){clearTimeout(hystersisTimer),ne(hystersisOpen=!0),M&&M(e)}function le(e){var r=!(0<arguments.length&&void 0!==e)||e;return function(e){var t=i.props;"mouseover"===e.type&&t.onMouseOver&&r&&t.onMouseOver(e),J.current&&"touchstart"!==e.type||(H&&H.removeAttribute("title"),clearTimeout(Q.current),clearTimeout(Z.current),y||hystersisOpen&&_?(e.persist(),Q.current=setTimeout(function(){ue(e)},hystersisOpen?_:y)):ue(e))}}function se(e){var r=!(0<arguments.length&&void 0!==e)||e;return function(e){H||U(e.currentTarget),he(e),!0===fe.current&&(Te(!0),le()(e));var t=i.props;t.onFocus&&r&&t.onFocus(e)}}function pe(e){var r=!(0<arguments.length&&void 0!==e)||e;return function(e){var t=i.props;"blur"===e.type&&(t.onBlur&&r&&t.onBlur(e),me(e),!1===fe.current&&Te(!1)),"mouseleave"===e.type&&t.onMouseLeave&&e.currentTarget===H&&t.onMouseLeave(e),clearTimeout(Q.current),clearTimeout(Z.current),e.persist(),Z.current=setTimeout(function(){_e(e)},P)}}function ce(e){J.current=!0;var t=i.props;t.onTouchStart&&t.onTouchStart(e)}var de=(0,_useIsFocusVisible2.default)(),fe=de.isFocusVisibleRef,me=de.onBlur,he=de.onFocus,ye=de.ref,Te=React.useState(!1)[1],_e=(0,_useEventCallback.default)(function(e){clearTimeout(hystersisTimer),hystersisTimer=setTimeout(function(){hystersisOpen=!1},800+P),ne(!1),C&&C(e),clearTimeout(K.current),K.current=setTimeout(function(){J.current=!1},V.transitions.duration.shortest)});React.useEffect(function(){if(ie)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||_e(e)}},[_e,ie]);var be=(0,_useForkRef.default)(U,t),ve=(0,_useForkRef.default)(ye,be),ge=(0,_useForkRef.default)(i.ref,ve);""===W&&(ie=!1);var Re=React.useRef({x:0,y:0}),xe=React.useRef(),qe={},we="string"==typeof W;l?(qe.title=ie||!we||d?null:W,qe["aria-describedby"]=ie?ae:null):(qe["aria-label"]=we?W:null,qe["aria-labelledby"]=ie&&!we?ae:null);var De=(0,_extends2.default)({},qe,z,i.props,{className:(0,_clsx.default)(z.className,i.props.className),onTouchStart:ce,ref:ge},R?{onMouseMove:function(e){var t=i.props;t.handleMouseMove&&t.handleMouseMove(e),Re.current={x:e.clientX,y:e.clientY},xe.current&&xe.current.scheduleUpdate()}}:{});"production"!==process.env.NODE_ENV&&(De["data-mui-internal-clone-element"]=!0,React.useEffect(function(){H&&!H.getAttribute("data-mui-internal-clone-element")&&console.error(["Material-UI: The `children` component of the Tooltip is not forwarding its props correctly.","Please make sure that props are spread on the same element that the ref is applied to."].join("\n"))},[H]));var Pe={};m||(De.onTouchStart=function(e){ce(e),clearTimeout(Z.current),clearTimeout(K.current),clearTimeout(ee.current),e.persist(),ee.current=setTimeout(function(){le()(e)},v)},De.onTouchEnd=function(e){i.props.onTouchEnd&&i.props.onTouchEnd(e),clearTimeout(ee.current),clearTimeout(Z.current),e.persist(),Z.current=setTimeout(function(){_e(e)},O)}),d||(De.onMouseOver=le(),De.onMouseLeave=pe(),w||(Pe.onMouseOver=le(!1),Pe.onMouseLeave=pe(!1))),p||(De.onFocus=se(),De.onBlur=pe(),w||(Pe.onFocus=se(!1),Pe.onBlur=pe(!1))),"production"!==process.env.NODE_ENV&&i.props.title&&console.error(["Material-UI: You have provided a `title` prop to the child of <Tooltip />.","Remove this title prop `".concat(i.props.title,"` or the Tooltip component.")].join("\n"));var Ee=React.useMemo(function(){return(0,_utils.deepmerge)({popperOptions:{modifiers:{arrow:{enabled:Boolean(Y),element:Y}}}},S)},[Y,S]);return React.createElement(React.Fragment,null,React.cloneElement(i,De),React.createElement(I,(0,_extends2.default)({className:(0,_clsx.default)(a.popper,!w&&a.popperInteractive,n&&a.popperArrow),placement:L,anchorEl:R?{clientHeight:0,clientWidth:0,getBoundingClientRect:function(){return{top:Re.current.y,left:Re.current.x,right:Re.current.x,bottom:Re.current.y,width:0,height:0}}}:H,popperRef:xe,open:!!H&&ie,id:ae,transition:!0},Pe,Ee),function(e){var t=e.placement,r=e.TransitionProps;return React.createElement(B,(0,_extends2.default)({timeout:V.transitions.duration.shorter},r,j),React.createElement("div",{className:(0,_clsx.default)(a.tooltip,a["tooltipPlacement".concat((0,_capitalize.default)(t.split("-")[0]))],J.current&&a.touch,n&&a.tooltipArrow)},W,n?React.createElement("span",{className:a.arrow,ref:X}):null))}))});"production"!==process.env.NODE_ENV&&(Tooltip.propTypes={arrow:_propTypes.default.bool,children:_utils.elementAcceptingRef.isRequired,classes:_propTypes.default.object,className:_propTypes.default.string,describeChild:_propTypes.default.bool,disableFocusListener:_propTypes.default.bool,disableHoverListener:_propTypes.default.bool,disableInteractive:_propTypes.default.bool,disableTouchListener:_propTypes.default.bool,enterDelay:_propTypes.default.number,enterNextDelay:_propTypes.default.number,enterTouchDelay:_propTypes.default.number,followCursor:_propTypes.default.bool,id:_propTypes.default.string,leaveDelay:_propTypes.default.number,leaveTouchDelay:_propTypes.default.number,onClose:_propTypes.default.func,onOpen:_propTypes.default.func,open:_propTypes.default.bool,placement:_propTypes.default.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),PopperComponent:_propTypes.default.elementType,PopperProps:_propTypes.default.object,title:_propTypes.default.node.isRequired,TransitionComponent:_propTypes.default.elementType,TransitionProps:_propTypes.default.object});var _default=(0,_withStyles.default)(styles,{name:"MuiTooltip",flip:!1})(Tooltip);exports.default=_default;