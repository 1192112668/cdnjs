"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"createFilterOptions",{enumerable:!0,get:function(){return _useAutocomplete2.createFilterOptions}}),exports.default=exports.styles=void 0;var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),React=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_styles=require("../styles"),_Popper=_interopRequireDefault(require("../Popper")),_ListSubheader=_interopRequireDefault(require("../ListSubheader")),_Paper=_interopRequireDefault(require("../Paper")),_IconButton=_interopRequireDefault(require("../IconButton")),_Chip=_interopRequireDefault(require("../Chip")),_Close=_interopRequireDefault(require("../internal/svg-icons/Close")),_ArrowDropDown=_interopRequireDefault(require("../internal/svg-icons/ArrowDropDown")),_useAutocomplete2=_interopRequireWildcard(require("../useAutocomplete")),styles=function(e){var t;return{root:{"&$focused $clearIndicatorDirty":{visibility:"visible"},"@media (pointer: fine)":{"&:hover $clearIndicatorDirty":{visibility:"visible"}}},fullWidth:{width:"100%"},focused:{},tag:{margin:3,maxWidth:"calc(100% - 6px)"},tagSizeSmall:{margin:2,maxWidth:"calc(100% - 4px)"},hasPopupIcon:{},hasClearIcon:{},inputRoot:{flexWrap:"wrap","$hasPopupIcon &, $hasClearIcon &":{paddingRight:30},"$hasPopupIcon$hasClearIcon &":{paddingRight:56},"& $input":{width:0,minWidth:30},'&[class*="MuiInput-root"]':{paddingBottom:1,"& $input":{padding:4},"& $input:first-child":{padding:"6px 0"}},'&[class*="MuiInput-root"][class*="MuiInput-marginDense"]':{"& $input":{padding:"2px 4px 3px"},"& $input:first-child":{padding:"1px 0 4px"}},'&[class*="MuiOutlinedInput-root"]':{padding:9,"$hasPopupIcon &, $hasClearIcon &":{paddingRight:39},"$hasPopupIcon$hasClearIcon &":{paddingRight:65},"& $input":{padding:"7.5px 4px"},"& $input:first-child":{paddingLeft:6},"& $endAdornment":{right:9}},'&[class*="MuiOutlinedInput-root"][class*="MuiOutlinedInput-marginDense"]':{padding:6,"& $input":{padding:"2.5px 4px"}},'&[class*="MuiFilledInput-root"]':{paddingTop:19,paddingLeft:8,"$hasPopupIcon &, $hasClearIcon &":{paddingRight:39},"$hasPopupIcon$hasClearIcon &":{paddingRight:65},"& $input":{padding:"7px 4px"},"& $endAdornment":{right:9}},'&[class*="MuiFilledInput-root"][class*="MuiFilledInput-marginDense"]':{paddingBottom:1,"& $input":{padding:"2.5px 4px"}}},input:{flexGrow:1,textOverflow:"ellipsis",opacity:0},inputFocused:{opacity:1},endAdornment:{position:"absolute",right:0,top:"calc(50% - 14px)"},clearIndicator:{marginRight:-2,padding:4,visibility:"hidden"},clearIndicatorDirty:{},popupIndicator:{padding:2,marginRight:-2},popupIndicatorOpen:{transform:"rotate(180deg)"},popper:{zIndex:e.zIndex.modal},popperDisablePortal:{position:"absolute"},paper:(0,_extends2.default)({},e.typography.body1,{overflow:"auto",margin:"4px 0"}),listbox:{listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto"},loading:{color:e.palette.text.secondary,padding:"14px 16px"},noOptions:{color:e.palette.text.secondary,padding:"14px 16px"},option:(t={minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16},(0,_defineProperty2.default)(t,e.breakpoints.up("sm"),{minHeight:"auto"}),(0,_defineProperty2.default)(t,'&[aria-selected="true"]',{backgroundColor:e.palette.action.selected}),(0,_defineProperty2.default)(t,'&[data-focus="true"]',{backgroundColor:e.palette.action.hover}),(0,_defineProperty2.default)(t,"&:active",{backgroundColor:e.palette.action.selected}),(0,_defineProperty2.default)(t,'&[aria-disabled="true"]',{opacity:e.palette.action.disabledOpacity,pointerEvents:"none"}),t),groupLabel:{backgroundColor:e.palette.background.paper,top:-8},groupUl:{padding:0,"& $option":{paddingLeft:24}}}};function DisablePortal(e){e.anchorEl,e.open;var t=(0,_objectWithoutProperties2.default)(e,["anchorEl","open"]);return React.createElement("div",t)}exports.styles=styles;var _ref=React.createElement(_Close.default,{fontSize:"small"}),_ref2=React.createElement(_ArrowDropDown.default,null),Autocomplete=React.forwardRef(function(e,t){e.autoComplete,e.autoHighlight,e.autoSelect,e.blurOnSelect;var o,p,l,a=e.ChipProps,n=e.classes,r=e.className,i=e.clearOnBlur,u=(void 0===i&&e.freeSolo,e.clearOnEscape,e.clearText),s=void 0===u?"Clear":u,d=e.closeIcon,c=void 0===d?_ref:d,f=e.closeText,g=void 0===f?"Close":f,_=(e.debug,e.defaultValue),m=(void 0===_&&e.multiple,e.disableClearable),b=void 0!==m&&m,y=(e.disableCloseOnSelect,e.disabled),h=void 0!==y&&y,T=(e.disabledItemsFocusable,e.disableListWrap,e.disablePortal),x=void 0!==T&&T,I=(e.filterOptions,e.filterSelectedOptions,e.forcePopupIcon),v=void 0===I?"auto":I,O=e.freeSolo,P=void 0!==O&&O,C=e.fullWidth,R=void 0!==C&&C,q=e.getLimitTagsText,D=void 0===q?function(e){return"+".concat(e)}:q,E=(e.getOptionDisabled,e.getOptionLabel),S=void 0===E?function(e){var t;return null!==(t=e.label)&&void 0!==t?t:e}:E,L=(e.getOptionSelected,e.groupBy),$=e.handleHomeEndKeys,N=(void 0===$&&e.freeSolo,e.id,e.includeInputInList,e.inputValue,e.limitTags),W=void 0===N?-1:N,A=e.ListboxComponent,w=void 0===A?"ul":A,F=e.ListboxProps,B=e.loading,H=void 0!==B&&B,k=e.loadingText,z=void 0===k?"Loadingâ€¦":k,M=e.multiple,j=void 0!==M&&M,V=e.noOptionsText,G=void 0===V?"No options":V,K=(e.onChange,e.onClose,e.onHighlightChange,e.onInputChange,e.onOpen,e.open,e.openOnFocus,e.openText),U=void 0===K?"Open":K,J=(e.options,e.PaperComponent),Q=void 0===J?_Paper.default:J,X=e.PopperComponent,Y=void 0===X?_Popper.default:X,Z=e.popupIcon,ee=void 0===Z?_ref2:Z,te=e.renderGroup,oe=e.renderInput,pe=e.renderOption,le=e.renderTags,ae=e.selectOnFocus,ne=(void 0===ae&&e.freeSolo,e.size),re=void 0===ne?"medium":ne,ie=(e.value,(0,_objectWithoutProperties2.default)(e,["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","classes","className","clearOnBlur","clearOnEscape","clearText","closeIcon","closeText","debug","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","getOptionSelected","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","value"])),ue=x?DisablePortal:Y,se=(0,_useAutocomplete2.default)((0,_extends2.default)({},e,{componentName:"Autocomplete"})),de=se.getRootProps,ce=se.getInputProps,fe=se.getInputLabelProps,ge=se.getPopupIndicatorProps,_e=se.getClearProps,me=se.getTagProps,be=se.getListboxProps,ye=se.getOptionProps,he=se.value,Te=se.dirty,xe=se.id,Ie=se.popupOpen,ve=se.focused,Oe=se.focusedTag,Pe=se.anchorEl,Ce=se.setAnchorEl,Re=se.inputValue,qe=se.groupedOptions;j&&0<he.length&&(o=function(e){return(0,_extends2.default)({className:(0,_clsx.default)(n.tag,"small"===re&&n.tagSizeSmall),disabled:h},me(e))},p=le?le(he,o):he.map(function(e,t){return React.createElement(_Chip.default,(0,_extends2.default)({label:S(e),size:re},o({index:t}),a))})),-1<W&&Array.isArray(p)&&(l=p.length-W,!ve&&0<l&&(p=p.splice(0,W)).push(React.createElement("span",{className:n.tag,key:p.length},D(l))));function De(e,t){var o=ye({option:e,index:t});return Se((0,_extends2.default)({},o,{className:n.option}),e,{selected:o["aria-selected"],inputValue:Re})}var Ee=te||function(e){return React.createElement("li",{key:e.key},React.createElement(_ListSubheader.default,{className:n.groupLabel,component:"div"},e.group),React.createElement("ul",{className:n.groupUl},e.children))},Se=pe||function(e,t){return React.createElement("li",e,S(t))},Le=!b&&!h,$e=(!P||!0===v)&&!1!==v;return React.createElement(React.Fragment,null,React.createElement("div",(0,_extends2.default)({ref:t,className:(0,_clsx.default)(n.root,r,ve&&n.focused,R&&n.fullWidth,Le&&n.hasClearIcon,$e&&n.hasPopupIcon)},de(ie)),oe({id:xe,disabled:h,fullWidth:!0,size:"small"===re?"small":void 0,InputLabelProps:fe(),InputProps:{ref:Ce,className:n.inputRoot,startAdornment:p,endAdornment:React.createElement("div",{className:n.endAdornment},Le?React.createElement(_IconButton.default,(0,_extends2.default)({},_e(),{"aria-label":s,title:s,className:(0,_clsx.default)(n.clearIndicator,Te&&n.clearIndicatorDirty)}),c):null,$e?React.createElement(_IconButton.default,(0,_extends2.default)({},ge(),{disabled:h,"aria-label":Ie?g:U,title:Ie?g:U,className:(0,_clsx.default)(n.popupIndicator,Ie&&n.popupIndicatorOpen)}),ee):null)},inputProps:(0,_extends2.default)({className:(0,_clsx.default)(n.input,-1===Oe&&n.inputFocused),disabled:h},ce())})),Ie&&Pe?React.createElement(ue,{className:(0,_clsx.default)(n.popper,x&&n.popperDisablePortal),style:{width:Pe?Pe.clientWidth:null},role:"presentation",anchorEl:Pe,open:!0},React.createElement(Q,{className:n.paper},H&&0===qe.length?React.createElement("div",{className:n.loading},z):null,0!==qe.length||P||H?null:React.createElement("div",{className:n.noOptions},G),0<qe.length?React.createElement(w,(0,_extends2.default)({className:n.listbox},be(),F),qe.map(function(o,e){return L?Ee({key:o.key,group:o.group,children:o.options.map(function(e,t){return De(e,o.index+t)})}):De(o,e)})):null)):null)});"production"!==process.env.NODE_ENV&&(Autocomplete.propTypes={autoComplete:_propTypes.default.bool,autoHighlight:_propTypes.default.bool,autoSelect:_propTypes.default.bool,blurOnSelect:_propTypes.default.oneOfType([_propTypes.default.oneOf(["mouse","touch"]),_propTypes.default.bool]),ChipProps:_propTypes.default.object,classes:_propTypes.default.object,className:_propTypes.default.string,clearOnBlur:_propTypes.default.bool,clearOnEscape:_propTypes.default.bool,clearText:_propTypes.default.string,closeIcon:_propTypes.default.node,closeText:_propTypes.default.string,debug:_propTypes.default.bool,defaultValue:_propTypes.default.any,disableClearable:_propTypes.default.bool,disableCloseOnSelect:_propTypes.default.bool,disabled:_propTypes.default.bool,disabledItemsFocusable:_propTypes.default.bool,disableListWrap:_propTypes.default.bool,disablePortal:_propTypes.default.bool,filterOptions:_propTypes.default.func,filterSelectedOptions:_propTypes.default.bool,forcePopupIcon:_propTypes.default.oneOfType([_propTypes.default.oneOf(["auto"]),_propTypes.default.bool]),freeSolo:_propTypes.default.bool,fullWidth:_propTypes.default.bool,getLimitTagsText:_propTypes.default.func,getOptionDisabled:_propTypes.default.func,getOptionLabel:_propTypes.default.func,getOptionSelected:_propTypes.default.func,groupBy:_propTypes.default.func,handleHomeEndKeys:_propTypes.default.bool,id:_propTypes.default.string,includeInputInList:_propTypes.default.bool,inputValue:_propTypes.default.string,limitTags:_propTypes.default.number,ListboxComponent:_propTypes.default.elementType,ListboxProps:_propTypes.default.object,loading:_propTypes.default.bool,loadingText:_propTypes.default.node,multiple:_propTypes.default.bool,noOptionsText:_propTypes.default.node,onChange:_propTypes.default.func,onClose:_propTypes.default.func,onHighlightChange:_propTypes.default.func,onInputChange:_propTypes.default.func,onOpen:_propTypes.default.func,open:_propTypes.default.bool,openOnFocus:_propTypes.default.bool,openText:_propTypes.default.string,options:_propTypes.default.array.isRequired,PaperComponent:_propTypes.default.elementType,PopperComponent:_propTypes.default.elementType,popupIcon:_propTypes.default.node,renderGroup:_propTypes.default.func,renderInput:_propTypes.default.func.isRequired,renderOption:_propTypes.default.func,renderTags:_propTypes.default.func,selectOnFocus:_propTypes.default.bool,size:_propTypes.default.oneOf(["medium","small"]),value:_propTypes.default.any});var _default=(0,_styles.withStyles)(styles,{name:"MuiAutocomplete"})(Autocomplete);exports.default=_default;