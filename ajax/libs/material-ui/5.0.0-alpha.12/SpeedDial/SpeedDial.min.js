"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_reactIs=require("react-is"),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_styles=require("@material-ui/core/styles"),_Zoom=_interopRequireDefault(require("@material-ui/core/Zoom")),_Fab=_interopRequireDefault(require("@material-ui/core/Fab")),_utils=require("@material-ui/core/utils");function getOrientation(e){return"up"===e||"down"===e?"vertical":"right"===e||"left"===e?"horizontal":void 0}function clamp(e,t,r){return e<t?t:r<e?r:e}var dialRadius=32,spacingActions=16,styles=function(e){return{root:{zIndex:e.zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none"},fab:{pointerEvents:"auto"},directionUp:{flexDirection:"column-reverse","& $actions":{flexDirection:"column-reverse",marginBottom:-dialRadius,paddingBottom:spacingActions+dialRadius}},directionDown:{flexDirection:"column","& $actions":{flexDirection:"column",marginTop:-dialRadius,paddingTop:spacingActions+dialRadius}},directionLeft:{flexDirection:"row-reverse","& $actions":{flexDirection:"row-reverse",marginRight:-dialRadius,paddingRight:spacingActions+dialRadius}},directionRight:{flexDirection:"row","& $actions":{flexDirection:"row",marginLeft:-dialRadius,paddingLeft:spacingActions+dialRadius}},actions:{display:"flex",pointerEvents:"auto"},actionsClosed:{transition:"top 0s linear 0.2s",pointerEvents:"none"}}};exports.styles=styles;var SpeedDial=React.forwardRef(function(e,t){var r=e.ariaLabel,o=e.FabProps,n=(o=void 0===o?{}:o).ref,i=(0,_objectWithoutProperties2.default)(o,["ref"]),a=e.children,s=e.classes,u=e.className,l=e.direction,c=void 0===l?"up":l,p=e.hidden,d=void 0!==p&&p,f=e.icon,_=e.onBlur,m=e.onClose,y=e.onFocus,R=e.onKeyDown,T=e.onMouseEnter,v=e.onMouseLeave,b=e.onOpen,g=e.open,D=(e.openIcon,e.TransitionComponent),x=void 0===D?_Zoom.default:D,h=e.transitionDuration,q=void 0===h?{enter:_styles.duration.enteringScreen,exit:_styles.duration.leavingScreen}:h,E=e.TransitionProps,w=(0,_objectWithoutProperties2.default)(e,["ariaLabel","FabProps","children","classes","className","direction","hidden","icon","onBlur","onClose","onFocus","onKeyDown","onMouseEnter","onMouseLeave","onOpen","open","openIcon","TransitionComponent","transitionDuration","TransitionProps"]),C=(0,_utils.useControlled)({controlled:g,default:!1,name:"SpeedDial",state:"open"}),F=(0,_slicedToArray2.default)(C,2),O=F[0],P=F[1],L=React.useRef();React.useEffect(function(){return function(){clearTimeout(L.current)}},[]);var M=React.useRef(0),N=React.useRef(),j=React.useRef([]);j.current=[j.current[0]];var A=React.useCallback(function(e){j.current[0]=e},[]),I=(0,_utils.useForkRef)(n,A);React.useEffect(function(){O||(M.current=0,N.current=void 0)},[O]);function S(e){"mouseleave"===e.type&&v&&v(e),"blur"===e.type&&_&&_(e),clearTimeout(L.current),"blur"===e.type?(e.persist(),L.current=setTimeout(function(){P(!1),m&&m(e,"blur")})):(P(!1),m&&m(e,"mouseLeave"))}function W(e){"mouseenter"===e.type&&T&&T(e),"focus"===e.type&&y&&y(e),clearTimeout(L.current),O||(e.persist(),L.current=setTimeout(function(){P(!0),b&&b(e,{focus:"focus",mouseenter:"mouseEnter"}[e.type])}))}var k=r.replace(/^[^a-z]+|[^\w:.-]+/gi,""),B=React.Children.toArray(a).filter(function(e){return"production"!==process.env.NODE_ENV&&(0,_reactIs.isFragment)(e)&&console.error(["Material-UI: The SpeedDial component doesn't accept a Fragment as a child.","Consider providing an array instead."].join("\n")),React.isValidElement(e)}),z=B.map(function(e,t){var r,o,n=e.props.FabProps,i=(n=void 0===n?{}:n).ref,a=(0,_objectWithoutProperties2.default)(n,["ref"]);return React.cloneElement(e,{FabProps:(0,_extends2.default)({},a,{ref:(r=t,o=i,function(e){j.current[r+1]=e,o&&o(e)})}),delay:30*(O?t:B.length-t),open:O,id:"".concat(k,"-action-").concat(t)})});return React.createElement("div",(0,_extends2.default)({className:(0,_clsx.default)(s.root,s["direction".concat((0,_utils.capitalize)(c))],u),ref:t,role:"presentation",onKeyDown:function(e){R&&R(e);var t,r,o=e.key.replace("Arrow","").toLowerCase(),n=N.current,i=void 0===n?o:n;if("Escape"===e.key)return P(!1),void(m&&(j.current[0].focus(),m(e,"escapeKeyDown")));getOrientation(o)===getOrientation(i)&&void 0!==getOrientation(o)&&(e.preventDefault(),t=o===i?1:-1,r=clamp(M.current+t,0,j.current.length-1),j.current[r].focus(),M.current=r,N.current=i)},onBlur:S,onFocus:W,onMouseEnter:W,onMouseLeave:S},w),React.createElement(x,(0,_extends2.default)({in:!d,timeout:q,unmountOnExit:!0},E),React.createElement(_Fab.default,(0,_extends2.default)({color:"primary","aria-label":r,"aria-haspopup":"true","aria-expanded":O,"aria-controls":"".concat(k,"-actions")},i,{onClick:function(e){i.onClick&&i.onClick(e),clearTimeout(L.current),O?(P(!1),m&&m(e,"toggle")):(P(!0),b&&b(e,"toggle"))},className:(0,_clsx.default)(s.fab,i.className),ref:I}),React.isValidElement(f)&&(0,_utils.isMuiElement)(f,["SpeedDialIcon"])?React.cloneElement(f,{open:O}):f)),React.createElement("div",{id:"".concat(k,"-actions"),role:"menu","aria-orientation":getOrientation(c),className:(0,_clsx.default)(s.actions,!O&&s.actionsClosed)},z))});"production"!==process.env.NODE_ENV&&(SpeedDial.propTypes={ariaLabel:_propTypes.default.string.isRequired,children:_propTypes.default.node,classes:_propTypes.default.object,className:_propTypes.default.string,direction:_propTypes.default.oneOf(["down","left","right","up"]),FabProps:_propTypes.default.object,hidden:_propTypes.default.bool,icon:_propTypes.default.node,onBlur:_propTypes.default.func,onClose:_propTypes.default.func,onFocus:_propTypes.default.func,onKeyDown:_propTypes.default.func,onMouseEnter:_propTypes.default.func,onMouseLeave:_propTypes.default.func,onOpen:_propTypes.default.func,open:_propTypes.default.bool,openIcon:_propTypes.default.node,TransitionComponent:_propTypes.default.elementType,transitionDuration:_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.shape({appear:_propTypes.default.number,enter:_propTypes.default.number,exit:_propTypes.default.number})]),TransitionProps:_propTypes.default.object});var _default=(0,_styles.withStyles)(styles,{name:"MuiSpeedDial"})(SpeedDial);exports.default=_default;