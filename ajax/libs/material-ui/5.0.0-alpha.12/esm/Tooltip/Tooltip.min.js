import _extends from"@babel/runtime/helpers/esm/extends";import _slicedToArray from"@babel/runtime/helpers/esm/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import _defineProperty from"@babel/runtime/helpers/esm/defineProperty";import*as React from"react";import PropTypes from"prop-types";import clsx from"clsx";import{deepmerge,elementAcceptingRef}from"@material-ui/utils";import{alpha}from"../styles/colorManipulator";import withStyles from"../styles/withStyles";import capitalize from"../utils/capitalize";import Grow from"../Grow";import Popper from"../Popper";import useEventCallback from"../utils/useEventCallback";import useForkRef from"../utils/useForkRef";import useId from"../utils/useId";import useIsFocusVisible from"../utils/useIsFocusVisible";import useControlled from"../utils/useControlled";import useTheme from"../styles/useTheme";function round(e){return Math.round(1e5*e)/1e5}function arrowGenerator(){return{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}}}export var styles=function(e){return{popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:arrowGenerator(),tooltip:{backgroundColor:alpha(e.palette.grey[700],.92),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat(round(16/14),"em"),fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:_defineProperty({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:_defineProperty({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:_defineProperty({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:_defineProperty({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}};var hystersisOpen=!1,hystersisTimer=null;export function testReset(){hystersisOpen=!1,clearTimeout(hystersisTimer)};var Tooltip=React.forwardRef(function(e,t){var o=e.arrow,r=void 0!==o&&o,n=e.children,i=e.classes,s=e.describeChild,a=void 0!==s&&s,p=e.disableFocusListener,l=void 0!==p&&p,c=e.disableHoverListener,u=void 0!==c&&c,m=e.disableTouchListener,d=void 0!==m&&m,f=e.enterDelay,h=void 0===f?100:f,y=e.enterNextDelay,T=void 0===y?0:y,b=e.enterTouchDelay,v=void 0===b?700:b,g=e.followCursor,R=void 0!==g&&g,P=e.id,x=e.disableInteractive,w=void 0!==x&&x,E=e.leaveDelay,O=void 0===E?0:E,C=e.leaveTouchDelay,M=void 0===C?1500:C,k=e.onClose,F=e.onOpen,L=e.open,D=e.placement,N=void 0===D?"bottom":D,_=e.PopperComponent,I=void 0===_?Popper:_,A=e.PopperProps,S=e.title,B=e.TransitionComponent,W=void 0===B?Grow:B,j=e.TransitionProps,z=_objectWithoutProperties(e,["arrow","children","classes","describeChild","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","disableInteractive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),V=useTheme(),G=React.useState(),H=G[0],U=G[1],$=React.useState(null),Y=$[0],q=$[1],X=React.useRef(!1),J=React.useRef(),K=React.useRef(),Q=React.useRef(),Z=React.useRef(),ee=useControlled({controlled:L,default:!1,name:"Tooltip",state:"open"}),te=_slicedToArray(ee,2),oe=te[0],re=te[1],ne=oe;if("production"!==process.env.NODE_ENV){var ie=React.useRef(void 0!==L).current;React.useEffect(function(){H&&H.disabled&&!ie&&""!==S&&"button"===H.tagName.toLowerCase()&&console.error(["Material-UI: You are providing a disabled `button` child to the Tooltip component.","A disabled element does not fire events.","Tooltip needs to listen to the child element's events to display the title.","","Add a simple wrapper element, such as a `span`."].join("\n"))},[S,H,ie])}var se=useId(P);React.useEffect(function(){return function(){clearTimeout(J.current),clearTimeout(K.current),clearTimeout(Q.current),clearTimeout(Z.current)}},[]);var ae=function(e){clearTimeout(hystersisTimer),hystersisOpen=!0,re(!0),F&&F(e)},pe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var o=n.props;"mouseover"===t.type&&o.onMouseOver&&e&&o.onMouseOver(t),X.current&&"touchstart"!==t.type||(H&&H.removeAttribute("title"),clearTimeout(K.current),clearTimeout(Q.current),h||hystersisOpen&&T?(t.persist(),K.current=setTimeout(function(){ae(t)},hystersisOpen?T:h)):ae(t))}},le=useIsFocusVisible(),ce=le.isFocusVisibleRef,ue=le.onBlur,me=le.onFocus,de=le.ref,fe=React.useState(!1)[1],he=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){H||U(t.currentTarget),me(t),!0===ce.current&&(fe(!0),pe()(t));var o=n.props;o.onFocus&&e&&o.onFocus(t)}},ye=useEventCallback(function(e){clearTimeout(hystersisTimer),hystersisTimer=setTimeout(function(){hystersisOpen=!1},800+O),re(!1),k&&k(e),clearTimeout(J.current),J.current=setTimeout(function(){X.current=!1},V.transitions.duration.shortest)}),Te=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var o=n.props;"blur"===t.type&&(o.onBlur&&e&&o.onBlur(t),function(e){ue(e),!1===ce.current&&fe(!1)}(t)),"mouseleave"===t.type&&o.onMouseLeave&&t.currentTarget===H&&o.onMouseLeave(t),clearTimeout(K.current),clearTimeout(Q.current),t.persist(),Q.current=setTimeout(function(){ye(t)},O)}},be=function(e){X.current=!0;var t=n.props;t.onTouchStart&&t.onTouchStart(e)};React.useEffect(function(){if(ne)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||ye(e)}},[ye,ne]);var ve=useForkRef(U,t),ge=useForkRef(de,ve),Re=useForkRef(n.ref,ge);""===S&&(ne=!1);var Pe=React.useRef({x:0,y:0}),xe=React.useRef(),we={},Ee="string"==typeof S;a?(we.title=ne||!Ee||u?null:S,we["aria-describedby"]=ne?se:null):(we["aria-label"]=Ee?S:null,we["aria-labelledby"]=ne&&!Ee?se:null);var Oe=_extends({},we,z,n.props,{className:clsx(z.className,n.props.className),onTouchStart:be,ref:Re},R?{onMouseMove:function(e){var t=n.props;t.handleMouseMove&&t.handleMouseMove(e),Pe.current={x:e.clientX,y:e.clientY},xe.current&&xe.current.scheduleUpdate()}}:{});"production"!==process.env.NODE_ENV&&(Oe["data-mui-internal-clone-element"]=!0,React.useEffect(function(){H&&!H.getAttribute("data-mui-internal-clone-element")&&console.error(["Material-UI: The `children` component of the Tooltip is not forwarding its props correctly.","Please make sure that props are spread on the same element that the ref is applied to."].join("\n"))},[H]));var Ce={};d||(Oe.onTouchStart=function(e){be(e),clearTimeout(Q.current),clearTimeout(J.current),clearTimeout(Z.current),e.persist(),Z.current=setTimeout(function(){pe()(e)},v)},Oe.onTouchEnd=function(e){n.props.onTouchEnd&&n.props.onTouchEnd(e),clearTimeout(Z.current),clearTimeout(Q.current),e.persist(),Q.current=setTimeout(function(){ye(e)},M)}),u||(Oe.onMouseOver=pe(),Oe.onMouseLeave=Te(),w||(Ce.onMouseOver=pe(!1),Ce.onMouseLeave=Te(!1))),l||(Oe.onFocus=he(),Oe.onBlur=Te(),w||(Ce.onFocus=he(!1),Ce.onBlur=Te(!1))),"production"!==process.env.NODE_ENV&&n.props.title&&console.error(["Material-UI: You have provided a `title` prop to the child of <Tooltip />.","Remove this title prop `".concat(n.props.title,"` or the Tooltip component.")].join("\n"));var Me=React.useMemo(function(){return deepmerge({popperOptions:{modifiers:{arrow:{enabled:Boolean(Y),element:Y}}}},A)},[Y,A]);return React.createElement(React.Fragment,null,React.cloneElement(n,Oe),React.createElement(I,_extends({className:clsx(i.popper,!w&&i.popperInteractive,r&&i.popperArrow),placement:N,anchorEl:R?{clientHeight:0,clientWidth:0,getBoundingClientRect:function(){return{top:Pe.current.y,left:Pe.current.x,right:Pe.current.x,bottom:Pe.current.y,width:0,height:0}}}:H,popperRef:xe,open:!!H&&ne,id:se,transition:!0},Ce,Me),function(e){var t=e.placement,o=e.TransitionProps;return React.createElement(W,_extends({timeout:V.transitions.duration.shorter},o,j),React.createElement("div",{className:clsx(i.tooltip,i["tooltipPlacement".concat(capitalize(t.split("-")[0]))],X.current&&i.touch,r&&i.tooltipArrow)},S,r?React.createElement("span",{className:i.arrow,ref:q}):null))}))});"production"!==process.env.NODE_ENV&&(Tooltip.propTypes={arrow:PropTypes.bool,children:elementAcceptingRef.isRequired,classes:PropTypes.object,className:PropTypes.string,describeChild:PropTypes.bool,disableFocusListener:PropTypes.bool,disableHoverListener:PropTypes.bool,disableInteractive:PropTypes.bool,disableTouchListener:PropTypes.bool,enterDelay:PropTypes.number,enterNextDelay:PropTypes.number,enterTouchDelay:PropTypes.number,followCursor:PropTypes.bool,id:PropTypes.string,leaveDelay:PropTypes.number,leaveTouchDelay:PropTypes.number,onClose:PropTypes.func,onOpen:PropTypes.func,open:PropTypes.bool,placement:PropTypes.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),PopperComponent:PropTypes.elementType,PopperProps:PropTypes.object,title:PropTypes.node.isRequired,TransitionComponent:PropTypes.elementType,TransitionProps:PropTypes.object});export default withStyles(styles,{name:"MuiTooltip",flip:!1})(Tooltip);