"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_extends3=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_clsx=_interopRequireDefault(require("clsx")),_propTypes=_interopRequireDefault(require("prop-types")),_reactTransitionGroup=require("react-transition-group"),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_transitions=require("../styles/transitions"),_utils=require("../transitions/utils"),_useTheme=_interopRequireDefault(require("../styles/useTheme")),_utils2=require("../utils"),styles=function(e){return{container:{height:0,overflow:"hidden",transition:e.transitions.create("height"),"&$horizontal":{height:"auto",width:0,transition:e.transitions.create("width")}},horizontal:{},entered:{height:"auto",overflow:"visible","&$horizontal":{width:"auto"}},hidden:{visibility:"hidden"},wrapper:{display:"flex",width:"100%","&$horizontal":{width:"auto",height:"100%"}},wrapperInner:{width:"100%","&$horizontal":{width:"auto",height:"100%"}}}};exports.styles=styles;var Collapse=React.forwardRef(function(e,t){var r=e.children,n=e.classes,i=e.className,o=e.collapsedSize,a=void 0===o?"0px":o,s=e.component,u=void 0===s?"div":s,l=e.in,p=e.onEnter,d=e.onEntered,c=e.onEntering,f=e.onExit,y=e.onExited,_=e.onExiting,h=e.orientation,m=void 0===h?"vertical":h,T=e.style,x=e.timeout,E=void 0===x?_transitions.duration.standard:x,R=e.TransitionComponent,v=void 0===R?_reactTransitionGroup.Transition:R,g=(0,_objectWithoutProperties2.default)(e,["children","classes","className","collapsedSize","component","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"]),b=(0,_useTheme.default)(),q=React.useRef(),w=React.useRef(null),D=React.useRef(),z="number"==typeof a?"".concat(a,"px"):a,P="vertical"!==m,N=P?"width":"height";React.useEffect(function(){return function(){clearTimeout(q.current)}},[]);function W(r){return function(e){var t;r&&(t=S.current,void 0===e?r(t):r(t,e))}}function C(){return w.current?w.current[P?"clientWidth":"clientHeight"]:0}var S=React.useRef(null),j=(0,_utils2.useForkRef)(t,S),O=W(function(e,t){w.current&&(w.current.style.position="absolute"),e.style[N]=z,p&&p(e,t)}),H=W(function(e,t){var r=C();w.current&&(w.current.style.position="");var n,i=(0,_utils.getTransitionProps)({style:T,timeout:E},{mode:"enter"}).duration;"auto"===E?(n=b.transitions.getAutoHeightDuration(r),e.style.transitionDuration="".concat(n,"ms"),D.current=n):e.style.transitionDuration="string"==typeof i?i:"".concat(i,"ms"),e.style[N]="".concat(r,"px"),c&&c(e,t)}),$=W(function(e,t){e.style[N]="auto",d&&d(e,t)}),A=W(function(e){e.style[N]="".concat(C(),"px"),f&&f(e)}),G=W(y),I=W(function(e){var t,r=C(),n=(0,_utils.getTransitionProps)({style:T,timeout:E},{mode:"exit"}).duration;"auto"===E?(t=b.transitions.getAutoHeightDuration(r),e.style.transitionDuration="".concat(t,"ms"),D.current=t):e.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms"),e.style[N]=z,_&&_(e)});return React.createElement(v,(0,_extends3.default)({in:l,onEnter:O,onEntered:$,onEntering:H,onExit:A,onExited:G,onExiting:I,addEndListener:function(e){"auto"===E&&(q.current=setTimeout(e,D.current||0))},nodeRef:S,timeout:"auto"===E?null:E},g),function(e,t){return React.createElement(u,(0,_extends3.default)({className:(0,_clsx.default)(n.container,i,P&&n.horizontal,{entered:n.entered,exited:!l&&"0px"===z&&n.hidden}[e]),style:(0,_extends3.default)((0,_defineProperty2.default)({},P?"minWidth":"minHeight",z),T),ref:j},t),React.createElement("div",{className:(0,_clsx.default)(n.wrapper,P&&n.horizontal),ref:w},React.createElement("div",{className:(0,_clsx.default)(n.wrapperInner,P&&n.horizontal)},r)))})});"production"!==process.env.NODE_ENV&&(Collapse.propTypes={children:_propTypes.default.node,classes:_propTypes.default.object,className:_propTypes.default.string,collapsedSize:_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.string]),component:_propTypes.default.elementType,in:_propTypes.default.bool,onEnter:_propTypes.default.func,onEntered:_propTypes.default.func,onEntering:_propTypes.default.func,onExit:_propTypes.default.func,onExited:_propTypes.default.func,onExiting:_propTypes.default.func,orientation:_propTypes.default.oneOf(["horizontal","vertical"]),style:_propTypes.default.object,timeout:_propTypes.default.oneOfType([_propTypes.default.oneOf(["auto"]),_propTypes.default.number,_propTypes.default.shape({appear:_propTypes.default.number,enter:_propTypes.default.number,exit:_propTypes.default.number})])}),Collapse.muiSupportAuto=!0;var _default=(0,_withStyles.default)(styles,{name:"MuiCollapse"})(Collapse);exports.default=_default;