!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Parchment=e():t.Parchment=e()}(this,function(){return n={},r.m=o=[function(t,r,e){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var i,a=(i=Error,o(s,i),s);function s(t){var e=this;return t="[Parchment] "+t,(e=i.call(this,t)||this).message=t,e.name=e.constructor.name,e}r.ParchmentError=a;var u,c,p={},l={},h={},f={};function d(t,e){var o;if(void 0===e&&(e=u.ANY),"string"==typeof t)o=f[t]||p[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)o=f.text;else if("number"==typeof t)t&u.LEVEL&u.BLOCK?o=f.block:t&u.LEVEL&u.INLINE&&(o=f.inline);else if(t instanceof HTMLElement){var r=(t.getAttribute("class")||"").split(/\s+/);for(var n in r)if(o=l[r[n]])break;o=o||h[t.tagName]}return null!=o&&e&u.LEVEL&o.scope&&e&u.TYPE&o.scope?o:null}r.DATA_KEY="__blot",(c=u=r.Scope||(r.Scope={}))[c.TYPE=3]="TYPE",c[c.LEVEL=12]="LEVEL",c[c.ATTRIBUTE=13]="ATTRIBUTE",c[c.BLOT=14]="BLOT",c[c.INLINE=7]="INLINE",c[c.BLOCK=11]="BLOCK",c[c.BLOCK_BLOT=10]="BLOCK_BLOT",c[c.INLINE_BLOT=6]="INLINE_BLOT",c[c.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",c[c.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",c[c.ANY=15]="ANY",r.create=function(t,e){var o=d(t);if(null==o)throw new a("Unable to create "+t+" blot");var r=o,n=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:r.create(e);return new r(n,e)},r.find=function t(e,o){return void 0===o&&(o=!1),null==e?null:null!=e[r.DATA_KEY]?e[r.DATA_KEY].blot:o?t(e.parentNode,o):null},r.query=d,r.register=function e(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];if(1<t.length)return t.map(function(t){return e(t)});var r=t[0];if("string"!=typeof r.blotName&&"string"!=typeof r.attrName)throw new a("Invalid definition");if("abstract"===r.blotName)throw new a("Cannot register abstract class");return"string"==typeof(f[r.blotName||r.attrName]=r).keyName?p[r.keyName]=r:(null!=r.className&&(l[r.className]=r),null!=r.tagName&&(Array.isArray(r.tagName)?r.tagName=r.tagName.map(function(t){return t.toUpperCase()}):r.tagName=r.tagName.toUpperCase(),(Array.isArray(r.tagName)?r.tagName:[r.tagName]).forEach(function(t){null!=h[t]&&null!=r.className||(h[t]=r)}))),r}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),r=(i.keys=function(t){return[].map.call(t.attributes,function(t){return t.name})},i.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},i.prototype.canAdd=function(t,e){return null!=n.query(t,n.Scope.BLOT&(this.scope|n.Scope.TYPE))&&(null==this.whitelist||-1<this.whitelist.indexOf(e))},i.prototype.remove=function(t){t.removeAttribute(this.keyName)},i.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)?e:""},i);function i(t,e,o){void 0===o&&(o={}),this.attrName=t,this.keyName=e;var r=n.Scope.TYPE&n.Scope.ATTRIBUTE;null!=o.scope?this.scope=o.scope&n.Scope.LEVEL|r:this.scope=n.Scope.ATTRIBUTE,null!=o.whitelist&&(this.whitelist=o.whitelist)}e.default=r},function(t,e,o){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(15),s=o(8),u=o(0),c=(i=s.default,n(p,i),p.prototype.appendChild=function(t){this.insertBefore(t)},p.prototype.attach=function(){var o=this;i.prototype.attach.call(this),this.children=new a.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var e=l(t);o.insertBefore(e,o.children.head)}catch(t){if(t instanceof u.ParchmentError)return;throw t}})},p.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,function(t,e,o){t.deleteAt(e,o)})},p.prototype.descendant=function(t,e){var o=this.children.find(e),r=o[0],n=o[1];return null==t.blotName&&t(r)||null!=t.blotName&&r instanceof t?[r,n]:r instanceof p?r.descendant(t,n):[null,-1]},p.prototype.descendants=function(r,t,e){void 0===t&&(t=0),void 0===e&&(e=Number.MAX_VALUE);var n=[],i=e;return this.children.forEachAt(t,e,function(t,e,o){(null==r.blotName&&r(t)||null!=r.blotName&&t instanceof r)&&n.push(t),t instanceof p&&(n=n.concat(t.descendants(r,e,i))),i-=o}),n},p.prototype.detach=function(){this.children.forEach(function(t){t.detach()}),i.prototype.detach.call(this)},p.prototype.formatAt=function(t,e,r,n){this.children.forEachAt(t,e,function(t,e,o){t.formatAt(e,o,r,n)})},p.prototype.insertAt=function(t,e,o){var r,n=this.children.find(t),i=n[0],a=n[1];i?i.insertAt(a,e,o):(r=null==o?u.create("text",e):u.create(e,o),this.appendChild(r))},p.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(t){return e instanceof t}))throw new u.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},p.prototype.length=function(){return this.children.reduce(function(t,e){return t+e.length()},0)},p.prototype.moveChildren=function(e,o){this.children.forEach(function(t){e.insertBefore(t,o)})},p.prototype.optimize=function(){var t;i.prototype.optimize.call(this),0===this.children.length&&(null!=this.statics.defaultChild?(t=u.create(this.statics.defaultChild),this.appendChild(t),t.optimize()):this.remove())},p.prototype.path=function(t,e){void 0===e&&(e=!1);var o=this.children.find(t,e),r=o[0],n=o[1],i=[[this,t]];return r instanceof p?i.concat(r.path(n,e)):(null!=r&&i.push([r,n]),i)},p.prototype.removeChild=function(t){this.children.remove(t)},p.prototype.replace=function(t){t instanceof p&&t.moveChildren(this),i.prototype.replace.call(this,t)},p.prototype.split=function(t,r){if(void 0===r&&(r=!1),!r){if(0===t)return this;if(t===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(t,this.length(),function(t,e,o){t=t.split(e,r),n.appendChild(t)}),n},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(t){var r=this,e=[],o=[];t.forEach(function(t){t.target===r.domNode&&"childList"===t.type&&(e.push.apply(e,t.addedNodes),o.push.apply(o,t.removedNodes))}),o.forEach(function(t){var e;null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY||null!=(e=u.find(t))&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==r.domNode||e.detach())}),e.filter(function(t){return t.parentNode==r.domNode}).sort(function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(t){var e=null;null!=t.nextSibling&&(e=u.find(t.nextSibling));var o=l(t);o.next==e&&null!=o.next||(null!=o.parent&&o.parent.removeChild(r),r.insertBefore(o,e))})},p);function p(){return null!==i&&i.apply(this,arguments)||this}function l(e){var o=u.find(e);if(null==o)try{o=u.create(e)}catch(t){o=u.create(u.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(t){o.domNode.appendChild(t)}),e.parentNode.replaceChild(o.domNode,e),o.attach()}return o}e.default=c},function(t,e,o){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),s=o(6),u=o(2),c=o(0),p=(i=u.default,n(l,i),l.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},l.prototype.attach=function(){i.prototype.attach.call(this),this.attributes=new s.default(this.domNode)},l.prototype.format=function(t,e){var o=c.query(t);o instanceof a.default?this.attributes.attribute(o,e):e&&(null==o||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},l.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},l.prototype.replaceWith=function(t,e){var o=i.prototype.replaceWith.call(this,t,e);return this.attributes.copy(o),o},l.prototype.update=function(t){var e=this;i.prototype.update.call(this,t),t.some(function(t){return t.target===e.domNode&&"attributes"===t.type})&&this.attributes.build()},l.prototype.wrap=function(t,e){var o=i.prototype.wrap.call(this,t,e);return o instanceof l&&o.statics.scope===this.statics.scope&&this.attributes.move(o),o},l);function l(){return null!==i&&i.apply(this,arguments)||this}e.default=p},function(t,e,o){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(8),s=o(0),u=(i=a.default,n(c,i),c.value=function(t){return!0},c.prototype.index=function(t,e){return t!==this.domNode?-1:Math.min(e,1)},c.prototype.position=function(t,e){var o=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return 0<t&&(o+=1),[this.parent.domNode,o]},c.prototype.value=function(){return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t;var t},c);function c(){return null!==i&&i.apply(this,arguments)||this}u.scope=s.Scope.INLINE_BLOT,e.default=u},function(t,e,o){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(1);function a(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(function(t){return 0===t.indexOf(e+"-")})}var s,u=(s=i.default,n(c,s),c.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map(function(t){return t.split("-").slice(0,-1).join("-")})},c.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},c.prototype.remove=function(e){a(e,this.keyName).forEach(function(t){e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")},c.prototype.value=function(t){var e=(a(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.default=u},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(1),i=o(5),a=o(7),s=o(0),r=(u.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},u.prototype.build=function(){var o=this;this.attributes={};var t=n.default.keys(this.domNode),e=i.default.keys(this.domNode),r=a.default.keys(this.domNode);t.concat(e).concat(r).forEach(function(t){var e=s.query(t,s.Scope.ATTRIBUTE);e instanceof n.default&&(o.attributes[e.attrName]=e)})},u.prototype.copy=function(o){var r=this;Object.keys(this.attributes).forEach(function(t){var e=r.attributes[t].value(r.domNode);o.format(t,e)})},u.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach(function(t){e.attributes[t].remove(e.domNode)}),this.attributes={}},u.prototype.values=function(){var o=this;return Object.keys(this.attributes).reduce(function(t,e){return t[e]=o.attributes[e].value(o.domNode),t},{})},u);function u(t){this.attributes={},this.domNode=t,this.build()}e.default=r},function(t,e,o){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(1);function a(t){var e=t.split("-"),o=e.slice(1).map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("");return e[0]+o}var s,u=(s=i.default,n(c,s),c.keys=function(t){return(t.getAttribute("style")||"").split(";").map(function(t){return t.split(":")[0].trim()})},c.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[a(this.keyName)]=e,!0)},c.prototype.remove=function(t){t.style[a(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},c.prototype.value=function(t){var e=t.style[a(this.keyName)];return this.canAdd(t,e)?e:""},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.default=u},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),r=(Object.defineProperty(n.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),n.create=function(t){if(null==this.tagName)throw new a.ParchmentError("Blot definition missing tagName");var e=Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),"number"==typeof t?document.createElement(this.tagName[t-1]):-1<this.tagName.indexOf(t)?document.createElement(t):document.createElement(this.tagName[0])):document.createElement(this.tagName);return this.className&&e.classList.add(this.className),e},n.prototype.attach=function(){this.domNode[a.DATA_KEY]={blot:this}},n.prototype.clone=function(){var t=this.domNode.cloneNode();return a.create(t)},n.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},n.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},n.prototype.formatAt=function(t,e,o,r){var n,i=this.isolate(t,e);null!=a.query(o,a.Scope.BLOT)&&r?i.wrap(o,r):null!=a.query(o,a.Scope.ATTRIBUTE)&&(n=a.create(this.statics.scope),i.wrap(n),n.format(o,r))},n.prototype.insertAt=function(t,e,o){var r=null==o?a.create("text",e):a.create(e,o),n=this.split(t);this.parent.insertBefore(r,n)},n.prototype.insertInto=function(t,e){var o;null!=this.parent&&this.parent.children.remove(this),t.children.insertBefore(this,e),null!=e&&(o=e.domNode),null!=this.next&&this.domNode.nextSibling==o||t.domNode.insertBefore(this.domNode,void 0!==o?o:null),this.parent=t},n.prototype.isolate=function(t,e){var o=this.split(t);return o.split(e),o},n.prototype.length=function(){return 1},n.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},n.prototype.optimize=function(){null!=this.domNode[a.DATA_KEY]&&delete this.domNode[a.DATA_KEY].mutations},n.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},n.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},n.prototype.replaceWith=function(t,e){var o="string"==typeof t?a.create(t,e):t;return o.replace(this),o},n.prototype.split=function(t,e){return 0===t?this:this.next},n.prototype.update=function(t){void 0===t&&(t=[])},n.prototype.wrap=function(t,e){var o="string"==typeof t?a.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(o,this.next),o.appendChild(this),o},n);function n(t){this.domNode=t,this.attach()}r.blotName="abstract",e.default=r},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(2),n=o(3),i=o(4),a=o(13),s=o(12),u=o(10),c=o(11),p=o(14),l=o(1),h=o(5),f=o(7),d=o(6),y=o(0),m={Scope:y.Scope,create:y.create,find:y.find,query:y.query,register:y.register,Container:r.default,Format:n.default,Leaf:i.default,Embed:c.default,Scroll:a.default,Block:u.default,Inline:s.default,Text:p.default,Attributor:{Attribute:l.default,Class:h.default,Style:f.default,Store:d.default}};e.default=m},function(t,e,o){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(3),s=o(0),u=(i=a.default,n(c,i),c.formats=function(t){var e=s.query(c.blotName).tagName;if(t.tagName!==e)return i.formats.call(this,t)},c.prototype.format=function(t,e){null!=s.query(t,s.Scope.BLOCK)&&(t!==this.statics.blotName||e?i.prototype.format.call(this,t,e):this.replaceWith(c.blotName))},c.prototype.formatAt=function(t,e,o,r){null!=s.query(o,s.Scope.BLOCK)?this.format(o,r):i.prototype.formatAt.call(this,t,e,o,r)},c.prototype.insertAt=function(t,e,o){var r,n;null==o||null!=s.query(e,s.Scope.INLINE)?i.prototype.insertAt.call(this,t,e,o):(r=this.split(t),n=s.create(e,o),r.parent.insertBefore(n,r))},c.prototype.update=function(t){navigator.userAgent.match(/Trident/)?this.attach():i.prototype.update.call(this,t)},c);function c(){return null!==i&&i.apply(this,arguments)||this}u.blotName="block",u.scope=s.Scope.BLOCK_BLOT,u.tagName="P",e.default=u},function(t,e,o){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(4),s=(i=a.default,n(u,i),u.formats=function(t){},u.prototype.format=function(t,e){i.prototype.formatAt.call(this,0,this.length(),t,e)},u.prototype.formatAt=function(t,e,o,r){0===t&&e===this.length()?this.format(o,r):i.prototype.formatAt.call(this,t,e,o,r)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(3),a=o(0);var s,u=(s=i.default,n(c,s),c.formats=function(t){if(t.tagName!==c.tagName)return s.formats.call(this,t)},c.prototype.format=function(t,e){var o=this;t!==this.statics.blotName||e?s.prototype.format.call(this,t,e):(this.children.forEach(function(t){t instanceof i.default||(t=t.wrap(c.blotName,!0)),o.attributes.copy(t)}),this.unwrap())},c.prototype.formatAt=function(t,e,o,r){null!=this.formats()[o]||a.query(o,a.Scope.ATTRIBUTE)?this.isolate(t,e).format(o,r):s.prototype.formatAt.call(this,t,e,o,r)},c.prototype.optimize=function(){s.prototype.optimize.call(this);var t=this.formats();if(0===Object.keys(t).length)return this.unwrap();var e=this.next;e instanceof c&&e.prev===this&&function(t,e){if(Object.keys(t).length===Object.keys(e).length){for(var o in t)if(t[o]!==e[o])return;return 1}}(t,e.formats())&&(e.moveChildren(this),e.remove())},c);function c(){return null!==s&&s.apply(this,arguments)||this}u.blotName="inline",u.scope=a.Scope.INLINE_BLOT,u.tagName="SPAN",e.default=u},function(t,e,o){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var s,u=o(2),c=o(0),i={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},a=(s=u.default,n(p,s),p.prototype.detach=function(){s.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(t,e){this.update(),0===t&&e===this.length()?this.children.forEach(function(t){t.remove()}):s.prototype.deleteAt.call(this,t,e)},p.prototype.formatAt=function(t,e,o,r){this.update(),s.prototype.formatAt.call(this,t,e,o,r)},p.prototype.insertAt=function(t,e,o){this.update(),s.prototype.insertAt.call(this,t,e,o)},p.prototype.optimize=function(t){var o=this;void 0===t&&(t=[]),s.prototype.optimize.call(this);for(var e=[].slice.call(this.observer.takeRecords());0<e.length;)t.push(e.pop());for(var r=function(t,e){void 0===e&&(e=!0),null!=t&&t!==o&&null!=t.domNode.parentNode&&(null==t.domNode[c.DATA_KEY].mutations&&(t.domNode[c.DATA_KEY].mutations=[]),e&&r(t.parent))},n=function(t){null!=t.domNode[c.DATA_KEY]&&null!=t.domNode[c.DATA_KEY].mutations&&(t instanceof u.default&&t.children.forEach(n),t.optimize())},i=t,a=0;0<i.length;a+=1){if(100<=a)throw new Error("[Parchment] Maximum optimize iterations reached");for(i.forEach(function(t){var e=c.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(r(c.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,function(t){var e=c.find(t,!1);r(e,!1),e instanceof u.default&&e.children.forEach(function(t){r(t,!1)})})):"attributes"===t.type&&r(e.prev)),r(e))}),this.children.forEach(n),e=(i=[].slice.call(this.observer.takeRecords())).slice();0<e.length;)t.push(e.pop())}},p.prototype.update=function(t){var e=this;(t=t||this.observer.takeRecords()).map(function(t){var e=c.find(t.target,!0);if(null!=e)return null==e.domNode[c.DATA_KEY].mutations?(e.domNode[c.DATA_KEY].mutations=[t],e):(e.domNode[c.DATA_KEY].mutations.push(t),null)}).forEach(function(t){null!=t&&t!==e&&null!=t.domNode[c.DATA_KEY]&&t.update(t.domNode[c.DATA_KEY].mutations||[])}),null!=this.domNode[c.DATA_KEY].mutations&&s.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations),this.optimize(t)},p);function p(t){var e=s.call(this,t)||this;return e.parent=null,e.observer=new MutationObserver(function(t){e.update(t)}),e.observer.observe(e.domNode,i),e}a.blotName="scroll",a.defaultChild="block",a.scope=c.Scope.BLOCK_BLOT,a.tagName="DIV",e.default=a},function(t,e,o){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(4),s=o(0),u=(i=a.default,n(c,i),c.create=function(t){return document.createTextNode(t)},c.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},c.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},c.prototype.index=function(t,e){return this.domNode===t?e:-1},c.prototype.insertAt=function(t,e,o){null==o?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):i.prototype.insertAt.call(this,t,e,o)},c.prototype.length=function(){return this.text.length},c.prototype.optimize=function(){i.prototype.optimize.call(this),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof c&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},c.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},c.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var o=s.create(this.domNode.splitText(t));return this.parent.insertBefore(o,this.next),this.text=this.statics.value(this.domNode),o},c.prototype.update=function(t){var e=this;t.some(function(t){return"characterData"===t.type&&t.target===e.domNode})&&(this.text=this.statics.value(this.domNode))},c.prototype.value=function(){return this.text},c);function c(t){var e=i.call(this,t)||this;return e.text=e.statics.value(e.domNode),e}u.blotName="text",u.scope=s.Scope.INLINE_BLOT,e.default=u},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],void 0),1<t.length&&this.append.apply(this,t.slice(1))},n.prototype.contains=function(t){for(var e,o=this.iterator();e=o();)if(e===t)return!0;return!1},n.prototype.insertBefore=function(t,e){null!=(t.next=e)?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?((this.tail.next=t).prev=this.tail,this.tail=t):(t.prev=void 0,this.head=this.tail=t),this.length+=1},n.prototype.offset=function(t){for(var e=0,o=this.head;null!=o;){if(o===t)return e;e+=o.length(),o=o.next}return-1},n.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),--this.length)},n.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},n.prototype.find=function(t,e){void 0===e&&(e=!1);for(var o,r=this.iterator();o=r();){var n=o.length();if(t<n||e&&t===n&&(null==o.next||0!==o.next.length()))return[o,t];t-=n}return[null,0]},n.prototype.forEach=function(t){for(var e,o=this.iterator();e=o();)t(e)},n.prototype.forEachAt=function(t,e,o){if(!(e<=0))for(var r,n=this.find(t),i=n[0],a=t-n[1],s=this.iterator(i);(r=s())&&a<t+e;){var u=r.length();a<t?o(r,t-a,Math.min(e,a+u-t)):o(r,0,Math.min(u,t+e-a)),a+=u}},n.prototype.map=function(o){return this.reduce(function(t,e){return t.push(o(e)),t},[])},n.prototype.reduce=function(t,e){for(var o,r=this.iterator();o=r();)e=t(e,o);return e},n);function n(){this.head=this.tail=void 0,this.length=0}e.default=r},function(t,e,o){t.exports=o(9)}],r.c=n,r.i=function(t){return t},r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=16);function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var o,n});