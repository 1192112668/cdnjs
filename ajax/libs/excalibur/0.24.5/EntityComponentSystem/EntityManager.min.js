import{Entity,isAddedComponent,isRemovedComponent}from"./Entity";import{Util}from"..";var EntityManager=function(){function t(t){this._scene=t,this.entities=[],this._entityIndex={}}return t.prototype.notify=function(t){isAddedComponent(t)&&this._scene.queryManager.addEntity(t.data.entity),isRemovedComponent(t)&&this._scene.queryManager.removeComponent(t.data.entity,t.data.component)},t.prototype.addEntity=function(t){t&&(this._entityIndex[t.id]=t,this.entities.push(t),this._scene.queryManager.addEntity(t),t.changes.register(this))},t.prototype.removeEntity=function(t){var e=0;e=t instanceof Entity?t.id:t;var n=this._entityIndex[e];delete this._entityIndex[e],n&&(Util.removeItemFromArray(n,this.entities),this._scene.queryManager.removeEntity(n),n.changes.unregister(this))},t.prototype.processRemovals=function(){for(var t=0,e=this.entities;t<e.length;t++){e[t].processRemoval()}},t.prototype.getById=function(t){return this._entityIndex[t]},t}();export{EntityManager};