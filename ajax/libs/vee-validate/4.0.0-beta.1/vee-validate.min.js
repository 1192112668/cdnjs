/**
  * vee-validate v4.0.0-beta.1
  * (c) 2020 Abdelrahman Awad
  * @license MIT
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VeeValidate={},e.Vue)}(this,(function(e,t){"use strict";function r(e){return"function"==typeof e}const a=e=>null!==e&&e&&"object"==typeof e&&!Array.isArray(e),n={};function i(e){return r(e)&&!!e.__locatorRef}function l(e){return["input","textarea","select"].includes(e)}function o(e){return e&&r(e.validate)}function u(e){return"checkbox"===e||"radio"===e}function s(e){return Number(e)>=0}function d(e){return/^\[.+\]$/i.test(e)}function c(e){return`v_${e}_error`}function v(e){return d(e)?e.replace(/\[|\]/gi,""):e}function f(e,t){return d(t)?e[v(t)]:t.split(/\.|\[(\d+)\]/).filter(Boolean).reduce(((e,t)=>{if(e&&e[t])return e[t]}),e)}function m(e,t,r){if(d(t))return void(e[v(t)]=r);const a=t.split(/\.|\[(\d+)\]/).filter(Boolean);let n=e;for(let e=0;e<a.length;e++){if(e===a.length-1)return void(n[a[e]]=r);a[e]in n||(n[a[e]]=s(a[e+1])?[]:{}),n=n[a[e]]}}function p(e,t){Array.isArray(e)&&s(t)?e.splice(Number(t),1):delete e[t]}function h(e,t){if(d(t))return void delete e[v(t)];const r=t.split(/\.|\[(\d+)\]/).filter(Boolean);let n=e;for(let e=0;e<r.length;e++){if(e===r.length-1){p(n,r[e]);break}if(!(r[e]in n))break;n=n[r[e]]}const i=r.map(((t,a)=>f(e,r.slice(0,a).join("."))));for(let t=i.length-1;t>=0;t--)l=i[t],(Array.isArray(l)?0===l.length:a(l)&&0===Object.keys(l).length)&&(0!==t?p(i[t-1],r[t-1]):p(e,r[0]));var l}function y(e){if(!(t=e)||!("undefined"!=typeof Event&&r(Event)&&t instanceof Event||t&&t.srcElement))return e;var t;const a=e.target;return"checkbox"===a.type&&"_value"in a?a._value:"file"===a.type&&a.files?Array.from(a.files):a.value}function b(e){return t.isRef(e)?e.value:e}function g(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?r(e)||o(e)||a(e)&&e._$$isNormalized?e:a(e)?Object.keys(e).reduce(((t,r)=>{const n=function(e){if(!0===e)return[];if(Array.isArray(e))return e;if(a(e))return e;return[e]}(e[r]);return!1!==e[r]&&(t[r]=O(n)),t}),t):"string"!=typeof e?t:e.split("|").reduce(((e,t)=>{const r=j(t);return r.name?(e[r.name]=O(r.params),e):e}),t):t}function O(e){const t=e=>"string"==typeof e&&"@"===e[0]?function(e){const t=t=>t[e];return t.__locatorRef=e,t}(e.slice(1)):e;return Array.isArray(e)?e.map(t):Object.keys(e).reduce(((r,a)=>(r[a]=t(e[a]),r)),{})}const j=e=>{let t=[];const r=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:r,params:t}};const A=(e,t)=>e.slots.default&&e.slots.default(t)||[];let S=Object.assign({},{generateMessage:({field:e})=>e+" is not valid.",bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0});const V=()=>S,k=e=>{S=Object.assign(Object.assign({},S),e)};async function w(e,t,a={}){const n=null==a?void 0:a.bails,i={name:(null==a?void 0:a.name)||"{field}",rules:g(t),bails:null==n||n,formData:(null==a?void 0:a.values)||{}},l=await async function(e,t){if(o(e.rules))return async function(e,t){return{errors:await e.rules.validate(t,{abortEarly:e.bails}).then((()=>[])).catch((e=>{if("ValidationError"===e.name)return e.errors;throw e}))}}(e,t);if(r(e.rules)){const r=await e.rules(t),a="string"!=typeof r&&r,n="string"==typeof r?r:E({field:e.name,value:t,form:e.formData});return{errors:a?[]:[n]}}const a=[],n=Object.keys(e.rules),i=n.length;for(let r=0;r<i;r++){const i=n[r],l=await x(e,t,{name:i,params:e.rules[i]});if(l.error&&(a.push(l.error),e.bails))return{errors:a}}return{errors:a}}(i,e);return{errors:l.errors}}async function x(e,t,r){const a=(l=r.name,n[l]);var l;if(!a)throw new Error(`No such validator '${r.name}' exists.`);const o=function(e,t){const r=e=>i(e)?e(t):e;if(Array.isArray(e))return e.map(r);return Object.keys(e).reduce(((t,a)=>(t[a]=r(e[a]),t)),{})}(r.params,e.formData),u={field:e.name,value:t,form:e.formData,rule:r},s=await a(t,o,u);return"string"==typeof s?{error:s}:{error:s?void 0:E(u)}}function E(e){return(0,V().generateMessage)(e)}const B=Symbol("vee-validate-form"),R=Symbol("vee-validate-form-errors"),_=Symbol("vee-validate-form-initial-values");function C(e,a,n){const{initialValue:l,form:o,immediate:s,bails:d,disabled:v,type:m,valueProp:p}=function(e){const r=t.inject(B,void 0),a=()=>({initialValue:void 0,immediate:!1,bails:!0,rules:"",disabled:!1,form:r});if(!e)return a();return Object.assign(Object.assign({},a()),e||{})}(n),{meta:h,errors:O,handleBlur:j,handleChange:A,handleInput:S,reset:V,patch:k,value:x,checked:E}=function({fieldName:e,initValue:r,form:a,type:n,valueProp:i}){const l=t.ref([]),{reset:o,meta:s}=function(){const e=()=>({untouched:!0,touched:!1,dirty:!1,pristine:!0,valid:!1,invalid:!1,validated:!1,pending:!1,changed:!1,passed:!1,failed:!1}),r=t.reactive(e());function a(){const t=e();Object.keys(r).forEach((e=>{["passed","failed"].includes(e)||(r[e]=t[e])}))}return t.watchEffect((()=>{r.passed=r.valid&&r.validated,r.failed=r.invalid&&r.validated})),{meta:r,reset:a}}(),d=null!=r?r:f(t.inject(_,{}),b(e)),c=function(e,r,a){if(!a)return t.ref(e);return t.computed({get:()=>f(a.values,b(r)),set(e){a.setFieldValue(b(r),e)}})}(d,e,a);u(n)&&d&&(c.value=d);const v=u(n)?t.computed((()=>Array.isArray(c.value)?c.value.includes(b(i)):b(i)===c.value)):void 0;(void 0===v||v.value)&&(c.value=d);const m=()=>{s.touched=!0,s.untouched=!1},p=()=>{s.dirty=!0,s.pristine=!1};function h(e){return l.value=e.errors,s.changed=d!==c.value,s.valid=!e.errors.length,s.invalid=!!e.errors.length,s.validated=!0,e}const g=()=>{l.value=[],o()};return{meta:s,errors:l,patch:h,reset:g,handleChange:e=>{c.value=y(e)},handleBlur:m,handleInput:p,value:c,checked:v}}({fieldName:e,initValue:b(l),form:o,type:m,valueProp:p}),R=function(e,t){if(!e)return;return e[t]}(null==o?void 0:o.schema,b(e)),C=t.computed((()=>g(R||b(a)))),F=async()=>{var t;if(h.pending=!0,!o||!o.validateSchema){const r=await w(x.value,C.value,{name:b(e),values:null!==(t=null==o?void 0:o.values)&&void 0!==t?t:{},bails:d});return h.valid=!r.errors.length,h.invalid=!!r.errors.length,h.pending=!1,r}const r=await o.validateSchema();return h.pending=!1,r[b(e)]},M=()=>F().then(k);t.onMounted((()=>{F().then((e=>{s&&k(e)}))}));const P=t.computed((()=>O.value[0])),$=function(e,r){return t.computed((()=>({"aria-invalid":r.failed?"true":"false","aria-describedBy":c(b(e))})))}(e,h),I={name:e,value:x,meta:h,errors:O,errorMessage:P,aria:$,reset:V,validate:M,handleChange:A,handleBlur:j,handleInput:S,disabled:v,setValidationState:k,type:m,valueProp:p,checked:E,idx:-1};if(t.watch(x,M,{deep:!0}),t.isRef(a)&&t.watch(a,M,{deep:!0}),!o)return I;o.register(I),t.onBeforeUnmount((()=>{o.unregister(I)}));const N=t.computed((()=>{const e=C.value;return!e||r(e)||r(e.validate)?[]:Object.keys(e).reduce(((e,t)=>{const r=(a=C.value[t],Array.isArray(a)?a.filter(i):Object.keys(a).filter((e=>i(a[e]))).map((e=>a[e]))).map((e=>e.__locatorRef));var a;return e.push(...r),e}),[])}));return t.watchEffect((()=>{N.value.length&&N.value.forEach((e=>{e in o.values&&h.validated&&M()}))})),I}const F=t.defineComponent({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:null},immediate:{type:Boolean,default:!1},bails:{type:Boolean,default:()=>V().bails},disabled:{type:Boolean,default:!1}},setup(e,r){const[a,n]=[t.toRef(e,"disabled"),t.toRef(e,"rules")],{errors:i,value:o,errorMessage:s,validate:d,handleChange:c,handleBlur:v,handleInput:f,reset:m,meta:p,aria:h,checked:y}=C(e.name,n,{immediate:e.immediate,bails:e.bails,disabled:a,type:r.attrs.type,initialValue:u(r.attrs.type)||"modelValue"in r.attrs?r.attrs.modelValue:r.attrs.value,valueProp:r.attrs.value}),b="modelValue"in r.attrs?function(e){c(e),r.emit("update:modelValue",o.value)}:c,{validateOnInput:g,validateOnChange:O,validateOnBlur:j,validateOnModelUpdate:S}=V(),k=()=>{const t={name:e.name,disabled:e.disabled,onBlur:[v],onInput:[f],onChange:[f]};var a,n;return g&&t.onInput.push(b),O&&t.onChange.push(b),j&&t.onBlur.push(b),S&&(t["onUpdate:modelValue"]=b),u(r.attrs.type)&&y?(t.checked=y.value,delete t.onInput):t.value=o.value,a=M(e,r),n=r.attrs.type,l(a)&&"file"===n&&delete t.value,{field:t,aria:h.value,meta:p,errors:i.value,errorMessage:s.value,validate:d,reset:m,handleChange:b}};return()=>{const a=M(e,r),n=k();"modelValue"in r.attrs&&String(r.attrs.modelValue)!==String(o.value)&&t.nextTick((()=>{c(r.attrs.modelValue)}));const i=A(r,n);return a?t.h(a,Object.assign(Object.assign(Object.assign({},r.attrs),n.field),l(a)?n.aria:{}),i):i}}});function M(e,t){let r=e.as||"";return e.as||t.slots.default||(r="input"),r}function P(e){const r=t.ref([]),a=t.ref(!1),n=t.computed((()=>r.value.reduce(((e,t)=>{if(!e[t.name])return e[t.name]=t,t.idx=-1,e;if(!Array.isArray(e[t.name])){const r=e[t.name];r.idx=0,e[t.name]=[r]}return t.idx=e[t.name].length,e[t.name].push(t),e}),{}))),i=t.computed((()=>r.value.filter((e=>!b(e.disabled))))),l=t.reactive({}),u={register(e){r.value.push(e)},unregister(e){var t,a;const n=r.value.indexOf(e);if(-1===n)return;r.value.splice(n,1);const i=b(e.name);if(-1===e.idx)return void h(l,i);const o=null===(a=null===(t=f(l,i))||void 0===t?void 0:t.indexOf)||void 0===a?void 0:a.call(t,b(e.valueProp));void 0!==o?-1!==o&&(Array.isArray(l[i])?h(l,`${i}.${o}`):h(l,i)):h(l,i)},fields:n,values:l,schema:null==e?void 0:e.validationSchema,validateSchema:o(null==e?void 0:e.validationSchema)?(e=!1)=>async function(e,t=!1){const r=await e.schema.validate(e.values,{abortEarly:!1}).then((()=>[])).catch((e=>{if("ValidationError"!==e.name)throw e;return e.inner||[]})),a=e.fields.value,n=r.reduce(((e,t)=>(e[t.path]=t,e)),{});return Object.keys(a).reduce(((e,r)=>{const i=a[r],l={errors:(n[r]||{errors:[]}).errors};e[r]=l;const o=Array.isArray(i),u=o?i.some((e=>e.meta.validated)):i.meta.validated;return t||u?o?(i.forEach((e=>e.setValidationState(l))),e):(i.setValidationState(l),e):e}),{})}(u,e):void 0,setFieldValue(e,t){const r=n.value[e];if(!r||!Array.isArray(r)&&"checkbox"!==r.type)return void m(l,e,t);if(Array.isArray(r)&&"checkbox"!==r[0].type)return void m(l,e,t);if(!Array.isArray(r)&&"checkbox"===r.type){const r=f(l,e)===t?void 0:t;return void m(l,e,r)}if(Array.isArray(t))return void m(l,e,t);const a=f(l,e),i=Array.isArray(a)?[...a]:[];if(i.includes(t)){const r=i.indexOf(t);return i.splice(r,1),void m(l,e,i)}i.push(t),m(l,e,i)}},s=async()=>{if(u.validateSchema)return u.validateSchema(!0).then((e=>Object.keys(e).every((t=>!e[t].errors.length))));return(await Promise.all(i.value.map((e=>e.validate())))).every((e=>!e.errors.length))},d=t.computed((()=>i.value.reduce(((e,t)=>(e[t.name]=b(t.errorMessage),e)),{}))),c=t.computed((()=>i.value.reduce(((e,t)=>(m(e,t.name,b(t.value)),e)),{}))),v=e=>function(t){return t instanceof Event&&(t.preventDefault(),t.stopPropagation()),a.value=!0,s().then((r=>{if(r&&"function"==typeof e)return e(c.value,t)})).then((()=>{a.value=!1}),(e=>{throw a.value=!1,e}))},p=v(((e,t)=>{t&&t.target.submit()})),y=function(e){const r=Object.keys($);return t.computed((()=>r.reduce(((t,r)=>{const a=$[r];return t[r]=e.value[a]((e=>e.meta[r])),t}),{})))}(r);return t.provide(B,u),t.provide(R,d),t.provide(_,(null==e?void 0:e.initialValues)||{}),{errors:d,meta:y,form:u,values:l,validate:s,isSubmitting:a,handleReset:()=>{r.value.forEach((e=>e.reset()))},handleSubmit:v,submitForm:p}}const $={valid:"every",invalid:"some",dirty:"some",pristine:"every",touched:"some",untouched:"every",pending:"some",validated:"every",changed:"some",passed:"every",failed:"some"};const I=t.defineComponent({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0}},setup(e,r){const{errors:a,validate:n,handleSubmit:i,handleReset:l,values:o,meta:u,isSubmitting:s,submitForm:d}=P({validationSchema:e.validationSchema,initialValues:e.initialValues}),c=r.attrs.onSubmit?i(r.attrs.onSubmit):d;function v(){l(),"function"==typeof r.attrs.onReset&&r.attrs.onReset()}return()=>{const f=A(r,{meta:u.value,errors:a.value,values:o,isSubmitting:s.value,validate:n,handleSubmit:i,handleReset:l,submitForm:d});if(!e.as)return f;const m="form"===e.as?{novalidate:!0}:{};return t.h(e.as,Object.assign(Object.assign(Object.assign({},m),r.attrs),{onSubmit:c,onReset:v}),f)}}}),N=t.defineComponent({props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(e,r){const a=t.inject(R,void 0),n=t.computed((()=>a.value[e.name]));return()=>{const a=A(r,{message:n.value}),i=e.as,l=Object.assign({id:c(e.name),role:"alert"},r.attrs);return!i&&a.length?a:a.length?t.h(i,l,a):t.h(i||"span",l,n.value)}}});e.ErrorMessage=N,e.Field=F,e.Form=I,e.configure=k,e.defineRule=function(e,t){!function(e,t){if(r(t))return;throw new Error(`Extension Error: The validator '${e}' must be a function.`)}(e,t),n[e]=t},e.useField=C,e.useForm=P,e.validate=w,Object.defineProperty(e,"__esModule",{value:!0})}));