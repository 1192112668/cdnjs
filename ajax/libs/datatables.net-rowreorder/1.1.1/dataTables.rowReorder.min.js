!function(o){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return o(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t=t||window,e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),o(e,t,t.document)}:o(jQuery,window,document)}(function(v,d,g,t){"use strict";var i=v.fn.dataTable,a=function(t,e){if(!i.versionCheck||!i.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=v.extend(!0,{},i.defaults.rowReorder,a.defaults,e),this.s={bodyTop:null,dt:new i.Api(t),getDataFn:i.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,scroll:{},scrollInterval:null,setDataFn:i.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0},this.dom={clone:null,dtScroll:v("div.dataTables_scrollBody",this.s.dt.table().container())};var o=this.s.dt.settings()[0],r=o.rowreorder;if(r)return r;(o.rowreorder=this)._constructor()};return v.extend(a.prototype,{_constructor:function(){var o=this,r=this.s.dt,t=v(r.table().node());"static"===t.css("position")&&t.css("position","relative"),v(r.table().container()).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,function(t){var e=v(this).closest("tr");if(r.row(e).any())return o._mouseDown(t,e),!1}),r.on("destroy.rowReorder",function(){v(r.table().container()).off(".rowReorder"),r.off(".rowReorder")})},_cachePositions:function(){var o=this.s.dt,r=v(o.table().node()).find("thead").outerHeight(),t=v.unique(o.rows({page:"current"}).nodes().toArray()),n=v.map(t,function(t,e){return v(t).position().top-r}),e=v.map(n,function(t,e){return n.length<e-1?(t+n[e+1])/2:(t+t+v(o.row(":last-child").node()).outerHeight())/2});this.s.middles=e,this.s.bodyTop=v(o.table().body()).offset().top,this.s.windowHeight=v(d).height()},_clone:function(t){var e=this.s.dt,o=v(e.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(t.clone(!1)),r=t.outerWidth(),n=t.outerHeight(),s=t.children().map(function(){return v(this).width()});o.width(r).height(n).find("tr").children().each(function(t){this.style.width=s[t]+"px"}),o.appendTo("body"),this.dom.clone=o},_clonePosition:function(t){var e=this.s.start,o=this._eventToPage(t,"Y")-e.top,r=this._eventToPage(t,"X")-e.left,n=this.c.snapX,s=!0===n?e.offsetLeft:"number"==typeof n?e.offsetLeft+n:r+e.offsetLeft;this.dom.clone.css({top:o+e.offsetTop,left:s})},_emitEvent:function(o,r){this.s.dt.iterator("table",function(t,e){v(t.nTable).triggerHandler(o+".dt",r)})},_eventToPage:function(t,e){return-1!==t.type.indexOf("touch")?t.originalEvent.touches[0]["page"+e]:t["page"+e]},_mouseDown:function(t,e){var o=this,r=this.s.dt,n=this.s.start,s=e.offset();n.top=this._eventToPage(t,"Y"),n.left=this._eventToPage(t,"X"),n.offsetTop=s.top,n.offsetLeft=s.left,n.nodes=v.unique(r.rows({page:"current"}).nodes().toArray()),this._cachePositions(),this._clone(e),this._clonePosition(t),(this.dom.target=e).addClass("dt-rowReorder-moving"),v(g).on("mouseup.rowReorder touchend.rowReorder",function(t){o._mouseUp(t)}).on("mousemove.rowReorder touchmove.rowReorder",function(t){o._mouseMove(t)}),v(d).width()===v(g).width()&&v(g.body).addClass("dt-rowReorder-noOverflow");var i=this.dom.dtScroll;this.s.scroll={windowHeight:v(d).height(),windowWidth:v(d).width(),dtTop:i.length?i.offset().top:null,dtLeft:i.length?i.offset().left:null,dtHeight:i.length?i.outerHeight():null,dtWidth:i.length?i.outerWidth():null}},_mouseMove:function(t){this._clonePosition(t);for(var e,o=this._eventToPage(t,"Y")-this.s.bodyTop,r=this.s.middles,n=null,s=this.s.dt,i=s.table().body(),d=0,a=r.length;d<a;d++)if(o<r[d]){n=d;break}null===n&&(n=r.length),null!==this.s.lastInsert&&this.s.lastInsert===n||(0===n?this.dom.target.prependTo(i):(e=v.unique(s.rows({page:"current"}).nodes().toArray()),n>this.s.lastInsert?this.dom.target.insertAfter(e[n-1]):this.dom.target.insertBefore(e[n])),this._cachePositions(),this.s.lastInsert=n),this._shiftScroll(t)},_mouseUp:function(t){var e=this.s.dt,o=this.c.dataSrc;this.dom.clone.remove(),this.dom.clone=null,this.dom.target.removeClass("dt-rowReorder-moving"),v(g).off(".rowReorder"),v(g.body).removeClass("dt-rowReorder-noOverflow"),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null;for(var r,n,s,i=this.s.start.nodes,d=v.unique(e.rows({page:"current"}).nodes().toArray()),a={},l=[],h=[],c=this.s.getDataFn,u=this.s.setDataFn,f=0,w=i.length;f<w;f++){i[f]!==d[f]&&(r=e.row(d[f]).id(),n=e.row(d[f]).data(),s=e.row(i[f]).data(),r&&(a[r]=c(s)),l.push({node:d[f],oldData:c(n),newData:c(s),newPosition:f,oldPosition:v.inArray(d[f],i)}),h.push(d[f]))}var p=[l,{dataSrc:o,nodes:h,values:a,triggerRow:e.row(this.dom.target)}];if(this._emitEvent("row-reorder",p),this.c.editor&&this.c.editor.edit(h,!1,{submit:"changed"}).multiSet(o,a).submit(),this.c.update){for(f=0,w=l.length;f<w;f++){u(e.row(l[f].node).data(),l[f].newData),e.columns().every(function(){this.dataSrc()===o&&e.cell(l[f].node,this.index()).invalidate("data")})}this._emitEvent("row-reordered",p),e.draw(!1)}},_shiftScroll:function(t){var e,o,r=this,n=(this.s.dt,this.s.scroll),s=!1,i=t.pageY-g.body.scrollTop;i<65?e=-5:i>n.windowHeight-65&&(e=5),null!==n.dtTop&&t.pageY<n.dtTop+65?o=-5:null!==n.dtTop&&t.pageY>n.dtTop+n.dtHeight-65&&(o=5),e||o?(n.windowVert=e,n.dtVert=o,s=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&s&&(this.s.scrollInterval=setInterval(function(){var t;n.windowVert&&(g.body.scrollTop+=n.windowVert),n.dtVert&&(t=r.dom.dtScroll[0],n.dtVert&&(t.scrollTop+=n.dtVert))},20))}}),a.defaults={dataSrc:0,editor:null,selector:"td:first-child",snapX:!1,update:!0},a.version="1.1.1",v.fn.dataTable.RowReorder=a,v.fn.DataTable.RowReorder=a,v(g).on("init.dt.dtr",function(t,e,o){var r,n,s;"dt"===t.namespace&&(r=e.oInit.rowReorder,n=i.defaults.rowReorder,(r||n)&&(s=v.extend({},r,n),!1!==r&&new a(e,s)))}),a});