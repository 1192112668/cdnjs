!function(o){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return o(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t=t||window,e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),o(e,t,t.document)}:o(jQuery,window,document)}(function(g,d,m,t){"use strict";var i=g.fn.dataTable,a=function(t,e){if(!i.versionCheck||!i.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=g.extend(!0,{},i.defaults.rowReorder,a.defaults,e),this.s={bodyTop:null,dt:new i.Api(t),getDataFn:i.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,scroll:{},scrollInterval:null,setDataFn:i.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0},this.dom={clone:null,dtScroll:g("div.dataTables_scrollBody",this.s.dt.table().container())};var o=this.s.dt.settings()[0],r=o.rowreorder;if(r)return r;(o.rowreorder=this)._constructor()};g.extend(a.prototype,{_constructor:function(){var o=this,r=this.s.dt,t=g(r.table().node());"static"===t.css("position")&&t.css("position","relative"),g(r.table().container()).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,function(t){if(o.c.enabled){var e=g(this).closest("tr");return r.row(e).any()?(o._mouseDown(t,e),!1):void 0}}),r.on("destroy.rowReorder",function(){g(r.table().container()).off(".rowReorder"),r.off(".rowReorder")})},_cachePositions:function(){var o=this.s.dt,r=g(o.table().node()).find("thead").outerHeight(),t=g.unique(o.rows({page:"current"}).nodes().toArray()),n=g.map(t,function(t,e){return g(t).position().top-r}),e=g.map(n,function(t,e){return n.length<e-1?(t+n[e+1])/2:(t+t+g(o.row(":last-child").node()).outerHeight())/2});this.s.middles=e,this.s.bodyTop=g(o.table().body()).offset().top,this.s.windowHeight=g(d).height()},_clone:function(t){var e=this.s.dt,o=g(e.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(t.clone(!1)),r=t.outerWidth(),n=t.outerHeight(),s=t.children().map(function(){return g(this).width()});o.width(r).height(n).find("tr").children().each(function(t){this.style.width=s[t]+"px"}),o.appendTo("body"),this.dom.clone=o},_clonePosition:function(t){var e=this.s.start,o=this._eventToPage(t,"Y")-e.top,r=this._eventToPage(t,"X")-e.left,n=this.c.snapX,s=!0===n?e.offsetLeft:"number"==typeof n?e.offsetLeft+n:r+e.offsetLeft;this.dom.clone.css({top:o+e.offsetTop,left:s})},_emitEvent:function(o,r){this.s.dt.iterator("table",function(t,e){g(t.nTable).triggerHandler(o+".dt",r)})},_eventToPage:function(t,e){return-1!==t.type.indexOf("touch")?t.originalEvent.touches[0]["page"+e]:t["page"+e]},_mouseDown:function(t,e){var o=this,r=this.s.dt,n=this.s.start,s=e.offset();n.top=this._eventToPage(t,"Y"),n.left=this._eventToPage(t,"X"),n.offsetTop=s.top,n.offsetLeft=s.left,n.nodes=g.unique(r.rows({page:"current"}).nodes().toArray()),this._cachePositions(),this._clone(e),this._clonePosition(t),(this.dom.target=e).addClass("dt-rowReorder-moving"),g(m).on("mouseup.rowReorder touchend.rowReorder",function(t){o._mouseUp(t)}).on("mousemove.rowReorder touchmove.rowReorder",function(t){o._mouseMove(t)}),g(d).width()===g(m).width()&&g(m.body).addClass("dt-rowReorder-noOverflow");var i=this.dom.dtScroll;this.s.scroll={windowHeight:g(d).height(),windowWidth:g(d).width(),dtTop:i.length?i.offset().top:null,dtLeft:i.length?i.offset().left:null,dtHeight:i.length?i.outerHeight():null,dtWidth:i.length?i.outerWidth():null}},_mouseMove:function(t){this._clonePosition(t);for(var e,o=this._eventToPage(t,"Y")-this.s.bodyTop,r=this.s.middles,n=null,s=this.s.dt,i=s.table().body(),d=0,a=r.length;d<a;d++)if(o<r[d]){n=d;break}null===n&&(n=r.length),null!==this.s.lastInsert&&this.s.lastInsert===n||(0===n?this.dom.target.prependTo(i):(e=g.unique(s.rows({page:"current"}).nodes().toArray()),n>this.s.lastInsert?this.dom.target.insertAfter(e[n-1]):this.dom.target.insertBefore(e[n])),this._cachePositions(),this.s.lastInsert=n),this._shiftScroll(t)},_mouseUp:function(t){var e=this,o=this.s.dt,r=this.c.dataSrc;this.dom.clone.remove(),this.dom.clone=null,this.dom.target.removeClass("dt-rowReorder-moving"),g(m).off(".rowReorder"),g(m.body).removeClass("dt-rowReorder-noOverflow"),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null;for(var n,s,i,d=this.s.start.nodes,a=g.unique(o.rows({page:"current"}).nodes().toArray()),l={},h=[],c=[],u=this.s.getDataFn,f=this.s.setDataFn,w=0,p=d.length;w<p;w++){d[w]!==a[w]&&(n=o.row(a[w]).id(),s=o.row(a[w]).data(),i=o.row(d[w]).data(),n&&(l[n]=u(i)),h.push({node:a[w],oldData:u(s),newData:u(i),newPosition:w,oldPosition:g.inArray(a[w],d)}),c.push(a[w]))}var v=[h,{dataSrc:r,nodes:c,values:l,triggerRow:o.row(this.dom.target)}];if(this._emitEvent("row-reorder",v),this.c.editor&&(this.c.enabled=!1,this.c.editor.edit(c,!1,g.extend({submit:"changed"},this.c.formOptions)).multiSet(r,l).one("submitComplete",function(){e.c.enabled=!0}).submit()),this.c.update){for(w=0,p=h.length;w<p;w++){f(o.row(h[w].node).data(),h[w].newData),o.columns().every(function(){this.dataSrc()===r&&o.cell(h[w].node,this.index()).invalidate("data")})}this._emitEvent("row-reordered",v),o.draw(!1)}},_shiftScroll:function(t){var e,o,r=this,n=(this.s.dt,this.s.scroll),s=!1,i=t.pageY-m.body.scrollTop;i<65?e=-5:i>n.windowHeight-65&&(e=5),null!==n.dtTop&&t.pageY<n.dtTop+65?o=-5:null!==n.dtTop&&t.pageY>n.dtTop+n.dtHeight-65&&(o=5),e||o?(n.windowVert=e,n.dtVert=o,s=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&s&&(this.s.scrollInterval=setInterval(function(){var t;n.windowVert&&(m.body.scrollTop+=n.windowVert),n.dtVert&&(t=r.dom.dtScroll[0],n.dtVert&&(t.scrollTop+=n.dtVert))},20))}}),a.defaults={dataSrc:0,editor:null,enabled:!0,formOptions:{},selector:"td:first-child",snapX:!1,update:!0};var e=g.fn.dataTable.Api;return e.register("rowReorder()",function(){return this}),e.register("rowReorder.enable()",function(e){return e===t&&(e=!0),this.iterator("table",function(t){t.rowreorder&&(t.rowreorder.c.enabled=e)})}),e.register("rowReorder.disable()",function(){return this.iterator("table",function(t){t.rowreorder&&(t.rowreorder.c.enabled=!1)})}),a.version="1.2.0",g.fn.dataTable.RowReorder=a,g.fn.DataTable.RowReorder=a,g(m).on("init.dt.dtr",function(t,e,o){var r,n,s;"dt"===t.namespace&&(r=e.oInit.rowReorder,n=i.defaults.rowReorder,(r||n)&&(s=g.extend({},r,n),!1!==r&&new a(e,s)))}),a});