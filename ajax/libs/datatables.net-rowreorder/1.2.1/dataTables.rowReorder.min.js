!function(o){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return o(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t=t||window,e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),o(e,t,t.document)}:o(jQuery,window,document)}(function(v,d,b,t){"use strict";var i=v.fn.dataTable,a=function(t,e){if(!i.versionCheck||!i.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=v.extend(!0,{},i.defaults.rowReorder,a.defaults,e),this.s={bodyTop:null,dt:new i.Api(t),getDataFn:i.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,scroll:{},scrollInterval:null,setDataFn:i.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0,documentOuterHeight:0,domCloneOuterHeight:0},this.dom={clone:null,dtScroll:v("div.dataTables_scrollBody",this.s.dt.table().container())};var o=this.s.dt.settings()[0],r=o.rowreorder;if(r)return r;(o.rowreorder=this)._constructor()};v.extend(a.prototype,{_constructor:function(){var r=this,n=this.s.dt,t=v(n.table().node());"static"===t.css("position")&&t.css("position","relative"),v(n.table().container()).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,function(t){if(r.c.enable){var e=v(this).closest("tr"),o=n.row(e);return o.any()?(r._emitEvent("pre-row-reorder",{node:o.node(),index:o.index()}),r._mouseDown(t,e),!1):void 0}}),n.on("destroy.rowReorder",function(){v(n.table().container()).off(".rowReorder"),n.off(".rowReorder")})},_cachePositions:function(){var o=this.s.dt,r=v(o.table().node()).find("thead").outerHeight(),t=v.unique(o.rows({page:"current"}).nodes().toArray()),n=v.map(t,function(t,e){return v(t).position().top-r}),e=v.map(n,function(t,e){return n.length<e-1?(t+n[e+1])/2:(t+t+v(o.row(":last-child").node()).outerHeight())/2});this.s.middles=e,this.s.bodyTop=v(o.table().body()).offset().top,this.s.windowHeight=v(d).height(),this.s.documentOuterHeight=v(b).outerHeight()},_clone:function(t){var e=this.s.dt,o=v(e.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(t.clone(!1)),r=t.outerWidth(),n=t.outerHeight(),s=t.children().map(function(){return v(this).width()});o.width(r).height(n).find("tr").children().each(function(t){this.style.width=s[t]+"px"}),o.appendTo("body"),this.dom.clone=o,this.s.domCloneOuterHeight=o.outerHeight()},_clonePosition:function(t){var e=this.s.start,o=this._eventToPage(t,"Y")-e.top,r=this._eventToPage(t,"X")-e.left,n=this.c.snapX,s=o+e.offsetTop,i=!0===n?e.offsetLeft:"number"==typeof n?e.offsetLeft+n:r+e.offsetLeft;s<0?s=0:s+this.s.domCloneOuterHeight>this.s.documentOuterHeight&&(s=this.s.documentOuterHeight-this.s.domCloneOuterHeight),this.dom.clone.css({top:s,left:i})},_emitEvent:function(o,r){this.s.dt.iterator("table",function(t,e){v(t.nTable).triggerHandler(o+".dt",r)})},_eventToPage:function(t,e){return-1!==t.type.indexOf("touch")?t.originalEvent.touches[0]["page"+e]:t["page"+e]},_mouseDown:function(t,e){var o=this,r=this.s.dt,n=this.s.start,s=e.offset();n.top=this._eventToPage(t,"Y"),n.left=this._eventToPage(t,"X"),n.offsetTop=s.top,n.offsetLeft=s.left,n.nodes=v.unique(r.rows({page:"current"}).nodes().toArray()),this._cachePositions(),this._clone(e),this._clonePosition(t),(this.dom.target=e).addClass("dt-rowReorder-moving"),v(b).on("mouseup.rowReorder touchend.rowReorder",function(t){o._mouseUp(t)}).on("mousemove.rowReorder touchmove.rowReorder",function(t){o._mouseMove(t)}),v(d).width()===v(b).width()&&v(b.body).addClass("dt-rowReorder-noOverflow");var i=this.dom.dtScroll;this.s.scroll={windowHeight:v(d).height(),windowWidth:v(d).width(),dtTop:i.length?i.offset().top:null,dtLeft:i.length?i.offset().left:null,dtHeight:i.length?i.outerHeight():null,dtWidth:i.length?i.outerWidth():null}},_mouseMove:function(t){this._clonePosition(t);for(var e,o=this._eventToPage(t,"Y")-this.s.bodyTop,r=this.s.middles,n=null,s=this.s.dt,i=s.table().body(),d=0,a=r.length;d<a;d++)if(o<r[d]){n=d;break}null===n&&(n=r.length),null!==this.s.lastInsert&&this.s.lastInsert===n||(0===n?this.dom.target.prependTo(i):(e=v.unique(s.rows({page:"current"}).nodes().toArray()),n>this.s.lastInsert?this.dom.target.insertAfter(e[n-1]):this.dom.target.insertBefore(e[n])),this._cachePositions(),this.s.lastInsert=n),this._shiftScroll(t)},_mouseUp:function(t){var e=this,o=this.s.dt,r=this.c.dataSrc;this.dom.clone.remove(),this.dom.clone=null,this.dom.target.removeClass("dt-rowReorder-moving"),v(b).off(".rowReorder"),v(b.body).removeClass("dt-rowReorder-noOverflow"),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null;for(var n,s,i,d=this.s.start.nodes,a=v.unique(o.rows({page:"current"}).nodes().toArray()),l={},h=[],c=[],u=this.s.getDataFn,f=this.s.setDataFn,w=0,p=d.length;w<p;w++){d[w]!==a[w]&&(n=o.row(a[w]).id(),s=o.row(a[w]).data(),i=o.row(d[w]).data(),n&&(l[n]=u(i)),h.push({node:a[w],oldData:u(s),newData:u(i),newPosition:w,oldPosition:v.inArray(a[w],d)}),c.push(a[w]))}var g=[h,{dataSrc:r,nodes:c,values:l,triggerRow:o.row(this.dom.target)}];this._emitEvent("row-reorder",g);function m(){if(e.c.update){for(w=0,p=h.length;w<p;w++){var t=o.row(h[w].node).data();f(t,h[w].newData),o.columns().every(function(){this.dataSrc()===r&&o.cell(h[w].node,this.index()).invalidate("data")})}e._emitEvent("row-reordered",g),o.draw(!1)}}this.c.editor?(this.c.enable=!1,this.c.editor.edit(c,!1,v.extend({submit:"changed"},this.c.formOptions)).multiSet(r,l).one("submitUnsuccessful.rowReorder",function(){o.draw(!1)}).one("submitSuccess.rowReorder",function(){m()}).one("submitComplete",function(){e.c.enable=!0,e.c.editor.off(".rowReorder")}).submit()):m()},_shiftScroll:function(t){var e,o,r=this,n=(this.s.dt,this.s.scroll),s=!1,i=t.pageY-b.body.scrollTop;i<65?e=-5:i>n.windowHeight-65&&(e=5),null!==n.dtTop&&t.pageY<n.dtTop+65?o=-5:null!==n.dtTop&&t.pageY>n.dtTop+n.dtHeight-65&&(o=5),e||o?(n.windowVert=e,n.dtVert=o,s=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&s&&(this.s.scrollInterval=setInterval(function(){var t;n.windowVert&&(b.body.scrollTop+=n.windowVert),n.dtVert&&(t=r.dom.dtScroll[0],n.dtVert&&(t.scrollTop+=n.dtVert))},20))}}),a.defaults={dataSrc:0,editor:null,enable:!0,formOptions:{},selector:"td:first-child",snapX:!1,update:!0};var e=v.fn.dataTable.Api;return e.register("rowReorder()",function(){return this}),e.register("rowReorder.enable()",function(e){return e===t&&(e=!0),this.iterator("table",function(t){t.rowreorder&&(t.rowreorder.c.enable=e)})}),e.register("rowReorder.disable()",function(){return this.iterator("table",function(t){t.rowreorder&&(t.rowreorder.c.enable=!1)})}),a.version="1.2.1",v.fn.dataTable.RowReorder=a,v.fn.DataTable.RowReorder=a,v(b).on("init.dt.dtr",function(t,e,o){var r,n,s;"dt"===t.namespace&&(r=e.oInit.rowReorder,n=i.defaults.rowReorder,(r||n)&&(s=v.extend({},r,n),!1!==r&&new a(e,s)))}),a});