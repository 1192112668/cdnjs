layui.define("jquery",function(e){"use strict";function a(e){this.options=e}var s=layui.$,t=layui.hint(),r="layui-tree-enter",c=["&#xe623;","&#xe625;"],u=["&#xe626;","&#xe627;"],d=["&#xe62b;","&#xe62a;"],p=["&#xe622;","&#xe624;"],m="&#xe621;";a.prototype.init=function(e){var i=this;e.addClass("layui-box layui-tree"),i.options.skin&&e.addClass("layui-tree-skin-"+i.options.skin),i.tree(e),i.on(e)},a.prototype.tree=function(n,e){var r=this,l=r.options,i=e||l.nodes;layui.each(i,function(e,i){var o=i.children&&0<i.children.length,a=s('<ul class="'+(i.spread?"layui-show":"")+'"></ul>'),t=s(["<li "+(i.spread?'data-spread="'+i.spread+'"':"")+">",o?'<i class="layui-icon layui-tree-spread">'+(i.spread?c[1]:c[0])+"</i>":"",l.check?'<i class="layui-icon layui-tree-check">'+("checkbox"===l.check?u[0]:"radio"===l.check?d[0]:"")+"</i>":"",'<a href="'+(i.href||"javascript:;")+'" '+(l.target&&i.href?'target="'+l.target+'"':"")+'><i class="layui-icon layui-tree-'+(o?"branch":"leaf")+'">'+(o?i.spread?p[1]:p[0]:m)+"</i><cite>"+(i.name||"未命名")+"</cite></a>","</li>"].join(""));o&&(t.append(a),r.tree(a,i.children)),n.append(t),"function"==typeof l.click&&r.click(t,i),r.spread(t,i),l.drag&&r.drag(t,i)})},a.prototype.click=function(e,i){var o=this.options;e.children("a").on("click",function(e){layui.stope(e),o.click(i)})},a.prototype.spread=function(e,i){function o(){e.data("spread")?(e.data("spread",null),t.removeClass("layui-show"),a.html(c[0]),n.find(".layui-icon").html(p[0])):(e.data("spread",!0),t.addClass("layui-show"),a.html(c[1]),n.find(".layui-icon").html(p[1]))}var a=(this.options,e.children(".layui-tree-spread")),t=e.children("ul"),n=e.children("a");t[0]&&(a.on("click",o),n.on("dblclick",o))},a.prototype.on=function(e){var t=this,i=t.options,n="layui-tree-drag";e.find("i").on("selectstart",function(e){return!1}),i.drag&&s(document).on("mousemove",function(e){var i,o,a=t.move;a.from&&(a.to,i=s('<div class="layui-box '+n+'"></div>'),e.preventDefault(),s("."+n)[0]||s("body").append(i),(o=s("."+n)[0]?s("."+n):i).addClass("layui-show").html(a.from.elem.children("a").html()),o.css({left:e.pageX+10,top:e.pageY+10}))}).on("mouseup",function(){var e=t.move;e.from&&(e.from.elem.children("a").removeClass(r),e.to&&e.to.elem.children("a").removeClass(r),t.move={},s("."+n).remove())})},a.prototype.move={},a.prototype.drag=function(o,a){function e(){var e=s(this),i=t.move;i.from&&(i.to={item:a,elem:o},e.addClass(r))}var t=this,i=(t.options,o.children("a"));i.on("mousedown",function(){t.move.from={item:a,elem:o}}),i.on("mouseenter",e).on("mousemove",e).on("mouseleave",function(){var e=s(this),i=t.move;i.from&&(delete i.to,e.removeClass(r))})},e("tree",function(e){var i=new a(e=e||{}),o=s(e.elem);return o[0]?void i.init(o):t.error("layui.tree 没有找到"+e.elem+"元素")})});