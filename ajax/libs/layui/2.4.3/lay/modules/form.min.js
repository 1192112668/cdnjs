layui.define("layer",function(e){"use strict";function i(){this.config={verify:{required:[/[\S]+/,"必填项不能为空"],phone:[/^1\d{10}$/,"请输入正确的手机号"],email:[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,"邮箱格式不正确"],url:[/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/,"链接格式不正确"],number:function(e){if(!e||isNaN(e))return"只能填写数字"},date:[/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/,"日期格式不正确"],identity:[/(^\d{15}$)|(^\d{17}(x|X|\d)$)/,"请输入正确的身份证号"]}}}var g=layui.$,f=layui.layer,n=layui.hint(),h=layui.device(),b="form",v=".layui-form",C="layui-this",w="layui-hide",$="layui-disabled";i.prototype.set=function(e){return g.extend(!0,this.config,e),this},i.prototype.verify=function(e){return g.extend(!0,this.config.verify,e),this},i.prototype.on=function(e,i){return layui.onevent.call(this,b,e,i)},i.prototype.val=function(e,t){g(v+'[lay-filter="'+e+'"]').each(function(e,i){var n=g(this);layui.each(t,function(e,i){var t,a=n.find('[name="'+e+'"]');a[0]&&("checkbox"===(t=a[0].type)?a[0].checked=i:"radio"===t?a.each(function(){this.value===i&&(this.checked=!0)}):a.val(i))})}),o.render(null,e)},i.prototype.render=function(e,i){var t=g(v+(i?'[lay-filter="'+i+'"]':"")),a={select:function(){function v(e,i){g(e.target).parent().hasClass(m)&&!i||(g("."+p).removeClass(p+"ed "+p+"up"),y&&x&&y.val(x)),y=null}var y,h="请选择",p="layui-form-select",m="layui-select-title",k="layui-select-none",x="",e=t.find("select");e.each(function(e,i){var t=g(this),a=t.next("."+p),n=this.disabled,l=i.value,r=g(i.options[i.selectedIndex]),s=i.options[0];if("string"==typeof t.attr("lay-ignore"))return t.show();var o,c,u="string"==typeof t.attr("lay-search"),d=s&&!s.value&&s.innerHTML||h,f=g(['<div class="'+(u?"":"layui-unselect ")+p,(n?" layui-select-disabled":"")+'">','<div class="'+m+'">','<input type="text" placeholder="'+d+'" value="'+(l?r.html():"")+'"'+(u?"":" readonly")+' class="layui-input'+(u?"":" layui-unselect")+(n?" "+$:"")+'">','<i class="layui-edge"></i></div>','<dl class="layui-anim layui-anim-upbit'+(t.find("optgroup")[0]?" layui-select-group":"")+'">',(o=t.find("*"),c=[],layui.each(o,function(e,i){0!==e||i.value?"optgroup"===i.tagName.toLowerCase()?c.push("<dt>"+i.label+"</dt>"):c.push('<dd lay-value="'+i.value+'" class="'+(l===i.value?C:"")+(i.disabled?" "+$:"")+'">'+i.innerHTML+"</dd>"):c.push('<dd lay-value="" class="layui-select-tips">'+(i.innerHTML||h)+"</dd>")}),0===c.length&&c.push('<dd lay-value="" class="'+$+'">没有选项</dd>'),c.join("")+"</dl>"),"</div>"].join(""));a[0]&&a.remove(),t.after(f),function(a,e,i){var s,t,n,o,l,r=g(this),c=a.find("."+m),u=c.find("input"),d=a.find("dl"),f=d.children("dd"),h=this.selectedIndex;e||(t=function(){var e=a.offset().top+a.outerHeight()+5-T.scrollTop(),i=d.outerHeight();h=r[0].selectedIndex,a.addClass(p+"ed"),f.removeClass(w),s=null,f.eq(h).addClass(C).siblings().removeClass(C),e+i>T.height()&&i<=e&&a.addClass(p+"up"),o()},n=function(e){a.removeClass(p+"ed "+p+"up"),u.blur(),s=null,e||l(u.val(),function(e){e&&(x=d.find("."+C).html(),u&&u.val(x))})},o=function(){var e,i,t,a=d.children("dd."+C);a[0]&&(e=a.position().top,i=d.height(),t=a.height(),i<e&&d.scrollTop(e+d.scrollTop()-i+t-5),e<0&&d.scrollTop(e+d.scrollTop()-5))},c.on("click",function(e){a.hasClass(p+"ed")?n():(v(e,!0),t()),d.find("."+k).remove()}),c.find(".layui-edge").on("click",function(){u.focus()}),u.on("keyup",function(e){9===e.keyCode&&t()}).on("keydown",function(l){var e=l.keyCode;9===e&&n();var r=function(a,n){l.preventDefault();var e=function(){var e=d.children("dd."+C);if(d.children("dd."+w)[0]&&"next"===a){var i=d.children("dd:not(."+w+",."+$+")"),t=i.eq(0).index();if(0<=t&&t<e.index()&&!i.hasClass(C))return i.eq(0).prev()[0]?i.eq(0).prev():d.children(":last")}return n&&n[0]?n:s&&s[0]?s:e}(),i=e[a](),t=e[a]("dd:not(."+w+")");return i[0]?(s=e[a](),t[0]&&!t.hasClass($)||!s[0]?(t.addClass(C).siblings().removeClass(C),void o()):r(a,s)):s=null};38===e&&r("prev"),40===e&&r("next"),13===e&&(l.preventDefault(),d.children("dd."+C).trigger("click"))}),l=function(a,e,n){var l=0;layui.each(f,function(){var e=g(this),i=e.text(),t=-1===i.indexOf(a);(""===a||"blur"===n?a!==i:t)&&l++,"keyup"===n&&e[t?"addClass":"removeClass"](w)});var i=l===f.length;return e(i),i},i&&u.on("keyup",function(e){var i=this.value,t=e.keyCode;return 9!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&(l(i,function(e){e?d.find("."+k)[0]||d.append('<p class="'+k+'">无匹配项</p>'):d.find("."+k).remove()},"keyup"),""===i&&d.find("."+k).remove(),void o())}).on("blur",function(e){var i=r[0].selectedIndex;y=u,x=g(r[0].options[i]).html(),setTimeout(function(){l(u.val(),function(e){x||u.val("")},"blur")},200)}),f.on("click",function(){var e=g(this),i=e.attr("lay-value"),t=r.attr("lay-filter");return!e.hasClass($)&&(e.hasClass("layui-select-tips")?u.val(""):(u.val(e.text()),e.addClass(C)),e.siblings().removeClass(C),r.val(i).removeClass("layui-form-danger"),layui.event.call(this,b,"select("+t+")",{elem:r[0],value:i,othis:a}),n(!0),!1)}),a.find("dl>dt").on("click",function(e){return!1}),g(document).off("click",v).on("click",v))}.call(this,f,n,u)})},checkbox:function(){var u={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],_switch:["layui-form-switch","layui-form-onswitch","switch"]},e=t.find("input[type=checkbox]");e.each(function(e,i){var t=g(this),a=t.attr("lay-skin"),n=(t.attr("lay-text")||"").split("|"),l=this.disabled;"switch"===a&&(a="_"+a);var r=u[a]||u.checkbox;if("string"==typeof t.attr("lay-ignore"))return t.show();var s,o=t.next("."+r[0]),c=g(['<div class="layui-unselect '+r[0],i.checked?" "+r[1]:"",l?" layui-checkbox-disbaled "+$:"",'"',a?' lay-skin="'+a+'"':"",">",(s={checkbox:[i.title.replace(/\s/g,"")?"<span>"+i.title+"</span>":"",'<i class="layui-icon layui-icon-ok"></i>'].join(""),_switch:"<em>"+((i.checked?n[0]:n[1])||"")+"</em><i></i>"})[a]||s.checkbox,"</div>"].join(""));o[0]&&o.remove(),t.after(c),function(t,a){var n=g(this);t.on("click",function(){var e=n.attr("lay-filter"),i=(n.attr("lay-text")||"").split("|");n[0].disabled||(n[0].checked?(n[0].checked=!1,t.removeClass(a[1]).find("em").text(i[1])):(n[0].checked=!0,t.addClass(a[1]).find("em").text(i[0])),layui.event.call(n[0],b,a[2]+"("+e+")",{elem:n[0],value:n[0].value,othis:t}))})}.call(this,c,r)})},radio:function(){var s="layui-form-radio",o=["&#xe643;","&#xe63f;"],e=t.find("input[type=radio]");e.each(function(e,i){var t=g(this),a=t.next("."+s),n=this.disabled;if("string"==typeof t.attr("lay-ignore"))return t.show();a[0]&&a.remove();var l,r=g(['<div class="layui-unselect '+s,i.checked?" "+s+"ed":"",(n?" layui-radio-disbaled "+$:"")+'">','<i class="layui-anim layui-icon">'+o[i.checked?0:1]+"</i>","<div>"+(l=i.title||"","string"==typeof t.next().attr("lay-radio")&&(l=t.next().html(),t.next().remove()),l)+"</div>","</div>"].join(""));t.after(r),function(n){var l=g(this),r="layui-anim-scaleSpring";n.on("click",function(){var e=l[0].name,i=l.parents(v),t=l.attr("lay-filter"),a=i.find("input[name="+e.replace(/(\.|#|\[|\])/g,"\\$1")+"]");l[0].disabled||(layui.each(a,function(){var e=g(this).next("."+s);this.checked=!1,e.removeClass(s+"ed"),e.find(".layui-icon").removeClass(r).html(o[1])}),l[0].checked=!0,n.addClass(s+"ed"),n.find(".layui-icon").addClass(r).html(o[0]),layui.event.call(l[0],b,"radio("+t+")",{elem:l[0],value:l[0].value,othis:n}))})}.call(this,r)})}};return e?a[e]?a[e]():n.error("不支持的"+e+"表单渲染"):layui.each(a,function(e,i){i()}),this};function t(){var e=g(this),c=o.config.verify,u=null,d="layui-form-danger",a={},i=e.parents(v),t=i.find("*[lay-verify]"),n=e.parents("form")[0],l=i.find("input,select,textarea"),r=e.attr("lay-filter");if(layui.each(t,function(e,l){var r=g(this),i=r.attr("lay-verify").split("|"),s=r.attr("lay-verType"),o=r.val();if(r.removeClass(d),layui.each(i,function(e,i){var t="",a="function"==typeof c[i];if(c[i]){var n=a?t=c[i](o,l):!c[i][0].test(o),t=t||c[i][1];if(n)return"tips"===s?f.tips(t,"string"==typeof r.attr("lay-ignore")||"select"!==l.tagName.toLowerCase()&&!/^checkbox|radio$/.test(l.type)?r:r.next(),{tips:1}):"alert"===s?f.alert(t,{title:"提示",shadeClose:!0}):f.msg(t,{icon:5,shift:6}),h.android||h.ios||l.focus(),r.addClass(d),u=!0}}),u)return u}),u)return!1;var s={};return layui.each(l,function(e,i){var t;i.name=(i.name||"").replace(/^\s*|\s*&/,""),i.name&&(/^.*\[\]$/.test(i.name)&&(t=i.name.match(/^(.*)\[\]$/g)[0],s[t]=0|s[t],i.name=i.name.replace(/^(.*)\[\]$/,"$1["+s[t]+++"]")),/^checkbox|radio$/.test(i.type)&&!i.checked||(a[i.name]=i.value))}),layui.event.call(this,b,"submit("+r+")",{elem:this,form:n,field:a})}var o=new i,a=g(document),T=g(window);o.render(),a.on("reset",v,function(){var e=g(this).attr("lay-filter");setTimeout(function(){o.render(null,e)},50)}),a.on("submit",v,t).on("click","*[lay-submit]",t),e(b,o)});