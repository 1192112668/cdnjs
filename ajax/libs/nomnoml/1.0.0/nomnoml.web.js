!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).dagre=e()}(function(){return function a(i,s,u){function c(t,e){if(!s[t]){if(!i[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(f)return f(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[t]={exports:{}};i[t][0].call(o.exports,function(e){return c(i[t][1][e]||e)},o,o.exports,a,i,s,u)}return s[t].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,r){t.exports={graphlib:e("./lib/graphlib"),layout:e("./lib/layout"),debug:e("./lib/debug"),util:{time:e("./lib/util").time,notime:e("./lib/util").notime},version:e("./lib/version")}},{"./lib/debug":6,"./lib/graphlib":7,"./lib/layout":9,"./lib/util":29,"./lib/version":30}],2:[function(e,t,r){"use strict";var i=e("./lodash"),n=e("./greedy-fas");t.exports={run:function(r){var e="greedy"===r.graph().acyclicer?n(r,function(t){return function(e){return t.edge(e).weight}}(r)):function(r){var n=[],o={},a={};return i.forEach(r.nodes(),function t(e){if(i.has(a,e))return;a[e]=!0;o[e]=!0;i.forEach(r.outEdges(e),function(e){i.has(o,e.w)?n.push(e):t(e.w)});delete o[e]}),n}(r);i.forEach(e,function(e){var t=r.edge(e);r.removeEdge(e),t.forwardName=e.name,t.reversed=!0,r.setEdge(e.w,e.v,t,i.uniqueId("rev"))})},undo:function(n){i.forEach(n.edges(),function(e){var t,r=n.edge(e);r.reversed&&(n.removeEdge(e),t=r.forwardName,delete r.reversed,delete r.forwardName,n.setEdge(e.w,e.v,r,t))})}}},{"./greedy-fas":8,"./lodash":10}],3:[function(e,t,r){var s=e("./lodash"),c=e("./util");function u(e,t,r,n,o,a){var i={width:0,height:0,rank:a,borderType:t},s=o[t][a-1],u=c.addDummyNode(e,"border",i,r);o[t][a]=u,e.setParent(u,n),s&&e.setEdge(s,u,{weight:1})}t.exports=function(i){s.forEach(i.children(),function e(t){var r=i.children(t),n=i.node(t);if(r.length&&s.forEach(r,e),s.has(n,"minRank")){n.borderLeft=[],n.borderRight=[];for(var o=n.minRank,a=n.maxRank+1;o<a;++o)u(i,"borderLeft","_bl",t,n,o),u(i,"borderRight","_br",t,n,o)}})}},{"./lodash":10,"./util":29}],4:[function(e,t,r){"use strict";var n=e("./lodash");function o(t){n.forEach(t.nodes(),function(e){a(t.node(e))}),n.forEach(t.edges(),function(e){a(t.edge(e))})}function a(e){var t=e.width;e.width=e.height,e.height=t}function i(e){e.y=-e.y}function s(e){var t=e.x;e.x=e.y,e.y=t}t.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||o(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(r){n.forEach(r.nodes(),function(e){i(r.node(e))}),n.forEach(r.edges(),function(e){var t=r.edge(e);n.forEach(t.points,i),n.has(t,"y")&&i(t)})}(e);"lr"!==t&&"rl"!==t||(function(r){n.forEach(r.nodes(),function(e){s(r.node(e))}),n.forEach(r.edges(),function(e){var t=r.edge(e);n.forEach(t.points,s),n.has(t,"x")&&s(t)})}(e),o(e))}}},{"./lodash":10}],5:[function(e,t,r){function n(){var e={};e._next=e._prev=e,this._sentinel=e}function o(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function a(e,t){if("_next"!==e&&"_prev"!==e)return t}(t.exports=n).prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return o(t),t},n.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&o(e),e._next=t._next,t._next._prev=e,(t._next=e)._prev=t},n.prototype.toString=function(){for(var e=[],t=this._sentinel,r=t._prev;r!==t;)e.push(JSON.stringify(r,a)),r=r._prev;return"["+e.join(", ")+"]"}},{}],6:[function(e,t,r){var o=e("./lodash"),a=e("./util"),i=e("./graphlib").Graph;t.exports={debugOrdering:function(t){var e=a.buildLayerMatrix(t),n=new i({compound:!0,multigraph:!0}).setGraph({});return o.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),o.forEach(t.edges(),function(e){n.setEdge(e.v,e.w,{},e.name)}),o.forEach(e,function(e,t){var r="layer"+t;n.setNode(r,{rank:"same"}),o.reduce(e,function(e,t){return n.setEdge(e,t,{style:"invis"}),t})}),n}}},{"./graphlib":7,"./lodash":10,"./util":29}],7:[function(e,t,r){var n;if("function"==typeof e)try{n=e("graphlib")}catch(e){}n=n||window.graphlib,t.exports=n},{graphlib:31}],8:[function(e,t,r){var u=e("./lodash"),c=e("./graphlib").Graph,f=e("./data/list");t.exports=function(t,e){if(t.nodeCount()<=1)return[];var r=function(e,o){var a=new c,i=0,s=0;u.forEach(e.nodes(),function(e){a.setNode(e,{v:e,in:0,out:0})}),u.forEach(e.edges(),function(e){var t=a.edge(e.v,e.w)||0,r=o(e),n=t+r;a.setEdge(e.v,e.w,n),s=Math.max(s,a.node(e.v).out+=r),i=Math.max(i,a.node(e.w).in+=r)});var t=u.range(s+i+3).map(function(){return new f}),r=i+1;return u.forEach(a.nodes(),function(e){h(t,r,a.node(e))}),{graph:a,buckets:t,zeroIdx:r}}(t,e||o),n=function(e,t,r){var n,o=[],a=t[t.length-1],i=t[0];for(;e.nodeCount();){for(;n=i.dequeue();)d(e,t,r,n);for(;n=a.dequeue();)d(e,t,r,n);if(e.nodeCount())for(var s=t.length-2;0<s;--s)if(n=t[s].dequeue()){o=o.concat(d(e,t,r,n,!0));break}}return o}(r.graph,r.buckets,r.zeroIdx);return u.flatten(u.map(n,function(e){return t.outEdges(e.v,e.w)}),!0)};var o=u.constant(1);function d(o,a,i,e,n){var s=n?[]:void 0;return u.forEach(o.inEdges(e.v),function(e){var t=o.edge(e),r=o.node(e.v);n&&s.push({v:e.v,w:e.w}),r.out-=t,h(a,i,r)}),u.forEach(o.outEdges(e.v),function(e){var t=o.edge(e),r=e.w,n=o.node(r);n.in-=t,h(a,i,n)}),o.removeNode(e.v),s}function h(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}},{"./data/list":5,"./graphlib":7,"./lodash":10}],9:[function(e,t,r){"use strict";var f=e("./lodash"),n=e("./acyclic"),o=e("./normalize"),i=e("./rank"),s=e("./util").normalizeRanks,u=e("./parent-dummy-chains"),d=e("./util").removeEmptyRanks,h=e("./nesting-graph"),l=e("./add-border-segments"),p=e("./coordinate-system"),_=e("./order"),v=e("./position"),g=e("./util"),c=e("./graphlib").Graph;t.exports=function(a,e){var r=e&&e.debugTiming?g.time:g.notime;r("layout",function(){var t=r("  buildLayoutGraph",function(){return r=a,n=new c({multigraph:!0,compound:!0}),e=O(r.graph()),n.setGraph(f.merge({},b,A(e,y),f.pick(e,m))),f.forEach(r.nodes(),function(e){var t=O(r.node(e));n.setNode(e,f.defaults(A(t,x),w)),n.setParent(e,r.parent(e))}),f.forEach(r.edges(),function(e){var t=O(r.edge(e));n.setEdge(e,f.merge({},j,A(t,E),f.pick(t,k)))}),n;var r,n,e});r("  runLayout",function(){var c,e;c=t,(e=r)("    makeSpaceForEdgeLabels",function(){var r,n;(n=(r=c).graph()).ranksep/=2,f.forEach(r.edges(),function(e){var t=r.edge(e);t.minlen*=2,"c"!==t.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?t.width+=t.labeloffset:t.height+=t.labeloffset)})}),e("    removeSelfEdges",function(){var r;r=c,f.forEach(r.edges(),function(e){var t;e.v===e.w&&((t=r.node(e.v)).selfEdges||(t.selfEdges=[]),t.selfEdges.push({e:e,label:r.edge(e)}),r.removeEdge(e))})}),e("    acyclic",function(){n.run(c)}),e("    nestingGraph.run",function(){h.run(c)}),e("    rank",function(){i(g.asNonCompoundGraph(c))}),e("    injectEdgeLabelProxies",function(){var o;o=c,f.forEach(o.edges(),function(e){var t,r,n=o.edge(e);n.width&&n.height&&(t=o.node(e.v),r={rank:(o.node(e.w).rank-t.rank)/2+t.rank,e:e},g.addDummyNode(o,"edge-proxy",r,"_ep"))})}),e("    removeEmptyRanks",function(){d(c)}),e("    nestingGraph.cleanup",function(){h.cleanup(c)}),e("    normalizeRanks",function(){s(c)}),e("    assignRankMinMax",function(){var r,n;r=c,n=0,f.forEach(r.nodes(),function(e){var t=r.node(e);t.borderTop&&(t.minRank=r.node(t.borderTop).rank,t.maxRank=r.node(t.borderBottom).rank,n=f.max(n,t.maxRank))}),r.graph().maxRank=n}),e("    removeEdgeLabelProxies",function(){var r;r=c,f.forEach(r.nodes(),function(e){var t=r.node(e);"edge-proxy"===t.dummy&&(r.edge(t.e).labelRank=t.rank,r.removeNode(e))})}),e("    normalize.run",function(){o.run(c)}),e("    parentDummyChains",function(){u(c)}),e("    addBorderSegments",function(){l(c)}),e("    order",function(){_(c)}),e("    insertSelfEdges",function(){var o,e;o=c,e=g.buildLayerMatrix(o),f.forEach(e,function(e){var n=0;f.forEach(e,function(e,t){var r=o.node(e);r.order=t+n,f.forEach(r.selfEdges,function(e){g.addDummyNode(o,"selfedge",{width:e.label.width,height:e.label.height,rank:r.rank,order:t+ ++n,e:e.e,label:e.label},"_se")}),delete r.selfEdges})})}),e("    adjustCoordinateSystem",function(){p.adjust(c)}),e("    position",function(){v(c)}),e("    positionSelfEdges",function(){var s;s=c,f.forEach(s.nodes(),function(e){var t,r,n,o,a,i=s.node(e);"selfedge"===i.dummy&&(r=(t=s.node(i.e.v)).x+t.width/2,n=t.y,o=i.x-r,a=t.height/2,s.setEdge(i.e,i.label),s.removeNode(e),i.label.points=[{x:r+2*o/3,y:n-a},{x:r+5*o/6,y:n-a},{x:r+o,y:n},{x:r+5*o/6,y:n+a},{x:r+2*o/3,y:n+a}],i.label.x=i.x,i.label.y=i.y)})}),e("    removeBorderNodes",function(){var i;i=c,f.forEach(i.nodes(),function(e){var t,r,n,o,a;i.children(e).length&&(t=i.node(e),r=i.node(t.borderTop),n=i.node(t.borderBottom),o=i.node(f.last(t.borderLeft)),a=i.node(f.last(t.borderRight)),t.width=Math.abs(a.x-o.x),t.height=Math.abs(n.y-r.y),t.x=o.x+t.width/2,t.y=r.y+t.height/2)}),f.forEach(i.nodes(),function(e){"border"===i.node(e).dummy&&i.removeNode(e)})}),e("    normalize.undo",function(){o.undo(c)}),e("    fixupEdgeLabelCoords",function(){var r;r=c,f.forEach(r.edges(),function(e){var t=r.edge(e);if(f.has(t,"x"))switch("l"!==t.labelpos&&"r"!==t.labelpos||(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset}})}),e("    undoCoordinateSystem",function(){p.undo(c)}),e("    translateGraph",function(){function r(e){var t=e.x,r=e.y,n=e.width,o=e.height;a=Math.min(a,t-n/2),i=Math.max(i,t+n/2),s=Math.min(s,r-o/2),u=Math.max(u,r+o/2)}var n,a,i,s,u,e,t,o;n=c,a=Number.POSITIVE_INFINITY,i=0,s=Number.POSITIVE_INFINITY,u=0,e=n.graph(),t=e.marginx||0,o=e.marginy||0,f.forEach(n.nodes(),function(e){r(n.node(e))}),f.forEach(n.edges(),function(e){var t=n.edge(e);f.has(t,"x")&&r(t)}),a-=t,s-=o,f.forEach(n.nodes(),function(e){var t=n.node(e);t.x-=a,t.y-=s}),f.forEach(n.edges(),function(e){var t=n.edge(e);f.forEach(t.points,function(e){e.x-=a,e.y-=s}),f.has(t,"x")&&(t.x-=a),f.has(t,"y")&&(t.y-=s)}),e.width=i-a+t,e.height=u-s+o}),e("    assignNodeIntersects",function(){var i;i=c,f.forEach(i.edges(),function(e){var t,r=i.edge(e),n=i.node(e.v),o=i.node(e.w),a=r.points?(t=r.points[0],r.points[r.points.length-1]):(r.points=[],t=o,n);r.points.unshift(g.intersectRect(n,t)),r.points.push(g.intersectRect(o,a))})}),e("    reversePoints",function(){var r;r=c,f.forEach(r.edges(),function(e){var t=r.edge(e);t.reversed&&t.points.reverse()})}),e("    acyclic.undo",function(){n.undo(c)})}),r("  updateInputGraph",function(){var n,o;n=a,o=t,f.forEach(n.nodes(),function(e){var t=n.node(e),r=o.node(e);t&&(t.x=r.x,t.y=r.y,o.children(e).length&&(t.width=r.width,t.height=r.height))}),f.forEach(n.edges(),function(e){var t=n.edge(e),r=o.edge(e);t.points=r.points,f.has(r,"x")&&(t.x=r.x,t.y=r.y)}),n.graph().width=o.graph().width,n.graph().height=o.graph().height})})};var y=["nodesep","edgesep","ranksep","marginx","marginy"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},m=["acyclicer","ranker","rankdir","align"],x=["width","height"],w={width:0,height:0},E=["minlen","weight","width","height","labeloffset"],j={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},k=["labelpos"];function A(e,t){return f.mapValues(f.pick(e,t),Number)}function O(e){var r={};return f.forEach(e,function(e,t){r[t.toLowerCase()]=e}),r}},{"./acyclic":2,"./add-border-segments":3,"./coordinate-system":4,"./graphlib":7,"./lodash":10,"./nesting-graph":11,"./normalize":12,"./order":17,"./parent-dummy-chains":22,"./position":24,"./rank":26,"./util":29}],10:[function(e,t,r){var n;if("function"==typeof e)try{n={cloneDeep:e("lodash/cloneDeep"),constant:e("lodash/constant"),defaults:e("lodash/defaults"),each:e("lodash/each"),filter:e("lodash/filter"),find:e("lodash/find"),flatten:e("lodash/flatten"),forEach:e("lodash/forEach"),forIn:e("lodash/forIn"),has:e("lodash/has"),isUndefined:e("lodash/isUndefined"),last:e("lodash/last"),map:e("lodash/map"),mapValues:e("lodash/mapValues"),max:e("lodash/max"),merge:e("lodash/merge"),min:e("lodash/min"),minBy:e("lodash/minBy"),now:e("lodash/now"),pick:e("lodash/pick"),range:e("lodash/range"),reduce:e("lodash/reduce"),sortBy:e("lodash/sortBy"),uniqueId:e("lodash/uniqueId"),values:e("lodash/values"),zipObject:e("lodash/zipObject")}}catch(e){}n=n||window._,t.exports=n},{"lodash/cloneDeep":227,"lodash/constant":228,"lodash/defaults":229,"lodash/each":230,"lodash/filter":232,"lodash/find":233,"lodash/flatten":235,"lodash/forEach":236,"lodash/forIn":237,"lodash/has":239,"lodash/isUndefined":258,"lodash/last":261,"lodash/map":262,"lodash/mapValues":263,"lodash/max":264,"lodash/merge":266,"lodash/min":267,"lodash/minBy":268,"lodash/now":270,"lodash/pick":271,"lodash/range":273,"lodash/reduce":274,"lodash/sortBy":276,"lodash/uniqueId":286,"lodash/values":287,"lodash/zipObject":288}],11:[function(e,t,r){var v=e("./lodash"),g=e("./util");t.exports={run:function(t){var r=g.addDummyNode(t,"root",{},"_root"),n=function(o){var a={};return v.forEach(o.children(),function(e){!function t(e,r){var n=o.children(e);n&&n.length&&v.forEach(n,function(e){t(e,r+1)});a[e]=r}(e,1)}),a}(t),o=v.max(v.values(n))-1,a=2*o+1;t.graph().nestingRoot=r,v.forEach(t.edges(),function(e){t.edge(e).minlen*=a});var i=function(r){return v.reduce(r.edges(),function(e,t){return e+r.edge(t).weight},0)}(t)+1;v.forEach(t.children(),function(e){!function i(s,u,c,f,d,h,l){var e=s.children(l);if(!e.length)return void(l!==u&&s.setEdge(u,l,{weight:0,minlen:c}));var p=g.addBorderNode(s,"_bt");var _=g.addBorderNode(s,"_bb");var t=s.node(l);s.setParent(p,l);t.borderTop=p;s.setParent(_,l);t.borderBottom=_;v.forEach(e,function(e){i(s,u,c,f,d,h,e);var t=s.node(e),r=t.borderTop?t.borderTop:e,n=t.borderBottom?t.borderBottom:e,o=t.borderTop?f:2*f,a=r!==n?1:d-h[l]+1;s.setEdge(p,r,{weight:o,minlen:a,nestingEdge:!0}),s.setEdge(n,_,{weight:o,minlen:a,nestingEdge:!0})});s.parent(l)||s.setEdge(u,p,{weight:0,minlen:d+h[l]})}(t,r,a,i,o,n,e)}),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,v.forEach(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})}}},{"./lodash":10,"./util":29}],12:[function(e,t,r){"use strict";var n=e("./lodash"),h=e("./util");t.exports={run:function(t){t.graph().dummyChains=[],n.forEach(t.edges(),function(e){!function(e,t){var r,n,o,a=t.v,i=e.node(a).rank,s=t.w,u=e.node(s).rank,c=t.name,f=e.edge(t),d=f.labelRank;if(u===i+1)return;for(e.removeEdge(t),o=0,++i;i<u;++o,++i)f.points=[],n={width:0,height:0,edgeLabel:f,edgeObj:t,rank:i},r=h.addDummyNode(e,"edge",n,"_d"),i===d&&(n.width=f.width,n.height=f.height,n.dummy="edge-label",n.labelpos=f.labelpos),e.setEdge(a,r,{weight:f.weight},c),0===o&&e.graph().dummyChains.push(r),a=r;e.setEdge(a,s,{weight:f.weight},c)}(t,e)})},undo:function(o){n.forEach(o.graph().dummyChains,function(e){var t,r=o.node(e),n=r.edgeLabel;for(o.setEdge(r.edgeObj,n);r.dummy;)t=o.successors(e)[0],o.removeNode(e),n.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),e=t,r=o.node(e)})}}},{"./lodash":10,"./util":29}],13:[function(e,t,r){var n=e("../lodash");t.exports=function(o,a,e){var i,s={};n.forEach(e,function(e){for(var t,r,n=o.parent(e);n;){if((t=o.parent(n))?(r=s[t],s[t]=n):(r=i,i=n),r&&r!==n)return void a.setEdge(r,n);n=t}})}},{"../lodash":10}],14:[function(e,t,r){var n=e("../lodash");t.exports=function(o,e){return n.map(e,function(e){var t=o.inEdges(e);if(t.length){var r=n.reduce(t,function(e,t){var r=o.edge(t),n=o.node(t.v);return{sum:e.sum+r.weight*n.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}})}},{"../lodash":10}],15:[function(e,t,r){var u=e("../lodash"),o=e("../graphlib").Graph;t.exports=function(a,r,n){var i=function(e){var t;for(;e.hasNode(t=u.uniqueId("_root")););return t}(a),s=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(e){return a.node(e)});return u.forEach(a.nodes(),function(o){var e=a.node(o),t=a.parent(o);(e.rank===r||e.minRank<=r&&r<=e.maxRank)&&(s.setNode(o),s.setParent(o,t||i),u.forEach(a[n](o),function(e){var t=e.v===o?e.w:e.v,r=s.edge(t,o),n=u.isUndefined(r)?0:r.weight;s.setEdge(t,o,{weight:a.edge(e).weight+n})}),u.has(e,"minRank")&&s.setNode(o,{borderLeft:e.borderLeft[r],borderRight:e.borderRight[r]}))}),s}},{"../graphlib":7,"../lodash":10}],16:[function(e,t,r){"use strict";var c=e("../lodash");t.exports=function(e,t){for(var r=0,n=1;n<t.length;++n)r+=function(t,e,r){var n=c.zipObject(r,c.map(r,function(e,t){return t})),o=c.flatten(c.map(e,function(e){return c.sortBy(c.map(t.outEdges(e),function(e){return{pos:n[e.w],weight:t.edge(e).weight}}),"pos")}),!0),a=1;for(;a<r.length;)a<<=1;var i=2*a-1;--a;var s=c.map(new Array(i),function(){return 0}),u=0;return c.forEach(o.forEach(function(e){var t=e.pos+a;s[t]+=e.weight;for(var r=0;0<t;)t%2&&(r+=s[t+1]),s[t=t-1>>1]+=e.weight;u+=e.weight*r})),u}(e,t[n-1],t[n]);return r}},{"../lodash":10}],17:[function(e,t,r){"use strict";var f=e("../lodash"),d=e("./init-order"),h=e("./cross-count"),l=e("./sort-subgraph"),n=e("./build-layer-graph"),p=e("./add-subgraph-constraints"),_=e("../graphlib").Graph,v=e("../util");function g(t,e,r){return f.map(e,function(e){return n(t,e,r)})}function y(r,e){f.forEach(e,function(e){f.forEach(e,function(e,t){r.node(e).order=t})})}t.exports=function(e){var t=v.maxRank(e),r=g(e,f.range(1,t+1),"inEdges"),n=g(e,f.range(t-1,-1,-1),"outEdges"),o=d(e);y(e,o);for(var a,i=Number.POSITIVE_INFINITY,s=0,u=0;u<4;++s,++u){!function(e,n){var o=new _;f.forEach(e,function(r){var e=r.graph().root,t=l(r,e,o,n);f.forEach(t.vs,function(e,t){r.node(e).order=t}),p(r,o,t.vs)})}(s%2?r:n,2<=s%4),o=v.buildLayerMatrix(e);var c=h(e,o);c<i&&(u=0,a=f.cloneDeep(o),i=c)}y(e,a)}},{"../graphlib":7,"../lodash":10,"../util":29,"./add-subgraph-constraints":13,"./build-layer-graph":15,"./cross-count":16,"./init-order":18,"./sort-subgraph":20}],18:[function(e,t,r){"use strict";var i=e("../lodash");t.exports=function(n){var o={},e=i.filter(n.nodes(),function(e){return!n.children(e).length}),t=i.max(i.map(e,function(e){return n.node(e).rank})),a=i.map(i.range(t+1),function(){return[]});var r=i.sortBy(e,function(e){return n.node(e).rank});return i.forEach(r,function e(t){if(i.has(o,t))return;o[t]=!0;var r=n.node(t);a[r.rank].push(t);i.forEach(n.successors(t),e)}),a}},{"../lodash":10}],19:[function(e,t,r){"use strict";var o=e("../lodash");t.exports=function(e,t){var n={};return o.forEach(e,function(e,t){var r=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};o.isUndefined(e.barycenter)||(r.barycenter=e.barycenter,r.weight=e.weight)}),o.forEach(t.edges(),function(e){var t=n[e.v],r=n[e.w];o.isUndefined(t)||o.isUndefined(r)||(r.indegree++,t.out.push(n[e.w]))}),function(r){var e=[];function t(t){return function(e){e.merged||(o.isUndefined(e.barycenter)||o.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(e,t){var r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight);t.weight&&(r+=t.barycenter*t.weight,n+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}(t,e)}}for(;r.length;){var n=r.pop();e.push(n),o.forEach(n.in.reverse(),t(n)),o.forEach(n.out,function(t){return function(e){e.in.push(t),0==--e.indegree&&r.push(e)}}(n))}return o.map(o.filter(e,function(e){return!e.merged}),function(e){return o.pick(e,["vs","i","barycenter","weight"])})}(o.filter(n,function(e){return!e.indegree}))}},{"../lodash":10}],20:[function(e,t,r){var g=e("../lodash"),y=e("./barycenter"),b=e("./resolve-conflicts"),m=e("./sort");function x(e,t){g.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}t.exports=function r(n,e,o,a){var t=n.children(e);var i=n.node(e);var s=i?i.borderLeft:void 0;var u=i?i.borderRight:void 0;var c={};s&&(t=g.filter(t,function(e){return e!==s&&e!==u}));var f=y(n,t);g.forEach(f,function(e){var t;n.children(e.v).length&&(t=r(n,e.v,o,a),c[e.v]=t,g.has(t,"barycenter")&&x(e,t))});var d=b(f,o);h=d,l=c,g.forEach(h,function(e){e.vs=g.flatten(e.vs.map(function(e){return l[e]?l[e].vs:e}),!0)});var h,l;var p=m(d,a);{var _,v;s&&(p.vs=g.flatten([s,p.vs,u],!0),n.predecessors(s).length&&(_=n.node(n.predecessors(s)[0]),v=n.node(n.predecessors(u)[0]),g.has(p,"barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+_.order+v.order)/(p.weight+2),p.weight+=2))}return p}},{"../lodash":10,"./barycenter":14,"./resolve-conflicts":19,"./sort":21}],21:[function(e,t,r){var f=e("../lodash"),d=e("../util");function h(e,t,r){for(var n;t.length&&(n=f.last(t)).i<=r;)t.pop(),e.push(n.vs),r++;return r}t.exports=function(e,t){var r=d.partition(e,function(e){return f.has(e,"barycenter")}),n=r.lhs,o=f.sortBy(r.rhs,function(e){return-e.i}),a=[],i=0,s=0,u=0;n.sort(function(r){return function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:r?t.i-e.i:e.i-t.i}}(!!t)),u=h(a,o,u),f.forEach(n,function(e){u+=e.vs.length,a.push(e.vs),i+=e.barycenter*e.weight,s+=e.weight,u=h(a,o,u)});var c={vs:f.flatten(a,!0)};s&&(c.barycenter=i/s,c.weight=s);return c}},{"../lodash":10,"../util":29}],22:[function(e,t,r){var i=e("./lodash");t.exports=function(c){var f=function(n){var o={},a=0;return i.forEach(n.children(),function e(t){var r=a;i.forEach(n.children(t),e);o[t]={low:r,lim:a++}}),o}(c);i.forEach(c.graph().dummyChains,function(e){for(var t=c.node(e),r=t.edgeObj,n=function(e,t,r,n){var o,a,i=[],s=[],u=Math.min(t[r].low,t[n].low),c=Math.max(t[r].lim,t[n].lim);o=r;for(;o=e.parent(o),i.push(o),o&&(t[o].low>u||c>t[o].lim););a=o,o=n;for(;(o=e.parent(o))!==a;)s.push(o);return{path:i.concat(s.reverse()),lca:a}}(c,f,r.v,r.w),o=n.path,a=n.lca,i=0,s=o[i],u=!0;e!==r.w;){if(t=c.node(e),u){for(;(s=o[i])!==a&&c.node(s).maxRank<t.rank;)i++;s===a&&(u=!1)}if(!u){for(;i<o.length-1&&c.node(s=o[i+1]).minRank<=t.rank;)i++;s=o[i]}c.setParent(e,s),e=c.successors(e)[0]}})}},{"./lodash":10}],23:[function(e,t,r){"use strict";var v=e("../lodash"),g=e("../graphlib").Graph,n=e("../util");function o(c,e){var f={};return v.reduce(e,function(e,n){var a=0,i=0,s=e.length,u=v.last(n);return v.forEach(n,function(e,t){var r=function(t,e){if(t.node(e).dummy)return v.find(t.predecessors(e),function(e){return t.node(e).dummy})}(c,e),o=r?c.node(r).order:s;!r&&e!==u||(v.forEach(n.slice(i,t+1),function(n){v.forEach(c.predecessors(n),function(e){var t=c.node(e),r=t.order;!(r<a||o<r)||t.dummy&&c.node(n).dummy||d(f,e,n)})}),i=t+1,a=o)}),n}),f}function c(u,e){var i={};function c(t,e,r,n,o){var a;v.forEach(v.range(e,r),function(e){a=t[e],u.node(a).dummy&&v.forEach(u.predecessors(a),function(e){var t=u.node(e);t.dummy&&(t.order<n||t.order>o)&&d(i,e,a)})})}return v.reduce(e,function(n,o){var a,i=-1,s=0;return v.forEach(o,function(e,t){var r;"border"!==u.node(e).dummy||(r=u.predecessors(e)).length&&(a=u.node(r[0]).order,c(o,s,t,i,a),s=t,i=a),c(o,s,o.length,a,n.length)}),o}),i}function d(e,t,r){var n;r<t&&(n=t,t=r,r=n);var o=e[t];o||(e[t]=o={}),o[r]=!0}function h(e,t,r){var n;return r<t&&(n=t,t=r,r=n),v.has(e[t],r)}function f(e,t,s,u){var c={},f={},d={};return v.forEach(t,function(e){v.forEach(e,function(e,t){c[e]=e,f[e]=e,d[e]=t})}),v.forEach(t,function(e){var i=-1;v.forEach(e,function(e){var t=u(e);if(t.length)for(var r=((t=v.sortBy(t,function(e){return d[e]})).length-1)/2,n=Math.floor(r),o=Math.ceil(r);n<=o;++n){var a=t[n];f[e]===e&&i<d[a]&&!h(s,e,a)&&(f[a]=e,f[e]=c[e]=c[a],i=d[a])}})}),{root:c,align:f}}function l(n,e,t,r,o){var a,i,s,u,c,f,d,h={},l=(a=n,i=e,s=t,u=o,c=new g,f=a.graph(),d=function(s,u,c){return function(e,t,r){var n,o=e.node(t),a=e.node(r),i=0;if(i+=o.width/2,v.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":n=-o.width/2;break;case"r":n=o.width/2}if(n&&(i+=c?n:-n),n=0,i+=(o.dummy?u:s)/2,i+=(a.dummy?u:s)/2,i+=a.width/2,v.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":n=a.width/2;break;case"r":n=-a.width/2}return n&&(i+=c?n:-n),n=0,i}}(f.nodesep,f.edgesep,u),v.forEach(i,function(e){var o;v.forEach(e,function(e){var t,r,n=s[e];c.setNode(n),o&&(t=s[o],r=c.edge(t,n),c.setEdge(t,n,Math.max(d(a,e,o),r||0))),o=e})}),c),p=o?"borderLeft":"borderRight";function _(e,t){for(var r=l.nodes(),n=r.pop(),o={};n;)o[n]?e(n):(o[n]=!0,r.push(n),r=r.concat(t(n))),n=r.pop()}return _(function(e){h[e]=l.inEdges(e).reduce(function(e,t){return Math.max(e,h[t.v]+l.edge(t))},0)},l.predecessors.bind(l)),_(function(e){var t=l.outEdges(e).reduce(function(e,t){return Math.min(e,h[t.w]-l.edge(t))},Number.POSITIVE_INFINITY),r=n.node(e);t!==Number.POSITIVE_INFINITY&&r.borderType!==p&&(h[e]=Math.max(h[e],t))},l.successors.bind(l)),v.forEach(r,function(e){h[e]=h[t[e]]}),h}function p(i,e){return v.minBy(v.values(e),function(e){var o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return v.forIn(e,function(e,t){var r,n=(r=t,i.node(r).width/2);o=Math.max(e+n,o),a=Math.min(e-n,a)}),o-a})}function _(i,s){var e=v.values(s),u=v.min(e),c=v.max(e);v.forEach(["u","d"],function(a){v.forEach(["l","r"],function(e){var t,r,n=a+e,o=i[n];o!==s&&(t=v.values(o),(r="l"===e?u-v.min(t):c-v.max(t))&&(i[n]=v.mapValues(o,function(e){return e+r})))})})}function y(n,o){return v.mapValues(n.ul,function(e,t){if(o)return n[o.toLowerCase()][t];var r=v.sortBy(v.map(n,t));return(r[1]+r[2])/2})}t.exports={positionX:function(a){var i,e=n.buildLayerMatrix(a),s=v.merge(o(a,e),c(a,e)),u={};v.forEach(["u","d"],function(o){i="u"===o?e:v.values(e).reverse(),v.forEach(["l","r"],function(e){"r"===e&&(i=v.map(i,function(e){return v.values(e).reverse()}));var t=("u"===o?a.predecessors:a.successors).bind(a),r=f(0,i,s,t),n=l(a,i,r.root,r.align,"r"===e);"r"===e&&(n=v.mapValues(n,function(e){return-e})),u[o+e]=n})});var t=p(a,u);return _(u,t),y(u,a.graph().align)},findType1Conflicts:o,findType2Conflicts:c,addConflict:d,hasConflict:h,verticalAlignment:f,horizontalCompaction:l,alignCoordinates:_,findSmallestWidthAlignment:p,balance:y}},{"../graphlib":7,"../lodash":10,"../util":29}],24:[function(e,t,r){"use strict";var a=e("../lodash"),i=e("../util"),n=e("./bk").positionX;t.exports=function(r){(function(r){var e=i.buildLayerMatrix(r),n=r.graph().ranksep,o=0;a.forEach(e,function(e){var t=a.max(a.map(e,function(e){return r.node(e).height}));a.forEach(e,function(e){r.node(e).y=o+t/2}),o+=t+n})})(r=i.asNonCompoundGraph(r)),a.forEach(n(r),function(e,t){r.node(t).x=e})}},{"../lodash":10,"../util":29,"./bk":23}],25:[function(e,t,r){"use strict";var s=e("../lodash"),i=e("../graphlib").Graph,u=e("./util").slack;t.exports=function(e){var t,r,n=new i({directed:!1}),o=e.nodes()[0],a=e.nodeCount();n.setNode(o,{});for(;function(a,i){return s.forEach(a.nodes(),function n(o){s.forEach(i.nodeEdges(o),function(e){var t=e.v,r=o===t?e.w:t;a.hasNode(r)||u(i,e)||(a.setNode(r,{}),a.setEdge(o,r,{}),n(r))})}),a.nodeCount()}(n,e)<a;)t=function(t,r){return s.minBy(r.edges(),function(e){if(t.hasNode(e.v)!==t.hasNode(e.w))return u(r,e)})}(n,e),r=n.hasNode(t.v)?u(e,t):-u(e,t),function(e,t,r){s.forEach(e.nodes(),function(e){t.node(e).rank+=r})}(n,e,r);return n}},{"../graphlib":7,"../lodash":10,"./util":28}],26:[function(e,t,r){"use strict";var n=e("./util").longestPath,o=e("./feasible-tree"),a=e("./network-simplex");t.exports=function(e){switch(e.graph().ranker){case"network-simplex":s(e);break;case"tight-tree":!function(e){n(e),o(e)}(e);break;case"longest-path":i(e);break;default:s(e)}};var i=n;function s(e){a(e)}},{"./feasible-tree":25,"./network-simplex":27,"./util":28}],27:[function(e,t,r){"use strict";var p=e("../lodash"),n=e("./feasible-tree"),f=e("./util").slack,o=e("./util").longestPath,d=e("../graphlib").alg.preorder,s=e("../graphlib").alg.postorder,a=e("../util").simplify;function i(e){e=a(e),o(e);var t,r=n(e);for(l(r),h(r,e);t=c(r);)v(r,e,t,_(r,e,t))}function h(a,i){var e=(e=s(a,a.nodes())).slice(0,e.length-1);p.forEach(e,function(e){var t,r,n,o;r=i,n=e,o=(t=a).node(n).parent,t.edge(n,o).cutvalue=u(t,r,n)})}function u(u,c,f){var d=u.node(f).parent,h=!0,e=c.edge(f,d),l=0;return e||(h=!1,e=c.edge(d,f)),l=e.weight,p.forEach(c.nodeEdges(f),function(e){var t,r,n,o,a,i=e.v===f,s=i?e.w:e.v;s!==d&&(t=i===h,r=c.edge(e).weight,l+=t?r:-r,o=f,a=s,u.hasEdge(o,a)&&(n=u.edge(f,s).cutvalue,l+=t?-n:n))}),l}function l(e,t){arguments.length<2&&(t=e.nodes()[0]),function t(r,n,o,a,e){var i=o;var s=r.node(a);n[a]=!0;p.forEach(r.neighbors(a),function(e){p.has(n,e)||(o=t(r,n,o,e,a))});s.low=i;s.lim=o++;e?s.parent=e:delete s.parent;return o}(e,{},1,t)}function c(t){return p.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function _(t,r,e){var n=e.v,o=e.w;r.hasEdge(n,o)||(n=e.w,o=e.v);var a=t.node(n),i=t.node(o),s=a,u=!1;a.lim>i.lim&&(s=i,u=!0);var c=p.filter(r.edges(),function(e){return u===g(0,t.node(e.v),s)&&u!==g(0,t.node(e.w),s)});return p.minBy(c,function(e){return f(r,e)})}function v(e,t,r,n){var o,a,i,s,u=r.v,c=r.w;e.removeEdge(u,c),e.setEdge(n.v,n.w,{}),l(e),h(e,t),o=e,a=t,i=p.find(o.nodes(),function(e){return!a.node(e).parent}),s=(s=d(o,i)).slice(1),p.forEach(s,function(e){var t=o.node(e).parent,r=a.edge(e,t),n=!1;r||(r=a.edge(t,e),n=!0),a.node(e).rank=a.node(t).rank+(n?r.minlen:-r.minlen)})}function g(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}(t.exports=i).initLowLimValues=l,i.initCutValues=h,i.calcCutValue=u,i.leaveEdge=c,i.enterEdge=_,i.exchangeEdges=v},{"../graphlib":7,"../lodash":10,"../util":29,"./feasible-tree":25,"./util":28}],28:[function(e,t,r){"use strict";var i=e("../lodash");t.exports={longestPath:function(o){var a={};i.forEach(o.sources(),function t(e){var r=o.node(e);if(i.has(a,e))return r.rank;a[e]=!0;var n=i.min(i.map(o.outEdges(e),function(e){return t(e.w)-o.edge(e).minlen}));return n!==Number.POSITIVE_INFINITY&&null!=n||(n=0),r.rank=n})},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},{"../lodash":10}],29:[function(e,t,r){"use strict";var s=e("./lodash"),a=e("./graphlib").Graph;function i(e,t,r,n){for(var o;o=s.uniqueId(n),e.hasNode(o););return r.dummy=t,e.setNode(o,r),o}function u(r){return s.max(s.map(r.nodes(),function(e){var t=r.node(e).rank;if(!s.isUndefined(t))return t}))}t.exports={addDummyNode:i,simplify:function(n){var o=(new a).setGraph(n.graph());return s.forEach(n.nodes(),function(e){o.setNode(e,n.node(e))}),s.forEach(n.edges(),function(e){var t=o.edge(e.v,e.w)||{weight:0,minlen:1},r=n.edge(e);o.setEdge(e.v,e.w,{weight:t.weight+r.weight,minlen:Math.max(t.minlen,r.minlen)})}),o},asNonCompoundGraph:function(t){var r=new a({multigraph:t.isMultigraph()}).setGraph(t.graph());return s.forEach(t.nodes(),function(e){t.children(e).length||r.setNode(e,t.node(e))}),s.forEach(t.edges(),function(e){r.setEdge(e,t.edge(e))}),r},successorWeights:function(r){var e=s.map(r.nodes(),function(e){var t={};return s.forEach(r.outEdges(e),function(e){t[e.w]=(t[e.w]||0)+r.edge(e).weight}),t});return s.zipObject(r.nodes(),e)},predecessorWeights:function(r){var e=s.map(r.nodes(),function(e){var t={};return s.forEach(r.inEdges(e),function(e){t[e.v]=(t[e.v]||0)+r.edge(e).weight}),t});return s.zipObject(r.nodes(),e)},intersectRect:function(e,t){var r,n,o=e.x,a=e.y,i=t.x-o,s=t.y-a,u=e.width/2,c=e.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");n=Math.abs(s)*u>Math.abs(i)*c?(s<0&&(c=-c),r=c*i/s,c):(i<0&&(u=-u),(r=u)*s/i);return{x:o+r,y:a+n}},buildLayerMatrix:function(n){var o=s.map(s.range(u(n)+1),function(){return[]});return s.forEach(n.nodes(),function(e){var t=n.node(e),r=t.rank;s.isUndefined(r)||(o[r][t.order]=e)}),o},normalizeRanks:function(r){var n=s.min(s.map(r.nodes(),function(e){return r.node(e).rank}));s.forEach(r.nodes(),function(e){var t=r.node(e);s.has(t,"rank")&&(t.rank-=n)})},removeEmptyRanks:function(r){var n=s.min(s.map(r.nodes(),function(e){return r.node(e).rank})),o=[];s.forEach(r.nodes(),function(e){var t=r.node(e).rank-n;o[t]||(o[t]=[]),o[t].push(e)});var a=0,i=r.graph().nodeRankFactor;s.forEach(o,function(e,t){s.isUndefined(e)&&t%i!=0?--a:a&&s.forEach(e,function(e){r.node(e).rank+=a})})},addBorderNode:function(e,t,r,n){var o={width:0,height:0};4<=arguments.length&&(o.rank=r,o.order=n);return i(e,"border",o,t)},maxRank:u,partition:function(e,t){var r={lhs:[],rhs:[]};return s.forEach(e,function(e){t(e)?r.lhs.push(e):r.rhs.push(e)}),r},time:function(e,t){var r=s.now();try{return t()}finally{console.log(e+" time: "+(s.now()-r)+"ms")}},notime:function(e,t){return t()}}},{"./graphlib":7,"./lodash":10}],30:[function(e,t,r){t.exports="0.8.5"},{}],31:[function(e,t,r){var n=e("./lib");t.exports={Graph:n.Graph,json:e("./lib/json"),alg:e("./lib/alg"),version:n.version}},{"./lib":47,"./lib/alg":38,"./lib/json":48}],32:[function(e,t,r){var i=e("../lodash");t.exports=function(t){var r,n={},o=[];function a(e){i.has(n,e)||(n[e]=!0,r.push(e),i.each(t.successors(e),a),i.each(t.predecessors(e),a))}return i.each(t.nodes(),function(e){r=[],a(e),r.length&&o.push(r)}),o}},{"../lodash":49}],33:[function(e,t,r){var s=e("../lodash");t.exports=function(t,e,r){s.isArray(e)||(e=[e]);var n=(t.isDirected()?t.successors:t.neighbors).bind(t),o=[],a={};return s.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(r,e,n,o,a,i){s.has(o,e)||(o[e]=!0,n||i.push(e),s.each(a(e),function(e){t(r,e,n,o,a,i)}),n&&i.push(e))}(t,e,"post"===r,a,n,o)}),o}},{"../lodash":49}],34:[function(e,t,r){var a=e("./dijkstra"),i=e("../lodash");t.exports=function(r,n,o){return i.transform(r.nodes(),function(e,t){e[t]=a(r,t,n,o)},{})}},{"../lodash":49,"./dijkstra":35}],35:[function(e,t,r){var n=e("../lodash"),o=e("../data/priority-queue");t.exports=function(t,e,r,n){return function(e,r,a,t){function n(e){var t=e.v!==i?e.v:e.w,r=u[t],n=a(e),o=s.distance+n;if(n<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+n);o<r.distance&&(r.distance=o,r.predecessor=i,c.decrease(t,o))}var i,s,u={},c=new o;e.nodes().forEach(function(e){var t=e===r?0:Number.POSITIVE_INFINITY;u[e]={distance:t},c.add(e,t)});for(;0<c.size()&&(i=c.removeMin(),(s=u[i]).distance!==Number.POSITIVE_INFINITY);)t(i).forEach(n);return u}(t,String(e),r||a,n||function(e){return t.outEdges(e)})};var a=n.constant(1)},{"../data/priority-queue":45,"../lodash":49}],36:[function(e,t,r){var n=e("../lodash"),o=e("./tarjan");t.exports=function(t){return n.filter(o(t),function(e){return 1<e.length||1===e.length&&t.hasEdge(e[0],e[0])})}},{"../lodash":49,"./tarjan":43}],37:[function(e,t,r){var n=e("../lodash");t.exports=function(t,e,r){return function(e,o,t){var u={},r=e.nodes();return r.forEach(function(n){u[n]={},u[n][n]={distance:0},r.forEach(function(e){n!==e&&(u[n][e]={distance:Number.POSITIVE_INFINITY})}),t(n).forEach(function(e){var t=e.v===n?e.w:e.v,r=o(e);u[n][t]={distance:r,predecessor:n}})}),r.forEach(function(i){var s=u[i];r.forEach(function(e){var a=u[e];r.forEach(function(e){var t=a[i],r=s[e],n=a[e],o=t.distance+r.distance;o<n.distance&&(n.distance=o,n.predecessor=r.predecessor)})})}),u}(t,e||o,r||function(e){return t.outEdges(e)})};var o=n.constant(1)},{"../lodash":49}],38:[function(e,t,r){t.exports={components:e("./components"),dijkstra:e("./dijkstra"),dijkstraAll:e("./dijkstra-all"),findCycles:e("./find-cycles"),floydWarshall:e("./floyd-warshall"),isAcyclic:e("./is-acyclic"),postorder:e("./postorder"),preorder:e("./preorder"),prim:e("./prim"),tarjan:e("./tarjan"),topsort:e("./topsort")}},{"./components":32,"./dijkstra":35,"./dijkstra-all":34,"./find-cycles":36,"./floyd-warshall":37,"./is-acyclic":39,"./postorder":40,"./preorder":41,"./prim":42,"./tarjan":43,"./topsort":44}],39:[function(e,t,r){var n=e("./topsort");t.exports=function(e){try{n(e)}catch(e){if(e instanceof n.CycleException)return!1;throw e}return!0}},{"./topsort":44}],40:[function(e,t,r){var n=e("./dfs");t.exports=function(e,t){return n(e,t,"post")}},{"./dfs":33}],41:[function(e,t,r){var n=e("./dfs");t.exports=function(e,t){return n(e,t,"pre")}},{"./dfs":33}],42:[function(e,t,r){var u=e("../lodash"),c=e("../graph"),f=e("../data/priority-queue");t.exports=function(e,o){var a,t=new c,i={},s=new f;function r(e){var t,r=e.v===a?e.w:e.v,n=s.priority(r);void 0===n||(t=o(e))<n&&(i[r]=a,s.decrease(r,t))}if(0===e.nodeCount())return t;u.each(e.nodes(),function(e){s.add(e,Number.POSITIVE_INFINITY),t.setNode(e)}),s.decrease(e.nodes()[0],0);var n=!1;for(;0<s.size();){if(a=s.removeMin(),u.has(i,a))t.setEdge(a,i[a]);else{if(n)throw new Error("Input graph is not connected: "+e);n=!0}e.nodeEdges(a).forEach(r)}return t}},{"../data/priority-queue":45,"../graph":46,"../lodash":49}],43:[function(e,t,r){var f=e("../lodash");t.exports=function(a){var i=0,s=[],u={},c=[];return a.nodes().forEach(function(e){f.has(u,e)||!function t(e){var r=u[e]={onStack:!0,lowlink:i,index:i++};s.push(e);a.successors(e).forEach(function(e){f.has(u,e)?u[e].onStack&&(r.lowlink=Math.min(r.lowlink,u[e].index)):(t(e),r.lowlink=Math.min(r.lowlink,u[e].lowlink))});if(r.lowlink===r.index){for(var n,o=[];n=s.pop(),u[n].onStack=!1,o.push(n),e!==n;);c.push(o)}}(e)}),c}},{"../lodash":49}],44:[function(e,t,r){var i=e("../lodash");function n(r){var n={},o={},a=[];if(i.each(r.sinks(),function e(t){if(i.has(o,t))throw new s;i.has(n,t)||(o[t]=!0,n[t]=!0,i.each(r.predecessors(t),e),delete o[t],a.push(t))}),i.size(n)!==r.nodeCount())throw new s;return a}function s(){}((t.exports=n).CycleException=s).prototype=new Error},{"../lodash":49}],45:[function(e,t,r){var a=e("../lodash");function n(){this._arr=[],this._keyIndices={}}(t.exports=n).prototype.size=function(){return this._arr.length},n.prototype.keys=function(){return this._arr.map(function(e){return e.key})},n.prototype.has=function(e){return a.has(this._keyIndices,e)},n.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},n.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},n.prototype.add=function(e,t){var r=this._keyIndices;if(e=String(e),a.has(r,e))return!1;var n=this._arr,o=n.length;return r[e]=o,n.push({key:e,priority:t}),this._decrease(o),!0},n.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},n.prototype.decrease=function(e,t){var r=this._keyIndices[e];if(t>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+t);this._arr[r].priority=t,this._decrease(r)},n.prototype._heapify=function(e){var t=this._arr,r=2*e,n=1+r,o=e;r<t.length&&(o=t[r].priority<t[o].priority?r:o,n<t.length&&(o=t[n].priority<t[o].priority?n:o),o!==e&&(this._swap(e,o),this._heapify(o)))},n.prototype._decrease=function(e){for(var t,r=this._arr,n=r[e].priority;0!==e&&!(r[t=e>>1].priority<n);)this._swap(e,t),e=t},n.prototype._swap=function(e,t){var r=this._arr,n=this._keyIndices,o=r[e],a=r[t];r[e]=a,r[t]=o,n[a.key]=e,n[o.key]=t}},{"../lodash":49}],46:[function(e,t,r){"use strict";var u=e("./lodash");t.exports=o;var s="\0",n="\0",c="";function o(e){this._isDirected=!u.has(e,"directed")||e.directed,this._isMultigraph=!!u.has(e,"multigraph")&&e.multigraph,this._isCompound=!!u.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=u.constant(void 0),this._defaultEdgeLabelFn=u.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function f(e,t){e[t]?e[t]++:e[t]=1}function a(e,t){--e[t]||delete e[t]}function d(e,t,r,n){var o,a=""+t,i=""+r;return!e&&i<a&&(o=a,a=i,i=o),a+c+i+c+(u.isUndefined(n)?s:n)}function i(e,t){return d(e,t.v,t.w,t.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(e){return this._label=e,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(e){return u.isFunction(e)||(e=u.constant(e)),this._defaultNodeLabelFn=e,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return u.keys(this._nodes)},o.prototype.sources=function(){var t=this;return u.filter(this.nodes(),function(e){return u.isEmpty(t._in[e])})},o.prototype.sinks=function(){var t=this;return u.filter(this.nodes(),function(e){return u.isEmpty(t._out[e])})},o.prototype.setNodes=function(e,t){var r=arguments,n=this;return u.each(e,function(e){1<r.length?n.setNode(e,t):n.setNode(e)}),this},o.prototype.setNode=function(e,t){return u.has(this._nodes,e)?1<arguments.length&&(this._nodes[e]=t):(this._nodes[e]=1<arguments.length?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=n,this._children[e]={},this._children[n][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount),this},o.prototype.node=function(e){return this._nodes[e]},o.prototype.hasNode=function(e){return u.has(this._nodes,e)},o.prototype.removeNode=function(e){var t,r=this;return u.has(this._nodes,e)&&(t=function(e){r.removeEdge(r._edgeObjs[e])},delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],u.each(this.children(e),function(e){r.setParent(e)}),delete this._children[e]),u.each(u.keys(this._in[e]),t),delete this._in[e],delete this._preds[e],u.each(u.keys(this._out[e]),t),delete this._out[e],delete this._sucs[e],--this._nodeCount),this},o.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(u.isUndefined(t))t=n;else{for(var r=t+="";!u.isUndefined(r);r=this.parent(r))if(r===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},o.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},o.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==n)return t}},o.prototype.children=function(e){if(u.isUndefined(e)&&(e=n),this._isCompound){var t=this._children[e];if(t)return u.keys(t)}else{if(e===n)return this.nodes();if(this.hasNode(e))return[]}},o.prototype.predecessors=function(e){var t=this._preds[e];if(t)return u.keys(t)},o.prototype.successors=function(e){var t=this._sucs[e];if(t)return u.keys(t)},o.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return u.union(t,this.successors(e))},o.prototype.isLeaf=function(e){var t=this.isDirected()?this.successors(e):this.neighbors(e);return 0===t.length},o.prototype.filterNodes=function(r){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var o=this;u.each(this._nodes,function(e,t){r(t)&&n.setNode(t,e)}),u.each(this._edgeObjs,function(e){n.hasNode(e.v)&&n.hasNode(e.w)&&n.setEdge(e,o.edge(e))});var a={};return this._isCompound&&u.each(n.nodes(),function(e){n.setParent(e,function e(t){var r=o.parent(t);return void 0===r||n.hasNode(r)?a[t]=r:r in a?a[r]:e(r)}(e))}),n},o.prototype.setDefaultEdgeLabel=function(e){return u.isFunction(e)||(e=u.constant(e)),this._defaultEdgeLabelFn=e,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return u.values(this._edgeObjs)},o.prototype.setPath=function(e,r){var n=this,o=arguments;return u.reduce(e,function(e,t){return 1<o.length?n.setEdge(e,t,r):n.setEdge(e,t),t}),this},o.prototype.setEdge=function(){var e,t,r=!1,n=arguments[0];"object"==typeof n&&null!==n&&"v"in n?(i=n.v,s=n.w,e=n.name,2===arguments.length&&(t=arguments[1],r=!0)):(i=n,s=arguments[1],e=arguments[3],2<arguments.length&&(t=arguments[2],r=!0)),i=""+i,s=""+s,u.isUndefined(e)||(e=""+e);var o=d(this._isDirected,i,s,e);if(u.has(this._edgeLabels,o))return r&&(this._edgeLabels[o]=t),this;if(!u.isUndefined(e)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(i),this.setNode(s),this._edgeLabels[o]=r?t:this._defaultEdgeLabelFn(i,s,e);var a=function(e,t,r,n){var o=""+t,a=""+r;{var i;!e&&a<o&&(i=o,o=a,a=i)}var s={v:o,w:a};n&&(s.name=n);return s}(this._isDirected,i,s,e),i=a.v,s=a.w;return Object.freeze(a),this._edgeObjs[o]=a,f(this._preds[s],i),f(this._sucs[i],s),this._in[s][o]=a,this._out[i][o]=a,this._edgeCount++,this},o.prototype.edge=function(e,t,r){var n=1===arguments.length?i(this._isDirected,e):d(this._isDirected,e,t,r);return this._edgeLabels[n]},o.prototype.hasEdge=function(e,t,r){var n=1===arguments.length?i(this._isDirected,e):d(this._isDirected,e,t,r);return u.has(this._edgeLabels,n)},o.prototype.removeEdge=function(e,t,r){var n=1===arguments.length?i(this._isDirected,arguments[0]):d(this._isDirected,e,t,r),o=this._edgeObjs[n];return o&&(e=o.v,t=o.w,delete this._edgeLabels[n],delete this._edgeObjs[n],a(this._preds[t],e),a(this._sucs[e],t),delete this._in[t][n],delete this._out[e][n],this._edgeCount--),this},o.prototype.inEdges=function(e,t){var r=this._in[e];if(r){var n=u.values(r);return t?u.filter(n,function(e){return e.v===t}):n}},o.prototype.outEdges=function(e,t){var r=this._out[e];if(r){var n=u.values(r);return t?u.filter(n,function(e){return e.w===t}):n}},o.prototype.nodeEdges=function(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))}},{"./lodash":49}],47:[function(e,t,r){t.exports={Graph:e("./graph"),version:e("./version")}},{"./graph":46,"./version":50}],48:[function(e,t,r){var a=e("./lodash"),n=e("./graph");t.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:function(o){return a.map(o.nodes(),function(e){var t=o.node(e),r=o.parent(e),n={v:e};return a.isUndefined(t)||(n.value=t),a.isUndefined(r)||(n.parent=r),n})}(e),edges:function(n){return a.map(n.edges(),function(e){var t=n.edge(e),r={v:e.v,w:e.w};return a.isUndefined(e.name)||(r.name=e.name),a.isUndefined(t)||(r.value=t),r})}(e)};a.isUndefined(e.graph())||(t.value=a.clone(e.graph()));return t},read:function(e){var t=new n(e.options).setGraph(e.value);return a.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),a.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},{"./graph":46,"./lodash":49}],49:[function(e,t,r){var n;if("function"==typeof e)try{n={clone:e("lodash/clone"),constant:e("lodash/constant"),each:e("lodash/each"),filter:e("lodash/filter"),has:e("lodash/has"),isArray:e("lodash/isArray"),isEmpty:e("lodash/isEmpty"),isFunction:e("lodash/isFunction"),isUndefined:e("lodash/isUndefined"),keys:e("lodash/keys"),map:e("lodash/map"),reduce:e("lodash/reduce"),size:e("lodash/size"),transform:e("lodash/transform"),union:e("lodash/union"),values:e("lodash/values")}}catch(e){}n=n||window._,t.exports=n},{"lodash/clone":226,"lodash/constant":228,"lodash/each":230,"lodash/filter":232,"lodash/has":239,"lodash/isArray":243,"lodash/isEmpty":247,"lodash/isFunction":248,"lodash/isUndefined":258,"lodash/keys":259,"lodash/map":262,"lodash/reduce":274,"lodash/size":275,"lodash/transform":284,"lodash/union":285,"lodash/values":287}],50:[function(e,t,r){t.exports="2.1.8"},{}],51:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"DataView");t.exports=n},{"./_getNative":163,"./_root":208}],52:[function(e,t,r){var n=e("./_hashClear"),o=e("./_hashDelete"),a=e("./_hashGet"),i=e("./_hashHas"),s=e("./_hashSet");function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=i,u.prototype.set=s,t.exports=u},{"./_hashClear":172,"./_hashDelete":173,"./_hashGet":174,"./_hashHas":175,"./_hashSet":176}],53:[function(e,t,r){var n=e("./_listCacheClear"),o=e("./_listCacheDelete"),a=e("./_listCacheGet"),i=e("./_listCacheHas"),s=e("./_listCacheSet");function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=i,u.prototype.set=s,t.exports=u},{"./_listCacheClear":188,"./_listCacheDelete":189,"./_listCacheGet":190,"./_listCacheHas":191,"./_listCacheSet":192}],54:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"Map");t.exports=n},{"./_getNative":163,"./_root":208}],55:[function(e,t,r){var n=e("./_mapCacheClear"),o=e("./_mapCacheDelete"),a=e("./_mapCacheGet"),i=e("./_mapCacheHas"),s=e("./_mapCacheSet");function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=i,u.prototype.set=s,t.exports=u},{"./_mapCacheClear":193,"./_mapCacheDelete":194,"./_mapCacheGet":195,"./_mapCacheHas":196,"./_mapCacheSet":197}],56:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"Promise");t.exports=n},{"./_getNative":163,"./_root":208}],57:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"Set");t.exports=n},{"./_getNative":163,"./_root":208}],58:[function(e,t,r){var n=e("./_MapCache"),o=e("./_setCacheAdd"),a=e("./_setCacheHas");function i(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,t.exports=i},{"./_MapCache":55,"./_setCacheAdd":210,"./_setCacheHas":211}],59:[function(e,t,r){var n=e("./_ListCache"),o=e("./_stackClear"),a=e("./_stackDelete"),i=e("./_stackGet"),s=e("./_stackHas"),u=e("./_stackSet");function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=o,c.prototype.delete=a,c.prototype.get=i,c.prototype.has=s,c.prototype.set=u,t.exports=c},{"./_ListCache":53,"./_stackClear":215,"./_stackDelete":216,"./_stackGet":217,"./_stackHas":218,"./_stackSet":219}],60:[function(e,t,r){var n=e("./_root").Symbol;t.exports=n},{"./_root":208}],61:[function(e,t,r){var n=e("./_root").Uint8Array;t.exports=n},{"./_root":208}],62:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"WeakMap");t.exports=n},{"./_getNative":163,"./_root":208}],63:[function(e,t,r){t.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},{}],64:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},{}],65:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a}},{}],66:[function(e,t,r){var n=e("./_baseIndexOf");t.exports=function(e,t){return!!(null==e?0:e.length)&&-1<n(e,t,0)}},{"./_baseIndexOf":95}],67:[function(e,t,r){t.exports=function(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}},{}],68:[function(e,t,r){var f=e("./_baseTimes"),d=e("./isArguments"),h=e("./isArray"),l=e("./isBuffer"),p=e("./_isIndex"),_=e("./isTypedArray"),v=Object.prototype.hasOwnProperty;t.exports=function(e,t){var r=h(e),n=!r&&d(e),o=!r&&!n&&l(e),a=!r&&!n&&!o&&_(e),i=r||n||o||a,s=i?f(e.length,String):[],u=s.length;for(var c in e)!t&&!v.call(e,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||p(c,u))||s.push(c);return s}},{"./_baseTimes":125,"./_isIndex":181,"./isArguments":242,"./isArray":243,"./isBuffer":246,"./isTypedArray":257}],69:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},{}],70:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},{}],71:[function(e,t,r){t.exports=function(e,t,r,n){var o=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++o]);++o<a;)r=t(r,e[o],o,e);return r}},{}],72:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},{}],73:[function(e,t,r){var n=e("./_baseProperty")("length");t.exports=n},{"./_baseProperty":117}],74:[function(e,t,r){var n=e("./_baseAssignValue"),o=e("./eq");t.exports=function(e,t,r){(void 0===r||o(e[t],r))&&(void 0!==r||t in e)||n(e,t,r)}},{"./_baseAssignValue":79,"./eq":231}],75:[function(e,t,r){var o=e("./_baseAssignValue"),a=e("./eq"),i=Object.prototype.hasOwnProperty;t.exports=function(e,t,r){var n=e[t];i.call(e,t)&&a(n,r)&&(void 0!==r||t in e)||o(e,t,r)}},{"./_baseAssignValue":79,"./eq":231}],76:[function(e,t,r){var n=e("./eq");t.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},{"./eq":231}],77:[function(e,t,r){var n=e("./_copyObject"),o=e("./keys");t.exports=function(e,t){return e&&n(t,o(t),e)}},{"./_copyObject":143,"./keys":259}],78:[function(e,t,r){var n=e("./_copyObject"),o=e("./keysIn");t.exports=function(e,t){return e&&n(t,o(t),e)}},{"./_copyObject":143,"./keysIn":260}],79:[function(e,t,r){var n=e("./_defineProperty");t.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},{"./_defineProperty":153}],80:[function(e,t,r){var g=e("./_Stack"),y=e("./_arrayEach"),b=e("./_assignValue"),m=e("./_baseAssign"),x=e("./_baseAssignIn"),w=e("./_cloneBuffer"),E=e("./_copyArray"),j=e("./_copySymbols"),k=e("./_copySymbolsIn"),A=e("./_getAllKeys"),O=e("./_getAllKeysIn"),I=e("./_getTag"),S=e("./_initCloneArray"),C=e("./_initCloneByTag"),N=e("./_initCloneObject"),L=e("./isArray"),M=e("./isBuffer"),T=e("./isMap"),P=e("./isObject"),F=e("./isSet"),B=e("./keys"),D=1,G=2,R=4,U="[object Arguments]",z="[object Function]",V="[object GeneratorFunction]",q="[object Object]",K={};K[U]=K["[object Array]"]=K["[object ArrayBuffer]"]=K["[object DataView]"]=K["[object Boolean]"]=K["[object Date]"]=K["[object Float32Array]"]=K["[object Float64Array]"]=K["[object Int8Array]"]=K["[object Int16Array]"]=K["[object Int32Array]"]=K["[object Map]"]=K["[object Number]"]=K[q]=K["[object RegExp]"]=K["[object Set]"]=K["[object String]"]=K["[object Symbol]"]=K["[object Uint8Array]"]=K["[object Uint8ClampedArray]"]=K["[object Uint16Array]"]=K["[object Uint32Array]"]=!0,K["[object Error]"]=K[z]=K["[object WeakMap]"]=!1,t.exports=function r(n,o,a,e,t,i){var s,u=o&D,c=o&G,f=o&R;if(a&&(s=t?a(n,e,t,i):a(n)),void 0!==s)return s;if(!P(n))return n;var d=L(n);if(d){if(s=S(n),!u)return E(n,s)}else{var h=I(n),l=h==z||h==V;if(M(n))return w(n,u);if(h==q||h==U||l&&!t){if(s=c||l?{}:N(n),!u)return c?k(n,x(s,n)):j(n,m(s,n))}else{if(!K[h])return t?n:{};s=C(n,h,u)}}var p=(i=i||new g).get(n);if(p)return p;i.set(n,s),F(n)?n.forEach(function(e){s.add(r(e,o,a,e,n,i))}):T(n)&&n.forEach(function(e,t){s.set(t,r(e,o,a,t,n,i))});var _=f?c?O:A:c?keysIn:B,v=d?void 0:_(n);return y(v||n,function(e,t){v&&(e=n[t=e]),b(s,t,r(e,o,a,t,n,i))}),s}},{"./_Stack":59,"./_arrayEach":64,"./_assignValue":75,"./_baseAssign":77,"./_baseAssignIn":78,"./_cloneBuffer":135,"./_copyArray":142,"./_copySymbols":144,"./_copySymbolsIn":145,"./_getAllKeys":159,"./_getAllKeysIn":160,"./_getTag":168,"./_initCloneArray":177,"./_initCloneByTag":178,"./_initCloneObject":179,"./isArray":243,"./isBuffer":246,"./isMap":250,"./isObject":251,"./isSet":254,"./keys":259}],81:[function(e,t,r){function n(e){if(!o(e))return{};if(a)return a(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}var o=e("./isObject"),a=Object.create;function i(){}t.exports=n},{"./isObject":251}],82:[function(e,t,r){var n=e("./_baseForOwn"),o=e("./_createBaseEach")(n);t.exports=o},{"./_baseForOwn":88,"./_createBaseEach":148}],83:[function(e,t,r){var c=e("./isSymbol");t.exports=function(e,t,r){for(var n=-1,o=e.length;++n<o;){var a,i,s=e[n],u=t(s);null!=u&&(void 0===a?u==u&&!c(u):r(u,a))&&(a=u,i=s)}return i}},{"./isSymbol":256}],84:[function(e,t,r){var a=e("./_baseEach");t.exports=function(e,n){var o=[];return a(e,function(e,t,r){n(e,t,r)&&o.push(e)}),o}},{"./_baseEach":82}],85:[function(e,t,r){t.exports=function(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},{}],86:[function(e,t,r){var c=e("./_arrayPush"),f=e("./_isFlattenable");t.exports=function e(t,r,n,o,a){var i=-1,s=t.length;for(n=n||f,a=a||[];++i<s;){var u=t[i];0<r&&n(u)?1<r?e(u,r-1,n,o,a):c(a,u):o||(a[a.length]=u)}return a}},{"./_arrayPush":70,"./_isFlattenable":180}],87:[function(e,t,r){var n=e("./_createBaseFor")();t.exports=n},{"./_createBaseFor":149}],88:[function(e,t,r){var n=e("./_baseFor"),o=e("./keys");t.exports=function(e,t){return e&&n(e,t,o)}},{"./_baseFor":87,"./keys":259}],89:[function(e,t,r){var o=e("./_castPath"),a=e("./_toKey");t.exports=function(e,t){for(var r=0,n=(t=o(t,e)).length;null!=e&&r<n;)e=e[a(t[r++])];return r&&r==n?e:void 0}},{"./_castPath":133,"./_toKey":223}],90:[function(e,t,r){var o=e("./_arrayPush"),a=e("./isArray");t.exports=function(e,t,r){var n=t(e);return a(e)?n:o(n,r(e))}},{"./_arrayPush":70,"./isArray":243}],91:[function(e,t,r){var n=e("./_Symbol"),o=e("./_getRawTag"),a=e("./_objectToString"),i=n?n.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":(i&&i in Object(e)?o:a)(e)}},{"./_Symbol":60,"./_getRawTag":165,"./_objectToString":205}],92:[function(e,t,r){t.exports=function(e,t){return t<e}},{}],93:[function(e,t,r){var n=Object.prototype.hasOwnProperty;t.exports=function(e,t){return null!=e&&n.call(e,t)}},{}],94:[function(e,t,r){t.exports=function(e,t){return null!=e&&t in Object(e)}},{}],95:[function(e,t,r){var n=e("./_baseFindIndex"),o=e("./_baseIsNaN"),a=e("./_strictIndexOf");t.exports=function(e,t,r){return t==t?a(e,t,r):n(e,o,r)}},{"./_baseFindIndex":85,"./_baseIsNaN":101,"./_strictIndexOf":220}],96:[function(e,t,r){var n=e("./_baseGetTag"),o=e("./isObjectLike");t.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},{"./_baseGetTag":91,"./isObjectLike":252}],97:[function(e,t,r){var i=e("./_baseIsEqualDeep"),s=e("./isObjectLike");t.exports=function e(t,r,n,o,a){return t===r||(null==t||null==r||!s(t)&&!s(r)?t!=t&&r!=r:i(t,r,n,o,e,a))}},{"./_baseIsEqualDeep":98,"./isObjectLike":252}],98:[function(e,t,r){var _=e("./_Stack"),v=e("./_equalArrays"),g=e("./_equalByTag"),y=e("./_equalObjects"),b=e("./_getTag"),m=e("./isArray"),x=e("./isBuffer"),w=e("./isTypedArray"),E="[object Arguments]",j="[object Array]",k="[object Object]",A=Object.prototype.hasOwnProperty;t.exports=function(e,t,r,n,o,a){var i=m(e),s=m(t),u=i?j:b(e),c=s?j:b(t),f=(u=u==E?k:u)==k,d=(c=c==E?k:c)==k,h=u==c;if(h&&x(e)){if(!x(t))return!1;f=!(i=!0)}if(h&&!f)return a=a||new _,i||w(e)?v(e,t,r,n,o,a):g(e,t,u,r,n,o,a);if(!(1&r)){var l=f&&A.call(e,"__wrapped__"),p=d&&A.call(t,"__wrapped__");if(l||p)return o(l?e.value():e,p?t.value():t,r,n,a=a||new _)}return h&&(a=a||new _,y(e,t,r,n,o,a))}},{"./_Stack":59,"./_equalArrays":154,"./_equalByTag":155,"./_equalObjects":156,"./_getTag":168,"./isArray":243,"./isBuffer":246,"./isTypedArray":257}],99:[function(e,t,r){var n=e("./_getTag"),o=e("./isObjectLike");t.exports=function(e){return o(e)&&"[object Map]"==n(e)}},{"./_getTag":168,"./isObjectLike":252}],100:[function(e,t,r){var l=e("./_Stack"),p=e("./_baseIsEqual");t.exports=function(e,t,r,n){var o=r.length,a=o,i=!n;if(null==e)return!a;for(e=Object(e);o--;){var s=r[o];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<a;){var u=(s=r[o])[0],c=e[u],f=s[1];if(i&&s[2]){if(void 0===c&&!(u in e))return!1}else{var d,h=new l;if(n&&(d=n(c,f,u,e,t,h)),!(void 0===d?p(f,c,3,n,h):d))return!1}}return!0}},{"./_Stack":59,"./_baseIsEqual":97}],101:[function(e,t,r){t.exports=function(e){return e!=e}},{}],102:[function(e,t,r){var n=e("./isFunction"),o=e("./_isMasked"),a=e("./isObject"),i=e("./_toSource"),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,f=u.toString,d=c.hasOwnProperty,h=RegExp("^"+f.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!a(e)||o(e))&&(n(e)?h:s).test(i(e))}},{"./_isMasked":185,"./_toSource":224,"./isFunction":248,"./isObject":251}],103:[function(e,t,r){var n=e("./_getTag"),o=e("./isObjectLike");t.exports=function(e){return o(e)&&"[object Set]"==n(e)}},{"./_getTag":168,"./isObjectLike":252}],104:[function(e,t,r){var n=e("./_baseGetTag"),o=e("./isLength"),a=e("./isObjectLike"),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,t.exports=function(e){return a(e)&&o(e.length)&&!!i[n(e)]}},{"./_baseGetTag":91,"./isLength":249,"./isObjectLike":252}],105:[function(e,t,r){var n=e("./_baseMatches"),o=e("./_baseMatchesProperty"),a=e("./identity"),i=e("./isArray"),s=e("./property");t.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?i(e)?o(e[0],e[1]):n(e):s(e)}},{"./_baseMatches":110,"./_baseMatchesProperty":111,"./identity":241,"./isArray":243,"./property":272}],106:[function(e,t,r){var n=e("./_isPrototype"),o=e("./_nativeKeys"),a=Object.prototype.hasOwnProperty;t.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},{"./_isPrototype":186,"./_nativeKeys":202}],107:[function(e,t,r){var o=e("./isObject"),a=e("./_isPrototype"),i=e("./_nativeKeysIn"),s=Object.prototype.hasOwnProperty;t.exports=function(e){if(!o(e))return i(e);var t=a(e),r=[];for(var n in e)("constructor"!=n||!t&&s.call(e,n))&&r.push(n);return r}},{"./_isPrototype":186,"./_nativeKeysIn":203,"./isObject":251}],108:[function(e,t,r){t.exports=function(e,t){return e<t}},{}],109:[function(e,t,r){var i=e("./_baseEach"),s=e("./isArrayLike");t.exports=function(e,n){var o=-1,a=s(e)?Array(e.length):[];return i(e,function(e,t,r){a[++o]=n(e,t,r)}),a}},{"./_baseEach":82,"./isArrayLike":244}],110:[function(e,t,r){var n=e("./_baseIsMatch"),o=e("./_getMatchData"),a=e("./_matchesStrictComparable");t.exports=function(t){var r=o(t);return 1==r.length&&r[0][2]?a(r[0][0],r[0][1]):function(e){return e===t||n(e,t,r)}}},{"./_baseIsMatch":100,"./_getMatchData":162,"./_matchesStrictComparable":199}],111:[function(e,t,r){var o=e("./_baseIsEqual"),a=e("./get"),i=e("./hasIn"),s=e("./_isKey"),u=e("./_isStrictComparable"),c=e("./_matchesStrictComparable"),f=e("./_toKey");t.exports=function(r,n){return s(r)&&u(n)?c(f(r),n):function(e){var t=a(e,r);return void 0===t&&t===n?i(e,r):o(n,t,3)}}},{"./_baseIsEqual":97,"./_isKey":183,"./_isStrictComparable":187,"./_matchesStrictComparable":199,"./_toKey":223,"./get":238,"./hasIn":240}],112:[function(e,t,r){var c=e("./_Stack"),f=e("./_assignMergeValue"),d=e("./_baseFor"),h=e("./_baseMergeDeep"),l=e("./isObject"),p=e("./keysIn"),_=e("./_safeGet");t.exports=function n(o,a,i,s,u){o!==a&&d(a,function(e,t){var r;u=u||new c,l(e)?h(o,a,t,i,n,s,u):(void 0===(r=s?s(_(o,t),e,t+"",o,a,u):void 0)&&(r=e),f(o,t,r))},p)}},{"./_Stack":59,"./_assignMergeValue":74,"./_baseFor":87,"./_baseMergeDeep":113,"./_safeGet":209,"./isObject":251,"./keysIn":260}],113:[function(e,t,r){var _=e("./_assignMergeValue"),v=e("./_cloneBuffer"),g=e("./_cloneTypedArray"),y=e("./_copyArray"),b=e("./_initCloneObject"),m=e("./isArguments"),x=e("./isArray"),w=e("./isArrayLikeObject"),E=e("./isBuffer"),j=e("./isFunction"),k=e("./isObject"),A=e("./isPlainObject"),O=e("./isTypedArray"),I=e("./_safeGet"),S=e("./toPlainObject");t.exports=function(e,t,r,n,o,a,i){var s,u,c,f,d,h=I(e,r),l=I(t,r),p=i.get(l);p?_(e,r,p):((s=void 0===(d=a?a(h,l,r+"",e,t,i):void 0))&&(c=!(u=x(l))&&E(l),f=!u&&!c&&O(l),d=l,u||c||f?d=x(h)?h:w(h)?y(h):c?v(l,!(s=!1)):f?g(l,!(s=!1)):[]:A(l)||m(l)?m(d=h)?d=S(h):k(h)&&!j(h)||(d=b(l)):s=!1),s&&(i.set(l,d),o(d,l,n,a,i),i.delete(l)),_(e,r,d))}},{"./_assignMergeValue":74,"./_cloneBuffer":135,"./_cloneTypedArray":139,"./_copyArray":142,"./_initCloneObject":179,"./_safeGet":209,"./isArguments":242,"./isArray":243,"./isArrayLikeObject":245,"./isBuffer":246,"./isFunction":248,"./isObject":251,"./isPlainObject":253,"./isTypedArray":257,"./toPlainObject":282}],114:[function(e,t,r){var a=e("./_arrayMap"),i=e("./_baseIteratee"),s=e("./_baseMap"),u=e("./_baseSortBy"),c=e("./_baseUnary"),f=e("./_compareMultiple"),d=e("./identity");t.exports=function(e,n,r){var o=-1;n=a(n.length?n:[d],c(i));var t=s(e,function(t,e,r){return{criteria:a(n,function(e){return e(t)}),index:++o,value:t}});return u(t,function(e,t){return f(e,t,r)})}},{"./_arrayMap":69,"./_baseIteratee":105,"./_baseMap":109,"./_baseSortBy":124,"./_baseUnary":127,"./_compareMultiple":141,"./identity":241}],115:[function(e,t,r){var n=e("./_basePickBy"),o=e("./hasIn");t.exports=function(r,e){return n(r,e,function(e,t){return o(r,t)})}},{"./_basePickBy":116,"./hasIn":240}],116:[function(e,t,r){var u=e("./_baseGet"),c=e("./_baseSet"),f=e("./_castPath");t.exports=function(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],s=u(e,i);r(s,i)&&c(a,f(i,e),s)}return a}},{"./_baseGet":89,"./_baseSet":122,"./_castPath":133}],117:[function(e,t,r){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},{}],118:[function(e,t,r){var n=e("./_baseGet");t.exports=function(t){return function(e){return n(e,t)}}},{"./_baseGet":89}],119:[function(e,t,r){var s=Math.ceil,u=Math.max;t.exports=function(e,t,r,n){for(var o=-1,a=u(s((t-e)/(r||1)),0),i=Array(a);a--;)i[n?a:++o]=e,e+=r;return i}},{}],120:[function(e,t,r){t.exports=function(e,n,o,a,t){return t(e,function(e,t,r){o=a?(a=!1,e):n(o,e,t,r)}),o}},{}],121:[function(e,t,r){var n=e("./identity"),o=e("./_overRest"),a=e("./_setToString");t.exports=function(e,t){return a(o(e,t,n),e+"")}},{"./_overRest":207,"./_setToString":213,"./identity":241}],122:[function(e,t,r){var d=e("./_assignValue"),h=e("./_castPath"),l=e("./_isIndex"),p=e("./isObject"),_=e("./_toKey");t.exports=function(e,t,r,n){if(!p(e))return e;for(var o=-1,a=(t=h(t,e)).length,i=a-1,s=e;null!=s&&++o<a;){var u,c=_(t[o]),f=r;o!=i&&(u=s[c],void 0===(f=n?n(u,c,s):void 0)&&(f=p(u)?u:l(t[o+1])?[]:{})),d(s,c,f),s=s[c]}return e}},{"./_assignValue":75,"./_castPath":133,"./_isIndex":181,"./_toKey":223,"./isObject":251}],123:[function(e,t,r){var n=e("./constant"),o=e("./_defineProperty"),a=e("./identity"),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:a;t.exports=i},{"./_defineProperty":153,"./constant":228,"./identity":241}],124:[function(e,t,r){t.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},{}],125:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},{}],126:[function(e,t,r){var n=e("./_Symbol"),o=e("./_arrayMap"),a=e("./isArray"),i=e("./isSymbol"),s=1/0,u=n?n.prototype:void 0,c=u?u.toString:void 0;t.exports=function e(t){if("string"==typeof t)return t;if(a(t))return o(t,e)+"";if(i(t))return c?c.call(t):"";var r=t+"";return"0"==r&&1/t==-s?"-0":r}},{"./_Symbol":60,"./_arrayMap":69,"./isArray":243,"./isSymbol":256}],127:[function(e,t,r){t.exports=function(t){return function(e){return t(e)}}},{}],128:[function(e,t,r){var l=e("./_SetCache"),p=e("./_arrayIncludes"),_=e("./_arrayIncludesWith"),v=e("./_cacheHas"),g=e("./_createSet"),y=e("./_setToArray");t.exports=function(e,t,r){var n=-1,o=p,a=e.length,i=!0,s=[],u=s;if(r)i=!1,o=_;else if(200<=a){var c=t?null:g(e);if(c)return y(c);i=!1,o=v,u=new l}else u=t?[]:s;e:for(;++n<a;){var f=e[n],d=t?t(f):f,f=r||0!==f?f:0;if(i&&d==d){for(var h=u.length;h--;)if(u[h]===d)continue e;t&&u.push(d),s.push(f)}else o(u,d,r)||(u!==s&&u.push(d),s.push(f))}return s}},{"./_SetCache":58,"./_arrayIncludes":66,"./_arrayIncludesWith":67,"./_cacheHas":131,"./_createSet":152,"./_setToArray":212}],129:[function(e,t,r){var n=e("./_arrayMap");t.exports=function(t,e){return n(e,function(e){return t[e]})}},{"./_arrayMap":69}],130:[function(e,t,r){t.exports=function(e,t,r){for(var n=-1,o=e.length,a=t.length,i={};++n<o;){var s=n<a?t[n]:void 0;r(i,e[n],s)}return i}},{}],131:[function(e,t,r){t.exports=function(e,t){return e.has(t)}},{}],132:[function(e,t,r){var n=e("./identity");t.exports=function(e){return"function"==typeof e?e:n}},{"./identity":241}],133:[function(e,t,r){var n=e("./isArray"),o=e("./_isKey"),a=e("./_stringToPath"),i=e("./toString");t.exports=function(e,t){return n(e)?e:o(e,t)?[e]:a(i(e))}},{"./_isKey":183,"./_stringToPath":222,"./isArray":243,"./toString":283}],134:[function(e,t,r){var n=e("./_Uint8Array");t.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},{"./_Uint8Array":61}],135:[function(e,t,r){var n=e("./_root"),o="object"==typeof r&&r&&!r.nodeType&&r,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,i=a&&a.exports===o?n.Buffer:void 0,s=i?i.allocUnsafe:void 0;t.exports=function(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}},{"./_root":208}],136:[function(e,t,r){var n=e("./_cloneArrayBuffer");t.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},{"./_cloneArrayBuffer":134}],137:[function(e,t,r){var n=/\w*$/;t.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},{}],138:[function(e,t,r){var n=e("./_Symbol"),o=n?n.prototype:void 0,a=o?o.valueOf:void 0;t.exports=function(e){return a?Object(a.call(e)):{}}},{"./_Symbol":60}],139:[function(e,t,r){var n=e("./_cloneArrayBuffer");t.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},{"./_cloneArrayBuffer":134}],140:[function(e,t,r){var f=e("./isSymbol");t.exports=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,o=e==e,a=f(e),i=void 0!==t,s=null===t,u=t==t,c=f(t);if(!s&&!c&&!a&&t<e||a&&i&&u&&!s&&!c||n&&i&&u||!r&&u||!o)return 1;if(!n&&!a&&!c&&e<t||c&&r&&o&&!n&&!a||s&&r&&o||!i&&o||!u)return-1}return 0}},{"./isSymbol":256}],141:[function(e,t,r){var c=e("./_compareAscending");t.exports=function(e,t,r){for(var n=-1,o=e.criteria,a=t.criteria,i=o.length,s=r.length;++n<i;){var u=c(o[n],a[n]);if(u)return s<=n?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}},{"./_compareAscending":140}],142:[function(e,t,r){t.exports=function(e,t){var r=-1,n=e.length;for(t=t||Array(n);++r<n;)t[r]=e[r];return t}},{}],143:[function(e,t,r){var c=e("./_assignValue"),f=e("./_baseAssignValue");t.exports=function(e,t,r,n){var o=!r;r=r||{};for(var a=-1,i=t.length;++a<i;){var s=t[a],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),(o?f:c)(r,s,u)}return r}},{"./_assignValue":75,"./_baseAssignValue":79}],144:[function(e,t,r){var n=e("./_copyObject"),o=e("./_getSymbols");t.exports=function(e,t){return n(e,o(e),t)}},{"./_copyObject":143,"./_getSymbols":166}],145:[function(e,t,r){var n=e("./_copyObject"),o=e("./_getSymbolsIn");t.exports=function(e,t){return n(e,o(e),t)}},{"./_copyObject":143,"./_getSymbolsIn":167}],146:[function(e,t,r){var n=e("./_root")["__core-js_shared__"];t.exports=n},{"./_root":208}],147:[function(e,t,r){var n=e("./_baseRest"),u=e("./_isIterateeCall");t.exports=function(s){return n(function(e,t){var r=-1,n=t.length,o=1<n?t[n-1]:void 0,a=2<n?t[2]:void 0,o=3<s.length&&"function"==typeof o?(n--,o):void 0;for(a&&u(t[0],t[1],a)&&(o=n<3?void 0:o,n=1),e=Object(e);++r<n;){var i=t[r];i&&s(e,i,r,o)}return e})}},{"./_baseRest":121,"./_isIterateeCall":182}],148:[function(e,t,r){var s=e("./isArrayLike");t.exports=function(a,i){return function(e,t){if(null==e)return e;if(!s(e))return a(e,t);for(var r=e.length,n=i?r:-1,o=Object(e);(i?n--:++n<r)&&!1!==t(o[n],n,o););return e}}},{"./isArrayLike":244}],149:[function(e,t,r){t.exports=function(u){return function(e,t,r){for(var n=-1,o=Object(e),a=r(e),i=a.length;i--;){var s=a[u?i:++n];if(!1===t(o[s],s,o))break}return e}}},{}],150:[function(e,t,r){var s=e("./_baseIteratee"),u=e("./isArrayLike"),c=e("./keys");t.exports=function(i){return function(e,t,r){var n,o=Object(e);u(e)||(n=s(t,3),e=c(e),t=function(e){return n(o[e],e,o)});var a=i(e,t,r);return-1<a?o[n?e[a]:a]:void 0}}},{"./_baseIteratee":105,"./isArrayLike":244,"./keys":259}],151:[function(e,t,r){var o=e("./_baseRange"),a=e("./_isIterateeCall"),i=e("./toFinite");t.exports=function(n){return function(e,t,r){return r&&"number"!=typeof r&&a(e,t,r)&&(t=r=void 0),e=i(e),void 0===t?(t=e,e=0):t=i(t),r=void 0===r?e<t?1:-1:i(r),o(e,t,r,n)}}},{"./_baseRange":119,"./_isIterateeCall":182,"./toFinite":279}],152:[function(e,t,r){var n=e("./_Set"),o=e("./noop"),a=e("./_setToArray"),i=n&&1/a(new n([,-0]))[1]==1/0?function(e){return new n(e)}:o;t.exports=i},{"./_Set":57,"./_setToArray":212,"./noop":269}],153:[function(e,t,r){var n=e("./_getNative"),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.exports=o},{"./_getNative":163}],154:[function(e,t,r){var v=e("./_SetCache"),g=e("./_arraySome"),y=e("./_cacheHas");t.exports=function(e,t,r,n,o,a){var i=1&r,s=e.length,u=t.length;if(s!=u&&!(i&&s<u))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var f=-1,d=!0,h=2&r?new v:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var l,p=e[f],_=t[f];if(n&&(l=i?n(_,p,f,t,e,a):n(p,_,f,e,t,a)),void 0!==l){if(l)continue;d=!1;break}if(h){if(!g(t,function(e,t){if(!y(h,t)&&(p===e||o(p,e,r,n,a)))return h.push(t)})){d=!1;break}}else if(p!==_&&!o(p,_,r,n,a)){d=!1;break}}return a.delete(e),a.delete(t),d}},{"./_SetCache":58,"./_arraySome":72,"./_cacheHas":131}],155:[function(e,t,r){var n=e("./_Symbol"),d=e("./_Uint8Array"),h=e("./eq"),l=e("./_equalArrays"),p=e("./_mapToArray"),_=e("./_setToArray"),o=n?n.prototype:void 0,v=o?o.valueOf:void 0;t.exports=function(e,t,r,n,o,a,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return e.byteLength==t.byteLength&&a(new d(e),new d(t))?!0:!1;case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=p;case"[object Set]":var u=1&n,s=s||_;if(e.size!=t.size&&!u)return!1;var c=i.get(e);if(c)return c==t;n|=2,i.set(e,t);var f=l(s(e),s(t),n,o,a,i);return i.delete(e),f;case"[object Symbol]":if(v)return v.call(e)==v.call(t)}return!1}},{"./_Symbol":60,"./_Uint8Array":61,"./_equalArrays":154,"./_mapToArray":198,"./_setToArray":212,"./eq":231}],156:[function(e,t,r){var b=e("./_getAllKeys"),m=Object.prototype.hasOwnProperty;t.exports=function(e,t,r,n,o,a){var i=1&r,s=b(e),u=s.length;if(u!=b(t).length&&!i)return!1;for(var c=u;c--;){var f=s[c];if(!(i?f in t:m.call(t,f)))return!1}var d=a.get(e);if(d&&a.get(t))return d==t;var h=!0;a.set(e,t),a.set(t,e);for(var l,p,_=i;++c<u;){var v,g=e[f=s[c]],y=t[f];if(n&&(v=i?n(y,g,f,t,e,a):n(g,y,f,e,t,a)),!(void 0===v?g===y||o(g,y,r,n,a):v)){h=!1;break}_=_||"constructor"==f}return!h||_||(l=e.constructor)!=(p=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof l&&l instanceof l&&"function"==typeof p&&p instanceof p)&&(h=!1),a.delete(e),a.delete(t),h}},{"./_getAllKeys":159}],157:[function(e,t,r){var n=e("./flatten"),o=e("./_overRest"),a=e("./_setToString");t.exports=function(e){return a(o(e,void 0,n),e+"")}},{"./_overRest":207,"./_setToString":213,"./flatten":235}],158:[function(e,r,t){(function(e){var t="object"==typeof e&&e&&e.Object===Object&&e;r.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],159:[function(e,t,r){var n=e("./_baseGetAllKeys"),o=e("./_getSymbols"),a=e("./keys");t.exports=function(e){return n(e,a,o)}},{"./_baseGetAllKeys":90,"./_getSymbols":166,"./keys":259}],160:[function(e,t,r){var n=e("./_baseGetAllKeys"),o=e("./_getSymbolsIn"),a=e("./keysIn");t.exports=function(e){return n(e,a,o)}},{"./_baseGetAllKeys":90,"./_getSymbolsIn":167,"./keysIn":260}],161:[function(e,t,r){var n=e("./_isKeyable");t.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},{"./_isKeyable":184}],162:[function(e,t,r){var a=e("./_isStrictComparable"),i=e("./keys");t.exports=function(e){for(var t=i(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,a(o)]}return t}},{"./_isStrictComparable":187,"./keys":259}],163:[function(e,t,r){var n=e("./_baseIsNative"),o=e("./_getValue");t.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},{"./_baseIsNative":102,"./_getValue":169}],164:[function(e,t,r){var n=e("./_overArg")(Object.getPrototypeOf,Object);t.exports=n},{"./_overArg":206}],165:[function(e,t,r){var n=e("./_Symbol"),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s=n?n.toStringTag:void 0;t.exports=function(e){var t=a.call(e,s),r=e[s];try{var n=!(e[s]=void 0)}catch(e){}var o=i.call(e);return n&&(t?e[s]=r:delete e[s]),o}},{"./_Symbol":60}],166:[function(e,t,r){var n=e("./_arrayFilter"),o=e("./stubArray"),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(t){return null==t?[]:(t=Object(t),n(i(t),function(e){return a.call(t,e)}))}:o;t.exports=s},{"./_arrayFilter":65,"./stubArray":277}],167:[function(e,t,r){var n=e("./_arrayPush"),o=e("./_getPrototype"),a=e("./_getSymbols"),i=e("./stubArray"),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,a(e)),e=o(e);return t}:i;t.exports=s},{"./_arrayPush":70,"./_getPrototype":164,"./_getSymbols":166,"./stubArray":277}],168:[function(e,t,r){var n=e("./_DataView"),o=e("./_Map"),a=e("./_Promise"),i=e("./_Set"),s=e("./_WeakMap"),u=e("./_baseGetTag"),c=e("./_toSource"),f="[object Map]",d="[object Promise]",h="[object Set]",l="[object WeakMap]",p="[object DataView]",_=c(n),v=c(o),g=c(a),y=c(i),b=c(s),m=u;(n&&m(new n(new ArrayBuffer(1)))!=p||o&&m(new o)!=f||a&&m(a.resolve())!=d||i&&m(new i)!=h||s&&m(new s)!=l)&&(m=function(e){var t=u(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case _:return p;case v:return f;case g:return d;case y:return h;case b:return l}return t}),t.exports=m},{"./_DataView":51,"./_Map":54,"./_Promise":56,"./_Set":57,"./_WeakMap":62,"./_baseGetTag":91,"./_toSource":224}],169:[function(e,t,r){t.exports=function(e,t){return null==e?void 0:e[t]}},{}],170:[function(e,t,r){var s=e("./_castPath"),u=e("./isArguments"),c=e("./isArray"),f=e("./_isIndex"),d=e("./isLength"),h=e("./_toKey");t.exports=function(e,t,r){for(var n=-1,o=(t=s(t,e)).length,a=!1;++n<o;){var i=h(t[n]);if(!(a=null!=e&&r(e,i)))break;e=e[i]}return a||++n!=o?a:!!(o=null==e?0:e.length)&&d(o)&&f(i,o)&&(c(e)||u(e))}},{"./_castPath":133,"./_isIndex":181,"./_toKey":223,"./isArguments":242,"./isArray":243,"./isLength":249}],171:[function(e,t,r){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(e){return n.test(e)}},{}],172:[function(e,t,r){var n=e("./_nativeCreate");t.exports=function(){this.__data__=n?n(null):{},this.size=0}},{"./_nativeCreate":201}],173:[function(e,t,r){t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},{}],174:[function(e,t,r){var n=e("./_nativeCreate"),o=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},{"./_nativeCreate":201}],175:[function(e,t,r){var n=e("./_nativeCreate"),o=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},{"./_nativeCreate":201}],176:[function(e,t,r){var n=e("./_nativeCreate");t.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},{"./_nativeCreate":201}],177:[function(e,t,r){var n=Object.prototype.hasOwnProperty;t.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},{}],178:[function(e,t,r){var o=e("./_cloneArrayBuffer"),a=e("./_cloneDataView"),i=e("./_cloneRegExp"),s=e("./_cloneSymbol"),u=e("./_cloneTypedArray");t.exports=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return o(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return a(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(e,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return i(e);case"[object Set]":return new n;case"[object Symbol]":return s(e)}}},{"./_cloneArrayBuffer":134,"./_cloneDataView":136,"./_cloneRegExp":137,"./_cloneSymbol":138,"./_cloneTypedArray":139}],179:[function(e,t,r){var n=e("./_baseCreate"),o=e("./_getPrototype"),a=e("./_isPrototype");t.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:n(o(e))}},{"./_baseCreate":81,"./_getPrototype":164,"./_isPrototype":186}],180:[function(e,t,r){var n=e("./_Symbol"),o=e("./isArguments"),a=e("./isArray"),i=n?n.isConcatSpreadable:void 0;t.exports=function(e){return a(e)||o(e)||!!(i&&e&&e[i])}},{"./_Symbol":60,"./isArguments":242,"./isArray":243}],181:[function(e,t,r){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&-1<e&&e%1==0&&e<t}},{}],182:[function(e,t,r){var o=e("./eq"),a=e("./isArrayLike"),i=e("./_isIndex"),s=e("./isObject");t.exports=function(e,t,r){if(!s(r))return!1;var n=typeof t;return!!("number"==n?a(r)&&i(t,r.length):"string"==n&&t in r)&&o(r[t],e)}},{"./_isIndex":181,"./eq":231,"./isArrayLike":244,"./isObject":251}],183:[function(e,t,r){var n=e("./isArray"),o=e("./isSymbol"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||(i.test(e)||!a.test(e)||null!=t&&e in Object(t))}},{"./isArray":243,"./isSymbol":256}],184:[function(e,t,r){t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},{}],185:[function(e,t,r){var n,o=e("./_coreJsData"),a=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(e){return!!a&&a in e}},{"./_coreJsData":146}],186:[function(e,t,r){var n=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},{}],187:[function(e,t,r){var n=e("./isObject");t.exports=function(e){return e==e&&!n(e)}},{"./isObject":251}],188:[function(e,t,r){t.exports=function(){this.__data__=[],this.size=0}},{}],189:[function(e,t,r){var n=e("./_assocIndexOf"),o=Array.prototype.splice;t.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():o.call(t,r,1),--this.size,!0)}},{"./_assocIndexOf":76}],190:[function(e,t,r){var n=e("./_assocIndexOf");t.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},{"./_assocIndexOf":76}],191:[function(e,t,r){var n=e("./_assocIndexOf");t.exports=function(e){return-1<n(this.__data__,e)}},{"./_assocIndexOf":76}],192:[function(e,t,r){var o=e("./_assocIndexOf");t.exports=function(e,t){var r=this.__data__,n=o(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}},{"./_assocIndexOf":76}],193:[function(e,t,r){var n=e("./_Hash"),o=e("./_ListCache"),a=e("./_Map");t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||o),string:new n}}},{"./_Hash":52,"./_ListCache":53,"./_Map":54}],194:[function(e,t,r){var n=e("./_getMapData");t.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},{"./_getMapData":161}],195:[function(e,t,r){var n=e("./_getMapData");t.exports=function(e){return n(this,e).get(e)}},{"./_getMapData":161}],196:[function(e,t,r){var n=e("./_getMapData");t.exports=function(e){return n(this,e).has(e)}},{"./_getMapData":161}],197:[function(e,t,r){var o=e("./_getMapData");t.exports=function(e,t){var r=o(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}},{"./_getMapData":161}],198:[function(e,t,r){t.exports=function(e){var r=-1,n=Array(e.size);return e.forEach(function(e,t){n[++r]=[t,e]}),n}},{}],199:[function(e,t,r){t.exports=function(t,r){return function(e){return null!=e&&(e[t]===r&&(void 0!==r||t in Object(e)))}}},{}],200:[function(e,t,r){var n=e("./memoize");t.exports=function(e){var t=n(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}},{"./memoize":265}],201:[function(e,t,r){var n=e("./_getNative")(Object,"create");t.exports=n},{"./_getNative":163}],202:[function(e,t,r){var n=e("./_overArg")(Object.keys,Object);t.exports=n},{"./_overArg":206}],203:[function(e,t,r){t.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},{}],204:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof r&&r&&!r.nodeType&&r,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,i=a&&a.exports===o&&n.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e?e:i&&i.binding&&i.binding("util")}catch(e){}}();t.exports=s},{"./_freeGlobal":158}],205:[function(e,t,r){var n=Object.prototype.toString;t.exports=function(e){return n.call(e)}},{}],206:[function(e,t,r){t.exports=function(t,r){return function(e){return t(r(e))}}},{}],207:[function(e,t,r){var u=e("./_apply"),c=Math.max;t.exports=function(a,i,s){return i=c(void 0===i?a.length-1:i,0),function(){for(var e=arguments,t=-1,r=c(e.length-i,0),n=Array(r);++t<r;)n[t]=e[i+t];t=-1;for(var o=Array(i+1);++t<i;)o[t]=e[t];return o[i]=s(n),u(a,this,o)}}},{"./_apply":63}],208:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();t.exports=a},{"./_freeGlobal":158}],209:[function(e,t,r){t.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},{}],210:[function(e,t,r){t.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},{}],211:[function(e,t,r){t.exports=function(e){return this.__data__.has(e)}},{}],212:[function(e,t,r){t.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},{}],213:[function(e,t,r){var n=e("./_baseSetToString"),o=e("./_shortOut")(n);t.exports=o},{"./_baseSetToString":123,"./_shortOut":214}],214:[function(e,t,r){var a=Date.now;t.exports=function(r){var n=0,o=0;return function(){var e=a(),t=16-(e-o);if(o=e,0<t){if(800<=++n)return arguments[0]}else n=0;return r.apply(void 0,arguments)}}},{}],215:[function(e,t,r){var n=e("./_ListCache");t.exports=function(){this.__data__=new n,this.size=0}},{"./_ListCache":53}],216:[function(e,t,r){t.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},{}],217:[function(e,t,r){t.exports=function(e){return this.__data__.get(e)}},{}],218:[function(e,t,r){t.exports=function(e){return this.__data__.has(e)}},{}],219:[function(e,t,r){var o=e("./_ListCache"),a=e("./_Map"),i=e("./_MapCache");t.exports=function(e,t){var r=this.__data__;if(r instanceof o){var n=r.__data__;if(!a||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(n)}return r.set(e,t),this.size=r.size,this}},{"./_ListCache":53,"./_Map":54,"./_MapCache":55}],220:[function(e,t,r){t.exports=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}},{}],221:[function(e,t,r){var n=e("./_asciiSize"),o=e("./_hasUnicode"),a=e("./_unicodeSize");t.exports=function(e){return(o(e)?a:n)(e)}},{"./_asciiSize":73,"./_hasUnicode":171,"./_unicodeSize":225}],222:[function(e,t,r){var n=e("./_memoizeCapped"),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=n(function(e){var o=[];return 46===e.charCodeAt(0)&&o.push(""),e.replace(a,function(e,t,r,n){o.push(r?n.replace(i,"$1"):t||e)}),o});t.exports=o},{"./_memoizeCapped":200}],223:[function(e,t,r){var n=e("./isSymbol");t.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},{"./isSymbol":256}],224:[function(e,t,r){var n=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},{}],225:[function(e,t,r){var n="\\ud800-\\udfff",o="["+n+"]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",s="[^"+n+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",f="(?:"+a+"|"+i+")"+"?",d="[\\ufe0e\\ufe0f]?",h=d+f+("(?:\\u200d(?:"+[s,u,c].join("|")+")"+d+f+")*"),l="(?:"+[s+a+"?",a,u,c,o].join("|")+")",p=RegExp(i+"(?="+i+")|"+l+h,"g");t.exports=function(e){for(var t=p.lastIndex=0;p.test(e);)++t;return t}},{}],226:[function(e,t,r){var n=e("./_baseClone");t.exports=function(e){return n(e,4)}},{"./_baseClone":80}],227:[function(e,t,r){var n=e("./_baseClone");t.exports=function(e){return n(e,5)}},{"./_baseClone":80}],228:[function(e,t,r){t.exports=function(e){return function(){return e}}},{}],229:[function(e,t,r){var n=e("./_baseRest"),d=e("./eq"),h=e("./_isIterateeCall"),l=e("./keysIn"),p=Object.prototype,_=p.hasOwnProperty,o=n(function(e,t){e=Object(e);var r=-1,n=t.length,o=2<n?t[2]:void 0;for(o&&h(t[0],t[1],o)&&(n=1);++r<n;)for(var a=t[r],i=l(a),s=-1,u=i.length;++s<u;){var c=i[s],f=e[c];(void 0===f||d(f,p[c])&&!_.call(e,c))&&(e[c]=a[c])}return e});t.exports=o},{"./_baseRest":121,"./_isIterateeCall":182,"./eq":231,"./keysIn":260}],230:[function(e,t,r){t.exports=e("./forEach")},{"./forEach":236}],231:[function(e,t,r){t.exports=function(e,t){return e===t||e!=e&&t!=t}},{}],232:[function(e,t,r){var n=e("./_arrayFilter"),o=e("./_baseFilter"),a=e("./_baseIteratee"),i=e("./isArray");t.exports=function(e,t){return(i(e)?n:o)(e,a(t,3))}},{"./_arrayFilter":65,"./_baseFilter":84,"./_baseIteratee":105,"./isArray":243}],233:[function(e,t,r){var n=e("./_createFind")(e("./findIndex"));t.exports=n},{"./_createFind":150,"./findIndex":234}],234:[function(e,t,r){var a=e("./_baseFindIndex"),i=e("./_baseIteratee"),s=e("./toInteger"),u=Math.max;t.exports=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:s(r);return o<0&&(o=u(n+o,0)),a(e,i(t,3),o)}},{"./_baseFindIndex":85,"./_baseIteratee":105,"./toInteger":280}],235:[function(e,t,r){var n=e("./_baseFlatten");t.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},{"./_baseFlatten":86}],236:[function(e,t,r){var n=e("./_arrayEach"),o=e("./_baseEach"),a=e("./_castFunction"),i=e("./isArray");t.exports=function(e,t){return(i(e)?n:o)(e,a(t))}},{"./_arrayEach":64,"./_baseEach":82,"./_castFunction":132,"./isArray":243}],237:[function(e,t,r){var n=e("./_baseFor"),o=e("./_castFunction"),a=e("./keysIn");t.exports=function(e,t){return null==e?e:n(e,o(t),a)}},{"./_baseFor":87,"./_castFunction":132,"./keysIn":260}],238:[function(e,t,r){var o=e("./_baseGet");t.exports=function(e,t,r){var n=null==e?void 0:o(e,t);return void 0===n?r:n}},{"./_baseGet":89}],239:[function(e,t,r){var n=e("./_baseHas"),o=e("./_hasPath");t.exports=function(e,t){return null!=e&&o(e,t,n)}},{"./_baseHas":93,"./_hasPath":170}],240:[function(e,t,r){var n=e("./_baseHasIn"),o=e("./_hasPath");t.exports=function(e,t){return null!=e&&o(e,t,n)}},{"./_baseHasIn":94,"./_hasPath":170}],241:[function(e,t,r){t.exports=function(e){return e}},{}],242:[function(e,t,r){var n=e("./_baseIsArguments"),o=e("./isObjectLike"),a=Object.prototype,i=a.hasOwnProperty,s=a.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return o(e)&&i.call(e,"callee")&&!s.call(e,"callee")};t.exports=u},{"./_baseIsArguments":96,"./isObjectLike":252}],243:[function(e,t,r){var n=Array.isArray;t.exports=n},{}],244:[function(e,t,r){var n=e("./isFunction"),o=e("./isLength");t.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},{"./isFunction":248,"./isLength":249}],245:[function(e,t,r){var n=e("./isArrayLike"),o=e("./isObjectLike");t.exports=function(e){return o(e)&&n(e)}},{"./isArrayLike":244,"./isObjectLike":252}],246:[function(e,t,r){var n=e("./_root"),o=e("./stubFalse"),a="object"==typeof r&&r&&!r.nodeType&&r,i=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===a?n.Buffer:void 0,u=(s?s.isBuffer:void 0)||o;t.exports=u},{"./_root":208,"./stubFalse":278}],247:[function(e,t,r){var n=e("./_baseKeys"),o=e("./_getTag"),a=e("./isArguments"),i=e("./isArray"),s=e("./isArrayLike"),u=e("./isBuffer"),c=e("./_isPrototype"),f=e("./isTypedArray"),d=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(s(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||f(e)||a(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!n(e).length;for(var r in e)if(d.call(e,r))return!1;return!0}},{"./_baseKeys":106,"./_getTag":168,"./_isPrototype":186,"./isArguments":242,"./isArray":243,"./isArrayLike":244,"./isBuffer":246,"./isTypedArray":257}],248:[function(e,t,r){var n=e("./_baseGetTag"),o=e("./isObject");t.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},{"./_baseGetTag":91,"./isObject":251}],249:[function(e,t,r){t.exports=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}},{}],250:[function(e,t,r){var n=e("./_baseIsMap"),o=e("./_baseUnary"),a=e("./_nodeUtil"),i=a&&a.isMap,s=i?o(i):n;t.exports=s},{"./_baseIsMap":99,"./_baseUnary":127,"./_nodeUtil":204}],251:[function(e,t,r){t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},{}],252:[function(e,t,r){t.exports=function(e){return null!=e&&"object"==typeof e}},{}],253:[function(e,t,r){var n=e("./_baseGetTag"),o=e("./_getPrototype"),a=e("./isObjectLike"),i=Function.prototype,s=Object.prototype,u=i.toString,c=s.hasOwnProperty,f=u.call(Object);t.exports=function(e){if(!a(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==f}},{"./_baseGetTag":91,"./_getPrototype":164,"./isObjectLike":252}],254:[function(e,t,r){var n=e("./_baseIsSet"),o=e("./_baseUnary"),a=e("./_nodeUtil"),i=a&&a.isSet,s=i?o(i):n;t.exports=s},{"./_baseIsSet":103,"./_baseUnary":127,"./_nodeUtil":204}],255:[function(e,t,r){var n=e("./_baseGetTag"),o=e("./isArray"),a=e("./isObjectLike");t.exports=function(e){return"string"==typeof e||!o(e)&&a(e)&&"[object String]"==n(e)}},{"./_baseGetTag":91,"./isArray":243,"./isObjectLike":252}],256:[function(e,t,r){var n=e("./_baseGetTag"),o=e("./isObjectLike");t.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},{"./_baseGetTag":91,"./isObjectLike":252}],257:[function(e,t,r){var n=e("./_baseIsTypedArray"),o=e("./_baseUnary"),a=e("./_nodeUtil"),i=a&&a.isTypedArray,s=i?o(i):n;t.exports=s},{"./_baseIsTypedArray":104,"./_baseUnary":127,"./_nodeUtil":204}],258:[function(e,t,r){t.exports=function(e){return void 0===e}},{}],259:[function(e,t,r){var n=e("./_arrayLikeKeys"),o=e("./_baseKeys"),a=e("./isArrayLike");t.exports=function(e){return(a(e)?n:o)(e)}},{"./_arrayLikeKeys":68,"./_baseKeys":106,"./isArrayLike":244}],260:[function(e,t,r){var n=e("./_arrayLikeKeys"),o=e("./_baseKeysIn"),a=e("./isArrayLike");t.exports=function(e){return a(e)?n(e,!0):o(e)}},{"./_arrayLikeKeys":68,"./_baseKeysIn":107,"./isArrayLike":244}],261:[function(e,t,r){t.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},{}],262:[function(e,t,r){var n=e("./_arrayMap"),o=e("./_baseIteratee"),a=e("./_baseMap"),i=e("./isArray");t.exports=function(e,t){return(i(e)?n:a)(e,o(t,3))}},{"./_arrayMap":69,"./_baseIteratee":105,"./_baseMap":109,"./isArray":243}],263:[function(e,t,r){var a=e("./_baseAssignValue"),i=e("./_baseForOwn"),s=e("./_baseIteratee");t.exports=function(e,n){var o={};return n=s(n,3),i(e,function(e,t,r){a(o,t,n(e,t,r))}),o}},{"./_baseAssignValue":79,"./_baseForOwn":88,"./_baseIteratee":105}],264:[function(e,t,r){var n=e("./_baseExtremum"),o=e("./_baseGt"),a=e("./identity");t.exports=function(e){return e&&e.length?n(e,a,o):void 0}},{"./_baseExtremum":83,"./_baseGt":92,"./identity":241}],265:[function(e,t,r){var n=e("./_MapCache"),s="Expected a function";function u(o,a){if("function"!=typeof o||null!=a&&"function"!=typeof a)throw new TypeError(s);var i=function(){var e=arguments,t=a?a.apply(this,e):e[0],r=i.cache;if(r.has(t))return r.get(t);var n=o.apply(this,e);return i.cache=r.set(t,n)||r,n};return i.cache=new(u.Cache||n),i}u.Cache=n,t.exports=u},{"./_MapCache":55}],266:[function(e,t,r){var n=e("./_baseMerge"),o=e("./_createAssigner")(function(e,t,r){n(e,t,r)});t.exports=o},{"./_baseMerge":112,"./_createAssigner":147}],267:[function(e,t,r){var n=e("./_baseExtremum"),o=e("./_baseLt"),a=e("./identity");t.exports=function(e){return e&&e.length?n(e,a,o):void 0}},{"./_baseExtremum":83,"./_baseLt":108,"./identity":241}],268:[function(e,t,r){var n=e("./_baseExtremum"),o=e("./_baseIteratee"),a=e("./_baseLt");t.exports=function(e,t){return e&&e.length?n(e,o(t,2),a):void 0}},{"./_baseExtremum":83,"./_baseIteratee":105,"./_baseLt":108}],269:[function(e,t,r){t.exports=function(){}},{}],270:[function(e,t,r){var n=e("./_root");t.exports=function(){return n.Date.now()}},{"./_root":208}],271:[function(e,t,r){var n=e("./_basePick"),o=e("./_flatRest")(function(e,t){return null==e?{}:n(e,t)});t.exports=o},{"./_basePick":115,"./_flatRest":157}],272:[function(e,t,r){var n=e("./_baseProperty"),o=e("./_basePropertyDeep"),a=e("./_isKey"),i=e("./_toKey");t.exports=function(e){return a(e)?n(i(e)):o(e)}},{"./_baseProperty":117,"./_basePropertyDeep":118,"./_isKey":183,"./_toKey":223}],273:[function(e,t,r){var n=e("./_createRange")();t.exports=n},{"./_createRange":151}],274:[function(e,t,r){var a=e("./_arrayReduce"),i=e("./_baseEach"),s=e("./_baseIteratee"),u=e("./_baseReduce"),c=e("./isArray");t.exports=function(e,t,r){var n=c(e)?a:u,o=arguments.length<3;return n(e,s(t,4),r,o,i)}},{"./_arrayReduce":71,"./_baseEach":82,"./_baseIteratee":105,"./_baseReduce":120,"./isArray":243}],275:[function(e,t,r){var n=e("./_baseKeys"),o=e("./_getTag"),a=e("./isArrayLike"),i=e("./isString"),s=e("./_stringSize");t.exports=function(e){if(null==e)return 0;if(a(e))return i(e)?s(e):e.length;var t=o(e);return"[object Map]"==t||"[object Set]"==t?e.size:n(e).length}},{"./_baseKeys":106,"./_getTag":168,"./_stringSize":221,"./isArrayLike":244,"./isString":255}],276:[function(e,t,r){var n=e("./_baseFlatten"),o=e("./_baseOrderBy"),a=e("./_baseRest"),i=e("./_isIterateeCall"),s=a(function(e,t){if(null==e)return[];var r=t.length;return 1<r&&i(e,t[0],t[1])?t=[]:2<r&&i(t[0],t[1],t[2])&&(t=[t[0]]),o(e,n(t,1),[])});t.exports=s},{"./_baseFlatten":86,"./_baseOrderBy":114,"./_baseRest":121,"./_isIterateeCall":182}],277:[function(e,t,r){t.exports=function(){return[]}},{}],278:[function(e,t,r){t.exports=function(){return!1}},{}],279:[function(e,t,r){var n=e("./toNumber");t.exports=function(e){return e?(e=n(e))!==1/0&&e!==-1/0?e==e?e:0:17976931348623157e292*(e<0?-1:1):0===e?e:0}},{"./toNumber":281}],280:[function(e,t,r){var n=e("./toFinite");t.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},{"./toFinite":279}],281:[function(e,t,r){var n=e("./isObject"),o=e("./isSymbol"),a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;var t;if(n(e)&&(t="function"==typeof e.valueOf?e.valueOf():e,e=n(t)?t+"":t),"string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var r=s.test(e);return r||u.test(e)?c(e.slice(2),r?2:8):i.test(e)?NaN:+e}},{"./isObject":251,"./isSymbol":256}],282:[function(e,t,r){var n=e("./_copyObject"),o=e("./keysIn");t.exports=function(e){return n(e,o(e))}},{"./_copyObject":143,"./keysIn":260}],283:[function(e,t,r){var n=e("./_baseToString");t.exports=function(e){return null==e?"":n(e)}},{"./_baseToString":126}],284:[function(e,t,r){var i=e("./_arrayEach"),s=e("./_baseCreate"),u=e("./_baseForOwn"),c=e("./_baseIteratee"),f=e("./_getPrototype"),d=e("./isArray"),h=e("./isBuffer"),l=e("./isFunction"),p=e("./isObject"),_=e("./isTypedArray");t.exports=function(e,n,o){var t,r=d(e),a=r||h(e)||_(e);return n=c(n,4),null==o&&(t=e&&e.constructor,o=a?r?new t:[]:p(e)&&l(t)?s(f(e)):{}),(a?i:u)(e,function(e,t,r){return n(o,e,t,r)}),o}},{"./_arrayEach":64,"./_baseCreate":81,"./_baseForOwn":88,"./_baseIteratee":105,"./_getPrototype":164,"./isArray":243,"./isBuffer":246,"./isFunction":248,"./isObject":251,"./isTypedArray":257}],285:[function(e,t,r){var n=e("./_baseFlatten"),o=e("./_baseRest"),a=e("./_baseUniq"),i=e("./isArrayLikeObject"),s=o(function(e){return a(n(e,1,i,!0))});t.exports=s},{"./_baseFlatten":86,"./_baseRest":121,"./_baseUniq":128,"./isArrayLikeObject":245}],286:[function(e,t,r){var n=e("./toString"),o=0;t.exports=function(e){var t=++o;return n(e)+t}},{"./toString":283}],287:[function(e,t,r){var n=e("./_baseValues"),o=e("./keys");t.exports=function(e){return null==e?[]:n(e,o(e))}},{"./_baseValues":129,"./keys":259}],288:[function(e,t,r){var n=e("./_assignValue"),o=e("./_baseZipObject");t.exports=function(e,t){return o(e||[],t||[],n)}},{"./_assignValue":75,"./_baseZipObject":130}]},{},[1])(1)});(function(factoryFn){if(typeof module==="object"&&module.exports)module.exports=factoryFn(require("dagre"));else this.nomnoml=factoryFn(dagre)})(function(dagre){var nomnoml;(function(nomnoml){function buildStyle(conf){return{bold:conf.bold||false,underline:conf.underline||false,italic:conf.italic||false,dashed:conf.dashed||false,empty:conf.empty||false,center:conf.center||false,fill:conf.fill||undefined,stroke:conf.stroke||undefined,visual:conf.visual||"class",direction:conf.direction||undefined}}nomnoml.buildStyle=buildStyle;var Compartment=function(){function Compartment(lines,nodes,relations){this.lines=lines;this.nodes=nodes;this.relations=relations}return Compartment}();nomnoml.Compartment=Compartment;var Relation=function(){function Relation(){}return Relation}();nomnoml.Relation=Relation;var Classifier=function(){function Classifier(type,name,compartments){this.type=type;this.name=name;this.compartments=compartments;this.dividers=[]}return Classifier}();nomnoml.Classifier=Classifier})(nomnoml||(nomnoml={}));var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};var nomnoml;(function(nomnoml){function layout(measurer,config,ast){function measureLines(lines,fontWeight){if(!lines.length)return{width:0,height:config.padding};measurer.setFont(config,fontWeight,"normal");return{width:Math.round(Math.max.apply(Math,lines.map(measurer.textWidth))+2*config.padding),height:Math.round(measurer.textHeight()*lines.length+2*config.padding)}}function layoutCompartment(c,compartmentIndex,style){var textSize=measureLines(c.lines,compartmentIndex?"normal":"bold");if(!c.nodes.length&&!c.relations.length){c.width=textSize.width;c.height=textSize.height;c.offset={x:config.padding,y:config.padding};return}c.nodes.forEach(layoutClassifier);var g=new dagre.graphlib.Graph;g.setGraph({rankdir:style.direction||config.direction,nodesep:config.spacing,edgesep:config.spacing,ranksep:config.spacing,acyclicer:config.acyclicer,ranker:config.ranker});for(var _i=0,_a=c.nodes;_i<_a.length;_i++){var e=_a[_i];g.setNode(e.name,{width:e.layoutWidth,height:e.layoutHeight})}for(var _b=0,_c=c.relations;_b<_c.length;_b++){var r=_c[_b];g.setEdge(r.start,r.end,{id:r.id})}dagre.layout(g);var rels=nomnoml.skanaar.indexBy(c.relations,"id");var nodes=nomnoml.skanaar.indexBy(c.nodes,"name");g.nodes().forEach(function(name){var node=g.node(name);nodes[name].x=node.x;nodes[name].y=node.y});var left=0;var right=0;var top=0;var bottom=0;g.edges().forEach(function(edgeObj){var edge=g.edge(edgeObj);var start=nodes[edgeObj.v];var end=nodes[edgeObj.w];var rel=rels[edge.id];rel.path=nomnoml.skanaar.flatten([[start],edge.points,[end]]).map(toPoint);var startP=rel.path[1];var endP=rel.path[rel.path.length-2];layoutLabel(rel.startLabel,startP,adjustQuadrant(quadrant(startP,start,4),start,end));layoutLabel(rel.endLabel,endP,adjustQuadrant(quadrant(endP,end,2),end,start));left=Math.min.apply(Math,__spreadArrays([left,rel.startLabel.x,rel.endLabel.x],edge.points.map(function(e){return e.x}),edge.points.map(function(e){return e.x})));right=Math.max.apply(Math,__spreadArrays([right,rel.startLabel.x+rel.startLabel.width,rel.endLabel.x+rel.endLabel.width],edge.points.map(function(e){return e.x})));top=Math.min.apply(Math,__spreadArrays([top,rel.startLabel.y,rel.endLabel.y],edge.points.map(function(e){return e.y})));bottom=Math.max.apply(Math,__spreadArrays([bottom,rel.startLabel.y+rel.startLabel.height,rel.endLabel.y+rel.endLabel.height],edge.points.map(function(e){return e.y})))});var graph=g.graph();var width=Math.max(graph.width,right-left);var height=Math.max(graph.height,bottom-top);var graphHeight=height?height+2*config.gutter:0;var graphWidth=width?width+2*config.gutter:0;c.width=Math.max(textSize.width,graphWidth)+2*config.padding;c.height=textSize.height+graphHeight+config.padding;c.offset={x:config.padding-left,y:config.padding-top}}function toPoint(o){return{x:o.x,y:o.y}}function layoutLabel(label,point,quadrant){if(!label.text){label.width=0;label.height=0;label.x=point.x;label.y=point.y}else{var fontSize=config.fontSize;var lines=label.text.split("`");label.width=Math.max.apply(Math,lines.map(function(l){return measurer.textWidth(l)})),label.height=fontSize*lines.length;label.x=point.x+(quadrant==1||quadrant==4?config.padding:-label.width-config.padding),label.y=point.y+(quadrant==3||quadrant==4?config.padding:-label.height-config.padding)}}function quadrant(point,node,fallback){if(point.x<node.x&&point.y<node.y)return 1;if(point.x>node.x&&point.y<node.y)return 2;if(point.x>node.x&&point.y>node.y)return 3;if(point.x<node.x&&point.y>node.y)return 4;return fallback}function adjustQuadrant(quadrant,point,opposite){if(opposite.x==point.x||opposite.y==point.y)return quadrant;var flipHorizontally=[4,3,2,1];var flipVertically=[2,1,4,3];var oppositeQuadrant=opposite.y<point.y?opposite.x<point.x?2:1:opposite.x<point.x?3:4;if(oppositeQuadrant===quadrant){if(config.direction==="LR")return flipHorizontally[quadrant-1];if(config.direction==="TB")return flipVertically[quadrant-1]}return quadrant}function layoutClassifier(clas){var style=config.styles[clas.type]||nomnoml.styles.CLASS;clas.compartments.forEach(function(co,i){layoutCompartment(co,i,style)});nomnoml.layouters[style.visual](config,clas);clas.layoutWidth=clas.width+2*config.edgeMargin;clas.layoutHeight=clas.height+2*config.edgeMargin}layoutCompartment(ast,0,nomnoml.styles.CLASS);return ast}nomnoml.layout=layout})(nomnoml||(nomnoml={}));var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var nomnoml;(function(nomnoml){var ImportDepthError=function(_super){__extends(ImportDepthError,_super);function ImportDepthError(){return _super.call(this,"max_import_depth exceeded")||this}return ImportDepthError}(Error);nomnoml.ImportDepthError=ImportDepthError;function compileFile(filepath,maxImportDepth,depth){var fs=require("fs");var path=require("path");if(depth>maxImportDepth){throw new ImportDepthError}var source=fs.readFileSync(filepath,{encoding:"utf8"});var directory=path.dirname(filepath);return source.replace(/#import: *(.*)/g,function(a,file){return compileFile(path.join(directory,file),maxImportDepth,depth+1)})}nomnoml.compileFile=compileFile})(nomnoml||(nomnoml={}));var nomnoml;(function(nomnoml){nomnoml.version="1.0.0";function fitCanvasSize(canvas,rect,zoom){canvas.width=rect.width*zoom;canvas.height=rect.height*zoom}function Measurer(config,graphics){return{setFont:function(conf,bold,ital){graphics.setFont(conf.font,bold,ital,config.fontSize)},textWidth:function(s){return graphics.measureText(s).width},textHeight:function(){return config.leading*config.fontSize}}}function parseAndRender(code,graphics,canvas,scale){var parsedDiagram=nomnoml.parse(code);var config=parsedDiagram.config;var measurer=Measurer(config,graphics);var layout=nomnoml.layout(measurer,config,parsedDiagram.root);if(canvas){fitCanvasSize(canvas,layout,config.zoom*scale)}config.zoom*=scale;nomnoml.render(graphics,config,layout,measurer.setFont);return{config:config,layout:layout}}function draw(canvas,code,scale){return parseAndRender(code,nomnoml.skanaar.Canvas(canvas),canvas,scale||1)}nomnoml.draw=draw;function renderSvg(code,document){var skCanvas=nomnoml.skanaar.Svg("",document);var _a=parseAndRender(code,skCanvas,null,1),config=_a.config,layout=_a.layout;return skCanvas.serialize({width:layout.width,height:layout.height},code,config.title)}nomnoml.renderSvg=renderSvg})(nomnoml||(nomnoml={}));var nomnoml;(function(nomnoml){var Line=function(){function Line(){}return Line}();function parse(source){function onlyCompilables(line){var ok=line[0]!=="#"&&line.trim().substring(0,2)!=="//";return ok?line.trim():""}function isDirective(line){return line.text[0]==="#"}var lines=source.split("\n").map(function(s,i){return{text:s,index:i}});var pureDirectives=lines.filter(isDirective);var directives={};pureDirectives.forEach(function(line){try{var tokens=line.text.substring(1).split(":");directives[tokens[0].trim()]=tokens[1].trim()}catch(e){throw new Error("line "+(line.index+1))}});var pureDiagramCode=lines.map(function(e){return onlyCompilables(e.text)}).join("\n").trim();var parseTree=nomnoml.intermediateParse(pureDiagramCode);return{root:nomnoml.transformParseIntoSyntaxTree(parseTree),config:getConfig(directives)};function directionToDagre(word){if(word=="down")return"TB";if(word=="right")return"LR";else return"TB"}function parseRanker(word){if(word=="network-simplex"||word=="tight-tree"||word=="longest-path"){return word}return"network-simplex"}function parseCustomStyle(styleDef){var contains=nomnoml.skanaar.hasSubstring;return{bold:contains(styleDef,"bold"),underline:contains(styleDef,"underline"),italic:contains(styleDef,"italic"),dashed:contains(styleDef,"dashed"),empty:contains(styleDef,"empty"),center:nomnoml.skanaar.last(styleDef.match("align=([^ ]*)")||[])=="left"?false:true,fill:nomnoml.skanaar.last(styleDef.match("fill=([^ ]*)")||[]),stroke:nomnoml.skanaar.last(styleDef.match("stroke=([^ ]*)")||[]),visual:nomnoml.skanaar.last(styleDef.match("visual=([^ ]*)")||[])||"class",direction:directionToDagre(nomnoml.skanaar.last(styleDef.match("direction=([^ ]*)")||[]))}}function getConfig(d){var userStyles={};for(var key in d){if(key[0]!=".")continue;var styleDef=d[key];userStyles[key.substring(1).toUpperCase()]=parseCustomStyle(styleDef)}return{arrowSize:+d.arrowSize||1,bendSize:+d.bendSize||.3,direction:directionToDagre(d.direction),gutter:+d.gutter||5,edgeMargin:+d.edgeMargin||0,edges:d.edges=="hard"?"hard":"rounded",fill:(d.fill||"#eee8d5;#fdf6e3;#eee8d5;#fdf6e3").split(";"),background:d.background||"transparent",fillArrows:d.fillArrows==="true",font:d.font||"Helvetica",fontSize:+d.fontSize||12,leading:+d.leading||1.25,lineWidth:+d.lineWidth||3,padding:+d.padding||8,spacing:+d.spacing||40,stroke:d.stroke||"#33322E",title:d.title||"nomnoml",zoom:+d.zoom||1,acyclicer:d.acyclicer==="greedy"?"greedy":undefined,ranker:parseRanker(d.ranker),styles:nomnoml.skanaar.merged(nomnoml.styles,userStyles)}}}nomnoml.parse=parse;function intermediateParse(source){return nomnomlCoreParser.parse(source)}nomnoml.intermediateParse=intermediateParse;function transformParseIntoSyntaxTree(entity){function isAstClassifier(obj){return obj.parts!==undefined}function isAstRelation(obj){return obj.assoc!==undefined}function isAstCompartment(obj){return Array.isArray(obj)}var relationId=0;function transformCompartment(slots){var lines=[];var rawClassifiers=[];var relations=[];slots.forEach(function(p){if(typeof p==="string")lines.push(p);if(isAstRelation(p)){rawClassifiers.push(p.start);rawClassifiers.push(p.end);relations.push({id:relationId++,assoc:p.assoc,start:p.start.parts[0][0],end:p.end.parts[0][0],startLabel:{text:p.startLabel},endLabel:{text:p.endLabel}})}if(isAstClassifier(p)){rawClassifiers.push(p)}});var allClassifiers=rawClassifiers.map(transformClassifier).sort(function(a,b){return b.compartments.length-a.compartments.length});var uniqClassifiers=nomnoml.skanaar.uniqueBy(allClassifiers,"name");var uniqRelations=relations.filter(function(a){for(var _i=0,relations_1=relations;_i<relations_1.length;_i++){var b=relations_1[_i];if(a===b)return true;if(b.start==a.start&&b.end==a.end)return false}return true});return new nomnoml.Compartment(lines,uniqClassifiers,uniqRelations)}function transformClassifier(entity){var compartments=entity.parts.map(transformCompartment);return new nomnoml.Classifier(entity.type,entity.id,compartments)}return transformCompartment(entity)}nomnoml.transformParseIntoSyntaxTree=transformParseIntoSyntaxTree})(nomnoml||(nomnoml={}));var nomnoml;(function(nomnoml){function render(graphics,config,compartment,setFont){var g=graphics;var vm=nomnoml.skanaar.vector;function renderCompartment(compartment,style,level){g.save();g.translate(compartment.offset.x,compartment.offset.y);g.fillStyle(style.stroke||config.stroke);compartment.lines.forEach(function(text,i){g.textAlign(style.center?"center":"left");var x=style.center?compartment.width/2-config.padding:0;var y=(.5+(i+.5)*config.leading)*config.fontSize;if(text){g.fillText(text,x,y)}if(style.underline){var w=g.measureText(text).width;y+=Math.round(config.fontSize*.2)+.5;g.path([{x:x-w/2,y:y},{x:x+w/2,y:y}]).stroke();g.lineWidth(config.lineWidth)}});g.translate(config.gutter,config.gutter);compartment.relations.forEach(function(r){renderRelation(r)});compartment.nodes.forEach(function(n){renderNode(n,level)});g.restore()}function renderNode(node,level){var x=Math.round(node.x-node.width/2);var y=Math.round(node.y-node.height/2);var style=config.styles[node.type]||nomnoml.styles.CLASS;g.fillStyle(style.fill||config.fill[level]||nomnoml.skanaar.last(config.fill));g.strokeStyle(style.stroke||config.stroke);if(style.dashed){var dash=Math.max(4,2*config.lineWidth);g.setLineDash([dash,dash])}var drawNode=nomnoml.visualizers[style.visual]||nomnoml.visualizers["class"];drawNode(node,x,y,config,g);g.setLineDash([]);g.save();g.translate(x,y);node.compartments.forEach(function(part,i){var s=i>0?nomnoml.buildStyle({stroke:style.stroke}):style;if(s.empty)return;g.save();g.translate(part.x,part.y);setFont(config,s.bold?"bold":"normal",s.italic?"italic":undefined);renderCompartment(part,s,level+1);g.restore()});for(var _i=0,_a=node.dividers;_i<_a.length;_i++){var divider=_a[_i];g.path(divider).stroke()}g.restore()}function strokePath(p){if(config.edges==="rounded"){var radius=config.spacing*config.bendSize;g.beginPath();g.moveTo(p[0].x,p[0].y);for(var i=1;i<p.length-1;i++){g.arcTo(p[i].x,p[i].y,p[i+1].x,p[i+1].y,radius)}g.lineTo(nomnoml.skanaar.last(p).x,nomnoml.skanaar.last(p).y);g.stroke()}else g.path(p).stroke()}var empty=false,filled=true,diamond=true;function renderLabel(label){if(!label||!label.text)return;var fontSize=config.fontSize;var lines=label.text.split("`");lines.forEach(function(l,i){return g.fillText(l,label.x,label.y+fontSize*(i+1))})}function renderRelation(r){var start=r.path[1];var end=r.path[r.path.length-2];var path=r.path.slice(1,-1);g.fillStyle(config.stroke);setFont(config,"normal");renderLabel(r.startLabel);renderLabel(r.endLabel);if(r.assoc!=="-/-"){if(nomnoml.skanaar.hasSubstring(r.assoc,"--")){var dash=Math.max(4,2*config.lineWidth);g.setLineDash([dash,dash]);strokePath(path);g.setLineDash([])}else strokePath(path)}function drawArrowEnd(id,path,end){if(id===">"||id==="<")drawArrow(path,filled,end,false);else if(id===":>"||id==="<:")drawArrow(path,empty,end,false);else if(id==="+")drawArrow(path,filled,end,diamond);else if(id==="o")drawArrow(path,empty,end,diamond)}var tokens=r.assoc.split("-");drawArrowEnd(nomnoml.skanaar.last(tokens),path,end);drawArrowEnd(tokens[0],path.reverse(),start)}function drawArrow(path,isOpen,arrowPoint,diamond){var size=config.spacing*config.arrowSize/30;var v=vm.diff(path[path.length-2],nomnoml.skanaar.last(path));var nv=vm.normalize(v);function getArrowBase(s){return vm.add(arrowPoint,vm.mult(nv,s*size))}var arrowBase=getArrowBase(diamond?7:10);var t=vm.rot(nv);var arrowButt=diamond?getArrowBase(14):isOpen&&!config.fillArrows?getArrowBase(5):arrowBase;var arrow=[vm.add(arrowBase,vm.mult(t,4*size)),arrowButt,vm.add(arrowBase,vm.mult(t,-4*size)),arrowPoint];g.fillStyle(isOpen?config.stroke:config.fill[0]);g.circuit(arrow).fillAndStroke()}function snapToPixels(){if(config.lineWidth%2===1)g.translate(.5,.5)}function setBackground(){g.clear();g.save();g.strokeStyle("transparent");g.fillStyle(config.background);g.rect(0,0,compartment.width,compartment.height).fill();g.restore}g.save();g.scale(config.zoom,config.zoom);setBackground();setFont(config,"bold");g.lineWidth(config.lineWidth);g.lineJoin("round");g.lineCap("round");g.strokeStyle(config.stroke);snapToPixels();renderCompartment(compartment,nomnoml.buildStyle({stroke:undefined}),0);g.restore()}nomnoml.render=render})(nomnoml||(nomnoml={}));var nomnoml;(function(nomnoml){var skanaar;(function(skanaar){function Canvas(canvas,callbacks){var ctx=canvas.getContext("2d");var mousePos={x:0,y:0};var twopi=2*3.1416;function mouseEventToPos(event){var e=canvas;return{x:event.clientX-e.getBoundingClientRect().left-e.clientLeft+e.scrollLeft,y:event.clientY-e.getBoundingClientRect().top-e.clientTop+e.scrollTop}}if(callbacks){canvas.addEventListener("mousedown",function(event){if(callbacks.mousedown)callbacks.mousedown(mouseEventToPos(event))});canvas.addEventListener("mouseup",function(event){if(callbacks.mouseup)callbacks.mouseup(mouseEventToPos(event))});canvas.addEventListener("mousemove",function(event){mousePos=mouseEventToPos(event);if(callbacks.mousemove)callbacks.mousemove(mouseEventToPos(event))})}var chainable={stroke:function(){ctx.stroke();return chainable},fill:function(){ctx.fill();return chainable},fillAndStroke:function(){ctx.fill();ctx.stroke();return chainable}};function tracePath(path,offset,s){s=s===undefined?1:s;offset=offset||{x:0,y:0};ctx.beginPath();ctx.moveTo(offset.x+s*path[0].x,offset.y+s*path[0].y);for(var i=1,len=path.length;i<len;i++)ctx.lineTo(offset.x+s*path[i].x,offset.y+s*path[i].y);return chainable}return{mousePos:function(){return mousePos},width:function(){return canvas.width},height:function(){return canvas.height},clear:function(){ctx.clearRect(0,0,canvas.width,canvas.height)},circle:function(p,r){ctx.beginPath();ctx.arc(p.x,p.y,r,0,twopi);return chainable},ellipse:function(center,rx,ry,start,stop){if(start===undefined)start=0;if(stop===undefined)stop=twopi;ctx.beginPath();ctx.save();ctx.translate(center.x,center.y);ctx.scale(1,ry/rx);ctx.arc(0,0,rx/2,start,stop);ctx.restore();return chainable},arc:function(x,y,r,start,stop){ctx.beginPath();ctx.moveTo(x,y);ctx.arc(x,y,r,start,stop);return chainable},roundRect:function(x,y,w,h,r){ctx.beginPath();ctx.moveTo(x+r,y);ctx.arcTo(x+w,y,x+w,y+r,r);ctx.lineTo(x+w,y+h-r);ctx.arcTo(x+w,y+h,x+w-r,y+h,r);ctx.lineTo(x+r,y+h);ctx.arcTo(x,y+h,x,y+h-r,r);ctx.lineTo(x,y+r);ctx.arcTo(x,y,x+r,y,r);ctx.closePath();return chainable},rect:function(x,y,w,h){ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(x+w,y);ctx.lineTo(x+w,y+h);ctx.lineTo(x,y+h);ctx.closePath();return chainable},path:tracePath,circuit:function(path,offset,s){tracePath(path,offset,s);ctx.closePath();return chainable},setFont:function(font,bold,ital,fontSize){ctx.font=bold+" "+(ital||"")+" "+fontSize+"pt "+font+", Helvetica, sans-serif"},fillStyle:function(s){ctx.fillStyle=s},strokeStyle:function(s){ctx.strokeStyle=s},textAlign:function(a){ctx.textAlign=a},lineCap:function(cap){ctx.lineCap=cap},lineJoin:function(join){ctx.lineJoin=join},lineWidth:function(w){ctx.lineWidth=w},arcTo:function(){return ctx.arcTo.apply(ctx,arguments)},beginPath:function(){return ctx.beginPath.apply(ctx,arguments)},fillText:function(){return ctx.fillText.apply(ctx,arguments)},lineTo:function(){return ctx.lineTo.apply(ctx,arguments)},measureText:function(){return ctx.measureText.apply(ctx,arguments)},moveTo:function(){return ctx.moveTo.apply(ctx,arguments)},restore:function(){return ctx.restore.apply(ctx,arguments)},save:function(){return ctx.save.apply(ctx,arguments)},scale:function(){return ctx.scale.apply(ctx,arguments)},setLineDash:function(){return ctx.setLineDash.apply(ctx,arguments)},stroke:function(){return ctx.stroke.apply(ctx,arguments)},translate:function(){return ctx.translate.apply(ctx,arguments)}}}skanaar.Canvas=Canvas})(skanaar=nomnoml.skanaar||(nomnoml.skanaar={}))})(nomnoml||(nomnoml={}));var nomnoml;(function(nomnoml){var skanaar;(function(skanaar){function xmlEncode(str){return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}skanaar.charWidths={0:9,1:9,2:9,3:9,4:9,5:9,6:9,7:9,8:9,9:9," ":4,"!":4,'"':6,"#":9,$:9,"%":14,"&":11,"'":3,"(":5,")":5,"*":6,"+":9,",":4,"-":5,".":4,"/":4,":":4,";":4,"<":9,"=":9,">":9,"?":9,"@":16,A:11,B:11,C:12,D:12,E:11,F:10,G:12,H:12,I:4,J:8,K:11,L:9,M:13,N:12,O:12,P:11,Q:12,R:12,S:11,T:10,U:12,V:11,W:15,X:11,Y:11,Z:10,"[":4,"\\":4,"]":4,"^":8,_:9,"`":5,a:9,b:9,c:8,d:9,e:9,f:4,g:9,h:9,i:4,j:4,k:8,l:4,m:13,n:9,o:9,p:9,q:9,r:5,s:8,t:4,u:9,v:8,w:12,x:8,y:8,z:8,"{":5,"|":4,"}":5,"~":9};function Svg(globalStyle,document){var initialState={x:0,y:0,stroke:"none",strokeWidth:1,dashArray:"none",fill:"none",textAlign:"left",font:"Helvetica, Arial, sans-serif",fontSize:12};var states=[initialState];var elements=[];var measurementCanvas=document?document.createElement("canvas"):null;var ctx=measurementCanvas?measurementCanvas.getContext("2d"):null;function Element(name,attr,content){return{name:name,attr:attr,content:content||undefined,stroke:function(){var base=this.attr.style||"";this.attr.style=base+"stroke:"+lastDefined("stroke")+";fill:none"+";stroke-dasharray:"+lastDefined("dashArray")+";stroke-width:"+lastDefined("strokeWidth")+";";return this},fill:function(){var base=this.attr.style||"";this.attr.style=base+"stroke:none; fill:"+lastDefined("fill")+";";return this},fillAndStroke:function(){var base=this.attr.style||"";this.attr.style=base+"stroke:"+lastDefined("stroke")+";fill:"+lastDefined("fill")+";stroke-dasharray:"+lastDefined("dashArray")+";stroke-width:"+lastDefined("strokeWidth")+";";return this}}}function State(dx,dy){return{x:dx,y:dy,stroke:null,strokeWidth:null,fill:null,textAlign:null,dashArray:"none",font:null,fontSize:null}}function trans(coord,axis){states.forEach(function(t){coord+=t[axis]});return coord}function tX(coord){return Math.round(10*trans(coord,"x"))/10}function tY(coord){return Math.round(10*trans(coord,"y"))/10}function lastDefined(property){for(var i=states.length-1;i>=0;i--)if(states[i][property])return states[i][property];return undefined}function last(list){return list[list.length-1]}function tracePath(path,offset,s){s=s===undefined?1:s;offset=offset||{x:0,y:0};var d=path.map(function(e,i){return(i?"L":"M")+tX(offset.x+s*e.x)+" "+tY(offset.y+s*e.y)}).join(" ");return newElement("path",{d:d})}function newElement(type,attr,content){var element=Element(type,attr,content);elements.push(element);return element}return{width:function(){return 0},height:function(){return 0},clear:function(){},circle:function(p,r){var element=Element("circle",{r:r,cx:tX(p.x),cy:tY(p.y)});elements.push(element);return element},ellipse:function(center,w,h,start,stop){if(stop){var y=tY(center.y);return newElement("path",{d:"M"+tX(center.x-w/2)+" "+y+"A"+w/2+" "+h/2+" 0 1 0 "+tX(center.x+w/2)+" "+y})}else{return newElement("ellipse",{cx:tX(center.x),cy:tY(center.y),rx:w/2,ry:h/2})}},arc:function(x,y,r){return newElement("ellipse",{cx:tX(x),cy:tY(y),rx:r,ry:r})},roundRect:function(x,y,w,h,r){return newElement("rect",{x:tX(x),y:tY(y),rx:r,ry:r,height:h,width:w})},rect:function(x,y,w,h){return newElement("rect",{x:tX(x),y:tY(y),height:h,width:w})},path:tracePath,circuit:function(path,offset,s){var element=tracePath(path,offset,s);element.attr.d+=" Z";return element},setFont:function(font,bold,ital,fontSize){var font=bold+" "+(ital||"")+" "+fontSize+"pt "+font+", Helvetica, sans-serif";last(states).font=font;last(states).fontSize=fontSize},strokeStyle:function(stroke){last(states).stroke=stroke},fillStyle:function(fill){last(states).fill=fill},arcTo:function(x1,y1,x2,y2){last(elements).attr.d+="L"+tX(x1)+" "+tY(y1)+" L"+tX(x2)+" "+tY(y2)+" "},beginPath:function(){return newElement("path",{d:""})},fillText:function(text,x,y){var attr={x:tX(x),y:tY(y),style:"fill: "+last(states).fill+";"};var font=lastDefined("font");if(font){attr.style+="font:"+font+";"}if(lastDefined("textAlign")==="center"){attr.style+="text-anchor: middle;"}return newElement("text",attr,text)},lineCap:function(cap){globalStyle+=";stroke-linecap:"+cap},lineJoin:function(join){globalStyle+=";stroke-linejoin:"+join},lineTo:function(x,y){last(elements).attr.d+="L"+tX(x)+" "+tY(y)+" ";return last(elements)},lineWidth:function(w){last(states).strokeWidth=w},measureText:function(s){if(ctx){ctx.font=lastDefined("font")||"normal 12pt Helvetica";return ctx.measureText(s)}else{return{width:skanaar.sum(s,function(c){var scale=lastDefined("fontSize")/12;if(skanaar.charWidths[c]){return skanaar.charWidths[c]*scale}return 16*scale})}}},moveTo:function(x,y){last(elements).attr.d+="M"+tX(x)+" "+tY(y)+" "},restore:function(){states.pop()},save:function(){states.push(State(0,0))},scale:function(){},setLineDash:function(d){last(states).dashArray=d.length===0?"none":d[0]+" "+d[1]},stroke:function(){last(elements).stroke()},textAlign:function(a){last(states).textAlign=a},translate:function(dx,dy){last(states).x+=dx;last(states).y+=dy},serialize:function(size,desc,title){function toAttr(obj){function toKeyValue(key){return key+'="'+obj[key]+'"'}return Object.keys(obj).map(toKeyValue).join(" ")}function toHtml(e){return"<"+e.name+" "+toAttr(e.attr)+">"+(e.content?xmlEncode(e.content):"")+"</"+e.name+">"}var elementsToSerialize=elements;if(desc){elementsToSerialize.unshift(Element("desc",{},desc))}if(title){elementsToSerialize.unshift(Element("title",{},title))}var innerSvg=elementsToSerialize.map(toHtml).join("\n  ");var attrs={version:"1.1",baseProfile:"full",width:size.width,height:size.height,viewbox:"0 0 "+size.width+" "+size.height,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:ev":"http://www.w3.org/2001/xml-events",style:"font:"+lastDefined("font")+";"+globalStyle};return"<svg "+toAttr(attrs)+">\n  "+innerSvg+"\n</svg>"}}}skanaar.Svg=Svg})(skanaar=nomnoml.skanaar||(nomnoml.skanaar={}))})(nomnoml||(nomnoml={}));var nomnoml;(function(nomnoml){var skanaar;(function(skanaar){function plucker(pluckerDef){switch(typeof pluckerDef){case"undefined":return function(e){return e};case"string":return function(obj){return obj[pluckerDef]};case"number":return function(obj){return obj[pluckerDef]};case"function":return pluckerDef}}skanaar.plucker=plucker;function sum(list,plucker){var transform=skanaar.plucker(plucker);for(var i=0,summation=0,len=list.length;i<len;i++)summation+=transform(list[i]);return summation}skanaar.sum=sum;function flatten(lists){var out=[];for(var i=0;i<lists.length;i++)out=out.concat(lists[i]);return out}skanaar.flatten=flatten;function find(list,predicate){for(var i=0;i<list.length;i++)if(predicate(list[i]))return list[i];return undefined}skanaar.find=find;function last(list){return list[list.length-1]}skanaar.last=last;function hasSubstring(haystack,needle){if(needle==="")return true;if(!haystack)return false;return haystack.indexOf(needle)!==-1}skanaar.hasSubstring=hasSubstring;function format(template){var parts=[];for(var _i=1;_i<arguments.length;_i++){parts[_i-1]=arguments[_i]}var matrix=template.split("#");var output=[matrix[0]];for(var i=0;i<matrix.length-1;i++){output.push(parts[i]||"");output.push(matrix[i+1])}return output.join("")}skanaar.format=format;function merged(a,b){function assign(target,data){for(var key in data)target[key]=data[key]}var obj={};assign(obj,a);assign(obj,b);return obj}skanaar.merged=merged;function indexBy(list,key){var obj={};for(var i=0;i<list.length;i++)obj[list[i][key]]=list[i];return obj}skanaar.indexBy=indexBy;function uniqueBy(list,pluckerDef){var seen={};var getKey=skanaar.plucker(pluckerDef);var out=[];for(var i=0;i<list.length;i++){var key=getKey(list[i]);if(!seen[key]){seen[key]=true;out.push(list[i])}}return out}skanaar.uniqueBy=uniqueBy})(skanaar=nomnoml.skanaar||(nomnoml.skanaar={}))})(nomnoml||(nomnoml={}));var nomnoml;(function(nomnoml){var skanaar;(function(skanaar){skanaar.vector={dist:function(a,b){return skanaar.vector.mag(skanaar.vector.diff(a,b))},add:function(a,b){return{x:a.x+b.x,y:a.y+b.y}},diff:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},mult:function(v,factor){return{x:factor*v.x,y:factor*v.y}},mag:function(v){return Math.sqrt(v.x*v.x+v.y*v.y)},normalize:function(v){return skanaar.vector.mult(v,1/skanaar.vector.mag(v))},rot:function(a){return{x:a.y,y:-a.x}}}})(skanaar=nomnoml.skanaar||(nomnoml.skanaar={}))})(nomnoml||(nomnoml={}));var nomnoml;(function(nomnoml){nomnoml.styles={ABSTRACT:nomnoml.buildStyle({visual:"class",center:true,italic:true}),ACTOR:nomnoml.buildStyle({visual:"actor",center:true}),CHOICE:nomnoml.buildStyle({visual:"rhomb",center:true}),CLASS:nomnoml.buildStyle({visual:"class",center:true,bold:true}),DATABASE:nomnoml.buildStyle({visual:"database",center:true,bold:true}),END:nomnoml.buildStyle({visual:"end",center:true,empty:true}),FRAME:nomnoml.buildStyle({visual:"frame"}),HIDDEN:nomnoml.buildStyle({visual:"hidden",center:true,empty:true}),INPUT:nomnoml.buildStyle({visual:"input",center:true}),INSTANCE:nomnoml.buildStyle({visual:"class",center:true,underline:true}),LABEL:nomnoml.buildStyle({visual:"none"}),NOTE:nomnoml.buildStyle({visual:"note"}),PACKAGE:nomnoml.buildStyle({visual:"package"}),RECEIVER:nomnoml.buildStyle({visual:"receiver"}),REFERENCE:nomnoml.buildStyle({visual:"class",center:true,dashed:true}),SENDER:nomnoml.buildStyle({visual:"sender"}),START:nomnoml.buildStyle({visual:"start",center:true,empty:true}),STATE:nomnoml.buildStyle({visual:"roundrect",center:true}),TABLE:nomnoml.buildStyle({visual:"table",center:true,bold:true}),TRANSCEIVER:nomnoml.buildStyle({visual:"transceiver"}),USECASE:nomnoml.buildStyle({visual:"ellipse",center:true})};function box(config,clas){clas.width=Math.max.apply(Math,clas.compartments.map(function(e){return e.width}));clas.height=nomnoml.skanaar.sum(clas.compartments,"height");clas.dividers=[];var y=0;for(var _i=0,_a=clas.compartments;_i<_a.length;_i++){var comp=_a[_i];comp.x=0;comp.y=y;comp.width=clas.width;y+=comp.height;if(comp!=nomnoml.skanaar.last(clas.compartments))clas.dividers.push([{x:0,y:y},{x:clas.width,y:y}])}}function icon(config,clas){clas.dividers=[];clas.compartments=[];clas.width=config.fontSize*2.5;clas.height=config.fontSize*2.5}nomnoml.layouters={actor:function(config,clas){clas.width=Math.max.apply(Math,__spreadArrays([config.padding*2],clas.compartments.map(function(e){return e.width})));clas.height=config.padding*3+nomnoml.skanaar.sum(clas.compartments,"height");clas.dividers=[];var y=config.padding*3;for(var _i=0,_a=clas.compartments;_i<_a.length;_i++){var comp=_a[_i];comp.x=0;comp.y=y;comp.width=clas.width;y+=comp.height;if(comp!=nomnoml.skanaar.last(clas.compartments))clas.dividers.push([{x:config.padding,y:y},{x:clas.width-config.padding,y:y}])}},class:box,database:function(config,clas){clas.width=Math.max.apply(Math,clas.compartments.map(function(e){return e.width}));clas.height=nomnoml.skanaar.sum(clas.compartments,"height")+config.padding*2;clas.dividers=[];var y=config.padding*1.5;for(var _i=0,_a=clas.compartments;_i<_a.length;_i++){var comp=_a[_i];comp.x=0;comp.y=y;comp.width=clas.width;y+=comp.height;if(comp!=nomnoml.skanaar.last(clas.compartments))clas.dividers.push([{x:0,y:y},{x:clas.width,y:y}])}},ellipse:function(config,clas){var width=Math.max.apply(Math,clas.compartments.map(function(e){return e.width}));var height=nomnoml.skanaar.sum(clas.compartments,"height");clas.width=width*1.25;clas.height=height*1.25;clas.dividers=[];var y=height*.125;var sq=function(x){return x*x};var rimPos=function(y){return Math.sqrt(sq(.5)-sq(y/clas.height-.5))*clas.width};for(var _i=0,_a=clas.compartments;_i<_a.length;_i++){var comp=_a[_i];comp.x=width*.125;comp.y=y;comp.width=width;y+=comp.height;if(comp!=nomnoml.skanaar.last(clas.compartments))clas.dividers.push([{x:clas.width/2+rimPos(y)-1,y:y},{x:clas.width/2-rimPos(y)+1,y:y}])}},end:icon,frame:function(config,clas){var w=clas.compartments[0].width;var h=clas.compartments[0].height;box(config,clas);if(clas.dividers.length)clas.dividers.shift();clas.dividers.unshift([{x:0,y:h},{x:w-h/4,y:h},{x:w+h/4,y:h/2},{x:w+h/4,y:0}])},hidden:function(config,clas){clas.dividers=[];clas.compartments=[];clas.width=0;clas.height=0},input:box,none:box,note:box,package:box,receiver:box,rhomb:function(config,clas){var width=Math.max.apply(Math,clas.compartments.map(function(e){return e.width}));var height=nomnoml.skanaar.sum(clas.compartments,"height");clas.width=width*1.5;clas.height=height*1.5;clas.dividers=[];var y=height*.25;for(var _i=0,_a=clas.compartments;_i<_a.length;_i++){var comp=_a[_i];comp.x=width*.25;comp.y=y;comp.width=width;y+=comp.height;var slope=clas.width/clas.height;if(comp!=nomnoml.skanaar.last(clas.compartments))clas.dividers.push([{x:clas.width/2+(y<clas.height/2?y*slope:(clas.height-y)*slope),y:y},{x:clas.width/2-(y<clas.height/2?y*slope:(clas.height-y)*slope),y:y}])}},roundrect:box,sender:box,start:icon,table:function(config,clas){if(clas.compartments.length==1){box(config,clas);return}var gridcells=clas.compartments.slice(1);var rows=[[]];function isRowBreak(e){return!e.lines.length&&!e.nodes.length&&!e.relations.length}function isRowFull(e){var current=nomnoml.skanaar.last(rows);return rows[0]!=current&&rows[0].length==current.length}function isEnd(e){return comp==nomnoml.skanaar.last(gridcells)}for(var _i=0,gridcells_1=gridcells;_i<gridcells_1.length;_i++){var comp=gridcells_1[_i];if(!isEnd(comp)&&isRowBreak(comp)&&nomnoml.skanaar.last(rows).length){rows.push([])}else if(isRowFull(comp)){rows.push([comp])}else{nomnoml.skanaar.last(rows).push(comp)}}var header=clas.compartments[0];var cellW=Math.max.apply(Math,__spreadArrays([header.width/rows[0].length],gridcells.map(function(e){return e.width})));var cellH=Math.max.apply(Math,gridcells.map(function(e){return e.height}));clas.width=cellW*rows[0].length;clas.height=header.height+cellH*rows.length;var hh=header.height;clas.dividers=__spreadArrays([[{x:0,y:header.height},{x:0,y:header.height}]],rows.map(function(e,i){return[{x:0,y:hh+i*cellH},{x:clas.width,y:hh+i*cellH}]}),rows[0].map(function(e,i){return[{x:(i+1)*cellW,y:hh},{x:(i+1)*cellW,y:clas.height}]}));header.x=0;header.y=0;header.width=clas.width;for(var i=0;i<rows.length;i++){for(var j=0;j<rows[i].length;j++){var cell=rows[i][j];cell.x=j*cellW;cell.y=hh+i*cellH;cell.width=cellW}}},transceiver:box};nomnoml.visualizers={actor:function(node,x,y,config,g){var a=config.padding/2;var yp=y+a*4;var faceCenter={x:node.x,y:yp-a};g.circle(faceCenter,a).fillAndStroke();g.path([{x:node.x,y:yp},{x:node.x,y:yp+2*a}]).stroke();g.path([{x:node.x-a,y:yp+a},{x:node.x+a,y:yp+a}]).stroke();g.path([{x:node.x-a,y:yp+a+config.padding},{x:node.x,y:yp+config.padding},{x:node.x+a,y:yp+a+config.padding}]).stroke()},class:function(node,x,y,config,g){g.rect(x,y,node.width,node.height).fillAndStroke()},database:function(node,x,y,config,g){var pad=config.padding;var cy=y-pad/2;var pi=3.1416;g.rect(x,y+pad,node.width,node.height-pad*1.5).fill();g.path([{x:x,y:cy+pad*1.5},{x:x,y:cy-pad*.5+node.height}]).stroke();g.path([{x:x+node.width,y:cy+pad*1.5},{x:x+node.width,y:cy-pad*.5+node.height}]).stroke();g.ellipse({x:node.x,y:cy+pad*1.5},node.width,pad*1.5).fillAndStroke();g.ellipse({x:node.x,y:cy-pad*.5+node.height},node.width,pad*1.5,0,pi).fillAndStroke()},ellipse:function(node,x,y,config,g){g.ellipse({x:node.x,y:node.y},node.width,node.height).fillAndStroke()},end:function(node,x,y,config,g){g.circle({x:node.x,y:y+node.height/2},node.height/3).fillAndStroke();g.fillStyle(config.stroke);g.circle({x:node.x,y:y+node.height/2},node.height/3-config.padding/2).fill()},frame:function(node,x,y,config,g){g.rect(x,y,node.width,node.height).fillAndStroke()},hidden:function(node,x,y,config,g){},input:function(node,x,y,config,g){g.circuit([{x:x+config.padding,y:y},{x:x+node.width,y:y},{x:x+node.width-config.padding,y:y+node.height},{x:x,y:y+node.height}]).fillAndStroke()},none:function(node,x,y,config,g){},note:function(node,x,y,config,g){g.circuit([{x:x,y:y},{x:x+node.width-config.padding,y:y},{x:x+node.width,y:y+config.padding},{x:x+node.width,y:y+node.height},{x:x,y:y+node.height},{x:x,y:y}]).fillAndStroke();g.path([{x:x+node.width-config.padding,y:y},{x:x+node.width-config.padding,y:y+config.padding},{x:x+node.width,y:y+config.padding}]).stroke()},package:function(node,x,y,config,g){var headHeight=node.compartments[0].height;g.rect(x,y+headHeight,node.width,node.height-headHeight).fillAndStroke();var w=g.measureText(node.name).width+2*config.padding;g.circuit([{x:x,y:y+headHeight},{x:x,y:y},{x:x+w,y:y},{x:x+w,y:y+headHeight}]).fillAndStroke()},receiver:function(node,x,y,config,g){g.circuit([{x:x-config.padding,y:y},{x:x+node.width,y:y},{x:x+node.width,y:y+node.height},{x:x-config.padding,y:y+node.height},{x:x,y:y+node.height/2}]).fillAndStroke()},rhomb:function(node,x,y,config,g){g.circuit([{x:node.x,y:y},{x:x+node.width,y:node.y},{x:node.x,y:y+node.height},{x:x,y:node.y}]).fillAndStroke()},roundrect:function(node,x,y,config,g){var r=Math.min(config.padding*2*config.leading,node.height/2);g.roundRect(x,y,node.width,node.height,r).fillAndStroke()},sender:function(node,x,y,config,g){g.circuit([{x:x,y:y},{x:x+node.width-config.padding,y:y},{x:x+node.width,y:y+node.height/2},{x:x+node.width-config.padding,y:y+node.height},{x:x,y:y+node.height}]).fillAndStroke()},start:function(node,x,y,config,g){g.fillStyle(config.stroke);g.circle({x:node.x,y:y+node.height/2},node.height/2.5).fill()},table:function(node,x,y,config,g){g.rect(x,y,node.width,node.height).fillAndStroke()},transceiver:function(node,x,y,config,g){g.circuit([{x:x-config.padding,y:y},{x:x+node.width,y:y},{x:x+node.width+config.padding,y:y+node.height/2},{x:x+node.width,y:y+node.height},{x:x-config.padding,y:y+node.height},{x:x,y:y+node.height/2}]).fillAndStroke()}}})(nomnoml||(nomnoml={}));var nomnomlCoreParser=function(){var o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,4],$V1=[1,7],$V2=[1,9],$V3=[5,10,12,14],$V4=[12,14];var parser={trace:function trace(){},yy:{},symbols_:{error:2,root:3,compartment:4,EOF:5,slot:6,IDENT:7,class:8,association:9,SEP:10,parts:11,"|":12,"[":13,"]":14,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"IDENT",10:"SEP",12:"|",13:"[",14:"]"},productions_:[0,[3,2],[6,1],[6,1],[6,1],[4,1],[4,3],[11,1],[11,3],[11,2],[9,3],[8,3]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];break;case 2:this.$=$$[$0].trim().replace(/\\(\[|\]|\|)/g,"$"+"1");break;case 3:case 4:this.$=$$[$0];break;case 5:case 7:this.$=[$$[$0]];break;case 6:this.$=$$[$0-2].concat($$[$0]);break;case 8:this.$=$$[$0-2].concat([$$[$0]]);break;case 9:this.$=$$[$0-1].concat([[]]);break;case 10:var t=$$[$0-1].trim().replace(/\\(\[|\]|\|)/g,"$"+"1").match("^(.*?)([<:o+]*-/?-*[:o+>]*)(.*)$");this.$={assoc:t[2],start:$$[$0-2],end:$$[$0],startLabel:t[1].trim(),endLabel:t[3].trim()};break;case 11:var type="CLASS";var id=$$[$0-1][0][0];var typeMatch=$$[$0-1][0][0].match("<([a-z]*)>(.*)");if(typeMatch){type=typeMatch[1].toUpperCase();id=typeMatch[2].trim()}$$[$0-1][0][0]=id;this.$={type:type,id:id,parts:$$[$0-1]};break}},table:[{3:1,4:2,6:3,7:$V0,8:5,9:6,13:$V1},{1:[3]},{5:[1,8],10:$V2},o($V3,[2,5]),o($V3,[2,2]),o($V3,[2,3],{7:[1,10]}),o($V3,[2,4]),{4:12,6:3,7:$V0,8:5,9:6,11:11,13:$V1},{1:[2,1]},{6:13,7:$V0,8:5,9:6,13:$V1},{8:14,13:$V1},{12:[1,16],14:[1,15]},o($V4,[2,7],{10:$V2}),o($V3,[2,6]),o($V3,[2,10]),o([5,7,10,12,14],[2,11]),o($V4,[2,9],{6:3,8:5,9:6,4:17,7:$V0,13:$V1}),o($V4,[2,8],{10:$V2})],defaultActions:{8:[2,1]},parseError:function parseError(str,hash){if(hash.recoverable){this.trace(str)}else{var error=new Error(str);error.hash=hash;throw error}},parse:function parse(input){var self=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;var args=lstack.slice.call(arguments,1);var lexer=Object.create(this.lexer);var sharedState={yy:{}};for(var k in this.yy){if(Object.prototype.hasOwnProperty.call(this.yy,k)){sharedState.yy[k]=this.yy[k]}}lexer.setInput(input,sharedState.yy);sharedState.yy.lexer=lexer;sharedState.yy.parser=this;if(typeof lexer.yylloc=="undefined"){lexer.yylloc={}}var yyloc=lexer.yylloc;lstack.push(yyloc);var ranges=lexer.options&&lexer.options.ranges;if(typeof sharedState.yy.parseError==="function"){this.parseError=sharedState.yy.parseError}else{this.parseError=Object.getPrototypeOf(this).parseError}function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n}_token_stack:var lex=function(){var token;token=lexer.lex()||EOF;if(typeof token!=="number"){token=self.symbols_[token]||token}return token};var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state]}else{if(symbol===null||typeof symbol=="undefined"){symbol=lex()}action=table[state]&&table[state][symbol]}if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";expected=[];for(p in table[state]){if(this.terminals_[p]&&p>TERROR){expected.push("'"+this.terminals_[p]+"'")}}if(lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'"}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==EOF?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'")}this.parseError(errStr,{text:lexer.match,token:this.terminals_[symbol]||symbol,line:lexer.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol)}switch(action[0]){case 1:stack.push(symbol);vstack.push(lexer.yytext);lstack.push(lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=lexer.yyleng;yytext=lexer.yytext;yylineno=lexer.yylineno;yyloc=lexer.yylloc;if(recovering>0){recovering--}}else{symbol=preErrorSymbol;preErrorSymbol=null}break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};if(ranges){yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]}r=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args));if(typeof r!=="undefined"){return r}if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true}}return true}};var lexer=function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(this.yy.parser){this.yy.parser.parseError(str,hash)}else{throw new Error(str)}},setInput:function(input,yy){this.yy=yy||this.yy||{};this._input=input;this._more=this._backtrack=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges){this.yylloc.range=[0,0]}this.offset=0;return this},input:function(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges){this.yylloc.range[1]++}this._input=this._input.slice(1);return ch},unput:function(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-len);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1){this.yylineno-=lines.length-1}var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len};if(this.options.ranges){this.yylloc.range=[r[0],r[0]+this.yyleng-len]}this.yyleng=this.yytext.length;return this},more:function(){this._more=true;return this},reject:function(){if(this.options.backtrack_lexer){this._backtrack=true}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}return this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length)}return(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput();var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},test_match:function(match,indexed_rule){var token,lines,backup;if(this.options.backtrack_lexer){backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done};if(this.options.ranges){backup.yylloc.range=this.yylloc.range.slice(0)}}lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno+=lines.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._backtrack=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input){this.done=false}if(token){return token}else if(this._backtrack){for(var k in backup){this[k]=backup[k]}return false}return false},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var token,match,tempMatch,index;if(!this._more){this.yytext="";this.match=""}var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=tempMatch;index=i;if(this.options.backtrack_lexer){token=this.test_match(tempMatch,rules[i]);if(token!==false){return token}else if(this._backtrack){match=false;continue}else{return false}}else if(!this.options.flex){break}}}if(match){token=this.test_match(match,rules[index]);if(token!==false){return token}return false}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function lex(){var r=this.next();if(r){return r}else{return this.lex()}},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){var n=this.conditionStack.length-1;if(n>0){return this.conditionStack.pop()}else{return this.conditionStack[0]}},_currentRules:function _currentRules(){if(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}else{return this.conditions["INITIAL"].rules}},topState:function topState(n){n=this.conditionStack.length-1-Math.abs(n||0);if(n>=0){return this.conditionStack[n]}else{return"INITIAL"}},pushState:function pushState(condition){this.begin(condition)},stateStackSize:function stateStackSize(){return this.conditionStack.length},options:{},performAction:function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:return 12;break;case 1:return 7;break;case 2:return 13;break;case 3:return 14;break;case 4:return 10;break;case 5:return 5;break;case 6:return"INVALID";break}},rules:[/^(?:\s*\|\s*)/,/^(?:(\\(\[|\]|\|)|[^\]\[|;\n])+)/,/^(?:\[)/,/^(?:\s*\])/,/^(?:[ ]*(;|\n)+[ ]*)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6],inclusive:true}}};return lexer}();parser.lexer=lexer;function Parser(){this.yy={}}Parser.prototype=parser;parser.Parser=Parser;return new Parser}();return nomnoml});