!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():t.Combinatorics=n()}(this,function(){"use strict";var version="0.6.1",P,C;try{P=eval("(m, n) => {\n            var p;\n            if (typeof m === 'bigint' && typeof n === 'bigint') {\n                p = 1n;\n            } else {\n                if (m % 1 !== 0) throw new RangeError;\n                if (n % 1 !== 0) throw new RangeError;\n                p = 1;\n            }\n            while (n--) p *= m--;\n            return p;\n        };")}catch(t){P=function(t,n){if(t%1!=0)throw new RangeError;if(n%1!=0)throw new RangeError;for(var e=1;n--;)e*=t--;return e}}try{C=eval("\n        (m, n) => m < n\n            ? typeof m === 'bigint' && typeof n === 'bigint' ? 0n : 0\n            :  P(m, n) / P(n, n);\n        ")}catch(t){C=function(t,n){return t<n?0:P(t,n)/P(n,n)}}var factorial=function(t){return P(t,t)},factoradic=function(t,n){var e=1;if(n)e=factorial(n);else{for(n=1;e<t;e*=++n);e>t&&(e/=n--)}for(var i=[0];n;e/=n--)i[n]=Math.floor(t/e),t%=e;return i},addProperties=function(t,n){Object.keys(n).forEach(function(e){Object.defineProperty(t,e,{value:n[e],configurable:"next"==e})})},hideProperty=function(t,n){Object.defineProperty(t,n,{writable:!0})},toArray=function(t){var n,e=[];for(this.init();n=this.next();)e.push(t?t(n):n);return this.init(),e},common={toArray:toArray,map:toArray,forEach:function(t){var n;for(this.init();n=this.next();)t(n);this.init()},filter:function(t){var n,e=[];for(this.init();n=this.next();)t(n)&&e.push(n);return this.init(),e},find:function(t){var n,e;for(this.init();n=this.next();)if(t(n)){e=n;break}return this.init(),e},reduce:function(t,n){this.init();var e=0;arguments.length<2&&(n=this.next(),e+=1);for(var i=this.length;e<i;)n=t(n,this.next(),e,this),e+=1;return n},lazyMap:function(t){return this._lazyMap=t,this},lazyFilter:function(t){if(Object.defineProperty(this,"next",{writable:!0}),"function"!=typeof t)this.next=this._next;else{"function"!=typeof this._next&&(this._next=this.next);var n=this._next.bind(this);this.next=function(){for(var e;e=n();)if(t(e))return e;return e}.bind(this)}return Object.defineProperty(this,"next",{writable:!1}),this}},power=function(t,n){var e=1<<t.length,i=function(){return e},r=Object.create(t.slice(),{length:{get:i}});return hideProperty(r,"index"),addProperties(r,{valueOf:i,init:function(){r.index=0},nth:function(t){if(!(t>=e)){for(var n=0,i=[];t;t>>>=1,n++)1&t&&i.push(this[n]);return"function"==typeof r._lazyMap?r._lazyMap(i):i}},next:function(){return this.nth(this.index++)}}),addProperties(r,common),r.init(),"function"==typeof n?r.map(n):r},nextIndex=function(t){var n=t&-t,e=t+n;return e|((e&-e)/n>>1)-1},combination=function(t,n,e){if(n||(n=t.length),n<1)throw new RangeError;if(n>t.length)throw new RangeError;var i=(1<<n)-1,r=C(t.length,n),o=1<<t.length,a=function(){return r},f=Object.create(t.slice(),{length:{get:a}});return hideProperty(f,"index"),addProperties(f,{valueOf:a,init:function(){this.index=i},next:function(){if(!(this.index>=o)){for(var t=0,n=this.index,e=[];n;n>>>=1,t++)1&n&&(e[e.length]=this[t]);return this.index=nextIndex(this.index),"function"==typeof f._lazyMap?f._lazyMap(e):e}}}),addProperties(f,common),f.init(),"function"==typeof e?f.map(e):f},bigNextIndex=function(t,n){var e=t,i=n,r=0;for(r=e.length-1;r>=0&&1==e[r];r--)i--;if(0==i){e[e.length]=1;for(var o=e.length-2;o>=0;o--)e[o]=o<n-1?1:0}else{var a=-1,f=-1;for(r=0;r<e.length;r++)if(0==e[r]&&-1!=a&&(f=r),1==e[r]&&(a=r),-1!=f&&-1!=a){e[f]=1,e[a]=0;break}i=n;for(r=e.length-1;r>=a;r--)1==e[r]&&i--;for(r=0;r<a;r++)e[r]=r<i?1:0}return e},buildFirst=function(t){for(var n=[],e=0;e<t;e++)n[e]=1;return n[0]=1,n},bigCombination=function(t,n,e){if(n||(n=t.length),n<1)throw new RangeError;if(n>t.length)throw new RangeError;var i=buildFirst(n),r=C(t.length,n),o=t.length,a=function(){return r},f=Object.create(t.slice(),{length:{get:a}});return hideProperty(f,"index"),addProperties(f,{valueOf:a,init:function(){this.index=i.concat()},next:function(){if(!(this.index.length>o)){for(var t=0,e=this.index,i=[],r=0;r<e.length;r++,t++)e[r]&&(i[i.length]=this[t]);return bigNextIndex(this.index,n),"function"==typeof f._lazyMap?f._lazyMap(i):i}}}),addProperties(f,common),f.init(),"function"==typeof e?f.map(e):f},_permutation=function(t){var n=t.slice(),e=factorial(n.length);return n.index=0,n.next=function(){if(!(this.index>=e)){for(var t=this.slice(),i=factoradic(this.index,this.length),r=[],o=this.length-1;o>=0;--o)r.push(t.splice(i[o],1)[0]);return this.index++,"function"==typeof n._lazyMap?n._lazyMap(r):r}},n},permutation=function(t,n,e){if(n||(n=t.length),n<1)throw new RangeError;if(n>t.length)throw new RangeError;var i=P(t.length,n),r=Object.create(t.slice(),{length:{get:function(){return i}}});return hideProperty(r,"cmb"),hideProperty(r,"per"),addProperties(r,{valueOf:function(){return i},init:function(){t.length<31?this.cmb=combination(t,n):this.cmb=bigCombination(t,n),this.per=_permutation(this.cmb.next())},next:function(){var t=this.per.next();if(!t){var n=this.cmb.next();if(!n)return;return this.per=_permutation(n),this.next()}return"function"==typeof r._lazyMap?r._lazyMap(t):t}}),addProperties(r,common),r.init(),"function"==typeof e?r.map(e):r},PC=function(t){for(var n=0,e=1;e<=t;e++){n+=P(t,e)}return n},permutationCombination=function(t,n){var e=PC(t.length),i=Object.create(t.slice(),{length:{get:function(){return e}}});return hideProperty(i,"cmb"),hideProperty(i,"per"),hideProperty(i,"nelem"),addProperties(i,{valueOf:function(){return e},init:function(){this.nelem=1,this.cmb=combination(t,this.nelem),this.per=_permutation(this.cmb.next())},next:function(){var n=this.per.next();if(!n){var e=this.cmb.next();if(!e){if(this.nelem++,this.nelem>t.length)return;if(this.cmb=combination(t,this.nelem),!(e=this.cmb.next()))return}return this.per=_permutation(e),this.next()}return"function"==typeof i._lazyMap?i._lazyMap(n):n}}),addProperties(i,common),i.init(),"function"==typeof n?i.map(n):i},arraySlice=Array.prototype.slice,cartesianProduct=function(){if(!arguments.length)throw new RangeError;var t=arraySlice.call(arguments),n=t.reduce(function(t,n){return t*n.length},1),e=function(){return n},i=t.length,r=Object.create(t,{length:{get:e}});if(!n)throw new RangeError;return hideProperty(r,"index"),addProperties(r,{valueOf:e,dim:i,init:function(){this.index=0},get:function(){if(arguments.length===this.length){for(var t=[],n=0;n<i;n++){var e=arguments[n];if(e>=this[n].length)return;t.push(this[n][e])}return"function"==typeof r._lazyMap?r._lazyMap(t):t}},nth:function(t){for(var n=[],e=0;e<i;e++){var o=this[e].length,a=t%o;n.push(this[e][a]),t-=a,t/=o}return"function"==typeof r._lazyMap?r._lazyMap(n):n},next:function(){if(!(this.index>=n)){var t=this.nth(this.index);return this.index++,t}}}),addProperties(r,common),r.init(),r},baseN=function(t,n,e){if(n||(n=t.length),n<1)throw new RangeError;var i=t.length,r=Math.pow(i,n),o=function(){return r},a=Object.create(t.slice(),{length:{get:o}});return hideProperty(a,"index"),addProperties(a,{valueOf:o,init:function(){a.index=0},nth:function(e){if(!(e>=r)){for(var o=[],f=0;f<n;f++){var h=e%i;o.push(t[h]),e-=h,e/=i}return"function"==typeof a._lazyMap?a._lazyMap(o):o}},next:function(){return this.nth(this.index++)}}),addProperties(a,common),a.init(),"function"==typeof e?a.map(e):a},Combinatorics=Object.create(null);return addProperties(Combinatorics,{C:C,P:P,factorial:factorial,factoradic:factoradic,cartesianProduct:cartesianProduct,combination:combination,bigCombination:bigCombination,permutation:permutation,permutationCombination:permutationCombination,power:power,baseN:baseN,VERSION:version}),Combinatorics});