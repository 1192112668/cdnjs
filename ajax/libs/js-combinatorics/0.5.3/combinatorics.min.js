!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():t.Combinatorics=n()}(this,function(){"use strict";function o(t,n){for(var e=1;n--;)e*=t--;return e}function u(t,n){return t<n?0:o(t,n)/o(n,n)}function f(t){return o(t,t)}function h(t,n){var e=1;if(n)e=f(n);else{for(n=1;e<t;e*=++n);t<e&&(e/=n--)}for(var i=[0];n;e/=n--)i[n]=Math.floor(t/e),t%=e;return i}function a(n,e){Object.keys(e).forEach(function(t){Object.defineProperty(n,t,{value:e[t],configurable:"next"==t})})}function c(t,n){Object.defineProperty(t,n,{writable:!0})}function t(t){var n,e=[];for(this.init();n=this.next();)e.push(t?t(n):n);return this.init(),e}function s(t,n,e){if((n=n||t.length)<1)throw new RangeError;if(n>t.length)throw new RangeError;function i(){return o}var r=(1<<n)-1,o=u(t.length,n),f=1<<t.length,h=Object.create(t.slice(),{length:{get:i}});return c(h,"index"),a(h,{valueOf:i,init:function(){this.index=r},next:function(){if(!(this.index>=f)){for(var t,n,e,i=0,r=this.index,o=[];r;r>>>=1,i++)1&r&&(o[o.length]=this[i]);return this.index=(t=this.index,(e=t+(n=t&-t))|((e&-e)/n>>1)-1),"function"==typeof h._lazyMap?h._lazyMap(o):o}}}),a(h,g),h.init(),"function"==typeof e?h.map(e):h}function l(t,r,n){if((r=r||t.length)<1)throw new RangeError;if(r>t.length)throw new RangeError;function e(){return o}var i=function(t){for(var n=[],e=0;e<t;e++)n[e]=1;return n[0]=1,n}(r),o=u(t.length,r),f=t.length,h=Object.create(t.slice(),{length:{get:e}});return c(h,"index"),a(h,{valueOf:e,init:function(){this.index=i.concat()},next:function(){if(!(this.index.length>f)){for(var t=0,n=this.index,e=[],i=0;i<n.length;i++,t++)n[i]&&(e[e.length]=this[t]);return function(t,n){var e=t,i=n,r=0;for(r=e.length-1;0<=r&&1==e[r];r--)i--;if(0==i){e[e.length]=1;for(var o=e.length-2;0<=o;o--)e[o]=o<n-1?1:0}else{for(var f=-1,h=-1,r=0;r<e.length;r++)if(0==e[r]&&-1!=f&&(h=r),1==e[r]&&(f=r),-1!=h&&-1!=f){e[h]=1,e[f]=0;break}i=n;for(r=e.length-1;f<=r;r--)1==e[r]&&i--;for(r=0;r<f;r++)e[r]=r<i?1:0}}(this.index,r),"function"==typeof h._lazyMap?h._lazyMap(e):e}}}),a(h,g),h.init(),"function"==typeof n?h.map(n):h}function p(t){var r=t.slice(),o=f(r.length);return r.index=0,r.next=function(){if(!(this.index>=o)){for(var t=this.slice(),n=h(this.index,this.length),e=[],i=this.length-1;0<=i;--i)e.push(t.splice(n[i],1)[0]);return this.index++,"function"==typeof r._lazyMap?r._lazyMap(e):e}},r}var g={toArray:t,map:t,forEach:function(t){var n;for(this.init();n=this.next();)t(n);this.init()},filter:function(t){var n,e=[];for(this.init();n=this.next();)t(n)&&e.push(n);return this.init(),e},find:function(t){var n,e;for(this.init();n=this.next();)if(t(n)){e=n;break}return this.init(),e},lazyMap:function(t){return this._lazyMap=t,this},lazyFilter:function(n){var e;return Object.defineProperty(this,"next",{writable:!0}),"function"!=typeof n?this.next=this._next:("function"!=typeof this._next&&(this._next=this.next),e=this._next.bind(this),this.next=function(){for(var t;t=e();)if(n(t))return t;return t}.bind(this)),Object.defineProperty(this,"next",{writable:!1}),this}},i=Array.prototype.slice,n=Object.create(null);return a(n,{C:u,P:o,factorial:f,factoradic:h,cartesianProduct:function(){if(!arguments.length)throw new RangeError;function t(){return e}var n=i.call(arguments),e=n.reduce(function(t,n){return t*n.length},1),o=n.length,f=Object.create(n,{length:{get:t}});if(!e)throw new RangeError;return c(f,"index"),a(f,{valueOf:t,dim:o,init:function(){this.index=0},get:function(){if(arguments.length===this.length){for(var t=[],n=0;n<o;n++){var e=arguments[n];if(e>=this[n].length)return;t.push(this[n][e])}return"function"==typeof f._lazyMap?f._lazyMap(t):t}},nth:function(t){for(var n=[],e=0;e<o;e++){var i=this[e].length,r=t%i;n.push(this[e][r]),t-=r,t/=i}return"function"==typeof f._lazyMap?f._lazyMap(n):n},next:function(){if(!(this.index>=e)){var t=this.nth(this.index);return this.index++,t}}}),a(f,g),f.init(),f},combination:s,bigCombination:l,permutation:function(t,n,e){if((n=n||t.length)<1)throw new RangeError;if(n>t.length)throw new RangeError;var i=o(t.length,n),r=Object.create(t.slice(),{length:{get:function(){return i}}});return c(r,"cmb"),c(r,"per"),a(r,{valueOf:function(){return i},init:function(){t.length<31?this.cmb=s(t,n):this.cmb=l(t,n),this.per=p(this.cmb.next())},next:function(){var t=this.per.next();if(t)return"function"==typeof r._lazyMap?r._lazyMap(t):t;var n=this.cmb.next();return n?(this.per=p(n),this.next()):void 0}}),a(r,g),r.init(),"function"==typeof e?r.map(e):r},permutationCombination:function(e,t){var n=function(t){for(var n=0,e=1;e<=t;e++){n+=o(t,e)}return n}(e.length),i=Object.create(e.slice(),{length:{get:function(){return n}}});return c(i,"cmb"),c(i,"per"),c(i,"nelem"),a(i,{valueOf:function(){return n},init:function(){this.nelem=1,this.cmb=s(e,this.nelem),this.per=p(this.cmb.next())},next:function(){var t=this.per.next();if(t)return"function"==typeof i._lazyMap?i._lazyMap(t):t;var n=this.cmb.next();if(!n){if(this.nelem++,this.nelem>e.length)return;if(this.cmb=s(e,this.nelem),!(n=this.cmb.next()))return}return this.per=p(n),this.next()}}),a(i,g),i.init(),"function"==typeof t?i.map(t):i},power:function(t,n){function e(){return i}var i=1<<t.length,r=Object.create(t.slice(),{length:{get:e}});return c(r,"index"),a(r,{valueOf:e,init:function(){r.index=0},nth:function(t){if(!(i<=t)){for(var n=0,e=[];t;t>>>=1,n++)1&t&&e.push(this[n]);return"function"==typeof r._lazyMap?r._lazyMap(e):e}},next:function(){return this.nth(this.index++)}}),a(r,g),r.init(),"function"==typeof n?r.map(n):r},baseN:function(r,o,t){if((o=o||r.length)<1)throw new RangeError;function n(){return h}var f=r.length,h=Math.pow(f,o),u=Object.create(r.slice(),{length:{get:n}});return c(u,"index"),a(u,{valueOf:n,init:function(){u.index=0},nth:function(t){if(!(h<=t)){for(var n=[],e=0;e<o;e++){var i=t%f;n.push(r[i]),t-=i,t/=f}return"function"==typeof u._lazyMap?u._lazyMap(n):n}},next:function(){return this.nth(this.index++)}}),a(u,g),u.init(),"function"==typeof t?u.map(t):u},VERSION:"0.5.3"}),n});